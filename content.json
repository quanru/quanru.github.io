{"posts":[{"title":"16å®«æ ¼æ‹–æ‹½","text":"å®ç°ä¸€ä¸ªå¦‚å›¾æ‰€ç¤ºçš„16å®«æ ¼é¡µé¢ï¼Œå…¶ä¸­å„ä¸ªæ•°å­—ç›’å­ä¹‹é—´æ˜¯èƒ½ç›¸äº’æ‹–æ‹½ï¼Œå¹¶äº¤æ¢ä½ç½®çš„ã€‚è€Œæ¨ªçºµå„è‡ªçš„æ ‡é¢˜æ ABCä¸XYZå®ç°çš„åŠŸèƒ½åˆ™æ˜¯ï¼ŒABCï¼ˆXYZï¼‰ä¹‹é—´ä¸¤ä¸¤äº’æ¢ä½ç½®ï¼Œä»è€Œå¼•èµ·ä¸¤åˆ—ï¼ˆè¡Œï¼‰ä¸€èµ·è°ƒæ¢ä½ç½®ã€‚ 16å®«æ ¼æ‹–æ‹½å®ç°ä¸€ä¸ªå¦‚å›¾æ‰€ç¤ºçš„16å®«æ ¼é¡µé¢ï¼Œå…¶ä¸­å„ä¸ªæ•°å­—ç›’å­ä¹‹é—´æ˜¯èƒ½ç›¸äº’æ‹–æ‹½ï¼Œå¹¶äº¤æ¢ä½ç½®çš„ã€‚è€Œæ¨ªçºµå„è‡ªçš„æ ‡é¢˜æ ABCä¸XYZå®ç°çš„åŠŸèƒ½åˆ™æ˜¯ï¼ŒABCï¼ˆXYZï¼‰ä¹‹é—´ä¸¤ä¸¤äº’æ¢ä½ç½®ï¼Œä»è€Œå¼•èµ·ä¸¤åˆ—ï¼ˆè¡Œï¼‰ä¸€èµ·è°ƒæ¢ä½ç½®ã€‚ å¤–è§‚å¤„ç† è®¾ç½®å¤–å±‚å®¹å™¨ä¸å†…éƒ¨æ–¹å—å®½åº¦ï¼Œå¹¶å‘å·¦æµ®åŠ¨ï¼Œä»è€Œæ„æˆ16å®«æ ¼; æ¯ä¸ªç›’å­çš„ä½ç½®ä»¥åæ ‡(x,y)æ¥è¡¨ç¤ºï¼Œå…¶ä¸­0&lt;x,y&lt;4; 1234567891011121314151617#container { position: relative; width: 400px; height: 400px; background: #eee;}.box { float: left; width: 70px; height: 70px; margin: 5px; font-weight: bold; line-height: 70px; text-align: center; border: 10px solid red; border-radius: 10px;} ç”±äºæ‹–æ‹½ä½¿ç”¨çš„æ˜¯ç»å¯¹å®šä½ï¼Œå› æ­¤é¦–å…ˆè·å–å½“å‰å„ä¸ªç›’å­çš„åç§»é‡ï¼Œç„¶åå°†ç›’å­çš„positionå±æ€§è®¾ä¸ºabsoluteï¼Œä½¿ç”¨å¯¹åº”çš„åç§»é‡è®¾ç½®topä¸leftã€‚ 12345678910function absoluteThem(e) { $($(&quot;.box&quot;).toArray().reverse()).each(function(index, el) { $(this).css({ &quot;left&quot;: $(this).position().left, &quot;top&quot;: $(this).position().top, &quot;float&quot;: &quot;none&quot;, &quot;position&quot;: &quot;absolute&quot; }); });} æ‹–æ‹½å¤„ç†æ³¨æ„ç›’å­è¶Šç•Œæ£€æŸ¥ä»¥åŠæ ‡é¢˜æ çš„å­—æ¯åªèƒ½æ¨ªå‘æˆ–çºµå‘ç§»åŠ¨ï¼Œå¹¶ä¿å­˜è¢«æ‹–æ‹½ç›’å­çš„åæ ‡ 12345678910111213141516171819202122232425262728293031323334353637function clickNum(e) {//ç‚¹å‡»æ•°å­— var targetEle = e.target, targetEleJQ = $(targetEle), oriX = e.clientX - targetEle.offsetLeft, //å…‰æ ‡æŒ‰ä¸‹æ—¶ç›¸å¯¹æœ¬èº«çš„åæ ‡ oriY = e.clientY - targetEle.offsetTop; if (targetEleJQ.hasClass(&quot;undraggable&quot;)) { return; } $(document).bind(&quot;mousemove&quot;, moveIt); $(document).bind(&quot;mouseup&quot;, mouseUp); function moveIt(e2) {//ç§»åŠ¨ var newX = e2.clientX - oriX, newY = e2.clientY - oriY, maxX = 400 - targetEle.offsetWidth - 10, maxY = 400 - targetEle.offsetHeight - 10; if (newX &lt; 100) { newX = 100; } else if (newX &gt; maxX) { newX = maxX; } if (newY &lt; 100) { newY = 100; } else if (newY &gt; maxY) { newY = maxY; } if(targetEleJQ.hasClass(&quot;num&quot;)){//å¦‚æœæ˜¯æ•°å­— targetEle.style.left = newX + &quot;px&quot;; targetEle.style.top = newY + &quot;px&quot;; } else if(targetEleJQ.hasClass(&quot;group1&quot;)){//å¦‚æœæ˜¯ABCæ  targetEle.style.left = newX + &quot;px&quot;; } else if(targetEleJQ.hasClass(&quot;group2&quot;)){//å¦‚æœæ˜¯XYZæ  targetEle.style.top = newY + &quot;px&quot;; } } æ”¾ä¸‹ç›’å­é‡Šæ”¾é¼ æ ‡å¤„çš„ç›’å­åæ ‡ï¼šå°†é¼ æ ‡å½“å‰ä½ç½®clientXä¸clientYåˆ†åˆ«å¯¹100æ±‚ä½™ï¼Œå¹¶å‘ä¸‹å–æ•´ï¼Œå³å¯å¾—åˆ°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445function mouseUp(e3) { var boxLocX = Math.floor(e3.clientY/100),//æ”¾ä¸‹å…‰æ ‡æ—¶ï¼Œæ‰€åœ¨çš„æ–¹æ ¼åæ ‡ boxLocY = Math.floor(e3.clientX/100), oriBoxLocX = parseInt(targetEle.id.substr(4,1)),//åŸæ¥çš„æ–¹æ ¼åæ ‡ oriBoxLocY = parseInt(targetEle.id.substr(6,1)), boxNow = &quot;box-&quot; + boxLocX + &quot;-&quot; + boxLocY,//æ”¾ä¸‹å¤„çš„ç›’å­id boxOri = &quot;box-&quot; + oriBoxLocX + &quot;-&quot; + oriBoxLocY; if(targetEleJQ.hasClass(&quot;group1&quot;)) { if(!$(&quot;#&quot; + boxNow).hasClass(&quot;letter&quot;) || $(&quot;#&quot; + boxNow).hasClass(&quot;group2&quot;)){//ç‚¹å‡»çš„æ˜¯å­—æ¯è€Œé‡Šæ”¾çš„æ˜¯éå­—æ¯ resetLoc(boxOri); return; } changeLoc(boxNow, boxOri); for(var i = 1; i &lt; 4; i++){ boxLocX ++; oriBoxLocX ++; boxNow = &quot;box-&quot; + boxLocX + &quot;-&quot; + boxLocY;//æ”¾ä¸‹å¤„çš„ç›’å­id boxOri = &quot;box-&quot; + oriBoxLocX + &quot;-&quot; + oriBoxLocY; changeLoc(boxNow, boxOri); } } else if (targetEleJQ.hasClass(&quot;group2&quot;)) { if(!$(&quot;#&quot; + boxNow).hasClass(&quot;letter&quot;) || $(&quot;#&quot; + boxNow).hasClass(&quot;group1&quot;)){//ç‚¹å‡»çš„æ˜¯å­—æ¯è€Œé‡Šæ”¾çš„æ˜¯éå­—æ¯ resetLoc(boxOri); return; } changeLoc(boxNow, boxOri); for(var j = 1; j &lt; 4; j++){ boxLocY ++; oriBoxLocY ++; boxNow = &quot;box-&quot; + boxLocX + &quot;-&quot; + boxLocY;//æ”¾ä¸‹å¤„çš„ç›’å­id boxOri = &quot;box-&quot; + oriBoxLocX + &quot;-&quot; + oriBoxLocY; changeLoc(boxNow, boxOri); } } else{ if(!$(&quot;#&quot; + boxNow).hasClass(&quot;num&quot;)){ resetLoc(boxOri); return; } changeLoc(boxNow, boxOri); } $(document).unbind(&quot;mousemove&quot;, moveIt); $(document).unbind(&quot;mouseup&quot;, mouseUp); å®Œæ•´ä»£ç ","link":"/2015/06/16/16%E5%AE%AB%E6%A0%BC%E6%8B%96%E6%8B%BD/"},{"title":"Building my second brain ğŸ§  with Obsidian","text":"This article will take Obsidian as an example to share my practice of using Obsidian to build a second brain! The content of this article is out of date. Please refer to the official website LifeOS for more information. This article is also available in ç®€ä½“ä¸­æ–‡. PrefaceWhat is Obsidian? Here is how it introduces itself on the official website: Obsidian is the private and flexible noteâ€‘taking app that adapts to the way you think. What I especially appreciate is its rich plugin ecosystem. If you like Vscode, then you will probably like Obsidian as well. The only difference is that Vscode is for writing code, and Obsidian is for taking notes. First Brain VS Second BrainThe first brain is our actual brain. It never stops working as long as we are alive. It performs tasks such as knowledge management, task management, and goal management. Most of the time, we cannot multitask, thus the first brain acts more like a CPU, with various tasks competing for CPU cycles. When there are too many tasks to handle, the brain becomes overwhelmed. It has to deal with current tasks while keeping the context of other tasks to switch between them, so we cannot focus on executing the current task. This is when an external system is needed to assist the first brain, which is the second brain. The second brain is an external system. If we compare the first brain to a CPU, then the second brain is more like a storage system. It acts as a buffer between the first brain and the real world, reducing the load on the first brain so it can focus on the current matter. It can be compared to memory and hard disks, but memory is more frequent in communication with the CPU (the first brain) and has a faster read speed. This storage system stores things that the first brain doesnâ€™t need to focus on all the time. Of course, itâ€™s up to the first brain to decide whether these things need to be stored. The content could be notes, to-dos, processes, and the medium could be text, images, videos. For example, when we use the second brain for task management, important and urgent items are stored in memory, while unimportant and non-urgent items are stored on the hard disk; this weekâ€™s tasks are in memory, while this monthâ€™s tasks might be on the hard disk. Therefore, by utilizing the second brain, we can focus on the present without any pressure and switch contexts when necessary. This article will use Obsidian as an example to share my practice in building a second brain! You may call it a second brain, but looking at it from different angles, I could also refer to it as â€œLifeOS,â€ because I record everything concerning life and work upon it. Additionally, it could be termed a â€œprogrammable personal productivity system.â€ I have written considerable code on it to do some querying and automation, and it is also the productivity system that I use to manage tasks and goals. It could even be likened to a â€œMonorepo project,â€ where every folder represents a project, and the README.md within the project is like the Package.json, describing the metadata of the current project. ğŸ“¢ Attention: This system is not a top-down one with pre-established processes to implement. It gradually formed as I used Obsidian and is still evolving. Letâ€™s tentatively call the current version 1.0. The purpose of sharing it now is to inspire others to improve their systems! I have already written an Obsidian Periodic PARA plugin to support this system! With this plugin, you donâ€™t need any programming background. You can easily create periodic and PARA notes by simple visual clicks! My PracticeI adopt two systems: one for knowledge management and another for periodic notes. The former manages knowledge with dimensions like project/area/resource, and the latter manages tasks/goals/time with time as the dimension. Core Systems Knowledge management: Using the PARA system Projects -&gt; Projects are a series of tasks related to a goal with a deadline. Areas -&gt; Areas are activity domains that need to maintain certain standards over time. Resources -&gt; Resources are topics or subjects of ongoing interest. Archives -&gt; Archives are inactive items from the above three categories. Periodic notes Long-term: Top-down, focusing on long-term goals. Three-year Review Annual Review Quarterly Review Short-term: Bottom-up, focusing on short-term tasks. Monthly Review Weekly Review Daily: Capturing thoughts and insights, achieving self-awareness; time consumption statistics, focusing on projects. Daily Note The closer to Projects the PARA component, the more actionable it is; the more long-term the periodic note, the less predictable it is; These two systems effectively create two contexts that keep me focused: One based on time (periodic notes), i.e., when I reach a certain time node, I work based on the corresponding periodic notes, and the notes have enough context; The other based on the topic (PARA), i.e., when I want to research a topic, I work based on the index of the corresponding topic (README.md), and the notes have already collected a lot of context; Aspect-oriented Subsystem Aspect-oriented programming - Wikiwand Beneath the two systems mentioned above, thereâ€™s a hidden subsystem for managing tasks/goals/time, primarily through â€œperiodic notesâ€: Task management Collecting via daily/weekly notes. Organizing via weekly/monthly reviews. Goal management Planning annual goals with the annual review. Splitting annual goals with the quarterly review. Breaking down pending items with the monthly review. Top-down sorting (through goal decomposition). Bottom-up sorting (through collection decomposition -&gt; daily/weekly notes). Time management Manually tracking the time spent on various projects in the and its proportions, adjusting time investment. Using scripts in daily, weekly, monthly, quarterly, and annual reviews to automatically track the time spent on various projects and their proportions, reviewing time investment. You might be curious that the above subsystem seems to only use â€œperiodic notes.â€ In fact, the two main systems are connected through two methods. Connection How systems are associated Tag Connection Treat the first-level folders under PARA as special tags (they donâ€™t need to be exactly the same as the folder names), use them in â€œperiodic notes,â€ then you can index uniformly in each PARA folder in the same way. This ensures that the README.md index in each PARA folder has all the context for the current topic: Project ConnectionGenerate a project in â€œknowledge management,â€ to enhance focus on the project, thereâ€™s a â€œmain event listâ€ or â€œproject listâ€ in every class of â€œperiodic notes,â€ such as: The â€œproject listâ€ in the daily note is a snapshot of the current project list, used for calculating the time spent that day on various projects and their proportions, ensuring enough time is spent on projects. The â€œpriority first dimensionâ€ in the weekly and monthly reviews automatically merge and deduplicate from the daily reviews of the week or month, used for arranging project dimension tasks and subsequent reviews. The â€œpriority first dimensionâ€ in the quarterly review is a snapshot of the current domain list, used for arranging main event dimension goals and subsequent reviews. The â€œpriority first dimensionâ€ in the annual review, automatically merged and deduplicated from the quarterâ€™s priority first dimension, used for setting domain dimension goals and subsequent reviews. Search Tags For example, the holiday, vacation tags in the daily note. Index files For example, the README.md index of each projectâ€™s tasks, notes, and context. Folders For example, using a consistent directory structure for each PARA category. Review The review focuses on the projects of the current period while planning the tasks for the next period. Weekly reviews reflect on the weekâ€™s daily notes, monthly reviews on each weekâ€™s reviews, and quarterly reviews on each monthâ€™s reviews. Quick StartDownload Click here to download Open with obsidian and enjoy Creating Notes Quickly create daily, weekly, monthly, seasonal, and annual notes through the note creation module in the upper left corner. Quickly create PARA notes, i.e., projects, areas, resources, archives through the note creation module in the upper left corner. â€œDaily Noteâ€ and â€œProject READMEâ€ Used for daily management, including project lists, daily records, habit tracking, energy allocation, todayâ€™s accomplishments, etc. The â€œproject listâ€ in the daily note is a snapshot of the current projects (i.e., under the Projects directory). â€œWeekly Reviewâ€ and â€œMonthly Reviewâ€ Used for arranging weekly and monthly tasks, including task and review modules. In the weekly and monthly reviews, the â€œpriority first dimensionâ€ are a collection of snapshots of the project lists from daily notes of the period (generated automatically). The â€œreviewsâ€ in the weekly and monthly notes mainly focus on the projects of the period. â€œQuarterly Reviewâ€ and â€œAnnual Reviewâ€ Used for setting quarterly and annual goals, including goals and review modules. In the quarterly review, the â€œpriority first dimensionâ€ is a snapshot of the current domain (i.e., under the Areas directory). In the annual review, the â€œpriority first dimensionâ€ is a collection of snapshots from the priority first dimension of the periodâ€™s quarterly reviews (generated automatically). The â€œreviewsâ€ in the quarterly and annual notes mainly focus on the domains of the period. â€œPARA Indexâ€ and â€œTask Indexâ€ â€œCaptureâ€ and â€œExpressâ€First, letâ€™s introduce a concept, the CODE model, where: C is for Capture: Collecting resonant information. O is for Organize: Sorting the collected information, i.e., PARA. D is for Distill: Extracting the essence of the content, selecting the most useful information. E is for Express: Sharing with others, applying your knowledge in practice. Those familiar with PARA will see that this model is actually proposed by Tiago Forte in â€œBuilding a Second Brain,â€ and itâ€™s the higher-level model that includes the PARA organization method, with O indicating the PARA organization method. My practice is to temporarily store some marked articles in the â€œCaptureâ€ directory while using the â€œ-1. Capture/README.mdâ€ file to index the notes tagged with #PARA/Capture scattered in the daily notes. This makes it convenient for me during specific time nodes, such as weekends, month-ends, and quarter-ends, to review and sort, first organizing marked articles into each PARA topical directory, then transferring some inspirational notes from the daily notes into some explicit to-dos; Next, letâ€™s talk about â€œExpress.â€ I place my blog in the express section and also record some fragmentary notes in the daily note tagged with PARA/Express. These are outputs after internalization. If this output needs to be further posted on a specific social platform, such as Zhihu or Xiaohongshu, I will conveniently record it as a task. When I review the tasks indexed in the â€œ5. Express/README.mdâ€ file and find pending ones, just complete them one by one. Small Tips in PracticeBuffer Zone MechanismPlace less important and non-urgent items swiftly into a buffer zone (Inbox) by creating tasks, keeping the main focus on â€œProjects.â€ Task ListsRecording tasks shouldnâ€™t be a mental burden â€“ writing them down doesnâ€™t mean they must be done. Having them written relieves your mind from having to continuously remember or fear forgetting them. Iâ€™ve recorded many tasks, many of which, upon reassessment, were indeed not completed. Itâ€™s important to have mechanisms in place that allow for review of recorded tasks, for example: Using a tasks plugin to create query views for task lists Each periodic note contains a collected tasks list for the current period Project index files contain a tasks list Task RemindersI consider there to be three types of task reminders: Strong reminders, such as snapping up Moutai liquor or concert tickets, which need an alarm to remind you when itâ€™s time Soft reminders, for things that need to be done on a certain day, like credit card repayments or loan repayments, which can be set up through GTD software for reminders List-style, for recording tasks which will be arranged later; based on the need, these can be converted to strong or soft reminders, akin to the inbox in GTD systems Micro-Habits I list micro-habits in my journal, and remember, they are not tasks. Itâ€™s okay whether they are completed or not; they mainly serve as a reminder, â€œDo you consider practicing these micro-habits today?â€ These act as prompts when I have the â€œcapabilityâ€ and â€œmotivation.â€ For example: Micro-Habits Get up and drink water as soon as the alarm goes off Put on headphones and listen to the Little Universe podcast right after getting off the vehicle Open WeChat Read as soon as I get on the subway Write down three to-dos as soon as I reach my workstation Start serious work as soon as itâ€™s 10:30 am Easy to RefactorWithin each periodic note, the same feature modules use the same statement, such as â€œtasks collected this period,â€ all inserted through the following query statement. The â€œthis periodâ€ variable is provided by the current file name, which makes it very convenient to refactor all periodic files en masse, needing only to perform a batch replacement: 123```PeriodicPARA TaskRecordListByTime``` Efficient Use of ShortcutsSet consistent global shortcuts, so that no matter in which software, you can invoke the same function with the same shortcut. Here are some of my configurations: Cursor movement Pattern: Control + directional initial/VIM direction Examples: A: Head of line E: End of line F/L: Forward B/H: Backward N/J: Next line P/K: Previous line W: Delete a word (Backward) D: Delete a character (Forward) Window management Pattern: Command + Option + initial Examples: L: Left half of the screen R: Right half of the screen C: Center M: Maximize [: Show/Hide left sidebar ]: Show/Hide right sidebar â€˜: Show/Hide bottom bar T: New Tab (for more specific windows, the top level uses Command + T) W: Close Tab (for more specific windows, the top level uses Command + W) J: Next Tab K: Previous Tab Document editing Pattern 1: Command + Option + number/symbol Examples: 1: Markdown level-one heading 2: Markdown level-two heading 3: Markdown level-three heading 4: Markdown level-four heading 5: Markdown level-five heading 6: Markdown level-six heading Bulleted list: ~ Strikethrough: - Function category Pattern: Control + initial Examples: C: Copy link (Obsidian block link, Arc browser link, VScode git link) D: Download I: Add to inbox K: Quick Search","link":"/2023/07/08/Building%20my%20second%20brain%20%F0%9F%A7%A0%20with%20Obsidian/"},{"title":"Chrome è°œä¸€æ ·å¡æ­»çš„æ’æŸ¥æ–¹æ³•","text":"é‡åˆ°è«åå¡æ­»é—®é¢˜ï¼Œå¦‚ä½•æ­£ç¡®åœ°æ’æŸ¥ æœ€è¿‘ç”±äº Chrome æµè§ˆå™¨å‡çº§ï¼Œè§¦å‘äº†ä¸€ä¸ªåŸ‹ç‚¹ SDK çš„æ½œåœ¨é—®é¢˜ï¼Œç›®å‰åŸ‹ç‚¹ SDK æ–¹é¢å·²ç»è·Ÿè¿›è§£å†³ï¼Œè¯¦ç»†åŸå› å¯è§æ–‡ç« ã€ŠChrome 83 ä¸‹åƒå¸†å·¥ä½œå°å¡æ­»çš„é—®é¢˜ã€‹ã€‚ ä¸€åˆ‡å¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯é™†ç»­æœ‰å›¢é˜ŸåŒå­¦åé¦ˆï¼Œçº¿ä¸Šé¡µé¢çš„ç¡®ä¸å¡äº†ï¼Œæµ‹è¯•ç¯å¢ƒæŸäº›æ“ä½œä»ç„¶ä¼šå‡ºç°å¡æ­»ï¼Œè€Œä¸”å¡æ­»æ—¶æ­£å¥½ä¼šæœ‰ golden æˆ– omega åŸ‹ç‚¹å¤„äº pending çŠ¶æ€ã€‚äºæ˜¯å¼€å§‹äº†æ’æŸ¥ä¹‹è·¯~ ä¸€ã€çº¿ç´¢æ’æŸ¥æŸ¥çœ‹ pending çŠ¶æ€çš„è¯·æ±‚ï¼š å‘ç°è¯·æ±‚å¡åœ¨äº†ä¸€ä¸ª â€œStalledâ€ çš„çŠ¶æ€ï¼Œè°·æ­Œè¿˜è´´å¿ƒçš„ç»™å‡ºäº† â€œExplanationâ€ é“¾æ¥ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š Hereâ€™s more information about each of the phases you may see in the Timing tab: Queueing . The browser queues requests when: There are higher priority requests. There are already six TCP connections open for this origin, which is the limit. Applies to HTTP/1.0 and HTTP/1.1 only. The browser is briefly allocating space in the disk cache Stalled. The request could be stalled for any of the reasons described in Queueing. DNS Lookup. The browser is resolving the requestâ€™s IP address. Initial connection. The browser is establishing a connection, including TCP handshakes/retries and negotiating an SSL. Proxy negotiation. The browser is negotiating the request with a proxy server. Request sent. The request is being sent. ServiceWorker Preparation. The browser is starting up the service worker. Request to ServiceWorker. The request is being sent to the service worker. Waiting (TTFB). The browser is waiting for the first byte of a response. TTFB stands for Time To First Byte. This timing includes 1 round trip of latency and the time the server took to prepare the response. Content Download. The browser is receiving the response. Receiving Push. The browser is receiving data for this response via HTTP/2 Server Push. Reading Push. The browser is reading the local data previously received. ä¹Ÿå°±æ˜¯ Queueing é˜¶æ®µçš„é—®é¢˜å¯¼è‡´å¡åœ¨ Stalled çŠ¶æ€ï¼Œç»æŸ¥å¾—çŸ¥å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æŸ¥çœ‹ Chrome çš„è¿è¡Œæ—¥å¿—ï¼Œå½“ç„¶åŒ…æ‹¬è¯¦ç»†çš„ç½‘ç»œæ—¥å¿—ã€‚ å„å¹³å°æŸ¥çœ‹æ—¥å¿—æ–¹å¼è§ https://support.google.com/chrome/a/answer/6271282?hl=zh-Hans ä»¥ç›‘å¬æ—¥å¿—æ–¹å¼æ‰“å¼€æµè§ˆå™¨ /Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --enable-logging --v=1 å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼štail -f ~/Library/Application\\ Support/Google/Chrome/chrome_debug.log äºŒã€æ—¥å¿—æŸ¥çœ‹æŒ‰ä¸Šè¿°æ–¹å¼æ‰“å¼€æµè§ˆå™¨ï¼Œå®æ—¶æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼Œä¸€æ­¥ä¸€æ­¥å¤ç°æ­¥éª¤ï¼Œæ—¥å¿—æ‰“å°å¦‚ä¸‹ï¼š æ‰€ä»¥ç»•äº†ä¸€åœˆè¿˜æ˜¯ â€œResizeObserverâ€ çš„é—®é¢˜ï¼ŒåŸå› åœ¨ Chrome 83 ä¸‹åƒå¸†å·¥ä½œå°å¡æ­»çš„é—®é¢˜ ä¸­ä¹Ÿæœ‰æåˆ°ï¼Œè¿™é‡Œåˆ—ä¸¤ä¸ª issue å¤§å®¶æœ‰å…´è¶£æŸ¥çœ‹ä¸‹ï¼š https://github.com/ElemeFE/element/issues/12866 https://github.com/ElemeFE/element/issues/17642 ä¸‰ã€æ¨æµ‹é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆæµ‹è¯•ç¯å¢ƒæœ‰é—®é¢˜ï¼Œçº¿ä¸Šç¯å¢ƒå´æ²¡æœ‰å‘¢ï¼Ÿç›®å‰è§£å†³ Omega sdk å’Œ Golden sdk é—®é¢˜çš„æ–¹æ³•æ˜¯é€šè¿‡å¦‚ä¸‹æ–¹å¼é‡å†™ EventTarget.prototype.addEventListener æ–¹æ³•ï¼Œè¾¾åˆ°è¿‡æ»¤å‘é€åŸ‹ç‚¹è¯·æ±‚çš„ç›®çš„ï¼ˆä¹Ÿæ­£æ˜¯å¾ªç¯å‘é€åŸ‹ç‚¹è¯·æ±‚ï¼Œå¯¼è‡´é¡µé¢å¡æ­»ï¼‰ã€‚ 123456789101112131415EventTarget.prototype.addEventListenerBase = EventTarget.prototype.addEventListener; EventTarget.prototype.addEventListener = function(type, baseListener, status) { if(type === 'error') { function myListener(e) { // é‡å†™ addEventListenerï¼Œä¸ºäº†è¿‡æ»¤ResizeObserver é”™è¯¯çš„ä¸ŠæŠ¥ã€‚åœ¨ Chrome 83 æ— é™ä¸ŠæŠ¥ä¼šé€ æˆæµè§ˆå™¨å¡æ­» if (e.message &amp;&amp; e.message.indexOf('ResizeObserver') !== -1) { return; } baseListener.apply(this, arguments); } this.addEventListenerBase(type, myListener, status); } else { this.addEventListenerBase(type, baseListener, status); } }; æ‰€ä»¥ï¼Œè¿˜æœ‰é™¤äº† EventTarget.prototype.addEventListener æ–¹æ³•ä¹‹å¤–çš„ç›‘å¬æ²¡æœ‰è¢«é‡å†™ï¼Œæˆ‘ææŒ‡ä¸€ç®—ï¼Œéš¾é“æ˜¯ window.onerrorï¼Œäºæ˜¯å»å½“å‰å¡æ­»é¡µé¢çš„è°ƒè¯•æ§åˆ¶å°æ‰“å° window.onerror: çœŸæœ‰è¿™ä¸ªç›‘å¬ï¼Œè€Œä¸”è¿˜æœ‰ã€å­—ç¬¦ä¸² replace æ“ä½œã€ï¼Œè¿™è¦æ˜¯æ— é™å¾ªç¯è°ƒç”¨è¿™ä¸ªå›è°ƒï¼Œåˆ†åˆ†é’Ÿå¡æ­»ï¼é¡ºæ‰‹ç‚¹å‡»è¿™ä¸ªæ‰“å°ç»“æœï¼Œç›´æ¥è·³è½¬åˆ°å¼•ç”¨å®ƒçš„ä»£ç ï¼š ç«Ÿç„¶æ˜¯ vConsole ç›‘å¬çš„ï¼Œå‰ç«¯åŒå­¦éƒ½çŸ¥é“ï¼Œè¿™ä¸ª vConsole æ˜¯ä¸ºäº†åœ¨ç§»åŠ¨ç«¯æ–¹ä¾¿è°ƒè¯•ä½¿ç”¨çš„ï¼Œä¸€èˆ¬åœ¨æµ‹è¯•ç¯å¢ƒä½¿ç”¨ï¼Œæ‰€ä»¥è¿™ç«¯ä»£ç å¾ˆå¯èƒ½æ˜¯è¿™ä¸ªå¯¼è‡´äº†æµ‹è¯•ç¯å¢ƒå¡æ­»ï¼Œè€Œçº¿ä¸Šç¯å¢ƒæ­£å¸¸çš„ç½ªé­ç¥¸é¦–ï¼ å››ã€éªŒè¯æ¥ä¸‹æ¥æˆ‘ä»¬å°±éªŒè¯ä¸‹çŒœæƒ³ï¼Œé¦–å…ˆæŠŠ window.onerror è¦†ç›–ä¸º console.logï¼Œé‡å¤å¤ç°æ­¥éª¤ï¼Œæ§åˆ¶å°ä¾¿æ‰“å°å‡ºï¼š æœä¸å…¶ç„¶ï¼Œä¸è¿‡è¿™æ ·è¿˜æ˜¯å¡ä½äº†ï¼Œå› ä¸º console.log ä¹Ÿæ˜¯åŒæ­¥æ“ä½œã€‚æ¥ç€ç›´æ¥ç½®ç©º window.onerrorï¼Œæ‰§è¡Œ window.onerror = undefinedï¼Œå†æ¥ä¸€æ¬¡å¤ç°ï¼š é¡µé¢å·²ç»ä¸å†å¡æ­»äº†ï¼ äº”ã€è§£å†³ç›®å‰åœ¨ Chrome å’Œ ele-element æœªè·Ÿè¿›è§£å†³çš„æƒ…å†µä¸‹ï¼Œè§£å†³æ–¹æ³•æœ‰ï¼š å»é™¤ vConsoleï¼Œæ¯•ç«Ÿä¸­å°é¡¹ç›®ä¸éœ€è¦ vConsoleï¼› ç½®ç©º window.onerrorï¼› å¯¹ window.onerror è¿›è¡ŒèŠ‚æµï¼› å…­ã€æ€»ç»“æ­¤å¤„æ€»ç»“ä¸‹é‡åˆ°è«åå¡æ­»é—®é¢˜ï¼Œæ’æŸ¥æ­¥éª¤åº”ç®€åŒ–ä¸ºï¼š ç›‘å¬ window.onerror äº‹ä»¶ï¼Œè¿™æ ·èƒ½æŠŠä¸€äº›å†…éƒ¨çš„æŠ¥é”™ï¼ˆå³ä¸ä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤ºçš„é”™è¯¯ï¼‰ç›´æ¥æ‰“å°åˆ°æ§åˆ¶å°ä¸­ ä½¿ç”¨ç›‘å¬ Chrome æ—¥å¿—æ–¹å¼æ‰“å¼€æµè§ˆå™¨ï¼Œä»æ—¥å¿—ä¸­æŸ¥çœ‹çº¿ç´¢ åˆç†æ¨æµ‹å’ŒéªŒè¯","link":"/2020/06/11/Chrome%20%E8%B0%9C%E4%B8%80%E6%A0%B7%E5%8D%A1%E6%AD%BB%E7%9A%84%E6%8E%92%E6%9F%A5%E6%96%B9%E6%B3%95/"},{"title":"HTML5 æˆªå›¾","text":"å®ç°ä¸€ä¸ªç±»ä¼¼äºQQæˆªå›¾çš„å°ä¸œè¥¿ï¼Œç‚¹å‡»è½½å…¥æŒ‰é’®ï¼Œåˆ™è½½å…¥å›¾ç‰‡ï¼Œé•¿æŒ‰å›¾ç‰‡ï¼Œå¼¹å‡ºæˆªå›¾æ¡†ï¼Œæˆªå›¾æ¡†å³ä¸‹è§’èƒ½å¤Ÿè°ƒæ•´å¤§å°ï¼Œå¹¶åœ¨å³è¾¹çš„æˆªå›¾é¢„è§ˆåŒºåŸŸå®æ—¶æ˜¾ç¤º éœ€æ±‚å®ç°ä¸€ä¸ªç±»ä¼¼äºQQæˆªå›¾çš„å°ä¸œè¥¿ï¼Œç‚¹å‡»è½½å…¥æŒ‰é’®ï¼Œåˆ™è½½å…¥å›¾ç‰‡ï¼Œé•¿æŒ‰å›¾ç‰‡ï¼Œå¼¹å‡ºæˆªå›¾æ¡†ï¼Œæˆªå›¾æ¡†å³ä¸‹è§’èƒ½å¤Ÿè°ƒæ•´å¤§å°ï¼Œå¹¶åœ¨å³è¾¹çš„æˆªå›¾é¢„è§ˆåŒºåŸŸå®æ—¶æ˜¾ç¤ºï¼Œå…¶æœ€ç»ˆæ•ˆæœå›¾å¦‚ä¸‹ï¼š HTMLéœ€è¦æ³¨æ„canvasçš„è®¾ç½®ï¼Œä¸»è¦ç»“æ„å¦‚ä¸‹ï¼š 123456789&lt;section class=&quot;clearfix&quot;&gt; &lt;div id=&quot;origin&quot;&gt; &lt;canvas id=&quot;originImg&quot; width=&quot;500&quot; height=&quot;500&quot;&gt;&lt;/canvas&gt; &lt;div id=&quot;shotRect&quot;&gt; &lt;div class=&quot;resizeBR&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;canvas id=&quot;showPre&quot; width=&quot;500&quot; height=&quot;500&quot;&gt;&lt;/canvas&gt;&lt;/section&gt; CSSæˆªå›¾æ¡†åˆå§‹å¤§å°ä¸º50px50px,å³ä¸‹è§’è®¾ç½®äº†ä¸€ä¸ªä¸å¯è§çš„è°ƒèŠ‚åŒºåŸŸ,æ­¤å¤„å¤§å°è®¾ç½®ä¸º12px12pxï¼Œå¹¶åœ¨ä¹‹åä¸ºå…¶æ³¨å†Œè°ƒæ•´å¤§å°çš„äº‹ä»¶ã€‚ 1234567891011121314151617181920#shotRect { position: absolute; display: none; width: 50px; height: 50px; opacity: .5; border: 2px solid #2d2d2d;}.resizeBR { position: absolute; right: -5px; bottom: -5px; width: 12px; height: 12px; cursor: nw-resize; opacity: 0; background: #000; background: #ff0;} å…¶ä¸­åŸå§‹å›¾ç‰‡çš„canvaså¤§å°ä¸é¢„è§ˆåŒºçš„å¤§å°ä¸€è‡´ã€‚ JavaScriptè½½å…¥å›¾ç‰‡ï¼Œå¹¶ç»˜åˆ¶canvas123456789function loadImg(event) { //è½½å…¥å›¾ç‰‡ cOri = document.getElementById(&quot;originImg&quot;); imgOri = new Image(); ctxOri = cOri.getContext(&quot;2d&quot;); imgOri.src = &quot;vegetable.jpg&quot;; imgOri.onload=function(){ ctxOri.drawImage(imgOri,0,0,500,500);//å°†å›¾ç‰‡ç»˜åˆ¶åˆ°canvasä¸Š };} é•¿æŒ‰å¾…æˆªå›¾åŒºåŸŸ,å¼¹å‡ºæˆªå›¾æ¡†12345678910111213function longClick(event) { //é•¿æŒ‰å¼¹å‡ºæˆªå›¾æ¡† event = event || window.event; var shotRect = document.getElementById(&quot;shotRect&quot;); timeout = setTimeout(function() { shotRect.style.display = &quot;block&quot;; var disX = event.clientX - shotRect.offsetWidth + 10, disY = event.clientY - shotRect.offsetHeight + 10; shotRect.style.left = disX + 'px'; shotRect.style.top = disY + 'px'; initCanvas(); updateRect(disX, disY, shotRect.offsetWidth, shotRect.offsetHeight); }, 1000);} é‡Šæ”¾é¼ æ ‡æ—¶,éœ€è¦æ¸…é™¤timeoutã€‚ åˆå§‹åŒ–é¢„è§ˆcanvas12345function initCanvas() {//åˆå§‹åŒ–é¢„è§ˆç”»å¸ƒ cPre = document.getElementById(&quot;showPre&quot;); ctxPre = cPre.getContext(&quot;2d&quot;); img = document.getElementById(&quot;originImg&quot;);} æ›´æ–°é¢„è§ˆcanvasæ ¹æ®åŸå§‹å›¾ç‰‡,åœ¨é¢„è§ˆåŒºåŸŸä¸Šä½¿ç”¨drawImageæ–¹æ³•ç”»å‡ºé¢„è§ˆå›¾,å…¶ä¸­x,yä¸ºæˆªå›¾æ¡†å·¦ä¸Šè§’ç›¸å¯¹äºåŸå§‹å›¾ç‰‡å·¦ä¸Šè§’çš„åæ ‡;è€Œw,hä¸ºæˆªå›¾æ¡†çš„é•¿ä¸å®½;è¿™å››ä¸ªå‚æ•°æå–å‡ºäº†æˆªå›¾æ¡†å†…çš„å›¾åƒæ•°æ®,è€Œä¹‹å(0,0)è¿™ä¸ªåæ ‡ä»£è¡¨åœ¨ç”»å¸ƒä¸Šæ”¾ç½®è¯¥å›¾åƒæ•°æ®çš„åæ ‡ä½ç½®,(0,0)æ„å‘³ç€å°†è¯¥å›¾åƒæ•°æ®çš„å·¦ä¸Šè§’ä¸é¢„è§ˆåŒºåŸŸçš„å·¦ä¸Šè§’é‡åˆã€‚ 1234function updateRect(x, y, w, h) {//æ›´æ–°ç”»å¸ƒ ctxPre.clearRect(0, 0, 500, 500); //æ¸…ç©ºç”»å¸ƒ ctxPre.drawImage(img, x, y, w, h, 0, 0, 500, 500);} è°ƒæ•´æˆªå›¾æ¡†å¤§å°è®¡ç®—æˆªå›¾æ¡†å·¦ä¸Šè§’çš„åæ ‡ï¼Œå¹¶æ ¹æ®è°ƒæ•´å¤§å°åé¼ æ ‡çš„åæ ‡ï¼Œå¹¶æ®æ­¤é‡æ–°è®¾ç½®æˆªå›¾æ¡†çš„å¤§å°ï¼Œç„¶åè°ƒç”¨æ›´æ–°æˆªå›¾é¢„è§ˆçš„å‡½æ•°updateRectï¼Œæ³¨æ„é™åˆ¶æˆªå›¾æ¡†çš„è¾¹ç•Œä¸èƒ½è¶…è¿‡åŸå§‹å›¾ç‰‡çš„å¤§å°ã€‚ 123456789101112131415161718192021222324252627282930313233343536function resizeDown(event) { event = event || window.event; var shotRect = document.getElementById(&quot;shotRect&quot;), //è®¡ç®—Rectå·¦ä¸Šè§’çš„åæ ‡ x = shotRect.offsetLeft, y = shotRect.offsetTop ; //console.log(&quot;x=&quot; + x+ &quot; &quot; + &quot;y=&quot; + y); //ç»‘å®šäº‹ä»¶ document.addEventListener(&quot;mousemove&quot;, mouseMove); document.addEventListener(&quot;mouseup&quot;, mouseUp); //ç§»åŠ¨é¼ æ ‡ function mouseMove(event) { event = event || window.event; var finalX = event.clientX, finalY = event.clientY; //é˜²æ­¢è¶…è¿‡è¾¹ç•Œ if (event.clientX &gt;= 488) { finalX = 488; } if (event.clientY &gt;= 488) { finalY = 488; } //console.log( (event.clientX) + &quot; &quot; + (event.clientY)); xy = (finalX - x + 10) &lt; (finalY - y +10) ? (finalX -x + 10) : (finalY - y + 10); //è®¡ç®—ç§»åŠ¨åçš„Rectæ–°å¤§å° shotRect.style.width = xy + 'px'; shotRect.style.height = xy + 'px'; updateRect(x, x, shotRect.offsetWidth, shotRect.offsetHeight); } //åœæ­¢äº‹ä»¶ function mouseUp() { //å¸è½½äº‹ä»¶ document.removeEventListener(&quot;mousemove&quot;, mouseMove); document.removeEventListener(&quot;mouseup&quot;, mouseUp); }} ç§»åŠ¨æˆªå›¾æ¡†è¯¦çœ‹æ³¨é‡Šå§~ 12345678910111213141516171819202122232425262728293031323334353637function dragDown(event) { event = event || window.event; if (event.target !== event.currentTarget) return; //å¦‚æœæ˜¯ä»å­å…ƒç´ å†’ä¸Šæ¥çš„ï¼Œè¿”å› var shotRect = document.getElementById(&quot;shotRect&quot;), disX = event.clientX - shotRect.offsetLeft, // å…‰æ ‡æŒ‰ä¸‹æ—¶å…‰æ ‡ç›¸å¯¹æˆªå›¾æ¡†çš„åæ ‡ disY = event.clientY - shotRect.offsetTop; //ç»‘å®šäº‹ä»¶ document.addEventListener(&quot;mousemove&quot;, mouseMove); document.addEventListener(&quot;mouseup&quot;, mouseUp); function mouseMove(event) { event = event || window.event; var disL = event.clientX - disX, //æˆªå›¾æ¡†å·¦è¾¹ç•Œä¸å·¦ä¾§è¾¹ç•Œçš„è·ç¦» disT = event.clientY - disY, //æˆªå›¾æ¡†ä¸Šè¾¹ç•Œä¸ä¸Šä¾§è¾¹ç•Œçš„è·ç¦» maxW = document.getElementById(&quot;originImg&quot;).clientWidth - shotRect.offsetWidth, //æœ€å¤§å®½åº¦ maxH = document.getElementById(&quot;originImg&quot;).clientHeight - shotRect.offsetHeight; //æœ€å¤§é«˜åº¦ //è¶…è¿‡è¾¹ç•Œåˆ™é‡ç½® if (disL &lt; 0) { disL = 0; } else if (disL &gt; maxW) { disL = maxW + 1; } if (disT &lt; 0) { disT = 0; } else if (disT &gt; maxH) { disT = maxH + 1; } shotRect.style.left = disL + 'px'; //é‡æ–°è®¡ç®—æˆªå›¾æ¡†çš„ç›¸å¯¹ä½ç½® shotRect.style.top = disT + 'px'; updateRect(disL, disT, shotRect.offsetWidth, shotRect.offsetHeight); } function mouseUp(event) { document.removeEventListener(&quot;mousemove&quot;, mouseMove); document.removeEventListener(&quot;mouseup&quot;, mouseUp); }} ä¿å­˜å›¾ç‰‡ç”±äºè·¨åŸŸé—®é¢˜,ä¿å­˜åœ¨chromeæ— æ•ˆ,åœ¨firefoxä¸­æœ‰æ•ˆ: 12345function saveImg(event) { var image = cPre.toDataURL(&quot;image/png&quot;); var w = window.open('about:blank', 'image from canvas'); w.document.write(&quot;&lt;img src='&quot; + image + &quot;' alt='from canvas'/&gt;&quot;);} å®Œæ•´ä»£ç ","link":"/2015/07/19/HTML5%E6%88%AA%E5%9B%BE/"},{"title":"Javascript è¯­è¨€ç²¾ç²¹ã®ç¬”è®°","text":"æœ€è¿‘ä¹°äº†å‡ æœ¬ä¹¦ï¼Œè¿™æœ¬ã€ŠJavaScript è¯­è¨€ç²¾ç²¹ã€‹æœçœŸç²¾ç²¹ï¼Œç¯‡å¹…å¾ˆå°‘ï¼Œè€Œé™„å½•è¾ƒå¤šï¼Œä½œè€…æ˜¯ JSON çš„å‘æ˜è€… Douglas Crockford ï¼Œå¬èµ·æ¥å±Œå±Œçš„ï¼Œå…¶ä¸­çš„å¹²è´§ä¹Ÿæ˜¯ä¸å°‘çš„ï¼Œçœ‹å®Œå—ç›ŠåŒªæµ…ï¼ JavaScript è¯­è¨€ç²¾ç²¹ç« å››,äº” å‡½æ•°ã€ç»§æ‰¿ å¦‚æœåœ¨ä¸€ä¸ªå‡½æ•°å‰é¢å¸¦ä¸Š new æ¥è°ƒç”¨ï¼Œåˆ™èƒŒåœ°é‡Œä¼šåˆ›å»ºä¸€ä¸ªé“¾æ¥åˆ°è¯¥å‡½æ•°çš„ prototype æˆå‘˜çš„æ–°å¯¹è±¡ a. é€šè¿‡ proto è¿›è¡Œé“¾æ¥ï¼Œä½¿å¾—æ–°å¯¹è±¡ä¸Šçš„ proto å±æ€§æ‹¥æœ‰ prototype ä¸Šçš„æ‰€æœ‰å±æ€§ä¸æ–¹æ³• b. åŒæ—¶ this å°†ä¼šè¢«ç»‘å®šåˆ°è¿™ä¸ªæ–°å¯¹è±¡ä¸Šï¼Œæ­¤æ—¶è‹¥è¿”å›å€¼ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¿”å› this 123var that = Object.create(this.prototype);var other = this.apply(that, arguments);return (typeof outer === 'object' &amp;&amp; other) || that; new è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼ˆç»§æ‰¿è‡ªå…¶è¿ç®—æ•°åŸå‹ï¼‰ï¼Œç„¶åè°ƒç”¨è¯¥è¿ç®—æ•°ï¼ŒæŠŠæ–°åˆ›å»ºçš„å¯¹è±¡ç»‘å®šåˆ° this ä¸Šï¼›ä½¿å¾—è¿ç®—ç¬¦ï¼ˆå³æ„é€ å™¨å‡½æ•°ï¼‰åœ¨è¿”å›ç»™è°ƒç”¨è€…å‰èƒ½å¤Ÿè‡ªå®šä¹‰æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ å› ä¸º JavaScript åŸå‹ç»§æ‰¿çš„åŠ¨æ€æœ¬è´¨ï¼Œä½¿å¾—æ–°çš„æ–¹æ³•ç«‹åˆ»è¢«èµ‹äºˆåˆ°æ‰€æœ‰å¯¹è±¡çš„å®ä¾‹ä¸Šï¼Œå“ªæ€•åœ¨å°†æ–¹æ³•å¢åŠ åˆ°å¯¹åº”ç±»çš„ prototype å±æ€§ä¹‹å‰å°±å·²ç»åˆ›å»ºçš„å¯¹è±¡å®ä¾‹ã€‚ function A() {}, ç±» A çš„æ„é€ å‡½æ•°ä½äº A çš„åŸå‹ prototype ä¹‹ä¸Šï¼Œå› æ­¤ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ç»§æ‰¿æ—¶ï¼Œæœ€åä¸€æ­¥éœ€è¦é‡ç½®å­ç±»çš„æ„é€ å™¨ä¸ºè‡ªèº«ï¼š 123456789101112131415161718192021// Shape - superclassfunction Shape() { this.x = 0; this.y = 0;}// superclass methodShape.prototype.move = function(x, y) { this.x += x; this.y += y; console.info('Shape moved.');};// Rectangle - subclassfunction Rectangle() { Shape.call(this); // call super constructor.}// subclass extends superclassRectangle.prototype = Object.create(Shape.prototype);Rectangle.prototype.constructor = Rectangle; å…³äº Object.create The **Object.create()** method creates a new object with the specified prototype object and properties. è¯¥æ–¹æ³•æ ¹æ®æŒ‡å®šçš„åŸå‹å¯¹è±¡å’Œå±æ€§ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ 1234567891011121314151617181920var o;// create an object with null as prototypeo = Object.create(null);o = {};// is equivalent to:o = Object.create(Object.prototype);// o -&gt; Object:{__proto__: Object}function Constructor() {}o = new Constructor();// is equivalent to:o = Object.create(Constructor.prototype);// Of course, if there is actual initialization code in the// Constructor function, the Object.create() cannot reflect it// o -&gt; Constructor:{__proto__: Object} ç« å…­ æ•°ç»„ JavaScript çš„æ•°ç»„æ˜¯ä¸€ç§æ‹¥æœ‰ä¸€äº›ç±»æ•°ç»„ç‰¹æ€§çš„å¯¹è±¡ 12345678var arr = [];var obj = {};typeof arr === typeof obj // trueï¼Œçš†ä¸º 'object'arr instanceof Array // truearr instanceof Object // true ä¸ºæ•°ç»„è®¾ç½®æ›´å¤§çš„ length ä¸ä¼šåˆ†é…æ›´å¤šç©ºé—´ï¼Œè€ŒæŠŠ length è®¾å°ï¼Œåˆ™å°†æ‰€ä¸‹æ ‡å¤§äºç­‰äºæ–° length çš„å±æ€§åˆ é™¤ ç”±äºæ•°ç»„å°±æ˜¯å¯¹è±¡ï¼Œå› æ­¤å¯ä½¿ç”¨ delete è¿ç®—ç¬¦ç§»é™¤å…ƒç´  12345var arr = ['one', 'two', 'three'];delete arr[1]; // ['one', undefined, 'three']// ä½¿ç”¨ splice æ–¹æ³•arr.splice(1,1); // ['one', 'three'] æ•°ç»„æ˜¯ä¸ªå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ç»™å…¶å¢æ·»å±æ€§ï¼Œå½“å±æ€§ä¸ä¸ºæ•°å­—æ—¶ï¼Œå¹¶ä¸ä¼šå¢åŠ  length ç« ä¸ƒ æ­£åˆ™ å¦‚æœæ‹¿ä¸å‡†ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦æ˜¯å¦éœ€è¦è½¬ä¹‰ï¼Œå¯ç»Ÿä¸€åŠ ä¸Šè½¬ä¹‰ç¬¦ â€˜' \\d [0-9] \\D \\s Unicode å­—ç¬¦ \\S \\w [0-9A-Z_a-Z] \\W . é™¤ç»“æŸç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦ 12345678910111213143. æ­£åˆ™è¡¨è¾¾å¼åˆ†ç»„ï¼š()ï¼Œæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦é›†ï¼š[]4. é‡è¯ï¼š```js//å¦‚æœåªæœ‰ä¸€ä¸ªé‡è¯(å½¢å¦‚ {1,} ) åˆ™è¡¨ç¤ºè¿›è¡Œè´ªå©ªæ€§åŒ¹é…let reg = /w{3,}/;'wwwww'.match(reg); // 'wwwww'// é€šè¿‡ ï¼Ÿ è¿›è¡Œéè´ªå©ªæ€§åŒ¹é…let reg2 = /w{3,}?/;'wwwww'.match(reg2); // 'www' ç« å…« æ–¹æ³• array.pop ä¸ array.shift pop çš„ä½ç½®ä¸åŒï¼Œä¸€ä¸ªåœ¨å¤´éƒ¨ï¼Œä¸€ä¸ªåœ¨å°¾éƒ¨ array.push ä¸ array.unshift push çš„ä½ç½®ä¸åŒï¼Œä¸€ä¸ªåœ¨å°¾éƒ¨ï¼Œä¸€ä¸ªåœ¨å¤´éƒ¨ array.slice(start, end) æ½œå¤åˆ¶ï¼Œarray.splice(start, deleteCount, itemâ€¦) ç§»é™¤è‹¥å¹²ä¸ªå…ƒç´ ï¼Œå¹¶ä½¿ç”¨ item æ›¿æ¢ regexp.exec(string)ã€regexp.test(string) string.lastIndexOf(searchString, position)ã€string.charAt(position)ã€string.match(regexp)ã€string.search(regex) é™„å½• 1 + 0.2 // 0.30000000000000004 0.1 + 0.2 == 0.3 // false 12345672. ```js typeof NaN === 'number' // true Nan === NaN // false NaN !== NaN // true isNaN(NaN) // true ES6 å°†å…¶å½’åˆ° Number.isNaN åˆ¤æ–­æ•°ç»„ï¼š 12arr &amp;&amp; typeof arr === 'object' &amp;&amp; arr.constructor === Array åŠ å¼ºç‰ˆ: 12Object.prototype.toString.apply(arr) === '[object Array]' ä½è¿ç®—ç¬¦åœ¨ JavaScript ä¸­æ‰§è¡Œæ•ˆç‡éå¸¸æ…¢ å»ºè®®ä½¿ç”¨ var foo = function foo() {}; è€Œä¸æ˜¯ function foo() {}; é¿å…ä½¿ç”¨ç±»å‹åŒ…è£…å™¨ï¼šnew Boolean(false)ã€new Number(1)ã€new String(â€˜abcâ€™) é¿å…ä½¿ç”¨ new Object ä¸ new Array HTML ä¸­ï¼Œå­—é¢ä¸Šçš„ â€˜&lt;â€™ ç¬¦å·å¿…é¡»ä½¿ç”¨ â€˜&amp;lt ;â€™ JSON JSON æœ‰å…­ç§ç±»å‹å€¼ï¼š å¯¹è±¡ã€æ•°ç»„ã€å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€null","link":"/2016/11/20/JavaScript%20%E8%AF%AD%E8%A8%80%E7%B2%BE%E7%B2%B9%E3%81%AE%E7%AC%94%E8%AE%B0/"},{"title":"JavaScript æƒå¨æŒ‡å—ã®ç¬”è®°","text":"å½“Javascriptè§£é‡Šå™¨å¯åŠ¨æ—¶ï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªæ–°çš„å…¨å±€å¯¹è±¡ï¼Œå¹¶ç»™å®ƒä¸€ç»„å®šä¹‰çš„åˆå§‹å±æ€§ã€‚ åªè¦å¼•ç”¨äº†å­—ç¬¦ä¸²ç›´æ¥é‡çš„å±æ€§ï¼Œå°±ä¼šå°†å­—ç¬¦ä¸²å€¼é€šè¿‡è°ƒç”¨new String(). æ–¹å¼è½¬æ¢æˆå¯¹è±¡ï¼Œä¸€æ—¦å¼•ç”¨ç»“æŸï¼Œåˆ™é”€æ¯è¿™ä¸ªä¸´æ—¶å¯¹è±¡ã€‚ â€œ==â€å°†è¿ç®—ç¬¦å°†åŸå§‹å€¼ä¸å…¶åŒ…è£…å¯¹è±¡è§†ä¸ºç›¸ç­‰ï¼Œè€Œâ€œ===â€ä¸ç„¶ã€‚ åŸå§‹å€¼ä¸å¯å˜ï¼Œå¯¹è±¡å¼•ç”¨å¯å˜ã€‚ undefinedè½¬æ¢ä¸ºæ•°å­—ï¼š NaNï¼Œè€Œnullè½¬æ¢ä¸ºæ•°å­—ï¼š0ï¼Œç©ºå­—ç¬¦ä¸²è½¬ä¸º0ä¸falseã€‚ å¯¹è±¡ å½“Javascriptè§£é‡Šå™¨å¯åŠ¨æ—¶ï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªæ–°çš„å…¨å±€å¯¹è±¡ï¼Œå¹¶ç»™å®ƒä¸€ç»„å®šä¹‰çš„åˆå§‹å±æ€§ã€‚ åªè¦å¼•ç”¨äº†å­—ç¬¦ä¸²ç›´æ¥é‡çš„å±æ€§ï¼Œå°±ä¼šå°†å­—ç¬¦ä¸²å€¼é€šè¿‡è°ƒç”¨new String(). æ–¹å¼è½¬æ¢æˆå¯¹è±¡ï¼Œä¸€æ—¦å¼•ç”¨ç»“æŸï¼Œåˆ™é”€æ¯è¿™ä¸ªä¸´æ—¶å¯¹è±¡ã€‚ â€œ==â€å°†è¿ç®—ç¬¦å°†åŸå§‹å€¼ä¸å…¶åŒ…è£…å¯¹è±¡è§†ä¸ºç›¸ç­‰ï¼Œè€Œâ€œ===â€ä¸ç„¶ã€‚ åŸå§‹å€¼ä¸å¯å˜ï¼Œå¯¹è±¡å¼•ç”¨å¯å˜ã€‚ undefinedè½¬æ¢ä¸ºæ•°å­—ï¼š NaNï¼Œè€Œnullè½¬æ¢ä¸ºæ•°å­—ï¼š0ï¼Œç©ºå­—ç¬¦ä¸²è½¬ä¸º0ä¸falseã€‚ å¯¹è±¡åˆ°å¸ƒå°”å€¼çš„è½¬æ¢ï¼š æ‰€æœ‰å¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„å’Œå‡½æ•°ï¼‰éƒ½è½¬ä¸ºtrueã€‚ å…¨å±€ä½œç”¨åŸŸå¯ä»¥ä¸å†™varï¼Œä½†å±€éƒ¨å˜é‡çš„å£°æ˜éœ€è¦varï¼Œå¦åˆ™é»˜è®¤ç”Ÿæˆå…¨å±€å˜é‡ã€‚ Javascriptå¹¶æ— å—çº§ä½œç”¨åŸŸï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å‡½æ•°ä½œç”¨åŸŸï¼ŒæŒ‡åœ¨å‡½æ•°å†…å£°æ˜çš„æ‰€æœ‰å˜é‡åœ¨å‡½æ•°ä½“å†…å§‹ç»ˆå¯è§ï¼Œæ„. ç€å˜é‡åœ¨å£°æ˜ä¹‹å‰å·²ç»å¯ç”¨ï¼Œä½†æ˜¯èµ‹å€¼æ“ä½œè¿˜åœ¨åŸå§‹ä½ç½®æ‰§è¡Œï¼Œå³â€œå£°æ˜æå‰â€ã€‚ var truevar = 1ï¼›//å£°æ˜ä¸€ä¸ªä¸å¯åˆ é™¤çš„å…¨å±€å˜é‡ fakevar = 2; //åˆ›å»ºå…¨å±€å¯¹è±¡çš„å¯åˆ é™¤çš„å±æ€§ x!=xæ¥åˆ¤æ–­xæ˜¯å¦ä¸ºNaNã€‚ inè¿ç®—ç¬¦ï¼š è‹¥å³ä¾§å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåä¸ºå·¦æ“ä½œæ•°å€¼çš„å±æ€§åï¼Œåˆ™è¿”å›trueã€‚12.typeof(null) -&gt; â€œobjectâ€;typeof(undefined) -&gt; â€œundefinedâ€;å¸¸ç”¨è¯­è¡¨è¾¾å¼ä¸­ï¼š(typeof value == â€œstringâ€) ? â€œ â€˜ â€œ + value + â€œ â€˜ â€œ : value; å‡½æ•°æ˜¯å¯¹è±¡çš„ä¸€ç§ï¼Œä½†æ˜¯typeof(func)çš„ç»“æœæ˜¯â€œfunctionâ€ã€‚ åˆ é™¤å±æ€§æˆ–æ•°ç»„ä¸ä»…ä»…æ˜¯è®¾ç½®äº†ä¸€ä¸ªundefinedçš„å€¼ï¼Œå…¶å±æ€§å°†ä¸å­˜åœ¨ã€‚ ä¸èƒ½åˆ é™¤é€šè¿‡varå£°æ˜çš„å˜é‡ï¼Œåˆ é™¤ä¸å­˜åœ¨çš„å±æ€§è¿”å›trueï¼Œåˆ é™¤æ•°ç»„å…ƒç´ ï¼Œä¸æ”¹å˜å…¶é•¿åº¦ã€‚ voidè¿ç®—ç¬¦ï¼š å¿½ç•¥æ“ä½œæ•°çš„è®¡ç®—ç»“æœå¹¶è¿”å›undefinedã€‚ for(variable in object) statement;å…ˆè®¡ç®—variableçš„å€¼ï¼Œå¹¶å°†å±æ€§åèµ‹å€¼ç»™å®ƒã€‚ breakä¸èƒ½è¶Šè¿‡å‡½æ•°çš„è¾¹ç•Œï¼Œè€Œcontinueåªèƒ½åœ¨å¾ªç¯ä½“å†…ä½¿ç”¨ã€‚ &amp;&amp;çŸ­è·¯ï¼š å½“å·¦æ“ä½œæ•°æ˜¯çœŸå€¼æ—¶ï¼Œè¯¥è¿ç®—ç¬¦å°†è®¡ç®—å³æ“ä½œæ•°çš„å€¼å¹¶å°†å…¶è¿”å›ä½œä¸ºæ•´ä¸ªè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœã€‚ hasOwnProperty()ç”¨æ¥æ£€æµ‹ç»™å®šçš„åå­—æ˜¯å¦æ˜¯å¯¹è±¡çš„è‡ªæœ‰å±æ€§ã€‚ å­˜å–å™¨å±æ€§ï¼š getterä¸setterï¼Œå¯ç»§æ‰¿ï¼Œget property(){},set property(){}ã€‚ æ•°æ®å±æ€§ï¼šå€¼ï¼Œå¯å†™æ€§ï¼Œå¯æšä¸¾æ€§ï¼Œå¯é…ç½®æ€§ï¼› å­˜å–å™¨å±æ€§ï¼šgetï¼Œsetï¼Œå¯æšä¸¾æ€§ï¼Œå¯é…ç½®æ€§ã€‚ è½¬æ¢ä¸ºä¸å¯æ‰©å±•æ€§åï¼Œä¸å¯è½¬å›ï¼ŒObject.preventExtensions()ï¼Œç»™ä¸€ä¸ªä¸å¯æ‰©å±•çš„å¯¹è±¡çš„åŸå‹æ·»åŠ å±æ€§ï¼Œå®ƒç…§æ ·ä¼šç»§æ‰¿æ–°å±æ€§ã€‚ 1, Object.getOwnPropertyDescriptor()å¯è·å¾—æŸä¸ªå¯¹è±¡ç‰¹å®šå±æ€§çš„å±æ€§æè¿°ç¬¦ï¼š({x:1},â€xâ€)ã€‚ 2, Object.defineProperty(o,â€xâ€,{value:1,writable:true,enumerable:false,configurable:true}); 3, ä»¥ä¸Šä¸¤ä¸ªå‡½æ•°éƒ½ä¸åŒ…æ‹¬ç»§æ‰¿å±æ€§ã€‚ æ•°ç»„ æ•°ç»„æ˜¯JSå¯¹è±¡çš„ç‰¹æ®Šå½¢å¼ï¼Œæ•°ç»„ç´¢å¼•å®é™…ä¸Šå’Œç¢°å·§æ˜¯æ•´æ•°çš„å±æ€§åå·®ä¸å¤šã€‚ æ•°ç»„éå†ï¼š1. æ’é™¤nullä¸definedã€ä¸å­˜åœ¨çš„å…ƒç´ ï¼š if(!a[i]) continue; æ’é™¤undefinedå’Œä¸å­˜åœ¨çš„å…ƒç´ ï¼š if(a === undefined) continue; æ’é™¤ä¸å­˜åœ¨ä»å¤„ç†undefinedï¼š if(!(i in a)) continue;æˆ–ï¼šfor(var index in sparseArray){}ã€‚ æ•°ç»„æ–¹æ³•ï¼š join()ï¼šå°†æ‰€æœ‰å…ƒç´ è½¬æˆå­—ç¬¦ä¸²è¿æ¥åœ¨ä¸€èµ·ï¼Œé»˜è®¤åˆ†éš”ç¬¦ä¸ºé€—å·ï¼Œå¯æŒ‡å®šåˆ†éš”ç¬¦ï¼› reverse()ï¼šå°†å…ƒç´ é¢ å€’é¡ºåºï¼› sort()ï¼šå­—æ¯è¡¨é¡ºåºæ’åˆ—ï¼Œæ•°å€¼é¡ºåºï¼ša.sort(function(a,b) { return a - b; } ); //è‹¥ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥åœ¨å‰ï¼Œè¿”å›å°äºé›¶çš„æ•°å€¼ï¼Œåä¹‹äº¦ç„¶ï¼› concat()ï¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼ŒåŒ…æ‹¬åŸå§‹æ•°ç»„ä¸concat()çš„æ¯ä¸ªå‚æ•°ï¼› slice()ï¼šè¿”å›çš„æ•°ç»„åŒ…å«ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„ä½ç½®åˆ°ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šçš„ä½ç½®ä¹‹é—´çš„æ‰€æœ‰æ•°ç»„å…ƒç´ ï¼Œä¸åŒ…æ‹¬ç¬¬äºŒä¸ªå‚æ•°ï¼›è‹¥æŒ‡å®šä¸€ä¸ªå‚æ•°ï¼Œåˆ™è¯¥å‚æ•°ä¸ºèµ·å§‹ä½ç½®ï¼Œç»“æŸä½ç½®åœ¨æœ€åï¼›è´Ÿæ•°ï¼š-1ä»£è¡¨æœ€åä¸€ä¸ªå…ƒç´ ï¼› splice()ï¼šä¸åŒäºsliceä¸concatï¼Œå®ƒä¼šä¿®æ”¹è°ƒç”¨çš„æ•°ç»„ï¼›å¹¶è¿”å›è¢«åˆ å…ƒç´ ç»„æˆçš„æ•°ç»„ï¼› pushä¸popï¼› unshiftä¸shiftåœ¨æ•°ç»„å¤´éƒ¨æ“ä½œï¼› Javascript 5ï¼š forEach()ï¼šéå†æ•°ç»„ï¼Œä¸ºæ¯ä¸ªå…ƒç´ è°ƒç”¨æŒ‡å®šçš„å‡½æ•°ï¼› map()ï¼šéœ€è¦è¿”å›å€¼ï¼Œè¿”å›çš„æ˜¯æ–°æ•°ç»„ï¼Œä¸ä¿®æ”¹è°ƒç”¨çš„æ•°ç»„ï¼Œè€ŒforEach()ä¿®æ”¹ï¼› filter()ï¼šå‹ç¼©ç¨€ç–æ•°ç»„ï¼švar dense = sparse.filter(functin(){return true;});//filterä¼šè·³è¿‡ç¨€ç–æ•°ç»„ä¸­ç¼ºå°‘çš„å…ƒç´ ï¼Œè¿”å›çš„æ•°ç»„æ€»æ˜¯ç¨ å¯†çš„; åŒæ—¶åˆ é™¤undefinedå’Œnullå…ƒç´ ï¼ša = a.filter(function(x){return x !== undefined &amp;&amp; x != null;}); every()ï¼šå½“ä¸”ä»…å½“é’ˆå¯¹æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ è°ƒç”¨åˆ¤å®šå‡½æ•°éƒ½è¿”å›trueï¼Œå®ƒæ‰è¿”å›trueï¼› some()ï¼šè‡³å°‘æœ‰ä¸€ä¸ªä¸ºtrueï¼Œåˆ™è¿”å›trueï¼› reduce()ï¼švar sum = a.reduce(function(x,y) { return x + y }, 0);//å…¶ä¸­ç¬¬äºŒä¸ªå‚æ•°0æ˜¯åˆå§‹å€¼ï¼› reduceRight()ï¼šä»å³åˆ°å·¦å¤„ç†ï¼› indexOf()ï¼šæœç´¢æ•´ä¸ªæ•°ç»„ä¸­å…·æœ‰ç»™å®šå€¼çš„å…ƒç´ ï¼Œè¿”å›æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œæ²¡æ‰¾åˆ°è¿”å›-1ï¼› lastIndexOf()ï¼šåå‘æœç´¢ï¼Œç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šå¼€å§‹æŸ¥æ‰¾çš„ä½ç½®ã€‚ åˆ¤å®šæ˜¯å¦ä¸ºæ•°ç»„ï¼šArray.isArray()ã€‚ å‡½æ•° åµŒå¥—å‡½æ•°ä¸ä¼šä»è°ƒç”¨å®ƒçš„å‡½æ•°ä¸­ç»§æ‰¿thisï¼Œå¦‚æœåµŒå¥—å‡½æ•°ä½œä¸ºæ–¹æ³•è°ƒç”¨ï¼Œå…¶thisçš„å€¼æŒ‡å‘è°ƒç”¨å®ƒçš„å¯¹è±¡ï¼Œä½œä¸ºå‡½æ•°è°ƒç”¨ï¼Œå…¶thiså€¼ä¸æ˜¯å…¨å±€å¯¹è±¡ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰å°±æ˜¯undefinedï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰ã€‚ new o.m()è°ƒç”¨ä¸Šä¸‹æ–‡ï¼ˆthisï¼‰å¹¶ä¸æ˜¯oï¼Œè€Œæ˜¯æ„é€ å‡½æ•°è°ƒç”¨åˆ›å»ºçš„ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ã€‚ &amp;&amp;ï¼š è‹¥å·¦æ“ä½œæ•°ä¸ºå‡ï¼Œè¿”å›å·¦æ“ä½œæ•°å€¼ï¼Œä¸è®¡ç®—å³æ“ä½œæ•°ï¼›è‹¥å·¦æ“ä½œæ•°ä¸ºçœŸï¼Œè®¡ç®—å³æ“ä½œæ•°å¹¶è¿”å›å³æ“ä½œæ•°çš„å€¼ï¼› ||ï¼š è‹¥å·¦æ“ä½œæ•°ä¸ºçœŸï¼Œè¿”å›å·¦æ“ä½œæ•°å€¼ï¼Œä¸è®¡ç®—å³æ“ä½œæ•°ï¼›è‹¥å·¦æ“ä½œæ•°ä¸ºå‡ï¼Œè®¡ç®—å³æ“ä½œæ•°å¹¶è¿”å›å³æ“ä½œæ•°çš„å€¼ï¼› argumentsï¼š æŒ‡å‘å®å‚å¯¹è±¡çš„å¼•ç”¨ï¼ŒåŒ…å«ä¸€ä¸ªlengthå±æ€§ï¼Œå´ä¸æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚ argumentsçš„å±æ€§ï¼š calleeï¼šæŒ‡ä»£å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ã€‚ å‡½æ•°å¯ä»¥æœ‰è‡ªå·±çš„å±æ€§ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ã€‚ å‡½æ•°å¯ä»¥ä½œä¸ºå‘½åç©ºé—´ï¼š ( function(){ //codes } () );//ç»“æŸå‡½æ•°å®šä¹‰å¹¶ç«‹å³è°ƒç”¨å®ƒã€‚ é—­åŒ…ï¼š JSå‡½æ•°æ‰§è¡Œç”¨åˆ°äº†ä½œç”¨åŸŸé“¾ï¼Œæ­¤é“¾æ˜¯å‡½æ•°å®šä¹‰çš„æ—¶å€™åˆ›å»ºçš„ï¼Œä¸ç®¡åœ¨ä½•æ—¶ä½•åœ°æ‰§è¡Œå†…éƒ¨åµŒå¥—å‡½æ•°f()ï¼Œfä¸­çš„å˜é‡ä¸€å®šæ˜¯å±€éƒ¨å˜é‡ã€‚ æ¯æ¬¡è°ƒç”¨JSå‡½æ•°çš„æ—¶å€™ï¼Œéƒ½ä¼šä¸ºä¹‹åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ç”¨æ¥ä¿å­˜å±€éƒ¨å˜é‡ï¼ŒæŠŠè¿™ä¸ªå¯¹è±¡æ·»åŠ è‡³ä½œç”¨åŸŸé“¾ä¸­ï¼Œå½“å‡½æ•°è¿”å›æ—¶ï¼Œå°±ä»ä½œç”¨åŸŸé“¾ä¸­å°†è¿™ä¸ªç»‘å®šå˜é‡çš„å¯¹è±¡åˆ é™¤ã€‚ åµŒå¥—å‡½æ•°é‡Œæ˜¯æ— æ³•è®¿é—®thisçš„ï¼Œé™¤éåœ¨å¤–éƒ¨å‡½æ•°å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªå˜é‡ï¼š var self = this; å‡½æ•°å±æ€§ï¼š lengthï¼šå½¢å‚ä¸ªæ•°ï¼› prototypeå±æ€§ï¼š å½“å‡½æ•°ç”¨ä½œæ„é€ å‡½æ•°æ—¶ï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡ä¼šä»åŸå‹å¯¹è±¡ä¸Šç»§æ‰¿å±æ€§ã€‚ ä»¥å¯¹è±¡oçš„æ–¹æ³•æ¥è°ƒç”¨å‡½æ•°fï¼š f.call(o)æˆ–è€…f.apply(o); bind()æ–¹æ³•ï¼š var g = f.bind(o);//é€šè¿‡è°ƒç”¨g(x)æ¥è°ƒç”¨o.f(x)ã€‚ Function()æ„é€ å‡½æ•°æ‰€åˆ›å»ºçš„å‡½æ•°å¹¶ä¸ä½¿ç”¨è¯æ³•ä½œç”¨åŸŸï¼Œå‡½æ•°ä½“ä»£ç çš„ç¼–è¯‘æ€»æ˜¯ä¼šåœ¨é¡¶å±‚å‡½æ•°ï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰æ‰§è¡Œã€‚ ä¸å®Œå…¨å‡½æ•°ä¸è®°å¿†å‡½æ•°ã€‚ ç±»å’Œæ¨¡å— è°ƒç”¨æ„é€ å‡½æ•°ï¼š æ„é€ å‡½æ•°çš„prototypeå±æ€§è¢«ç”¨ä½œæ–°å¯¹è±¡çš„åŸå‹ï¼Œä»è€Œç»§æ‰¿äº†prototypeçš„å±æ€§ã€‚ å·¥å‚å‡½æ•°æ–¹æ³•ä¸æ„é€ å‡½æ•°æ–¹æ³•ã€‚ åŸå‹å¯¹è±¡æ˜¯ç±»çš„å”¯ä¸€æ ‡è¯†ï¼Œå½“ä¸”ä»…å½“ä¸¤ä¸ªå¯¹è±¡ç»§æ‰¿è‡ªåŒä¸€ä¸ªåŸå‹å¯¹è±¡æ—¶ï¼Œå®ƒä»¬æ‰å±äºåŒä¸€ä¸ªç±»çš„å®ä¾‹ã€‚ å¯¹äºä»»æ„å‡½æ•°F.prototype.constructor==F;ä¸€ä¸ªå¯¹è±¡çš„constructorå±æ€§æŒ‡ä»£è¿™ä¸ªç±»ã€‚ æ„é€ å‡½æ•°ä¸åŸå‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼š ä»»ä½•æ·»åŠ åˆ°æ„é€ å‡½æ•°å¯¹è±¡ï¼ˆä¸æ˜¯æŒ‡æ·»åŠ åˆ°æ„é€ å‡½æ•°å†…éƒ¨ï¼‰çš„å±æ€§éƒ½æ˜¯ç±»å­—æ®µå’Œç±»æ–¹æ³•ï¼Œå±äºç±»è€Œä¸å±äºç±»çš„æŸä¸ªå®ä¾‹ï¼› åŸå‹å¯¹è±¡çš„å±æ€§è¢«ç±»çš„æ‰€æœ‰å®ä¾‹æ‰€ç»§æ‰¿ï¼Œè‹¥åŸå‹å¯¹è±¡çš„å±æ€§å€¼æ˜¯å‡½æ•°çš„è¯ï¼Œè¿™ä¸ªå‡½æ•°å°±ä½œä¸ºç±»çš„å®ä¾‹æ–¹æ³•æ¥è°ƒç”¨ï¼Œå®ä¾‹æ–¹æ³•ç”±æ‰€æœ‰å®ä¾‹æ‰€å…±äº«ï¼› ç›´æ¥ç»™ç±»çš„æ¯ä¸ªå®ä¾‹å®šä¹‰éå‡½æ•°å±æ€§ï¼Œå®é™…ä¸Šå°±æ˜¯å®ä¾‹çš„å­—æ®µã€‚ å³ä½¿åˆ›å»ºå¯¹è±¡ä¹‹åï¼ŒåŸå‹çš„å±æ€§å‘ç”Ÿæ”¹å˜ï¼Œä¹Ÿä¼šå½±å“åˆ°ç»§æ‰¿è¿™ä¸ªåŸå‹çš„æ‰€æœ‰å®ä¾‹å¯¹è±¡ã€‚ æ£€æµ‹å¯¹è±¡çš„ç±»ï¼šinstanceofï¼ŒisPrototypeOf()ï¼Œè¿™é‡Œçš„ç»§æ‰¿å¯ä»¥ä¸æ˜¯ç›´æ¥ç»§æ‰¿ï¼› constructorå±æ€§ï¼› ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•ä¸é€‚ç”¨äºå¤šçª—å£å’Œå¤šæ¡†æ¶å­é¡µé¢ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°çš„åç§°ï¼› å·¥å‚æ–¹æ³•ï¼š æ„é€ å‡½æ•°æ–¹æ³•ï¼š toJSON()ç”¨äºåºåˆ—å·å¯¹è±¡ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰toJSON()æ–¹æ³•ï¼Œåˆ™JSON.stringify()å¹¶ä¸ä¼šå¯¹ä¼ å…¥çš„å¯¹è±¡åšåºåˆ—å·æ“ä½œï¼Œè€Œä¼šè°ƒç”¨toJSON()æ¥æ‰§è¡Œåºåˆ—å·æ“ä½œï¼ŒJSON.parse()æ˜¯å…¶é€†è¿‡ç¨‹ã€‚ forEachï¼š ç§æœ‰æ–¹æ³•ï¼š é€šè¿‡å°†å˜é‡ï¼ˆæˆ–å‚æ•°ï¼‰é—­åŒ…åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°å†…æ¥æ¨¡æ‹Ÿå®ç°ç§æœ‰å®ä¾‹å­—æ®µï¼š åˆ›å»ºå­ç±»çš„å…³é”®ï¼š B.prototype = inherit(A.prototype);//å­ç±»æ´¾ç”Ÿè‡ªçˆ¶ç±» B.prototype.constructor = B;//é‡è½½ç»§æ‰¿æ¥çš„constructorå±æ€§ ç”¨ç»„åˆä»£æ›¿ç»§æ‰¿çš„é›†åˆçš„å®ç°ï¼š Object.preventExtensions():å°†å¯¹è±¡è®¾ç½®ä¸ºä¸å¯æ‰©å±•çš„ï¼Œå³ä¸èƒ½ç»™å¯¹è±¡æ·»åŠ ä»»ä½•æ–°å±æ€§ï¼› Object.sealä¸Object.freeze:å°†å¯¹è±¡çš„æ‰€æœ‰å±æ€§è®¾ç½®ä¸ºåªè¯»å’Œä¸å¯é…ç½®çš„ã€‚ Object.create(null);//åˆ›å»ºä¸€ä¸ªä¸åŒ…å«åŸå‹çš„å¯¹è±¡ï¼Œä½¿ä¹‹èƒ½å¤Ÿç›´æ¥å¯¹å®ƒä½¿ç”¨inè¿ç®—ç¬¦ ä½œä¸ºç§æœ‰å‘½åç©ºé—´çš„å‡½æ•°ï¼š åˆ›å»ºå±å¤–å›¾åƒï¼š new Image(80,20).src = â€œimages/***.gifâ€; thisï¼š 1,æŒ‡å‘å‡½æ•°æ‰§è¡Œæ—¶çš„å½“å‰å¯¹è±¡ï¼›2,æ²¡æœ‰æ˜ç¡®çš„å½“å‰å¯¹è±¡æ—¶ï¼ŒæŒ‡å‘å…¨å±€å¯¹è±¡windowã€‚3,åœ¨äº‹ä»¶å¤„ç†ç¨‹åºçš„ä»£ç ä¸­ï¼Œå…³é”®å­—thiså¼•ç”¨è§¦å‘è¯¥äº‹ä»¶çš„æ–‡æ¡£å…ƒç´ ã€‚ è¡¨å•å…ƒç´ çš„å±æ€§ï¼š typeï¼Œformï¼ˆå¯¹åŒ…å«è¯¥å…ƒç´ çš„formå¯¹è±¡çš„åªè¯»å¼•ç”¨ï¼‰ï¼Œnameï¼Œvalueï¼›ä½¿ç”¨this.formå¼•ç”¨Formå¯¹è±¡ï¼Œthis.form.xå¼•ç”¨åä¸ºxçš„å…„å¼Ÿè¡¨å•å…ƒç´ ã€‚ cookieçš„æ€§è´¨ï¼š expiresï¼Œpathï¼Œdomainï¼Œsecureã€‚ å‡½æ•°ç›´æ¥é‡ä¸Function()æ„é€ å‡½æ•°åˆ›å»ºå‡½æ•°çš„æ–¹æ³•ï¼šé€‚ç”¨äºåªç”¨ä¸€æ¬¡ï¼Œæ— éœ€å‘½åã€‚ å±æ€§calleeï¼š ç”¨æ¥å¼•ç”¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ã€‚ f.call(o,1,2);ç­‰ä»·äºï¼š o.m = f; o.m(1,2); delete o.m; åˆ é™¤ä¸€ä¸ªå±æ€§ï¼š delete book.chapter2ã€‚ åœ¨æ–¹æ³•ä¸»ä½“çš„å†…éƒ¨ï¼Œthisçš„å€¼å°±å˜æˆäº†è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ã€‚ JSå¯¹è±¡éƒ½â€œç»§æ‰¿â€åŸå‹å¯¹è±¡çš„å±æ€§ã€‚ å±æ€§çš„ç»§æ‰¿åªå‘ç”Ÿäºè¯»å±æ€§å€¼æ—¶ï¼Œè€Œåœ¨å†™å±æ€§å€¼æ—¶ä¸å‘ç”Ÿã€‚ å®ä¾‹å±æ€§æœ‰è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œå®ä¾‹æ–¹æ³•æ˜¯ä¸€ä¸ªç±»å…±äº«çš„ã€‚ è‹¥è¦ç”Ÿæˆç±»Complexçš„ä¸€ä¸ªå­ç±»ï¼Œåªéœ€ç¡®ä¿æ–°ç±»çš„åŸå‹å¯¹è±¡æ˜¯Complexçš„ä¸€ä¸ªå®ä¾‹ï¼›è¿™æ ·å®ƒå°±èƒ½ç»§æ‰¿Complex.prototypeçš„æ‰€æœ‰å±æ€§ï¼š MoreComplex.prototype = new Complex(0,0)ï¼› MoreComplex.prototype.constructor = MoreComplex; Object.property ç­‰ä»·äº Object[â€œpropertyâ€] -&gt;å…³è”æ•°ç»„ã€‚ åªæœ‰é‚£äº›çœŸæ­£å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„å…ƒç´ æ‰èƒ½å¤Ÿåˆ†é…å†…å­˜ã€‚ æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥é‡ï¼š var pattern = /S$/;å³ï¼švar pattern = new RegExp(â€œS$â€); åœ¨å¤åˆ¶å’Œä¼ é€’æ—¶ä½¿ç”¨çš„æ˜¯å¼•ç”¨ï¼Œä½†åœ¨æ¯”è¾ƒå®ƒä»¬æ—¶ä½¿ç”¨çš„å´æ˜¯å€¼ã€‚ é€šè¿‡è®¾ç½®class.prototypeå±æ€§æ¥å®šä¹‰æ‰€æœ‰ç±»å®ä¾‹å…±äº«çš„æ–¹æ³•å’Œå¸¸é‡ã€‚ Function()æ„é€ å‡½æ•° å‡½æ•°ç›´æ¥é‡ å…è®¸è¿è¡Œæ—¶åŠ¨æ€åœ°åˆ›å»ºå’Œç¼–è¯‘JSä»£ç  é™æ€ æ¯æ¬¡è°ƒç”¨éƒ½ä¼šè§£æå‡½æ•°ä½“å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡ ç›¸å ä¸ä½¿ç”¨è¯æ³•ä½œç”¨åŸŸä½œä¸ºé¡¶çº§å‡½æ•° null == undefined -&gt;true; null === undefined -&gt; false; webæµè§ˆå™¨ä¸­çš„JS å¦‚æœä¸¤ä¸ªçª—å£åŒ…å«çš„è„šæœ¬æŠŠDocumentçš„domainå±æ€§è®¾ç½®æˆç›¸åŒçš„å€¼ï¼Œåˆ™è¿™ä¸¤ä¸ªçª—å£å°±ä¸å†å—åŒæºç­–ç•¥çš„çº¦æŸï¼Œèƒ½å¤Ÿç›¸äº’è¯»å–å¯¹æ–¹çš„å±æ€§ã€‚ 1, å½“HTMLè§£æå™¨é‡åˆ°scriptæ ‡ç­¾å…ƒç´ æ—¶ï¼Œå®ƒé»˜è®¤å¿…é¡»å…ˆæ‰§è¡Œè„šæœ¬ï¼Œç„¶åå†æ¢å¤æ–‡æ¡£çš„è§£æå’Œæ¸²æŸ“ï¼› 2, scriptæ ‡ç­¾çš„deferå±æ€§ï¼šä½¿å¾—æµè§ˆå™¨å»¶è¿Ÿè„šæœ¬çš„æ‰§è¡Œï¼Œç›´åˆ°æ–‡æ¡£çš„è½½å…¥å’Œè§£æå®Œæˆï¼›æŒ‰é¡ºåºæ‰§è¡Œã€‚ 3, asyncå±æ€§ï¼šä½¿å¾—æµè§ˆå™¨å°½å¿«çš„æ‰§è¡Œè„šæœ¬ï¼Œè€Œä¸ç”¨åœ¨ä¸‹è½½è„šæœ¬æ—¶é˜»å¡æ–‡æ¡£çš„è§£æï¼›æœ‰å¯èƒ½æ— åºæ‰§è¡Œã€‚ windowå¯¹è±¡ Windowå¯¹è±¡çš„locationå±æ€§å¼•ç”¨çš„æ˜¯Locationå¯¹è±¡ï¼š window.location === document.location //true Locationå¯¹è±¡çš„toStringæ–¹æ³•è¿”å›çš„æ˜¯å®ƒçš„hrefå±æ€§çš„å€¼ã€‚ Açª—å£ä¸­è°ƒç”¨Bçª—å£ä¸­çš„å‡½æ•°ï¼Œæ­¤å‡½æ•°åœ¨å®šä¹‰å®ƒçš„ä½œç”¨åŸŸä¸­æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨è°ƒç”¨å®ƒçš„ä½œç”¨åŸŸä¸­æ‰§è¡Œã€‚ å¯¹äºå†…ç½®çš„ç±»ï¼Œæ¯ä¸ªçª—å£éƒ½æœ‰æ„é€ å‡½æ•°çš„ä¸€ä¸ªç‹¬ç«‹å‰¯æœ¬å’Œæ„é€ å‡½æ•°å¯¹åº”åŸå‹å¯¹è±¡çš„ä¸€ä¸ªç‹¬ç«‹å‰¯æœ¬ã€‚ è„šæœ¬åŒ–æ–‡æ¡£ ä¸ºæŸäº›HTMLå…ƒç´ è®¾ç½®nameæˆ–idå±æ€§å€¼ï¼Œå°†è‡ªåŠ¨ä¸ºwindowä¸documentå¯¹è±¡åˆ›å»ºå¯¹åº”çš„å±æ€§ï¼Œå…¶å±æ€§å€¼æŒ‡å‘è¡¨ç¤ºè¯¥æ–‡æ¡£å…ƒç´ çš„HTMLElementå¯¹è±¡ã€‚ é€šè¿‡CSSé€‰æ‹©å™¨é€‰å–å…ƒç´ ï¼š querySelectorAll()ï¼ŒquerySelector()ï¼›æ¥å—ä¸€ä¸ªåŒ…å«CSSé€‰æ‹©å™¨çš„å­—ç¬¦ä¸²å‚æ•°ã€‚ Documentã€Elementã€Textå¯¹è±¡éƒ½æ˜¯Nodeå¯¹è±¡ï¼Œå…¶å±æ€§ï¼š parentNodeï¼ŒchildNodesï¼ŒfirstChildï¼ŒlastChildï¼ŒnextSiblingï¼ŒprevioursSiblingï¼ŒnodeTypeï¼ŒnodeValueï¼ŒnodeNameï¼ŒtextContentã€‚ Elementå±æ€§ï¼š attributesï¼ŒinnerHTML; DocumentFragmentæ˜¯ä¸€ç§ç‰¹æ®Šçš„Nodeï¼Œä½œä¸ºå…¶ä»–èŠ‚ç‚¹çš„ä¸€ä¸ªä¸´æ—¶å®¹å™¨ã€‚ æ»šåŠ¨æ¡ä½ç½®ï¼š window.pageXOffset/pageYOffset; æŸ¥è¯¢è§†å£å°ºå¯¸ï¼š windows.innerWidth/innerHeight; HTML5ä¸­ï¼Œinputæ ‡ç­¾çš„placeholderå±æ€§æŒ‡å®šäº†ç”¨æˆ·è¾“å…¥å‰åœ¨è¾“å…¥åŸŸæ˜¾ç¤ºçš„æç¤ºæ¶ˆæ¯ã€‚ Documentç±»å‹å®šä¹‰äº†åˆ›å»ºElementå’ŒTextå¯¹è±¡çš„æ–¹æ³•ï¼š document.createTextNode(â€œtext node contentâ€); Nodeç±»å‹å®šä¹‰äº†åœ¨èŠ‚ç‚¹æ ‘ä¸­æ’å…¥ã€åˆ é™¤å’Œæ›¿æ¢çš„æ–¹æ³•ï¼š parent.appendChild(child);//æ’å…¥parentå…ƒç´ çš„æœ€åï¼› parent.insertBefore(child,parent.childNodes[n]; n.parentNode.removeChild(n); n.parentNode.replaceChild(document.createTextNode(â€œ[ REDACTED ]â€), n); è„šæœ¬åŒ–CSS å†…è”æ ·å¼ï¼š e.style.position=â€relativeâ€; è®¡ç®—æ ·å¼ï¼š window.getComputedStyle(element,null); äº‹ä»¶å¤„ç† é€šè¿‡HTMLå±æ€§æ¥æ³¨å†Œäº‹ä»¶å¤„ç†ç¨‹åºæ˜¯ä¸€ä¸ªä¾‹å¤–ï¼Œå®ƒä»¬è¢«è½¬æ¢ä¸ºèƒ½å­˜å–å…¨å±€å˜é‡çš„é¡¶çº§å‡½æ•°è€Œéä»»ä½•æœ¬åœ°å˜é‡ã€‚ åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè§¦å‘æŸç±»äº‹ä»¶ï¼ˆæ¯”å¦‚å•å‡»onclickäº‹ä»¶ï¼‰ï¼Œå¦‚æœæ­¤å¯¹è±¡å®šä¹‰äº†æ­¤äº‹ä»¶çš„å¤„ç†ç¨‹åºï¼Œé‚£ä¹ˆæ­¤äº‹ä»¶å°±ä¼šè°ƒç”¨è¿™ä¸ªå¤„ç†ç¨‹åºï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰æ­¤äº‹ä»¶å¤„ç†ç¨‹åºæˆ–è€…äº‹ä»¶è¿”å›trueï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶ä¼šå‘è¿™ä¸ªå¯¹è±¡çš„çˆ¶çº§å¯¹è±¡ä¼ æ’­ï¼Œä»é‡Œåˆ°å¤–ï¼Œç›´è‡³å®ƒè¢«å¤„ç†ï¼ˆçˆ¶çº§å¯¹è±¡æ‰€æœ‰åŒç±»äº‹ä»¶éƒ½å°†è¢«æ¿€æ´»ï¼‰ï¼Œæˆ–è€…å®ƒåˆ°è¾¾äº†å¯¹è±¡å±‚æ¬¡çš„æœ€é¡¶å±‚ï¼Œå³documentå¯¹è±¡ï¼ˆæœ‰äº›æµè§ˆå™¨æ˜¯windowï¼‰ã€‚ jQuery each()åªèƒ½éå†jQueryå¯¹è±¡ï¼Œè€ŒjQuery.each()å¯ä»¥éå†æ•°ç»„å…ƒç´ æˆ–å¯¹è±¡å±æ€§ã€‚ focusä¸bluräº‹ä»¶ä¸æ”¯æŒå†’æ³¡ï¼Œè€Œfocusinä¸focusoutæ”¯æŒï¼› mouseoverä¸mouseoutæ”¯æŒå†’æ³¡ï¼Œmouseenterä¸mouseleaveä¸æ”¯æŒï¼›","link":"/2015/06/15/JavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%81%AE%E7%AC%94%E8%AE%B0/"},{"title":"Javascript å‡½æ•°å¼ç¼–ç¨‹ã®ä¹¦æ‘˜","text":"ç« ä¸€1ï¼Œç¡®å®šæŠ½è±¡ï¼Œå¹¶ä¸ºå…¶æ„å»ºå‡½æ•°ï¼›2ï¼Œåˆ©ç”¨å·²æœ‰çš„å‡½æ•°æ¥æ„å»ºæ›´ä¸ºå¤æ‚çš„æŠ½è±¡ï¼›3ï¼Œé€šè¿‡å°†ç°æœ‰çš„å‡½æ•°ä¼ ç»™å…¶ä»–çš„å‡½æ•°æ¥æ„å»ºæ›´åŠ å¤æ‚çš„æŠ½è±¡ã€‚ ç« ä¸€1ï¼Œç¡®å®šæŠ½è±¡ï¼Œå¹¶ä¸ºå…¶æ„å»ºå‡½æ•°ï¼›2ï¼Œåˆ©ç”¨å·²æœ‰çš„å‡½æ•°æ¥æ„å»ºæ›´ä¸ºå¤æ‚çš„æŠ½è±¡ï¼›3ï¼Œé€šè¿‡å°†ç°æœ‰çš„å‡½æ•°ä¼ ç»™å…¶ä»–çš„å‡½æ•°æ¥æ„å»ºæ›´åŠ å¤æ‚çš„æŠ½è±¡ã€‚ ç« äºŒ1ï¼Œå‡½æ•°æ—¶ä¸€ç­‰å…¬æ°‘ï¼š å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€åº”è¯¥æ˜¯ä¿ƒè¿›åˆ›é€ å’Œä½¿ç”¨å‡½æ•°çš„ï¼› 2ï¼Œapplicative ç¼–ç¨‹ï¼š å‡½æ•°Aä½œä¸ºå‚æ•°æä¾›ç»™å‡½æ•°Bï¼› 3ï¼ŒJavaScriptå¯¹è±¡çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼› ç« ä¸‰è¯æ³•ä½œç”¨åŸŸï¼š æŒ‡ä¸€ä¸ªå˜é‡çš„å¯è§æ€§ï¼ŒåŠå…¶æ–‡æœ¬è¡¨è¿°çš„æ¨¡æ‹Ÿå€¼ï¼›å˜é‡æŸ¥æ‰¾ä»æœ€å†…å±‚èŒƒå›´å‘å¤–æ‰©å±•ã€‚ åŠ¨æ€ä½œç”¨åŸŸï¼š 1ï¼Œç»´æŠ¤ä¸€å¼ â€å€¼â€œçš„å…¨å±€è¡¨ï¼ˆç»´æŠ¤ä¸€ä¸ªå‘½åç»‘å®šæ ˆçš„å…¨å±€æ˜ å°„ï¼‰ï¼›2ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥æŸ¥è¯¢ç»‘å®šçš„å€¼ï¼›3ï¼Œç¼ºç‚¹ï¼šä»»ä½•ç»™å®šçš„ç»‘å®šå€¼ï¼Œåœ¨ç¡®å®šè°ƒç”¨å…¶å‡½æ•°å‰ï¼Œéƒ½æ˜¯ä¸å¯çŸ¥çš„ã€‚ é—­åŒ…ï¼š é—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ•è·ä½œç”¨åŸŸå†…çš„å¤–éƒ¨ç»‘å®šï¼ˆä¾‹å¦‚ï¼Œä¸æ˜¯è‡ªå·±çš„å‚æ•°ï¼‰ã€‚è¿™äº›ç»‘å®šæ˜¯ä¸ºäº†ä¹‹åä½¿ç”¨ï¼ˆå³ä½¿åœ¨è¯¥ä½œç”¨åŸŸå·²ç»ç»“æŸï¼‰è€Œè¢«å®šä¹‰çš„ã€‚å¦‚æœä¸€ä¸ªå˜é‡çš„å¼•ç”¨åŒæ—¶å­˜åœ¨äºé—­åŒ…çš„å†…å¤–éƒ¨ï¼Œåˆ™å®ƒçš„å˜åŒ–å¯ä»¥è·¨è¶Šçœ‹ä¼¼ç§æœ‰çš„ç•Œé™ï¼Œå› æ­¤JavaScriptç»å¸¸ä½¿ç”¨å¦‚ä¸‹æ¨¡å¼ï¼ŒæŠŠæ•è·çš„å˜é‡ä½œä¸ºç§æœ‰æ•°æ®ï¼š 12345678910111213var pingpong = (function() { var private = 0; return { inc: function(n) { return private += n; } dec: function(n) { return private -= n; } }; })(); pingpong.inc(10); pingpong.dec(7); ç« å››é«˜é˜¶å‡½æ•°ï¼š 1ï¼Œå®ƒæ˜¯ä¸€ç­‰å…¬æ°‘ï¼›2ï¼Œä»¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼›3ï¼Œä»¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¿”å›ç»“æœï¼› é—­åŒ…ï¼š 1ï¼Œé—­åŒ…ä¼šæ•è·ä¸€ä¸ªå€¼ï¼ˆæˆ–å¼•ç”¨ï¼‰ï¼Œå¹¶å¤šæ¬¡è¿”å›ç›¸åŒçš„å€¼ï¼›2ï¼Œæ¯ä¸€ä¸ªæ–°çš„é—­åŒ…éƒ½ä¼šæ•è·ä¸ä¸€æ ·çš„å€¼ï¼› ç« äº”æŸ¯é‡ŒåŒ–å‡½æ•°ï¼š é€æ¸è¿”å›æ¶ˆè€—å‚æ•°çš„å‡½æ•°ï¼Œç›´åˆ°æ‰€æœ‰å‚æ•°è€—å°½ï¼› éƒ¨åˆ†åº”ç”¨å‡½æ•°ï¼š æ˜¯ä¸€ä¸ªéƒ¨åˆ†æ‰§è¡Œï¼Œç­‰å¾…æ¥æ”¶å‰©ä½™çš„å‚æ•°ç«‹å³æ‰§è¡Œçš„å‡½æ•°ï¼› ç»„åˆå‡½æ•°ï¼š _.compose: ä»å³å¾€å·¦æ‰§è¡Œï¼Œæœ€å³è¾¹çš„å‡½æ•°çš„ç»“æœä¼šè¢«é€å…¥å…¶å·¦ä¾§çš„å‡½æ•°ï¼Œä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚ ç« å…­å°¾é€’å½’ï¼š å‡½æ•°ï¼ˆé™¤äº†åœæ­¢æ¡ä»¶è¿”å›å€¼ï¼‰çš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯é€’å½’è°ƒç”¨ï¼› é€’å½’å’Œç»„åˆå‡½æ•°ï¼š andifyä¸orifyï¼› ç›¸äº’å…³è”å‡½æ•°ï¼š ä¸¤ä¸ªæˆ–å¤šä¸ªå‡½æ•°ç›¸äº’è°ƒç”¨ä¼šè¢«ç§°ä¸ºç›¸äº’é€’å½’ï¼Œé€šè¿‡ç›¸äº’é€’å½’è°ƒç”¨æ¥å›åå¼¹å½¼æ­¤ä¹‹é—´é€’å‡æŸä¸ªç»å¯¹å€¼ï¼Œç›´åˆ°ä¸€æ–¹æˆ–å¦ä¸€æ–¹è¾¾åˆ°é›¶ï¼› è¹¦åºŠåŸç†ï¼š é€šè¿‡æ‰“åŒ…è°ƒç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ï¼›trampolineå‡½æ•°ï¼šä¸æ–­è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼ï¼Œç›´åˆ°å®ƒä¸å†æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ ç« ä¸ƒçº¯å‡½æ•°ï¼š 1ï¼Œå…¶ç»“æœåªèƒ½ä»å®ƒçš„å‚æ•°çš„å€¼æ¥è®¡ç®—ï¼›2ï¼Œä¸èƒ½ä¾èµ–äºèƒ½è¢«å¤–éƒ¨æ“ä½œæ”¹å˜çš„æ•°æ®ï¼›3ï¼Œä¸èƒ½æ”¹å˜å¤–éƒ¨çŠ¶æ€ã€‚ å¹‚ç­‰æ€§ï¼š å¯¹åŒä¸€çš„å‚æ•°è¿è¡Œä¸€æ¬¡å‡½æ•°åº”è¯¥ä¸è¿ç»­ä¸¤æ¬¡è¿è¡Œæ˜¯ä¸€ä¸ªç»“æœã€‚ ä¸å˜æ€§ï¼š ä¾‹å¦‚å­—ç¬¦ä¸²ï¼› å¯¹è±¡çš„ä¸å˜æ€§ï¼š 1ï¼Œä¸å¯å˜å¯¹è±¡åº”è¯¥åœ¨æ„é€ æ—¶å›ºå®šå®ƒä»¬çš„å€¼ä¹‹åä¸èƒ½å†ä¿®æ”¹ï¼›2ï¼Œä¸å¯å˜å¯¹è±¡æ“ä½œå¹¶è¿”å›æ–°å¯¹è±¡ã€‚ ç« å…«æƒ°æ€§é“¾ï¼š åœ¨è°ƒç”¨valueä¹‹å‰ï¼Œ_.chainæ˜¯æƒ°æ€§çš„ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿï¼› thunkï¼š å°è£…äº†ä¸€äº›è¡Œä¸ºçš„å‡½æ•°ï¼› ç®¡é“ï¼›","link":"/2015/07/19/Javascript%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E3%81%AE%E4%B9%A6%E6%91%98/"},{"title":"Monorepo ä¸‹ Git å·¥ä½œæµçš„æœ€ä½³å®è·µ","text":"æ²¡æœ‰å“ªä¸€ç§ Git å·¥ä½œæµæ˜¯é“¶å¼¹ï¼Œåˆé€‚çš„ Git å·¥ä½œæµå¾€å¾€å–å†³äºé¡¹ç›®çš„ä»£ç è§„æ¨¡ã€åä½œäººæ•°ã€åº”ç”¨åœºæ™¯ç­‰ï¼›æœ¬æ¬¡åˆ†äº«å…ˆä»é€‚åˆå°å‹ Monorepo çš„ Feature branch å·¥ä½œæµå¼€å§‹åˆ†äº«ï¼Œæ¥ç€åˆ†äº«é€‚ç”¨äºä¸­å¤§å‹ Monorepo çš„ Trunk-based å·¥ä½œæµï¼Œå¹¶ç»™å‡ºä¸€äº›é€‰å‹æ ‡å‡†ä¾›åŒå­¦ä»¬å‚è€ƒï¼Œå¸Œæœ›é€šè¿‡æœ¬æ¬¡åˆ†äº«ï¼Œå¤§å®¶èƒ½æ‰¾åˆ°åˆé€‚è‡ªå·± Monorepo å·¥ç¨‹çš„ Git å·¥ä½œæµï¼ èƒŒæ™¯æ²¡æœ‰å“ªä¸€ç§ Git å·¥ä½œæµæ˜¯é“¶å¼¹ï¼Œåˆé€‚çš„ Git å·¥ä½œæµå¾€å¾€å–å†³äºé¡¹ç›®çš„ä»£ç è§„æ¨¡ã€åä½œäººæ•°ã€åº”ç”¨åœºæ™¯ç­‰ï¼›æœ¬æ¬¡åˆ†äº«å…ˆä»é€‚åˆå°å‹ Monorepo çš„ Feature branch å·¥ä½œæµå¼€å§‹åˆ†äº«ï¼Œæ¥ç€åˆ†äº«é€‚ç”¨äºä¸­å¤§å‹ Monorepo çš„ Trunk-based å·¥ä½œæµï¼Œå¹¶ç»™å‡ºä¸€äº›é€‰å‹æ ‡å‡†ä¾›åŒå­¦ä»¬å‚è€ƒï¼Œå¸Œæœ›é€šè¿‡æœ¬æ¬¡åˆ†äº«ï¼Œå¤§å®¶èƒ½æ‰¾åˆ°åˆé€‚è‡ªå·± Monorepo å·¥ç¨‹çš„ Git å·¥ä½œæµï¼ å‰ç½®çŸ¥è¯†æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ Git å·¥ä½œæµè«è¿‡äº Git flow, Gitlab flow, Github flowï¼Œè€Œå¯¹äº feature branch å’Œ trunk-based æ¯”è¾ƒé™Œç”Ÿï¼Œé‚£ä¹ˆä»¥ä¸Šå‡ ç§ flow æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ Feature branch å’Œ Trunk-based å·¥ä½œæµæ˜¯æ¯”è¾ƒæ–°æ™‹çš„æ¦‚å¿µï¼ŒäºŒè€…æ˜¯ç›¸å¯¹çš„ã€äº’æ–¥çš„ï¼Œå®ƒä»¬ç»„æˆä¸€ä¸ªå…¨é›†ï¼› Git flow, Gitlab flow, Github flow éƒ½å±äº feature branch developmentï¼Œå®ƒä»¬æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼šéƒ½é‡‡ç”¨ã€åŠŸèƒ½é©±åŠ¨å¼å¼€å‘ã€ï¼Œå³ï¼šéœ€æ±‚æ˜¯å¼€å‘çš„èµ·ç‚¹ï¼Œå…ˆæœ‰éœ€æ±‚å†æœ‰åŠŸèƒ½åˆ†æ”¯ï¼ˆfeature branchï¼‰æˆ–è€…è¡¥ä¸åˆ†æ”¯ï¼ˆhotfix branchï¼‰ï¼› é€‚ç”¨åœºæ™¯åœ¨ Monorepo å·¥ç¨‹ä¸­ï¼Œä½¿ç”¨ feature branch development å¼€å‘æ¨¡å¼æ—¶ï¼Œéšç€ä»£ç åº“å¤æ‚æ€§å’Œå›¢é˜Ÿè§„æ¨¡çš„å¢é•¿ï¼Œå¹¶è¡Œçš„ã€é•¿æœŸåˆ†æ”¯ã€ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œè¿™äº›åˆ†æ”¯åœ¨åˆå…¥ä¸»å¹²æ—¶ï¼Œå°†ä¼šé¢‘ç¹é‡åˆ°å†²çªæˆ–è€…ä¸å…¼å®¹çš„æƒ…å†µï¼Œè€Œæ‰‹åŠ¨è§£å†³ä»£ç å†²çªå¾€å¾€ä¼šå¼•å…¥ Bugã€‚ è€Œ trunk-based development é¼“åŠ±å¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€äº›å°çš„æäº¤åˆ›å»ºã€çŸ­æœŸåˆ†æ”¯ã€ï¼Œä»è€Œå¤§å¤§ç¼“è§£å†²çªé—®é¢˜ï¼Œæœ‰åŠ©äºä¿æŒç”Ÿäº§ç‰ˆæœ¬çš„æµç•…ã€‚ æ€»çš„æ¥è¯´ï¼Œé€‰æ‹©ä¸€ä¸ªå·¥ä½œæµä¸ä»…ä»…æ˜¯ä¸€ç³»åˆ—æ“ä½œå·¥å…·çš„æµç¨‹ï¼Œæˆ‘ä»¬å¾€å¾€è¿˜éœ€è¦å¯¹å®ƒèƒŒåçš„æ€æƒ³ä¹°å•ï¼›ä¸‹é¢çš„è¡¨æ ¼æ˜¯ä¸¤ç§å·¥ä½œæµæ¨¡å¼åœ¨å„ä¸ªç»´åº¦çš„é€‚ç”¨æƒ…å†µï¼š ç›®å‰å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ä½¿ç”¨çš„éƒ½æ˜¯ feature branch çš„å¼€å‘æ¨¡å¼ï¼Œå¦‚æœä½ çš„ä¸šåŠ¡æ˜¯å¤šäººå¼€å‘ä¸€ä¸ªå·¨å‹åº”ç”¨ï¼ˆå¦‚æŠ–éŸ³ä¸»ç«™ã€é£ä¹¦æ–‡æ¡£ç­‰ï¼‰ï¼Œåº”è¯¥å°è¯•ä½¿ç”¨ Trunk based å¼€å‘æ¨¡å¼ï¼Œè¿™ä¼šæé«˜ä»“åº“æ•´ä½“å·¥ç¨‹è´¨é‡å’Œç®¡ç†æ°´å¹³ã€‚ å±•å¼€è¯´è¯´Feature branch developmentä»€ä¹ˆæ˜¯ feature branch developmentï¼Ÿ å®šä¹‰ ã€åŠŸèƒ½åˆ†æ”¯å¼€å‘æ¨¡å¼ã€çš„æ ¸å¿ƒæ€æƒ³æ˜¯æ‰€æœ‰ç‰¹æ€§å¼€å‘éƒ½åº”è¯¥åœ¨ä¸“ç”¨çš„åˆ†æ”¯ï¼Œè€Œä¸æ˜¯ä¸»åˆ†æ”¯ä¸­è¿›è¡Œã€‚è¿™ç§å°è£…ä½¿å¤šä¸ªå¼€å‘äººå‘˜ï¼Œå¯ä»¥è½»æ¾åœ°åœ¨ä¸å¹²æ‰°ä¸»ä»£ç åº“çš„æƒ…å†µä¸‹å¤„ç†ç‰¹å®šåŠŸèƒ½ã€‚è¿™ä¹Ÿæ„å‘³ç€ä¸»åˆ†æ”¯æ°¸è¿œä¸ä¼šåŒ…å«æŸåçš„ä»£ç ï¼Œè¿™å¯¹äºæŒç»­é›†æˆç¯å¢ƒæ¥è¯´æ˜¯ä¸€ä¸ªå·¨å¤§çš„ä¼˜åŠ¿ã€‚â€“ Git Feature Branch Workflow | Atlassian Git Tutorial ä¸Šçº¿æ¨¡å¼ ä» master åˆ†æ”¯åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯ï¼ˆFeature Branchï¼‰ å¼€å‘è€…ä»¬åœ¨åŠŸèƒ½åˆ†æ”¯ä¸­å®Œæˆå¼€å‘å·¥ä½œ æ„å»ºåŠŸèƒ½åˆ†æ”¯ï¼Œå¹¶é€šçŸ¥ QA è¿›è¡ŒéªŒè¯ å¦‚æœå‘ç°ä»»ä½•é—®é¢˜ å¼€å‘è€…åˆ›å»ºä¸€ä¸ªåŸºäºåŠŸèƒ½åˆ†æ”¯çš„ä¿®å¤ MR ç»è¿‡ä»£ç å®¡é˜…å’Œåˆå¹¶è¿‡ç¨‹å°†ä¿®å¤ MR åˆå…¥åŠŸèƒ½åˆ†æ”¯ å†é‡æ–°æ„å»ºéƒ¨ç½²ï¼Œå¹¶é€šçŸ¥ QA è¿›è¡ŒéªŒè¯ QA éªŒè¯é€šè¿‡åï¼Œå°†åŠŸèƒ½åˆ†æ”¯å‘å¸ƒè‡³çº¿ä¸Šï¼Œç„¶åå°†å…¶åˆå¹¶å…¥ä¸»å¹²ååˆ é™¤ ä¸ºä»€ä¹ˆä½¿ç”¨ feature branch developmentï¼Ÿ å¤šåŠŸèƒ½å¹¶è¡Œå¼€å‘ ä½¿å¤šä¸ªå¼€å‘äººå‘˜å¯ä»¥è½»æ¾åœ°åœ¨ä¸å¹²æ‰°ä¸»ä»£ç åº“çš„æƒ…å†µä¸‹å¤„ç†ç‰¹å®šåŠŸèƒ½ã€‚ ä¿æŒä¸»åˆ†æ”¯ç¨³å®š ä¸»åˆ†æ”¯æ°¸è¿œä¸ä¼šåŒ…å«æŸåçš„ä»£ç ï¼Œè¿™å¯¹äºæŒç»­é›†æˆç¯å¢ƒæ¥è¯´æ˜¯ä¸€ä¸ªå·¨å¤§çš„ä¼˜åŠ¿ã€‚ å¿ƒæ™ºè´Ÿæ‹…ä½ ä»…éœ€äº†è§£ç®€å•çš„æ“ä½œå³å¯å®è·µï¼Œæ— éœ€äº†è§£ cherry-pick, feature flag ç­‰æ¦‚å¿µã€‚ Trunk-based developmentä»€ä¹ˆæ˜¯ trunk-based developmentï¼Ÿ å®šä¹‰ ã€åŸºäºä¸»å¹²çš„å¼€å‘æ¨¡å¼ã€æ˜¯ä¸€ç§ç‰ˆæœ¬æ§åˆ¶ç®¡ç†å®è·µï¼Œå¼€å‘è€…å°†å°è€Œé¢‘ç¹çš„æ›´æ–°åˆå¹¶åˆ°æ ¸å¿ƒã€ä¸»å¹²ã€ï¼ˆé€šå¸¸æ˜¯ master åˆ†æ”¯ï¼‰ã€‚ è¿™æ˜¯ DevOps å›¢é˜Ÿä¸­çš„ä¸€ç§å¸¸è§åšæ³•ï¼Œä¹Ÿæ˜¯ DevOps ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒç®€åŒ–äº†åˆå¹¶å’Œé›†æˆé˜¶æ®µã€‚äº‹å®ä¸Šï¼Œå®ƒä¹Ÿæ˜¯ CI/CD çš„å¿…å¤‡å®è·µã€‚ ä¸å…¶å®ƒå­˜åœ¨ã€é•¿æœŸåˆ†æ”¯ã€çš„åŠŸèƒ½åˆ†æ”¯ç­–ç•¥ç›¸æ¯”ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€äº›å°çš„æäº¤åˆ›å»ºã€çŸ­æœŸåˆ†æ”¯ã€ã€‚éšç€ä»£ç åº“å¤æ‚æ€§å’Œå›¢é˜Ÿè§„æ¨¡çš„å¢é•¿ï¼Œã€åŸºäºä¸»å¹²çš„å¼€å‘æ¨¡å¼ã€æœ‰åŠ©äºä¿æŒç”Ÿäº§ç‰ˆæœ¬çš„æµç•…ã€‚â€“ Trunk-based Development | Atlassian ä¸Šçº¿æ¨¡å¼ ä»éƒ¨ç½²åˆ†æ”¯ä¸Šçº¿åŠè‡ªåŠ¨åŒ–æµç¨‹ï¼Œé€‚ç”¨äºä½é¢‘ç‡éƒ¨ç½²ï¼Œä»¥åŠè‡ªåŠ¨åŒ–æµ‹è¯•ä¸å…¨é¢çš„é¡¹ç›® (A dot represents an MR merged into master. Green dots means good commits that passed e2e tests, and red dot means a buggy commit which should be avoided when deploying/rollback) ä» master åˆ†æ”¯åˆ›å»ºä¸€ä¸ªéƒ¨ç½²åˆ†æ”¯ï¼ˆRCï¼‰ æ„å»ºéƒ¨ç½²åˆ†æ”¯ï¼ˆRCï¼‰ï¼Œå¹¶é€šçŸ¥ QA è¿›è¡ŒéªŒè¯ å¦‚æœå‘ç°ä»»ä½•é—®é¢˜ å¼€å‘è€…åˆ›å»ºä¸€ä¸ªåŸºäº master åˆ†æ”¯çš„ä¿®å¤ MR ç»è¿‡ä»£ç å®¡é˜…å’Œåˆå¹¶è¿‡ç¨‹å°†ä¿®å¤ MR åˆå…¥ master å°† commits cherrypick åˆ°éƒ¨ç½²åˆ†æ”¯ï¼ˆRCï¼‰ï¼Œå†é‡æ–°æ„å»ºéƒ¨ç½²ï¼Œå¹¶é€šçŸ¥ QA è¿›è¡ŒéªŒè¯ QA éªŒè¯é€šè¿‡åï¼Œå°†éƒ¨ç½²åˆ†æ”¯ï¼ˆRCï¼‰å‘å¸ƒè‡³çº¿ä¸Šï¼Œç„¶ååˆ é™¤è¯¥åˆ†æ”¯ï¼ˆRCï¼‰ ä»ä¸»å¹²åˆ†æ”¯ä¸Šçº¿å…¨è‡ªåŠ¨åŒ–æµç¨‹ï¼Œé€‚ç”¨äºéœ€è¦é«˜é¢‘ç‡éƒ¨ç½²ï¼Œä»¥åŠè‡ªåŠ¨åŒ–æµ‹è¯•è¾ƒä¸ºå…¨é¢çš„é¡¹ç›® (A dot represents an MR merged into master. Green dots means good commits that passed e2e tests, and red dot means a buggy commit which should be avoided when deploying/rollback) å®šæ—¶éƒ¨ç½²ï¼š æ¯å¤©æˆ–è€…æ¯å°æ—¶åˆ°äº†ç‰¹å®šæ—¶é—´ï¼Œéƒ¨ç½²æœºå™¨äººè‡ªåŠ¨æ‰¾åˆ°å½“å‰æœ€æ–°é€šè¿‡å…¨éƒ¨ç«¯åˆ°ç«¯æµ‹è¯•çš„ä»£ç (ç‰¹å®šçš„ commit hash)ï¼Œç„¶åå°†ä¹‹éƒ¨ç½²ä¸Šçº¿ã€‚ æŒç»­éƒ¨ç½²ï¼š æ¯å½“æœ‰æ–°ä»£ç åˆå¹¶è¿›ä¸»å¹²åˆ†æ”¯æ—¶ï¼Œéƒ¨ç½²æœºå™¨äººè‡ªåŠ¨éªŒè¯æ–°ä»£ç æ˜¯å¦é€šè¿‡æ‰€æœ‰ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œä»¥åŠæ˜¯å¦ä¸è¯¥é¡¹ç›®ç›¸å…³ï¼Œå¦‚æœæ˜¯åˆ™è‡ªåŠ¨éƒ¨ç½²ä¸Šçº¿ ä¸ºä»€ä¹ˆä½¿ç”¨ trunk-based developmentï¼Ÿ å…è®¸æŒç»­çš„ä»£ç é›†æˆï¼ˆCIï¼‰ åœ¨ã€åŸºäºä¸»å¹²çš„å¼€å‘æ¨¡å¼ã€ä¸­ï¼Œæºæºä¸æ–­çš„æäº¤åˆå…¥ä¸»å¹²åˆ†æ”¯ã€‚ä¸ºæ¯ä¸ªæäº¤æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶å’Œä»£ç è¦†ç›–ç‡ç›‘æ§å¯ä»¥å®ç°æŒç»­é›†æˆã€‚å½“æ–°ä»£ç åˆå¹¶åˆ°ä¸»å¹²ä¸­æ—¶ï¼Œä¼šè¿è¡Œè‡ªåŠ¨é›†æˆå’Œä»£ç è¦†ç›–æµ‹è¯•ä»¥éªŒè¯ä»£ç è´¨é‡ã€‚ ç¡®ä¿æŒç»­çš„ä»£ç å®¡æŸ¥ï¼ˆCRï¼‰ ã€åŸºäºä¸»å¹²çš„å¼€å‘æ¨¡å¼ã€çš„å¿«é€Ÿã€å°å‹æäº¤ä½¿ä»£ç å®¡æŸ¥æˆä¸ºä¸€ä¸ªæ›´æœ‰æ•ˆçš„è¿‡ç¨‹ã€‚å€ŸåŠ©å°å‹åˆ†æ”¯ï¼Œå¼€å‘äººå‘˜å¯ä»¥å¿«é€ŸæŸ¥çœ‹å’Œå®¡æŸ¥å°çš„æ›´æ”¹ã€‚ä¸è¯„å®¡è€…é˜…è¯»å¤§é¢ç§¯ä»£ç å˜æ›´çš„é•¿æœŸåŠŸèƒ½åˆ†æ”¯ç›¸æ¯”ï¼Œè¿™è¦å®¹æ˜“å¾—å¤šã€‚ æ”¯æŒè¿ç»­çš„ç”Ÿäº§ä»£ç å‘å¸ƒï¼ˆCDï¼‰ å›¢é˜Ÿåº”è¯¥æ¯å¤©é¢‘ç¹åœ°åˆå¹¶åˆ°ä¸»åˆ†æ”¯ã€‚ã€åŸºäºä¸»å¹²çš„å¼€å‘æ¨¡å¼ã€åŠªåŠ›ä½¿ä¸»å¹²åˆ†æ”¯ä¿æŒâ€œç»¿è‰²â€ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨æ¯æ¬¡æäº¤åˆå¹¶åè¿›è¡Œéƒ¨ç½²ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•ã€ä»£ç æ”¶æ•›å’Œä»£ç å®¡æŸ¥ï¼Œä¿è¯äº†åŸºäºä¸»å¹²çš„é¡¹ç›®å¯ä»¥éšæ—¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚ æ›´é€‚ç”¨äºå¤§å‹ Monorepo ä¸‹çš„å¤šäººåä½œåœºæ™¯ï¼ˆscalableï¼‰ å¤§å‹ Monorepo ä¸‹çš„å¤šäººåä½œåœºæ™¯æ›´æ˜“å‡ºç°ä»£ç å†²çªï¼Œä¸ä»…æ¶ˆè€—çš„å¤§é‡çš„äººåŠ›è§£å†³å†²çªï¼Œè¿˜å¢åŠ äº†ã€é•¿æœŸåˆ†æ”¯ã€åˆå…¥ã€ä¸»å¹²åˆ†æ”¯ã€å¼•å…¥ bug çš„å¯èƒ½æ€§ã€‚ä¸å…¶å®ƒå­˜åœ¨ã€é•¿æœŸåˆ†æ”¯ã€çš„åŠŸèƒ½åˆ†æ”¯ç­–ç•¥ç›¸æ¯”ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€äº›å°æäº¤åˆ›å»ºã€çŸ­æœŸåˆ†æ”¯ã€è¿›è¡Œå¿«é€Ÿè¿­ä»£ã€‚å› æ­¤ï¼Œéšç€ä»£ç åº“å¤æ‚æ€§å’Œå›¢é˜Ÿè§„æ¨¡çš„å¢é•¿ï¼Œã€åŸºäºä¸»å¹²çš„å¼€å‘æ¨¡å¼ã€ä¹Ÿèƒ½ä¿è¯é¡ºç•…çš„å¤šäººåä½œã€‚ çº¿æ€§çš„æäº¤å†å²ï¼ˆLinear historyï¼‰ Trunk-based development æ›´å®¹æ˜“åšåˆ°çº¿æ€§çš„ commit å†å²ï¼Œå®ƒæœ‰å¦‚ä¸‹å‡ ä¸ªå¥½å¤„ï¼š æ–¹ä¾¿æŸ¥çœ‹å’Œè·Ÿè¸ªå†å²è®°å½• æ–¹ä¾¿å›æº¯å˜æ›´ï¼Œæ¯”å¦‚ï¼šFeature A æ˜¯åœ¨ Bugfix B ä¹‹å‰æˆ–è€…ä¹‹åå¼•å…¥çš„ï¼Ÿ æ–¹ä¾¿æ’æŸ¥ bugï¼Œæ¯”å¦‚ï¼šä½¿ç”¨ Git bisect äºŒåˆ†æ’æŸ¥ï¼Œè€Œéçº¿æ€§å†å²åˆ™éš¾ä»¥æ“ä½œ æ’¤é”€å˜æ›´ï¼Œæ¯”å¦‚ï¼šå½“ä½ å‘ç°ä¸€ä¸ªæœ‰é—®é¢˜çš„ commitï¼Œç®€å•çš„ revert å¯¹åº”çš„ commit å³å¯ï¼Œè€Œéçº¿æ€§çš„å†å²ä¼šæœ‰å¾ˆå¤šè·¨åˆ†æ”¯çš„åˆå¹¶ï¼Œä½¿ revert å˜å¾—å›°éš¾ æœ‰æ•ˆçš„ä¸¤ä¸ªå‰æ æŒç»­é›†æˆå’Œæµ‹è¯• åœ¨æ¯æ¬¡ä»£ç åˆå¹¶å‰åï¼Œå¼€å‘è€…éƒ½éœ€è¦çŸ¥é“è‡ªå·±çš„ä»£ç å¯¹ä¸»å¹²å¸¦æ¥äº†ä»€ä¹ˆå½±å“ï¼Œå› æ­¤æŒç»­é›†æˆå’Œæµ‹è¯•çš„èƒ½åŠ›å¿…ä¸å¯å°‘ã€‚ åŠŸèƒ½å¼€å…³ å› ä¸ºåœ¨åŸºäºä¸»å¹²å¼€å‘æ—¶ï¼Œå¤§çš„åŠŸèƒ½è¢«åˆ†è§£ä¸ºå°æ”¹åŠ¨ï¼Œå› æ­¤å¯¹äºè¿˜æœªå®Œæˆè€Œä¹‹åéƒ¨åˆ†åˆå¹¶è¿›ä¸»å¹²çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦åŠŸèƒ½å¼€å…³æ¥ä¸è®©ä»–ä»¬è¿‡æ—©åœ°æš´éœ²ç»™ç”¨æˆ·ã€‚ åŠŸèƒ½å¼€å…³é€šå¸¸æ˜¯ä¸€å¥—ç‹¬ç«‹çš„æ§åˆ¶ç³»ç»Ÿï¼Œçº¿ä¸Šçš„ä»£ç æœ‰ä¸¤å¥—é€»è¾‘ï¼Œç„¶åé€šè¿‡å®æ—¶è¯»å–åŠŸèƒ½å¼€å…³çš„å–å€¼æ¥å†³å®šæ˜¯å¦éšè—æˆ–æš´éœ²æŸä¸ªåŠŸèƒ½ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨éƒ¨ç½²å®Œä¸€ä¸ªåŠŸèƒ½ç›¸å…³çš„æ‰€æœ‰ä»£ç ä¹‹åæ‰“å¼€æŸä¸ªåŠŸèƒ½å¼€å…³ã€‚ç„¶åå½“æ­¤åŠŸèƒ½å·²ç»ç¨³å®šå¹¶ä¸”è¢«æ°¸ä¹…åŠ å…¥äº§å“åï¼Œä¼šæŠŠåŠŸèƒ½å¼€å…³å’Œç›¸å…³çš„é€»è¾‘ä»£ç åˆ é™¤æ‰ã€‚ å‚è€ƒ A tidy, linear Git historyï¼šhttps://www.bitsnbites.eu/a-tidy-linear-git-history/","link":"/2022/12/31/Monorepo%20%E4%B8%8B%20Git%20%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"},{"title":"Node.js å¼€å‘æŒ‡å—ã®ä¹¦æ‘˜","text":"ç« ä¸‰1ï¼Œå•æ¬¡åŠ è½½ï¼š requireä¸ä¼šé‡å¤åŠ è½½æ¨¡å—ï¼Œæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡requireï¼Œè·å¾—çš„æ¨¡å—éƒ½æ˜¯åŒä¸€ä¸ªï¼› 2ï¼Œè¦†ç›–exportsï¼š å½“å°†ä¸€ä¸ªå¯¹è±¡å°è£…åˆ°æ¨¡å—ä¸­æ—¶ï¼Œexports.Hello = Hello,åˆ™éœ€ä½¿ç”¨require(â€˜./singleobjectâ€™).Helloæ¥è·å–å¯¹è±¡ï¼Œå¯ç®€åŒ–å¦‚ä¸‹ï¼šmodule.exports = Hello; æ­¤æ—¶å°±å¯ä»¥ç›´æ¥è·å–è¿™ä¸ªå¯¹è±¡äº†ï¼Œvar Hello = require(â€˜./helloâ€™); hello = new Hello(); 3ï¼Œåˆ›å»ºå…¨å±€é“¾æ¥ï¼š npm link expressï¼›ä»è€Œåœ¨å½“å‰ç›®å½•ä½¿ç”¨å…¨å±€å®‰è£…çš„expressï¼› 4ï¼Œ é€šè¿‡ä½¿ç”¨npm initäº¤äº’å¼åˆå§‹åŒ–ä¸€ä¸ªç¬¦åˆæ ‡å‡†çš„package.jsonï¼›å‘å¸ƒåŒ…ï¼šnpm publishï¼›æ›´æ”¹jsonæ–‡ä»¶ä¸­çš„versionå­—æ®µåï¼Œé‡æ–°å‘å¸ƒï¼Œè¾¾åˆ°æ›´æ–°ç‰ˆæœ¬çš„ç›®çš„ï¼›å–æ¶ˆå‘å¸ƒï¼šnpm unpublishï¼› ç« ä¸‰1ï¼Œå•æ¬¡åŠ è½½ï¼š requireä¸ä¼šé‡å¤åŠ è½½æ¨¡å—ï¼Œæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡requireï¼Œè·å¾—çš„æ¨¡å—éƒ½æ˜¯åŒä¸€ä¸ªï¼› 2ï¼Œè¦†ç›–exportsï¼š å½“å°†ä¸€ä¸ªå¯¹è±¡å°è£…åˆ°æ¨¡å—ä¸­æ—¶ï¼Œexports.Hello = Hello,åˆ™éœ€ä½¿ç”¨require(â€˜./singleobjectâ€™).Helloæ¥è·å–å¯¹è±¡ï¼Œå¯ç®€åŒ–å¦‚ä¸‹ï¼šmodule.exports = Hello; æ­¤æ—¶å°±å¯ä»¥ç›´æ¥è·å–è¿™ä¸ªå¯¹è±¡äº†ï¼Œvar Hello = require(â€˜./helloâ€™); hello = new Hello(); 3ï¼Œåˆ›å»ºå…¨å±€é“¾æ¥ï¼š npm link expressï¼›ä»è€Œåœ¨å½“å‰ç›®å½•ä½¿ç”¨å…¨å±€å®‰è£…çš„expressï¼› 4ï¼Œ é€šè¿‡ä½¿ç”¨npm initäº¤äº’å¼åˆå§‹åŒ–ä¸€ä¸ªç¬¦åˆæ ‡å‡†çš„package.jsonï¼›å‘å¸ƒåŒ…ï¼šnpm publishï¼›æ›´æ”¹jsonæ–‡ä»¶ä¸­çš„versionå­—æ®µåï¼Œé‡æ–°å‘å¸ƒï¼Œè¾¾åˆ°æ›´æ–°ç‰ˆæœ¬çš„ç›®çš„ï¼›å–æ¶ˆå‘å¸ƒï¼šnpm unpublishï¼› ç« å››1ï¼Œprocessï¼š process.argv: å‘½ä»¤è¡Œå‚æ•°æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯nodeï¼Œä»¥æ­¤ç±»æ¨ï¼›process.nextTick(callback): ä¸ºäº‹ä»¶å¾ªç¯è®¾ç½®ä¸€é¡¹ä»»åŠ¡ï¼ŒNode.jsä¼šåœ¨ä¸‹æ¬¡äº‹ä»¶å¾ªç¯å“åº”æ—¶è°ƒç”¨callbackï¼ˆä¸€èˆ¬ç”¨äºæ‹†åˆ†äº‹ä»¶ï¼Œä»è€Œå‡å°‘æ¯ä¸ªäº‹ä»¶çš„æ‰§è¡Œæ—¶é—´ï¼‰ï¼› 2ï¼Œconsoleï¼š console.trace(): å‘æ ‡å‡†é”™è¯¯æµè¾“å‡ºå½“å‰çš„è°ƒç”¨æ ˆï¼› 3ï¼Œutilï¼š util.inherits(constructor, superConstructor): ä»…ä»…ç»§æ‰¿superConstructoråœ¨å…¶åŸå‹ä¸­å®šä¹‰çš„å‡½æ•°ï¼Œè€Œæ„é€ å‡½æ•°å†…éƒ¨åˆ›é€ çš„å±æ€§å’Œå‡½æ•°éƒ½æ²¡æœ‰è¢«ç»§æ‰¿ï¼›util.inspect(object, [showHidden], [depth], [colors]): å°†ä»»æ„å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œé€šå¸¸ç”¨äºè°ƒè¯•å’Œé”™è¯¯è¾“å‡ºï¼› 4ï¼Œeventsï¼š 1234567events.EventEmitter: var events = require(&quot;events&quot;); var emitter = new events.EventEmitter(); emitter.on(&quot;someEvent&quot;, function(arg1, arg2) { console.lgo(&quot;listener1&quot;, arg1, arg2); });emitter.emit(&quot;someEvent&quot;, &quot;byvoid&quot;, 1991); result: listener1 byvoid 1991 emitter.emit(â€œerrorâ€);é€€å‡ºç¨‹åºå¹¶æ‰“å°è°ƒç”¨æ ˆã€‚åªè¦æ˜¯æ”¯æŒäº‹ä»¶å“åº”çš„æ ¸å¿ƒæ¨¡å—éƒ½æ˜¯EventEmitterçš„å­ç±»ï¼Œä¾‹å¦‚fsã€netã€httpã€‚ 5ï¼Œfs: fs.readFile(filename, [encoding], [callback(err, data)];fs.readFileSync(filename, [encoding]);ä¸åŒæ­¥I/Oå‡½æ•°ä¸åŒï¼Œnode.jsä¸­å¼‚æ­¥å‡½æ•°å¤§å¤šæ²¡æœ‰è¿”å›å€¼ã€‚ 6, HTTPæœåŠ¡å™¨: var http = requitr(â€˜httpâ€™); http.Serveræ˜¯ä¸€ä¸ªåŸºäºäº‹ä»¶çš„HTTPæœåŠ¡å™¨,ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªäº‹ä»¶: 1,request: å½“å®¢æˆ·ç«¯è¯·æ±‚åˆ°æ¥æ—¶è§¦å‘,æä¾›ä¸¤ä¸ªå‚æ•°reqä¸res,åˆ†åˆ«æ˜¯http.ServerRequestå’Œhttp.ServerResponseçš„å®ä¾‹.2,connection: å½“TCPè¿æ¥å»ºç«‹æ—¶è§¦å‘,æä¾›ä¸€ä¸ªå‚æ•°socket,æ˜¯net.Socketçš„å®ä¾‹ã€‚è¯¥äº‹ä»¶ç²’åº¦å¤§äºrequestã€‚3,close: å½“æœåŠ¡å™¨å…³é—­æ—¶è§¦å‘,è€Œä¸æ˜¯ç”¨æˆ·è¿æ¥æ–­å¼€æ—¶ã€‚ç”±äºæœ€å¸¸ç”¨çš„æ˜¯requestï¼Œå› æ­¤httpæä¾›äº†ä¸€ä¸ªæ·å¾„ï¼šhttp.createServer([requestListener])ï¼Œå…¶åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªHTTPæœåŠ¡å™¨å¹¶å°†requestListenerä½œä¸ºrequestäº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚ è€Œhttp.ServerRequestæä¾›äº†ä»¥ä¸‹ä¸‰ä¸ªäº‹ä»¶ç”¨äºæ§åˆ¶ä¼ è¾“ï¼š 1ï¼Œdataï¼šå½“è¯·æ±‚ä½“åˆ°æ¥æ—¶è§¦å‘ï¼Œå¹¶æä¾›ä¸€ä¸ªå‚æ•°chunkï¼Œè¡¨ç¤ºæ¥æ”¶åˆ°çš„æ•°æ®ã€‚2ï¼Œendï¼šå½“è¯·æ±‚ä½“æ•°æ®ä¼ è¾“å®Œæˆæ—¶ï¼Œè¯¥äº‹ä»¶è¢«è§¦å‘ã€‚3ï¼Œcloseï¼šç”¨æˆ·å½“å‰è¯·æ±‚ç»“æŸæ—¶è§¦å‘ã€‚ http.ServerResponseæ˜¯è¿”å›ç»™å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼š 1ï¼Œresponse.WriteHead(statusCode, [headers]): å‘å®¢æˆ·ç«¯å‘é€å“åº”å¤´ã€‚2ï¼Œresponse.write(data, [encoding]): å‘è¯·æ±‚çš„å®¢æˆ·ç«¯å‘é€å“åº”å†…å®¹ã€‚3ï¼Œresponse.end([data], [encoding]): ç»“æŸå“åº”ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯æ‰€æœ‰å‘é€å·²ç»å®Œæˆã€‚å¦‚æœä¸è°ƒç”¨ï¼Œå®¢æˆ·ç«¯å°†æ°¸è¿œå¤„äºç­‰å¾…çŠ¶æ€ã€‚ ç« äº”1ï¼Œå»ºç«‹ç½‘ç«™åŸºæœ¬ç»“æ„ï¼š express -t ejs microblog 2ï¼Œåˆ›å»ºåº”ç”¨å®ä¾‹ï¼š express.createServer() 3ï¼Œæ§åˆ¶æƒè½¬ç§»ï¼š expressåœ¨å¤„ç†è·¯ç”±è§„åˆ™æ—¶ï¼Œä¼šä¼˜å…ˆåŒ¹é…å…ˆå®šä¹‰çš„è·¯ç”±è§„åˆ™ï¼Œåé¢çš„è§„åˆ™å°†ä¼šè¢«å±è”½ï¼Œå¯ä½¿ç”¨next()è¿›è¡Œè½¬ç§»ã€‚ 4ï¼Œè·¯å¾„åŒ¹é…ï¼š app.get(â€˜/user/:usernameâ€™, function(req, res) { res.send(â€˜user: â€˜ + req.params.username); 5ï¼Œæ¨¡æ¿å¼•æ“ejsï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§æ ‡ç­¾ï¼š 123&lt;% code %&gt;ï¼šJavaScriptä»£ç ï¼›&lt;%= code %&gt;ï¼šæ˜¾ç¤ºæ›¿æ¢è¿‡htmlç‰¹æ®Šå­—ç¬¦çš„å†…å®¹ï¼›&lt;%- code %&gt;ï¼šæ˜¾ç¤ºåŸå§‹htmlå†…å®¹ã€‚ 6ï¼Œå…³é—­layoutï¼š app.set(â€˜view optionsâ€™, { layout: false });æŒ‡å®šlayoutï¼šfunction(req, res) { res.render(â€˜userlistâ€™, { title: â€˜åå°ç®¡ç†ç³»ç»Ÿâ€™, layout: â€˜adminâ€™ }); }; ä»è€ŒæŒ‡å®šadmin.ejsä½œä¸ºé¡µé¢å¸ƒå±€ã€‚ 7ï¼Œç‰‡æ®µè§†å›¾ï¼š partialsã€‚ 8ï¼Œè§†å›¾åŠ©æ‰‹ï¼š é™æ€è§†å›¾åŠ©æ‰‹å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬æ¥å—ä»»æ„å‚æ•°çš„å‡½æ•°ï¼Œå¹¶ä¸”è®¿é—®åˆ°çš„å¯¹è±¡å¿…é¡»æ˜¯ä¸ç”¨æˆ·è¯·æ±‚æ— å…³çš„ï¼›åŠ¨æ€è§†å›¾åŠ©æ‰‹åªèƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸èƒ½æ¥å—å‚æ•°ï¼Œä½†å¯ä»¥è®¿é—®reqåˆreså¯¹è±¡ï¼› ç« å…­1ï¼Œåœ¨ä¸æ˜¾å¼æŒ‡å®šæ–‡ä»¶æ¨¡å—æ‰©å±•åçš„æ—¶å€™ï¼ŒNode.jsä¼šåˆ†åˆ«è¯•å›¾åŠ ä¸Š.jsã€.jsonå’Œ.nodeæ‰©å±•åã€‚.jsæ˜¯JavaScriptä»£ç ï¼Œ.jsonæ˜¯JSONæ ¼å¼çš„æ–‡æœ¬ï¼Œ.nodeæ˜¯ç¼–è¯‘å¥½çš„C/C++ä»£ç ã€‚ 2ï¼Œå½“requireé‡åˆ°ä¸€ä¸ªæ—¢ä¸æ˜¯æ ¸å¿ƒæ¨¡å—ï¼Œåˆä¸æ˜¯ä»¥è·¯å¾„å½¢å¼è¡¨ç¤ºçš„æ¨¡å—åç§°æ—¶ï¼Œä¼šè¯•å›¾åœ¨å½“å‰ç›®å½•ä¸‹çš„node_modulesç›®å½•ä¸­æ¥æŸ¥æ‰¾ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šåœ¨å½“å‰ç›®å½•çš„ä¸Šä¸€å±‚ä¸­çš„node_modulesç›®å½•ä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œåå¤æ‰§è¡Œè¿™ä¸€è¿‡ç¨‹ï¼Œç›´åˆ°é‡åˆ°æ ¹ç›®å½•ä¸ºæ­¢ã€‚ 3ï¼ŒåŠ è½½ç¼“å­˜ï¼š Node.jsæ¨¡å—ä¸ä¼šè¢«é‡å¤åŠ è½½ï¼Œè¿™æ˜¯å› ä¸ºNode.jsé€šè¿‡æ–‡ä»¶åç¼“å­˜æ‰€æœ‰åŠ è½½è¿‡çš„æ–‡ä»¶æ¨¡å—ï¼Œæ‰€ä»¥ä»¥åå†è®¿é—®åˆ°æ—¶å°±ä¸ä¼šé‡æ–°åŠ è½½äº†ã€‚æ³¨æ„ï¼ŒNode.jsæ˜¯æ ¹æ®å®é™…æ–‡ä»¶åç¼“å­˜çš„ï¼ŒåŠ è½½ä¸¤æ¬¡ï¼Œä¹Ÿä¸ä¼šé‡å¤åŠ è½½ï¼Œè§£æåˆ°çš„æ–‡ä»¶æ˜¯åŒä¸€ä¸ªã€‚ 4ï¼Œæ§åˆ¶æµé—®é¢˜ï¼š å¾ªç¯é™·é˜±ï¼Œå¯ç”¨forEachã€é—­åŒ…ã€letè§£å†³ã€‚","link":"/2016/03/18/Node.js%20%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97%E4%B9%A6%E6%91%98/"},{"title":"Node.js å¾®ä¿¡å…¬ä¼—å·å¼€å‘å°è¯•","text":"ç”³è¯·æœåŠ¡å™¨: å¾®ä¿¡å…¬ä¼—å·çš„å¼€å‘éœ€è¦ä½¿ç”¨ä¸€å°ç”¨äºæ¥æ”¶å¹¶å¤„ç†æ¶ˆæ¯çš„æœåŠ¡å™¨, æ­¤å¤„æ¨èç”³è¯·è…¾è®¯çš„å…è´¹äº‘ä¸»æœº, ç‚¹æˆ‘å»ç”³è¯·å§, æ¯å¤©ä¹ç‚¹åŠå¼€æŠ¢, æˆ‘é€‰æ‹©çš„æœåŠ¡å™¨é•œåƒæ˜¯Ubuntu, å…³äºå¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šé…ç½®Nodeç¯å¢ƒ, å¯å‚è€ƒæˆ‘å¦ä¸€ç¯‡åšå®¢ä½¿ç”¨ Linux ç³»ç»Ÿå¼€å‘Webå‰ç«¯. å…¬ä¼—å·å¼€å‘çš„åŸç†å°±æ˜¯é€šè¿‡è®¾ç½®ä¸€ä¸ªæ¥æ”¶æ¥å£, ä¸€æ—¦å¼€å¯å¼€å‘è€…æ¨¡å¼, å¾®ä¿¡æœåŠ¡å™¨å°†è½¬å‘æ¶ˆæ¯è‡³è¯¥æ¥å£. ç”³è¯·æœåŠ¡å™¨å¾®ä¿¡å…¬ä¼—å·çš„å¼€å‘éœ€è¦ä½¿ç”¨ä¸€å°ç”¨äºæ¥æ”¶å¹¶å¤„ç†æ¶ˆæ¯çš„æœåŠ¡å™¨, æ­¤å¤„æ¨èç”³è¯·è…¾è®¯çš„å…è´¹äº‘ä¸»æœº, ç‚¹æˆ‘å»ç”³è¯·å§, æ¯å¤©ä¹ç‚¹åŠå¼€æŠ¢, æˆ‘é€‰æ‹©çš„æœåŠ¡å™¨é•œåƒæ˜¯Ubuntu, å…³äºå¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šé…ç½®Nodeç¯å¢ƒ, å¯å‚è€ƒæˆ‘å¦ä¸€ç¯‡åšå®¢ä½¿ç”¨ Linux ç³»ç»Ÿå¼€å‘Webå‰ç«¯. å…¬ä¼—å·å¼€å‘çš„åŸç†å°±æ˜¯é€šè¿‡è®¾ç½®ä¸€ä¸ªæ¥æ”¶æ¥å£, ä¸€æ—¦å¼€å¯å¼€å‘è€…æ¨¡å¼, å¾®ä¿¡æœåŠ¡å™¨å°†è½¬å‘æ¶ˆæ¯è‡³è¯¥æ¥å£. æ¥å…¥å¼€å‘æ­¥éª¤å¡«å†™æœåŠ¡å™¨é…ç½® éªŒè¯æœåŠ¡å™¨åœ°å€çš„æœ‰æ•ˆæ€§å®Œæˆé…ç½®å, æœåŠ¡å™¨å°†æ”¶åˆ°æ¥è‡ªå¾®ä¿¡çš„GETéªŒè¯è¯·æ±‚, è¯¥è¯·æ±‚åŒ…æ‹¬å¦‚ä¸‹å‚æ•°: signature å¾®ä¿¡åŠ å¯†ç­¾å, ä½¿ç”¨å¼€å‘è€…å¡«å†™çš„tokenå‚æ•°å’Œè¯·æ±‚ä¸­çš„timestampå‚æ•°ã€nonceå‚æ•°è¿›è¡ŒåŠ å¯† timestamp æ—¶é—´æˆ³ nonce éšæœºæ•° echostr éšæœºå­—ç¬¦ä¸², å½“éªŒè¯é€šè¿‡æ—¶, è¿”å›è¯¥å­—ç¬¦ä¸²ç»™å¾®ä¿¡æœåŠ¡å™¨, ä»è€Œå®ŒæˆéªŒè¯ éªŒè¯æµç¨‹ å°†tokenã€timestampã€nonceä¸‰ä¸ªå‚æ•°è¿›è¡Œå­—å…¸åºæ’åº å°†ä¸‰ä¸ªå‚æ•°å­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œsha1åŠ å¯† å¼€å‘è€…è·å¾—åŠ å¯†åçš„å­—ç¬¦ä¸²å¯ä¸signatureå¯¹æ¯”ï¼Œæ ‡è¯†è¯¥è¯·æ±‚æ¥æºäºå¾®ä¿¡ éªŒè¯æœ‰æ•ˆæ€§çš„ä»£ç  123456789101112131415161718192021app.get('/wechat', (req, res) =&gt; { var token = &quot;quanru&quot;; var signature = req.query.signature; var timestamp = req.query.timestamp; var echostr = req.query.echostr; var nonce = req.query.nonce; var oriArray = [nonce, timestamp, token]; oriArray.sort(); var original = oriArray.join(''); var shaObj = new jsSHA(original, 'TEXT'); var scyptoString = shaObj.getHash('SHA-1', 'HEX'); if (signature == scyptoString) { //éªŒè¯æˆåŠŸ res.send(echostr); } else { //éªŒè¯å¤±è´¥ res.send(false); }}); ä¾æ®æ¥å£æ–‡æ¡£å®ç°ä¸šåŠ¡é€»è¾‘ä»¥æ–‡æœ¬æ¶ˆæ¯ä¸ºä¾‹, å¦‚ä¸‹ä¸ºå¾®ä¿¡è½¬å‘è‡³æœåŠ¡å™¨çš„æ–‡æœ¬æ¶ˆæ¯: 12345678&lt;xml&gt;&lt;ToUserName&gt;&lt;![CDATA[toUser]]&gt;&lt;/ToUserName&gt;&lt;FromUserName&gt;&lt;![CDATA[fromUser]]&gt;&lt;/FromUserName&gt;&lt;CreateTime&gt;1348831860&lt;/CreateTime&gt;&lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;/MsgType&gt;&lt;Content&gt;&lt;![CDATA[this is a test]]&gt;&lt;/Content&gt;&lt;MsgId&gt;1234567890123456&lt;/MsgId&gt;&lt;/xml&gt; æ¶ˆæ¯å¤„ç†: 123456789101112 app.post('/wechat', (req, res) =&gt; { res.writeHead(200, {'Content-Type': 'application/xml'}); var content = req.body.xml.content; turingRobot(encodeURI(content)).then((data) =&gt; { var response = JSON.parse(data); var resMsg = autoReply(req.body.xml, response.text);console.log(resMsg); res.end(resMsg); });}); å…¶ä¸­turingRobotç”¨äºå‘å›¾çµæœºå™¨äººå‘é€ç”¨æˆ·æ¶ˆæ¯: 1234567891011121314151617181920const request = require('request');function getTuringResponse(info) { if(typeof info !== 'string') { info = info.toString(); } let options = { method:'GET', url: 'http://www.tuling123.com/openapi/api?key=13a74dbd0f6b45d69ac49334e7027742&amp;info='+info }; return new Promise((resolve, reject) =&gt; { request(options, (err, res, body) =&gt; { if (res) { resolve(body); } else { reject(err); } }); })}module.exports = getTuringResponse; è‡ªåŠ¨å›å¤æ¨¡å—autoReply: 12345678910111213function autoReply(requestData, info) { if(requestData.msgtype == 'text') { var resMsg = '&lt;xml&gt;' + '&lt;ToUserName&gt;&lt;![CDATA[' + requestData.fromusername + ']]&gt;&lt;/ToUserName&gt;' + '&lt;FromUserName&gt;&lt;![CDATA[' + requestData.tousername + ']]&gt;&lt;/FromUserName&gt;' + '&lt;CreateTime&gt;' + parseInt(new Date().valueOf() / 1000) + '&lt;/CreateTime&gt;' + '&lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;/MsgType&gt;' + '&lt;Content&gt;&lt;![CDATA['+info+']]&gt;&lt;/Content&gt;' + '&lt;/xml&gt;'; } return resMsg;}module.exports = autoReply; One More Thingä½¿ç”¨å¾®ä¿¡çš„å®˜æ–¹çš„Nodeä¸­é—´ä»¶, å¯æ›´æ–¹ä¾¿é«˜æ•ˆåœ°å¼€å‘å…¬ä¼—å·ä¼ é€é—¨ 123456789101112131415161718192021222324const turingRobot = require('./turingRobot');const autoReply = require('./autoReply');const wechat = require('wechat');module.exports = function(app) { //ä½¿ç”¨ä¸­é—´ä»¶ //ä¼ å…¥è¿™ä¸‰ä¸ªé…ç½®, è‡ªåŠ¨å¸®ä½ éªŒè¯ var config = { token: 'quanru', appid: 'wxdc6410f1001d787b', encodingAESKey: 'IJwymet3h2KzGSTPxMnITc25pGiSzSlWCXHUhcvQRzc' }; app.use('/wechat', wechat(config, (req, res, next) =&gt; { //ç”¨æˆ·çš„æ¶ˆæ¯ä»¥å¯¹è±¡çš„å½¢å¼è¿”å›åˆ°è¯¥å˜é‡ var message = req.weixin; var content = message.Content; turingRobot(encodeURI(content)) .then((data) =&gt; { var response = JSON.parse(data); //é»˜è®¤å›å¤æ–‡æœ¬æ¶ˆæ¯, æ”¯æŒå¤šç§æ ¼å¼å›å¤, å¦‚å›¾åƒ, éŸ³ä¹ res.reply(response.text); }); }));} é™„ä¸Šç²¾ç¾PPTåœ°å€é™„ä¸Šç²¾ç¾ä»£ç åœ°å€ å‚è€ƒnodejså¾®ä¿¡å¼€å‘â€”è‡ªåŠ¨å›å¤çš„å®ç°å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘æ¦‚è¿°â€”æ¥å…¥æŒ‡å—(éœ€è¦ç™»å½•)ä½¿ç”¨ Linux ç³»ç»Ÿå¼€å‘Webå‰ç«¯","link":"/2016/08/14/Node.js%20%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E5%B0%8F%E8%AF%95/"},{"title":"Node.js çš„ Morgan æ¨¡å—ä¸ Cluster æ¨¡å—","text":"è¿™æ®µæ—¶é—´é¼“æ£Node.jsï¼Œè·Ÿç€ã€ŠNode.js å¼€å‘æŒ‡å—ã€‹æŠŠ Microblog ç»™å®ç°äº†ä¸€ä¸‹ï¼Œç”±äºè¯¥ä¹¦æ’°å†™äº 2012 å¹´ï¼ŒNode ç‰ˆæœ¬ç›®å‰æœ€æ–°å·²æ›´æ–°è‡³ v5.9.0ï¼Œä¸” Express ä¹Ÿå‘ç”Ÿäº†ç›¸å½“å¤§çš„å˜åŒ–ï¼Œå¯¼è‡´å¾ˆå¤šä¹¦ä¸­ä»£ç å·²ç»ä¸ç¬¦åˆå½“å‰çš„ç‰ˆæœ¬äº†ã€‚å…³äºå®ç°éƒ¨åˆ†ï¼Œå¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šã€Šnodejså¼€å‘æŒ‡å—ã€‹å¾®åšå®ä¾‹express4.xç‰ˆ ã€‚BTWï¼Œç›®å‰ express å¯åŠ¨å‘½ä»¤æ”¹ä¸º npm startï¼Œè¯¥å‘½ä»¤æ‰§è¡Œ bin ç›®å½•ä¸‹çš„ www æ–‡ä»¶ï¼Œç›¸å½“äºç›´æ¥æ‰§è¡Œ node ./bin/wwwã€‚æ­¤å¤„ç®€è¦è®°å½•ä¸‹è¯¥ä¹¦ç¬¬å…­ç« æåˆ°çš„å…³äºæ—¥å¿—ä¸å¤šæ ¸CPUçš„ä¼˜åŒ–é—®é¢˜ï¼Œå¹¶ä»‹ç»ä¸€æ¬¾ debug toolã€‚æ•´ä¸ª microblog çš„ä»£ç å·²æ”¾è‡³ github ä¸Šï¼šæ‘¸æˆ‘ ä¸€ã€å‰è¨€è¿™æ®µæ—¶é—´é¼“æ£Node.jsï¼Œè·Ÿç€ã€ŠNode.js å¼€å‘æŒ‡å—ã€‹æŠŠ Microblog ç»™å®ç°äº†ä¸€ä¸‹ï¼Œç”±äºè¯¥ä¹¦æ’°å†™äº 2012 å¹´ï¼ŒNode ç‰ˆæœ¬ç›®å‰æœ€æ–°å·²æ›´æ–°è‡³ v5.9.0ï¼Œä¸” Express ä¹Ÿå‘ç”Ÿäº†ç›¸å½“å¤§çš„å˜åŒ–ï¼Œå¯¼è‡´å¾ˆå¤šä¹¦ä¸­ä»£ç å·²ç»ä¸ç¬¦åˆå½“å‰çš„ç‰ˆæœ¬äº†ã€‚å…³äºå®ç°éƒ¨åˆ†ï¼Œå¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šã€Šnodejså¼€å‘æŒ‡å—ã€‹å¾®åšå®ä¾‹express4.xç‰ˆ ã€‚BTWï¼Œç›®å‰ express å¯åŠ¨å‘½ä»¤æ”¹ä¸º npm startï¼Œè¯¥å‘½ä»¤æ‰§è¡Œ bin ç›®å½•ä¸‹çš„ www æ–‡ä»¶ï¼Œç›¸å½“äºç›´æ¥æ‰§è¡Œ node ./bin/wwwã€‚ æ­¤å¤„ç®€è¦è®°å½•ä¸‹è¯¥ä¹¦ç¬¬å…­ç« æåˆ°çš„å…³äºæ—¥å¿—ä¸å¤šæ ¸CPUçš„ä¼˜åŒ–é—®é¢˜ï¼Œå¹¶ä»‹ç»ä¸€æ¬¾ debug toolã€‚ æ•´ä¸ª microblog çš„ä»£ç å·²æ”¾è‡³ github ä¸Šï¼šæ‘¸æˆ‘ äºŒã€Morgan æ¨¡å—ã®æ—¥å¿—ç”Ÿæˆ å®‰è£… morgan ä¸ file-stream-rotatorï¼Œåè€…ç”¨äºç”Ÿæˆ daily logï¼š npm i morgan file-stream-rotato â€“save-dev ç¼–è¾‘ app.js æ–‡ä»¶ï¼Œå°†å…¶å¼•å…¥ï¼Œæ­¤å¤–è¿˜æœ‰ node è‡ªå¸¦æ¨¡å— fsï¼š 123var FileStreamRotator = require('file-stream-rotator');var logger = require('morgan');var fs = require('fs'); daily log ç”Ÿæˆï¼š 123456789var logDirectory = __dirname + '/log';//æ—¥å¿—æ–‡ä»¶å­˜æ”¾ç›®å½•fs.existsSync(logDirectory) || fs.mkdirSync(logDirectory);//æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™æ–°å»ºvar accessLogStream = FileStreamRotator.getStream({ date_format: 'YYYYMMDD',//æ—¥æœŸæ ¼å¼ filename: logDirectory + '/access-%DATE%.log',//æ—¥å¿—æ–‡ä»¶å‘½åæ–¹å¼ frequency: 'daily',//ç”Ÿæˆé¢‘ç‡ï¼Œå¯ä»¥æ˜¯æ¯ä¸¤å°æ—¶:2hï¼Œæ¯åˆ†é’Ÿï¼š1m verbose: false//è¯¦ç»†ä¸å¦});app.use(logger('combined', {stream: accessLogStream}));//å…¶ä¸­ combined ä¸ºç”Ÿæˆæ ¼å¼ è¯¥æ’ä»¶çš„å…·ä½“ä½¿ç”¨æ–¹æ³•å‚è§ï¼š morgan ï¼ŒåŒ…æ‹¬ç”Ÿæˆæ ¼å¼ä¸é…ç½®é€‰é¡¹ç­‰ï¼Œä¹Ÿå¯è‡ªè¡Œç»„åˆé…ç½®ç”Ÿæˆæ ¼å¼ã€‚ ä¸‰ã€Cluster æ¨¡å—ã®ç”Ÿæˆå­è¿›ç¨‹è¯¥æ¨¡å—ä¸º Node.js è‡ªå¸¦çš„æ ¸å¿ƒæ¨¡å—ï¼Œç”¨äºç”Ÿæˆä¸å½“å‰è¿›ç¨‹ç›¸åŒçš„å­è¿›ç¨‹ï¼Œå…è®¸çˆ¶å­è¿›ç¨‹å…±äº«ç«¯å£ï¼Œå¯å……åˆ†åˆ©ç”¨å½“ä»£æœåŠ¡å™¨çš„å¤šæ ¸CPUã€‚ www æ–‡ä»¶ä¸­å­˜æ”¾æœåŠ¡å™¨åˆ›å»ºä»£ç ï¼Œå› æ­¤ç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š12345678910111213141516&quot;use strictâ€œ;//åé¢ç”¨åˆ°äº†ç®­å¤´å‡½æ•°ï¼Œå±äºes6ï¼Œå› æ­¤è®¾å®šä¸¥æ ¼æ¨¡å¼ï¼Œå¦åˆ™ä¸æ”¯æŒvar cluster = require('cluster');//æ¨¡å—å¼•å…¥var numCPUs = require('os').cpus().length;//è·å¾—å½“å‰ç³»ç»Ÿçš„ cpu æ•°é‡if(cluster.isMaster) {//è‹¥å½“å‰è¿›ç¨‹ä¸ºä¸»è¿›ç¨‹ï¼Œåˆ™ fork æ–°è¿›ç¨‹ï¼Œæ•°ç›®ä¸ºcpuæ•°é‡ for(let i = 0; i &lt; numCPUs; i++) { cluster.fork(); } cluster.on('exit', (worker, code, signal) =&gt; { console.log(`worker ${worker.process.pid} died`); }); } else {//å¦åˆ™ï¼Œåˆ›å»ºæœåŠ¡å™¨ä¸»è¿›ç¨‹ //share TCP connection server.listen(port); server.on('error', onError); server.on('listening', onListening); } æ­¤æ—¶æŸ¥çœ‹è¿›ç¨‹ç®¡ç†å™¨ï¼Œå‘ç°æœ‰å¤šä¸ª node è¿›ç¨‹ï¼Œè€ŒåŸæ¥çš„ä»£ç åˆ™åªæœ‰ä¸¤ä¸ªï¼š å››ã€Node.js é™¤è™«å·¥å…·æˆ‘å°±ä¸æ¬è¿äº†ï¼Œå®ƒåŸºäº electronï¼Œæ¨¡ä»¿ chrome çš„ devtoolï¼Œä¼šç”¨ chrome çš„ devtool å°±ä¼šè¿™ä¸ªï¼Œåæ­£å¾ˆåŠï¼šdevtool ï¼Œgithub åœ°å€ä¸ºï¼šdevtool å®‰è£…ï¼š npm install -g devtool æ­¤å¤„å¯åŠ¨å‘½ä»¤ä¸ºï¼š devtool bin/www â€“watch æ–­ç‚¹ä¹‹åï¼ŒæŒ‰ ctrl + rï¼Œé‡å¯æœåŠ¡å™¨å³å¯ã€‚ è¿›å…¥æ–­ç‚¹åï¼Œç‚¹å‡» esc å¯æ‰“å¼€ä¸€ä¸ªæ‰§è¡Œåœ¨å½“å‰ä½œç”¨åŸŸå†…çš„æ§åˆ¶å°ï¼Œå¯ä»¥ä¿®æ”¹ä¸€äº›å˜é‡ç„¶åç»§ç»­æ‰§è¡Œã€‚ å½“ä½¿ç”¨ cluster æ—¶ï¼Œæ— æ³•è¿›å…¥ get ä¸ post è¯·æ±‚å‡½æ•°å†…éƒ¨ï¼Œæˆ‘æäº†ä¸ª issueã€‚ é«˜çº§ä½¿ç”¨æ–¹æ³•è§ä¸Šè¿°ç½‘å€å’¯ã€‚","link":"/2016/03/18/Node.js%20%E7%9A%84%20Morgan%20%E6%A8%A1%E5%9D%97%E4%B8%8E%20Cluster%20%E6%A8%A1%E5%9D%97/"},{"title":"Node.js è°ƒè¯•æ–¹å¼é›†é”¦","text":"æœ¬æ–‡è®¨è®ºäº†å‡ ä¸ªæµè¡Œçš„ Node.js è°ƒè¯•æ–¹å¼ï¼ŒåŒ…æ‹¬ Chromeï¼ŒVSCODEï¼ŒATOMï¼ŒWebStorm Chromeï¼šä¼˜åŠ¿ ä¸ä¾èµ–ç¼–è¾‘å™¨ï¼› ä¸ä¾èµ–é…ç½®ï¼› Node.js é»˜è®¤å·²ç»é›†æˆï¼Œå®˜æ–¹æ¨èï¼› ä¸å‰ç«¯ä»£ç è°ƒè¯•å·¥å…·ä¸€è‡´ï¼› dev-tools å·¥å…·å¼ºå¤§ åŠ£åŠ¿ æ— æ³•åœ¨æºæ–‡ä»¶ä¸Šè¿›è¡Œæ–­ç‚¹ VSCODEï¼šä¼˜åŠ¿ å¯åœ¨æºæ–‡ä»¶ä¸Šè¿›è¡Œæ–­ç‚¹ åŠ£åŠ¿ éœ€è¦ä¸€å®šçš„é…ç½® WebStormï¼šä¼˜åŠ¿ å¯åœ¨æºæ–‡ä»¶ä¸Šè¿›è¡Œæ–­ç‚¹ åŠ£åŠ¿ éœ€è¦ä¸€å®šçš„é…ç½® ATOMï¼šä¼˜åŠ¿ å¯åœ¨æºæ–‡ä»¶ä¸Šè¿›è¡Œæ–­ç‚¹ åŠ£åŠ¿ åŠŸèƒ½æ¯”è¾ƒå¼±ï¼Œä¸å¦‚ VSCODE ä¸ªäººå»ºè®®ï¼šå¦‚æœæœ¬èº«å°±ä½¿ç”¨ VSCODEï¼ŒWebStorm çš„è¯ï¼Œå»ºè®®ç»§ç»­ä½¿ç”¨å¯¹åº”çš„ Node.js è°ƒè¯•æ–¹å¼ï¼›å¦‚æœä½¿ç”¨ ATOMï¼ŒSublime è°ƒè¯•ä¸ä¾¿çš„ç¼–è¾‘å™¨ï¼Œæ¨èä½¿ç”¨ Chrome è¿›è¡Œè°ƒè¯•ã€‚ CHROME è°ƒè¯•é…ç½®æ­¥éª¤ä¸€ï¼šå®‰è£… nodemonï¼Œç›‘å¬æ–‡ä»¶å˜åŒ–ä»¥é‡å¯ node æœåŠ¡ $&gt; npm install nodemon -g æ­¥éª¤äºŒï¼šä»¥ â€”inspect å‚æ•°å¯åŠ¨è°ƒè¯• $&gt; NODE_ENV=development nodemon --inspect -w config -w server -x node server/server.js æ³¨ï¼š NODE_ENV=development // ä¼ å…¥ç¯å¢ƒå˜é‡ â€”inspect // é…åˆ Chrome è¿›è¡Œè°ƒè¯•ï¼Œå½“åŒæ—¶è°ƒè¯•å¤šä¸ª node æœåŠ¡æ—¶ï¼Œå¯è®¾ç½®ç«¯å£ä»¥é¿å…å†²çªï¼šâ€”inspect=9291 -w config -w server // ç›‘å¬ config ä¸ server ç›®å½•ï¼Œå½“ä¸Šè¿°ä¸¤ä¸ªç›®å½•å†…æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é‡å¯æœåŠ¡ -x node // é»˜è®¤ä¸º nodeï¼Œå¯ä¸é…ç½®ï¼Œå¿…è¦æ—¶å¯é…ç½®ä¸º babel-nodeï¼š-x babel-node server/server.js // node é¡¹ç›®å…¥å£æ–‡ä»¶ æ­¥éª¤ä¸‰ï¼šå¯åŠ¨å‰ç«¯è°ƒè¯•æœåŠ¡(å¦‚æœæœ‰çš„è¯) æ­¥éª¤å››ï¼šå»ºè®®å°†ä¸Šè¿°å‘½ä»¤é…ç½®ä¸º scripts è„šæœ¬ï¼ˆæ­¤æ—¶å¯åœ¨é¡¹ç›®å†…å•ç‹¬å®‰è£… nodemonï¼‰ï¼š 1234567&quot;scripts&quot;: { &quot;start&quot;: &quot;npm run server &amp; npm run dev&quot;, &quot;server&quot;: &quot;NODE_ENV=development nodemon -w config -w server server/server.js&quot;, &quot;start-debug&quot;: &quot;npm run server-debug &amp; npm run dev&quot;, &quot;server-debug&quot;: &quot;NODE_ENV=development nodemon --inspect -w config -w server server/server.js&quot;, &quot;dev&quot;: &quot;nodemon -w config -w scripts scripts/server.js&quot; } æ­¥éª¤äº”ï¼šæ‰“å¼€ Chromeï¼Œå¹¶æ‰“å¼€ dev toolï¼Œå½“ä½ çš„ Chrome è¶³å¤Ÿæ–°ï¼ˆ60 ä»¥ä¸Šï¼‰ï¼Œå¯ç‚¹å‡»å¦‚ä¸‹ node.js å›¾æ ‡ï¼Œè¿›å…¥è°ƒè¯• æ­¥éª¤å…­ï¼šå¦‚æœå½“å‰ Chrome ä¸æ”¯æŒï¼Œè¯·æ›´æ–°ï¼Œæˆ–è€…ä½¿ç”¨æ’ä»¶ NIM VSCODE è°ƒè¯•é…ç½®æ­¥éª¤ä¸€ï¼šæ‰“å¼€é¡¹ç›®ç›®å½•æ­¥éª¤äºŒï¼šåˆ‡æ¢åˆ° debug tabï¼š æ­¥éª¤ä¸‰ï¼šæ‰“å¼€ launch.json æ–‡ä»¶ æ­¥éª¤å››ï¼šé…ç½® launch.json12345678910111213141516171819{ &quot;version&quot;: &quot;0.2.0&quot;, &quot;configurations&quot;: [ { &quot;type&quot;: &quot;node2&quot;, // æ–°å¢ç±»å‹ï¼Œæ–¹ä¾¿è°ƒè¯• await/async è¯­æ³• &quot;request&quot;: &quot;launch&quot;, &quot;name&quot;: &quot;å¯åŠ¨ç¨‹åº&quot;, &quot;verboseDiagnosticLogging&quot;: false, &quot;program&quot;: &quot;${workspaceRoot}/server/server.js&quot;, // æ­¤ä¸º node å·¥ç¨‹çš„å…¥å£æ–‡ä»¶ &quot;cwd&quot;: &quot;${workspaceRoot}&quot;, &quot;runtimeExecutable&quot;: &quot;${workspaceRoot}/node_modules/.bin/babel-node&quot;, // è‹¥æœªä½¿ç”¨ babel-nodeï¼Œä¾‹å¦‚ä½¿ç”¨ node8 ä»¥ä¸Šç‰ˆæœ¬ï¼Œè¯·ç§»é™¤æœ¬è¡Œ &quot;env&quot;: { &quot;NODE_ENV&quot;: &quot;development&quot; }, &quot;sourceMaps&quot;: true } ]} æ­¥éª¤äº”ï¼šå¯åŠ¨å‰ç«¯è°ƒè¯•æœåŠ¡(å¦‚æœæœ‰çš„è¯) æ­¥éª¤å…­ï¼šä½¿ç”¨ VSCode æ‰“å¼€æºç æ–‡ä»¶ï¼Œç‚¹å‡»è¡Œå·å·¦ä¾§ä»¥æ·»åŠ æ–­ç‚¹ æ­¥éª¤ä¸ƒï¼šåˆ‡å› debug tabï¼Œå¯åŠ¨ node.js æœåŠ¡ï¼Œå³å¯è°ƒè¯• WebStormæ­¥éª¤ä¸€ï¼šæ‰“å¼€é¡¹ç›®ç›®å½•ï¼Œå±•å¼€ Run èœå•ï¼Œé€‰æ‹© Edit Configurations æ­¥éª¤äºŒï¼šæ–°å»º Node.js è°ƒè¯•é…ç½® æ­¥éª¤ä¸‰ï¼šé…ç½®å‚è€ƒ æ³¨ï¼š Node interpreterï¼šnode å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œè‹¥ä½¿ç”¨ babel-node åˆ™éœ€è¦æ·»åŠ  babel-node è·¯å¾„ï¼› Working directoryï¼šå·¥ä½œç›®å½•ï¼› JavaScript fileï¼šé¡¹ç›®å…¥å£æ–‡ä»¶ï¼› Environment variablesï¼šç¯å¢ƒå˜é‡ï¼› æ­¥éª¤å››ï¼šå¯åŠ¨å‰ç«¯è°ƒè¯•æœåŠ¡(å¦‚æœæœ‰çš„è¯) æ­¥éª¤äº”ï¼šä½¿ç”¨ WebStorm æ‰“å¼€æºç æ–‡ä»¶ï¼Œç‚¹å‡»è¡Œå·å·¦ä¾§ä»¥æ·»åŠ æ–­ç‚¹ æ­¥éª¤å…­ï¼šç‚¹å‡»å¯åŠ¨è°ƒè¯•æœåŠ¡ ATOM è°ƒè¯•é…ç½®æ­¥éª¤ä¸€ï¼šå®‰è£…æ’ä»¶ï¼ša. xatom-debug b. xatom-debug-nodejs æ­¥éª¤äºŒï¼šæ‰“å¼€ node é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œå¹¶åœ¨ç®­å¤´å¤„åˆ‡æ¢éœ€è¦è°ƒè¯•çš„é¡¹ç›®ç›®å½•ï¼Œä¹‹åç‚¹å‡»ç®­å¤´å³ä¾§çš„ Node.js æŒ‰é’®è¿›å…¥é…ç½® æ­¥éª¤ä¸‰ï¼šé…ç½®è°ƒè¯• æ­¥éª¤å››ï¼šå¯åŠ¨å‰ç«¯è°ƒè¯•æœåŠ¡(å¦‚æœæœ‰çš„è¯) æ­¥éª¤äº”ï¼šä½¿ç”¨ ATOM æ‰“å¼€æºç æ–‡ä»¶ï¼Œç‚¹å‡»è¡Œå·å·¦ä¾§ä»¥æ·»åŠ æ–­ç‚¹ æ­¥éª¤å…­ï¼šç‚¹å‡»å¯åŠ¨è°ƒè¯•æœåŠ¡","link":"/2017/08/15/Node.js%20%E8%B0%83%E8%AF%95%E6%96%B9%E5%BC%8F%E9%9B%86%E9%94%A6/"},{"title":"React çŠ¶æ€çš„é€»è¾‘å¤ç”¨","text":"å…³äº React çŠ¶æ€çš„é€»è¾‘å¤ç”¨å²ï¼","link":"/2020/05/30/React%20%E7%8A%B6%E6%80%81%E7%9A%84%E9%80%BB%E8%BE%91%E5%A4%8D%E7%94%A8/"},{"title":"Schema ä¸ä¸‹è½½æ¡","text":"ç”±äºæˆ‘å¸æœ‰ä¸ªç½‘ç«™è¿˜æ²¡æœ‰å¯¹åº”çš„ç§»åŠ¨ç«¯ç‰ˆæœ¬ï¼Œå› æ­¤éœ€è¦åœ¨ç§»åŠ¨ç«¯è®¿é—®è¯¥ç½‘ç«™æ—¶ï¼Œåœ¨åº•éƒ¨æ˜¾ç¤ºä¸€æ¡ä¸‹è½½æ¡ï¼Œè€Œä¸”ç‚¹å‡»è¯¥ä¸‹è½½æ¡æ—¶éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªéœ€æ±‚ï¼š ç‚¹å‡»ä¸‹è½½æ—¶ï¼Œå¦‚æœæœ¬æœºå·²ç»å®‰è£…è¯¥è½¯ä»¶ï¼Œåˆ™å°è¯•æ‰“å¼€å¯¹åº”è½¯ä»¶ï¼› ç‚¹å‡»ä¸‹è½½æ—¶ï¼Œå¦‚æœæœ¬æœºæœªå®‰è£…è¯¥è½¯ä»¶ï¼Œåˆ™è·³è½¬åˆ°å¯¹åº”ç³»ç»Ÿçš„ä¸‹è½½åœ°å€ã€‚ éœ€æ±‚ç”±äºæˆ‘å¸æœ‰ä¸ªç½‘ç«™è¿˜æ²¡æœ‰å¯¹åº”çš„ç§»åŠ¨ç«¯ç‰ˆæœ¬ï¼Œå› æ­¤éœ€è¦åœ¨ç§»åŠ¨ç«¯è®¿é—®è¯¥ç½‘ç«™æ—¶ï¼Œåœ¨åº•éƒ¨æ˜¾ç¤ºä¸€æ¡ä¸‹è½½æ¡ï¼Œè€Œä¸”ç‚¹å‡»è¯¥ä¸‹è½½æ¡æ—¶éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªéœ€æ±‚ï¼š ç‚¹å‡»ä¸‹è½½æ—¶ï¼Œå¦‚æœæœ¬æœºå·²ç»å®‰è£…è¯¥è½¯ä»¶ï¼Œåˆ™å°è¯•æ‰“å¼€å¯¹åº”è½¯ä»¶ï¼› ç‚¹å‡»ä¸‹è½½æ—¶ï¼Œå¦‚æœæœ¬æœºæœªå®‰è£…è¯¥è½¯ä»¶ï¼Œåˆ™è·³è½¬åˆ°å¯¹åº”ç³»ç»Ÿçš„ä¸‹è½½åœ°å€ã€‚ schemaåè®® schemaç±»ä¼¼è‡ªå®šä¹‰urlåè®®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰çš„åè®®æ¥æ‰“å¼€è‡ªå·±çš„åº”ç”¨ï¼Œå½¢å¦‚ï¼š ä»£ç å¦‚ä¸‹ å¤åˆ¶ä»£ç myapplink:// ä¾‹å¦‚ facebookçš„fb:// itunesçš„itms-apps:// è¿˜æœ‰çŸ­ä¿¡ä¹Ÿæ˜¯ç±»ä¼¼çš„sms://å¦‚æœè¦æ‰“å¼€ä¸€ä¸ªappï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯é€šè¿‡ä¸€ä¸ªé“¾æ¥ï¼Œå¦‚æˆ‘ä»¬åœ¨htmlä¸­è¿™æ ·å†™ï¼š ä»£ç å¦‚ä¸‹ å¤åˆ¶ä»£ç æ‰“å¼€æˆ‘çš„app ä¸‹è½½æ¡é…ç½®ç”±äºè¯¥ä¸‹è½½æ¡åœ¨PCé¡µé¢ä¸­ä½¿ç”¨ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨remå•ä½ï¼Œæˆ‘å°†ä¸‹è½½æ¡ç»Ÿä¸€åšæˆäº†pngï¼Œå¹¶é€šè¿‡å¼•å…¥jsæ–‡ä»¶æ¥é…ç½®ä¸åŒçš„ä¸‹è½½æ¡ï¼š 12&lt;script src=&quot;dlBar.js&quot; data-imgurl=&quot;ä¸‹è½½æ¡å›¾ç‰‡åœ°å€&quot; data-itunesurl=&quot;è‹¹æœä¸‹è½½åœ°å€&quot; data-androidurl=&quot;å®‰å“ä¸‹è½½åœ°å€&quot; data-schemaurl=&quot;schema url&quot;&gt;&lt;/script&gt; ç”Ÿæˆè€ƒè™‘åˆ°å…¼å®¹æ€§ï¼Œå…¶ä¸­ä¸‹è½½æ¡ä½¿ç”¨åŸç”ŸåŸç”Ÿçš„æ–¹æ³•ç”Ÿæˆå¯¹åº”çš„cssä¸htmléƒ¨åˆ†ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š 123456789101112function creatHtml () { var st = document.createElement(&quot;style&quot;); var cssText = document.createTextNode(&quot;.bottom-bar { display: none; position: fixed; left: 0; bottom: 0; width: 100%; } .dl-btn { position: absolute; right: 17.5%; width: 18.75%; } .cl-btn { position: absolute; right: 3.4375%; width: 4.6875%; } .dl-img { width: 100%; display: block; }&quot;); st.setAttribute(&quot;type&quot;, &quot;text/css&quot;); st.appendChild(cssText); var heads = document.getElementsByTagName(&quot;head&quot;); if(heads.length) { heads[0].appendChild(st); } document.body.insertAdjacentHTML(&quot;beforeEnd&quot;, '&lt;div id=&quot;barab&quot; style=&quot;display: none; position: fixed; left: 0; bottom: 0; width: 100%;&quot;&gt;&lt;img style=&quot;width: 100%; display: block;&quot; src=&quot;'+ imgSrc +'&quot; alt=&quot;ä¸‹è½½æ¡&quot;&gt;&lt;span style=&quot;position: absolute; right: 14.8%; bottom: 20%; width: 18.55%; height: 63%&quot;&gt;&lt;/span&gt;&lt;span style=&quot;position: absolute; right: 3.4375%; bottom: 35%;width: 4.6875%; height: 30%;&quot;&gt;&lt;/span&gt;&lt;/div&gt;');} é…ç½®ä½¿ç”¨çš„ä¸‹è½½æ¡å›¾ç‰‡ã€APP storeè·³è½¬åœ°å€ã€Androidçš„ä¸‹è½½åœ°å€ä»¥åŠschemaåœ°å€ã€‚ ä¸»è¦ä»£ç 1234567891011121314151617181920212223242526272829303132333435function downloadApp () { var dlNow = document.querySelector(&quot;#barab span&quot;); var closeBtn = dlNow.nextElementSibling; closeBtn.addEventListener(&quot;touchend&quot;, function (event) { downBar.style.display = &quot;none&quot;; }); dlNow.addEventListener(&quot;touchend&quot;, function (event) { var t; var clickTime = new Date(); var ifr = document.createElement('iframe'); ifr.src = schemaSrc; ifr.style.display = 'none'; document.body.appendChild(ifr); if(ios) { t = window.setTimeout(function () { var timeOutTime = new Date(); if (!clickTime || timeOutTime - clickTime &lt; 600 + 200) { window.location = itunesSrc; } }, 600); } if(android) { t = window.setTimeout(function() { var endTime = Date.now(); if (!clickTime || endTime - clickTime &lt; 600 + 200) { window.location = androidSrc; } }, 600); } window.onblur = function() { clearTimeout(t); }; });}})(); ä»£ç æ€è·¯ é¦–å…ˆåˆ›å»ºä¸€ä¸ªiframeï¼Œå°†schemaèµ‹å€¼ç»™å®ƒçš„srcå±æ€§ï¼› å½“ç‚¹å‡»ä¸‹è½½æŒ‰é’®æ—¶ï¼Œè®°å½•ç‚¹å‡»æ—¶çš„æ—¶é—´æˆ³ï¼Œå¹¶å°†iframeæ·»åŠ åˆ°bodyä¸­ï¼Œç´§æ¥ç€è®¾ç½®ä¸€ä¸ªsetTimeoutï¼› å¦‚æœè¯¥ç¨‹åºå·²ç»å®‰è£…ï¼Œä¾¿ä¼šå°è¯•ä½¿ç”¨schemaåè®®æ‰“å¼€appï¼› å¦‚æœè¯¥ç¨‹åºæ²¡æœ‰è¢«å®‰è£…ï¼Œåˆ™æ‰€è®¾ç½®çš„å®šæ—¶å™¨ä¼šåœ¨600msåæ‰§è¡Œï¼Œå¹¶è®°å½•å®šæ—¶å™¨è§¦å‘çš„æ—¶é—´ï¼Œä¸ç‚¹å‡»çš„æ—¶é—´å¦‚æœç›¸å·®200msï¼Œåˆ™è·³è½¬åˆ°å¯¹åº”ç³»ç»Ÿçš„ä¸‹è½½åœ°å€ã€‚ åŸç† å¦‚æœschemaåœ°å€è·³è½¬æˆåŠŸï¼Œè¯´æ˜ç¨‹åºå·²ç»å®‰è£…ï¼Œåˆ™åç»­ä»£ç å¦‚ä½•æ‰§è¡Œå·²ä¸é‡è¦ï¼› å¦åˆ™ï¼Œæ²¡è·³è½¬æˆåŠŸçš„è¯ï¼Œè¯´æ˜ç¨‹åºå°šæœªå®‰è£…ï¼Œå› æ­¤ç¨‹åºè·³è½¬åˆ°å¯¹åº”ä¸‹è½½åœ°å€ï¼› å…¶ä¸­æ—¶é—´å·®å°±æ˜¯ä¸ºäº†ç­‰å¾…schemaåœ°å€æ‰“å¼€è½¯ä»¶çš„ï¼Œå¦‚æœä¸è®¾ç½®ç­‰å¾…æ—¶é—´çš„è¯ï¼Œç¨‹åºä¼šé©¬ä¸Šæ‰§è¡Œè·³è½¬éƒ¨åˆ†ï¼Œä¹Ÿå°±æ²¡æœ‰schemaä»€ä¹ˆäº‹äº†ã€‚ å®Œæ•´ä»£ç ","link":"/2015/08/16/Schema%E4%B8%8E%E4%B8%8B%E8%BD%BD%E6%9D%A1/"},{"title":"git checkout ä¸ git reset å¤‡å¿˜å½•","text":"ä¸€ç›´æ²¡ææ¸… git checkout ä¸ git reset, æ˜¨æ™šç‰¹åœ°å»ºäº†ä¸€ä¸ªä»“åº“è¿›è¡Œå®éªŒ, ç‰¹æ­¤å¤‡å¿˜. git çš„ä¸‰å—åŒºåŸŸä¸ä»“åº“ å·¥ä½œåŒº (working directory) å³å½“å‰ç¼–è¾‘çš„æ–‡ä»¶æ‰€å¤„çš„åŒºåŸŸ æš‚å­˜åŒº (stage index) å³å½“ä½ æ‰§è¡Œ git add å‘½ä»¤ä¹‹å, å¯¹åº”çš„æ–‡ä»¶ä¾¿åŠ å…¥æš‚å­˜åŒº å†å²è®°å½•åŒº (history) å³å½“ä½ æ‰§è¡Œ git commit ä¹‹å, æš‚å­˜åŒºçš„ä¿®æ”¹ä¾¿ä¼šä½œä¸ºä¸€ä¸ª commit è®°å½•, å­˜å…¥å†å²è®°å½•åŒº ä»¥ä¸Šéƒ½å‘ç”Ÿåœ¨æœ¬åœ°ä»“åº“, ç›´åˆ°æ‰§è¡Œ git push ä¹‹å, ä¾¿å°†æœ¬åœ°ä»“åº“çš„ä¿®æ”¹ (å†å²è®°å½•åŒº) æ¨é€åˆ°è¿œç¨‹ä»“åº“. æ­¤å¤–è¿˜æœ‰ä¸ª HEAD çš„æ¦‚å¿µ, å®ƒé»˜è®¤æŒ‡å‘å½“å‰åˆ†æ”¯çš„æœ€æ–°çš„ä¸€ä¸ª commit. git checkout git checkout å¹³æ—¶ä¸»è¦ç”¨äºåˆ‡æ¢åˆ†æ”¯ git checkout â€“ ç”¨äºä¸¢å¼ƒå·¥ä½œåŒºçš„æ”¹åŠ¨. å…¶ä¸­ â€˜â€“â€™ ç”¨äºåŒºåˆ†åˆ‡æ¢åˆ†æ”¯çš„ git checkout, å‡è®¾å¦‚ä¸‹ä¸€ç§æƒ…å†µ: å½“å‰æœ‰ä¸ªåˆ†æ”¯å«åš â€˜ masterâ€™, æ­¤æ—¶å½“å‰ç›®å½•ä¸‹ä¹Ÿæœ‰ä¸€ä¸ªå«åš â€˜masterâ€™ çš„æ–‡ä»¶, æ­¤æ—¶ä½ æƒ³æ’¤é”€å¯¹å·¥ä½œåŒºä¸­å¯¹ â€˜masterâ€™ æ–‡ä»¶çš„ä¿®æ”¹, ä¾¿æ‰§è¡Œ git checkout master, ä½†æ˜¯è¯¥å‘½ä»¤åªæ˜¯è®©ä½ åˆ‡æ¢åˆ° â€˜masterâ€™ åˆ†æ”¯. å¦‚å›¾, å½“æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶å, æŸ¥çœ‹ git status, ç»™å‡ºäº†å¦‚ä¸‹æç¤º, è¦ä¹ˆä½¿ç”¨ git add å°†ä¿®æ”¹è¿‡çš„æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒº, è¦ä¹ˆä½¿ç”¨ git checkout â€“ ä¸¢å¼ƒå½“å‰å·¥ä½œåŒºå¯¹è¯¥æ–‡ä»¶çš„ä¿®æ”¹. å¯ä»¥å‘ç°æ‰§è¡Œ git checkout â€“ ä¹‹å, README.md æ¢å¤åˆ°ä¿®æ”¹ä¹‹å‰. git reset git reset HEAD ä¸¢å¼ƒæš‚å­˜åŒºçš„ä¿®æ”¹, ä½¿æ”¹åŠ¨é€€å›åˆ°å·¥ä½œåŒº å¦‚ä¸‹å›¾, å½“åœ¨æ·»åŠ  â€˜second modifyâ€™ åˆ° README.md æ–‡ä»¶å, å°†æ­¤æ¬¡ä¿®æ”¹é€šè¿‡ git add å‘½ä»¤å°†å…¶æ·»åŠ åˆ°æš‚å­˜åŒº, ç»ˆç«¯æç¤ºä½¿ç”¨ git reset HEAD ç”¨äºå–æ¶ˆæš‚å­˜åŒºçš„ä¿®æ”¹, å…¶ä¸­ git reset HEAD ä»£è¡¨å°†å½“å‰ HEAD æŒ‡å‘å½“å‰ commit. å…¶ä¸­ HEAD å¯çœç•¥, å³é»˜è®¤æŒ‡å‘å½“å‰ commit. å¦‚ä¸‹å›¾, ç»§ç»­ä¿®æ”¹ README.md, åœ¨æ–‡ä»¶ä¸­è¿½åŠ  â€˜ third modifyâ€™, æ­¤æ—¶æŸ¥çœ‹ git status, å‘ç°é™¤äº†åŸæœ‰çš„æš‚å­˜åŒºä¿®æ”¹ (ç»¿è‰²æ–‡å­—) ä¹‹å¤–, è¿˜æœ‰ç¬¬äºŒæ¬¡ä¿®æ”¹çš„å½“å‰å·¥ä½œåŒºä¿®æ”¹ (çº¢è‰²æ–‡å­—), æ¥ç€æ‰§è¡Œ git reset HEAD, ç»ˆç«¯æç¤º â€˜é‡ç½®åå–æ¶ˆæš‚å­˜çš„å˜æ›´â€™, æ­¤æ—¶æŸ¥çœ‹ git status, å‘ç°æš‚å­˜åŒºä¸è§äº†, åªå‰©å½“å‰å·¥ä½œåŒº, æŸ¥çœ‹å·¥ä½œåŒºä¸­çš„ README.md æ–‡ä»¶, å‘ç°åŸæœ‰çš„æš‚å­˜åŒºä¿®æ”¹è¢«æ’¤é”€äº†, ä¸”ä¸å½±å“å·¥ä½œåŒºæ–‡ä»¶. â€˜é‡ç½®åå–æ¶ˆæš‚å­˜çš„å˜æ›´â€™å¦‚æœ git reset â€˜commitIDâ€™ å‘¢, æ­¤æ—¶æ‰€è°“ â€˜é‡ç½®â€™ æŒ‡çš„æ˜¯å°†å½“å‰æŒ‡é’ˆæŒ‡å‘å¯¹åº”çš„ â€˜commitIDâ€™, è€Œ â€˜å–æ¶ˆæš‚å­˜çš„å˜æ›´â€™ æŒ‡çš„æ˜¯æ’¤é”€æœ€è¿‘ä¸€æ¬¡ â€˜git addâ€™; è¿™æ ·åˆ†å¼€çœ‹, å°±å¾ˆå¥½ç†è§£äº†. git reset â€“soft/â€“mixed/â€“hardå¦‚å›¾, å¸¦å‚æ•°çš„ git reset ä¸èƒ½ (æˆ–ä¸å»ºè®®) ä½œç”¨äºæŸä¸ªè·¯å¾„, å› æ­¤åªè¦ç”¨äºæ“ä½œ commitID. â€“softé‡ç½® HEAD çš„æŒ‡é’ˆåˆ°æŒ‡å®šçš„ commitID, åŒæ—¶ä¿æŒæš‚å­˜åŒºä¸å·¥ä½œåŒºä¸å˜; å¦‚å›¾, å°† HEAD æŒ‡é’ˆé‡ç½®åˆ°ä¸¤ä¸ª commit ä¹‹å‰, å‘ç°å½“å‰åˆ†æ”¯è½åè¿œç¨‹åˆ†æ”¯ä¸¤ä¸ª commit, æ­¤æ—¶æŸ¥çœ‹æš‚å­˜åŒº (git diff â€“cached) å’Œ å·¥ä½œåŒº (cat README.md), å¯ä»¥å‘ç°è¿™ä¸¤ä¸ªåŒºåŸŸçš„æ–‡ä»¶ç›¸æ¯” git reset â€“soft ä¹‹å‰éƒ½æ²¡æœ‰å˜åŒ–. â€“mixedé‡ç½® HEAD çš„æŒ‡é’ˆåˆ°æŒ‡å®šçš„ commitID, åŒæ—¶æ’¤é”€æš‚å­˜åŒº, è€Œå·¥ä½œåŒºåˆ™ä¸å˜; å¦‚å›¾, æ­¤å¤„ä¸ git reset soft,hard,mixedä¹‹åŒºåˆ«æ·±è§£ ä¸­æ‰€è¿°çš„ â€“mixed æœ‰å‡ºå…¥, å¹¶æ²¡æœ‰ â€˜å¹¶ä¸”é‡ç½®indexä»¥ä¾¿å’ŒHEADç›¸åŒ¹é…â€™; â€“hardé‡ç½® HEAD çš„æŒ‡é’ˆåˆ°æŒ‡å®šçš„ commitID, åŒæ—¶é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºä¸å…¶å¯¹åº”çš„ commitID ç›¸åŒ¹é…; å¦‚å›¾, æ‰§è¡Œ â€“hard é‡ç½®ä¹‹å, æš‚å­˜åŒºä¸å·¥ä½œåŒºå…¨éƒ½æ¶ˆå¤±äº†, æ­¤æ—¶å¯ä»¥é€‰æ‹© git pull, é‡æ–°ä¸è¿œç¨‹åˆ†æ”¯ä¸€è‡´, ä¹Ÿå¯ä½¿ç”¨ git push â€“force, å¼ºè¡Œå°†è¿œç¨‹åˆ†æ”¯çš„ commit è®°å½•ä¸æœ¬åœ°ä»“åº“ä¿æŒä¸€è‡´. ä¸è¿‡ä¸€èˆ¬å»ºè®®ä½¿ç”¨ git revert, å›é€€çš„åŒæ—¶ä¿å­˜ commit çš„å†å²è®°å½•. åˆ°åº•å“ªä¸ªæ‰æ˜¯é»˜è®¤å‚æ•°æœ‰äº›æ–‡ç« è¯´ â€“mixed æ˜¯é»˜è®¤å‚æ•°, ä¹Ÿæœ‰äº›è¯´ â€“soft æ˜¯é»˜è®¤å‚æ•° å¦‚å›¾, å¯çŸ¥é»˜è®¤å‚æ•°æ˜¯ â€“mixed","link":"/2016/10/04/git%20checkout%20%E4%B8%8E%20git%20reset%20%E5%A4%87%E5%BF%98%E5%BD%95/"},{"title":"ä¸€ç§å®ç”¨æ–°å‹ Obsidian å®è·µä¹‹æ„å»ºæˆ‘çš„ç¬¬äºŒå¤§è„‘ ğŸ§ ","text":"æœ¬æ–‡å°†ä»¥ Obsidian ä¸ºä¾‹ï¼Œåˆ†äº«æˆ‘ä½¿ç”¨ Obsidian æ„å»ºç¬¬äºŒå¤§è„‘çš„å®è·µï¼ æœ¬æ–‡å†…å®¹å·²ç»è¿‡æ—¶ï¼Œæ›´å¤šå†…å®¹è¯·å‚è€ƒå®˜ç½‘ LifeOSï¼ This article is also available in English. å‰è¨€ä»€ä¹ˆæ˜¯ Obsidianï¼Ÿ å®˜ç½‘ä¸Šå®ƒæ˜¯è¿™ä¹ˆè‡ªæˆ‘ä»‹ç»çš„ï¼š Obsidian is the private and flexible noteâ€‘taking app that adapts to the way you think. Obsidian æ˜¯ä¸€æ¬¾ç§å¯†ä¸”çµæ´»çš„ç¬”è®°åº”ç”¨ç¨‹åºï¼Œå¯ä»¥é€‚åº”æ‚¨çš„æ€ç»´æ–¹å¼ã€‚ æˆ‘ä¸»è¦çœ‹ä¸­å®ƒä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ï¼Œä½ å¦‚æœå–œæ¬¢ Vscodeï¼Œé‚£ä½ å¤§æ¦‚ç‡ä¹Ÿä¼šå–œæ¬¢ Obsidianï¼Œåªä¸è¿‡ Vscode ç”¨äºå†™ä»£ç ï¼Œè€Œ Obsidian ç”¨äºè®°ç¬”è®°ã€‚ ç¬¬ä¸€å¤§è„‘ VS ç¬¬äºŒå¤§è„‘ç¬¬ä¸€å¤§è„‘å³æˆ‘ä»¬çš„çœŸå®å¤§è„‘ï¼Œåªè¦æˆ‘ä»¬è¿˜æ´»ç€ï¼Œé‚£è¿™ä¸ªå¤§è„‘å°±ä¸åœåœ°åœ¨è¿è½¬ï¼Œæ‰§è¡Œçš„ä»»åŠ¡æ¯”å¦‚çŸ¥è¯†ç®¡ç†ã€ä»»åŠ¡ç®¡ç†ã€ç›®æ ‡ç®¡ç†ç­‰ï¼Œå¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬å¹¶ä¸èƒ½ä¸€è„‘å¤šç”¨ï¼Œå› æ­¤ç¬¬ä¸€å¤§è„‘æ›´åƒæ˜¯ä¸€ä¸ª CPUï¼Œå„å¼å„æ ·çš„ä»»åŠ¡åœ¨æŠ¢å  CPU åˆ†ç‰‡ã€‚å½“éœ€è¦å¤„ç†çš„ä»»åŠ¡å¤šèµ·æ¥çš„æ—¶å€™ï¼Œå¤§è„‘å°†ä¸å ªé‡è´Ÿï¼Œå› ä¸ºå¤§è„‘æ—¢è¦å¤„ç†å½“å‰çš„ä»»åŠ¡ï¼Œåˆè¦ä¿æŒå…¶å®ƒä»»åŠ¡çš„ä¸Šä¸‹æ–‡ï¼Œç”¨ä»¥åˆ‡æ¢ä»»åŠ¡ï¼Œä½¿å¾—æˆ‘ä»¬æ— æ³•ä¸“æ³¨äºå½“å‰ä»»åŠ¡çš„æ‰§è¡Œï¼Œæ­¤æ—¶éœ€è¦ä¸€ä¸ªå¤–ç½®çš„ç³»ç»Ÿæ¥è¾…åŠ©ç¬¬ä¸€å¤§è„‘ï¼Œå®ƒå°±æ˜¯ç¬¬äºŒå¤§è„‘ã€‚ ç¬¬äºŒå¤§è„‘å³ä¸€ä¸ªå¤–ç½®çš„ç³»ç»Ÿï¼Œå¦‚æœæŠŠç¬¬ä¸€å¤§è„‘æ¯”ä½œ CPU çš„è¯ï¼Œç¬¬äºŒå¤§è„‘æ›´åƒæ˜¯å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå°±åƒç¬¬ä¸€å¤§è„‘ä¸çœŸå®ä¸–ç•Œä¹‹é—´çš„ä¸€é“ç¼“å­˜ï¼Œå‡è½»äº†ç¬¬ä¸€å¤§è„‘çš„è´Ÿæ‹…ï¼Œä½¿å…¶èƒ½å¤Ÿä¸“æ³¨äºå½“å‰äº‹é¡¹ã€‚å®ƒå¯ä»¥ç±»æ¯”ä¸ºå†…å­˜å’Œç¡¬ç›˜ï¼Œåªä¸è¿‡å†…å­˜ç›¸å¯¹äºç¡¬ç›˜ï¼Œå®ƒä¸ CPUï¼ˆç¬¬ä¸€å¤§è„‘ï¼‰æ²Ÿé€šæ›´åŠ é¢‘ç¹ï¼Œè¯»å–é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚è¿™ä¸ªå­˜å‚¨ç³»ç»Ÿå­˜æ”¾å½“å‰ç¬¬ä¸€å¤§è„‘æ— éœ€æ—¶åˆ»å…³æ³¨çš„äº‹ç‰©ï¼Œå½“ç„¶ï¼Œè¿™äº›äº‹ç‰©å¾—ç”±ç¬¬ä¸€å¤§è„‘æ€è€ƒå†³ - å®šæ˜¯å¦æœ‰å­˜æ”¾çš„å¿…è¦ï¼Œå†…å®¹å¯ä»¥æ˜¯è®°å½•ã€å¾…åŠã€æµç¨‹ï¼Œè½½ä½“å¯ä»¥æ˜¯æ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ã€‚ ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒå¤§è„‘è¿›è¡Œä»»åŠ¡ç®¡ç†çš„æ—¶å€™ï¼Œé‡è¦ç´§æ€¥çš„äº‹é¡¹å­˜æ”¾åœ¨å†…å­˜ï¼Œä¸é‡è¦ä¸ç´§æ€¥çš„äº‹é¡¹å­˜æ”¾åœ¨ç¡¬ç›˜ï¼›æœ¬å‘¨ä»»åŠ¡å­˜æ”¾åœ¨å†…å­˜ï¼Œæœ¬æœˆä»»åŠ¡å¯èƒ½å°±å­˜æ”¾åœ¨ç¡¬ç›˜ï¼›å› æ­¤é€šè¿‡å€ŸåŠ©ç¬¬äºŒå¤§è„‘ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿæ— å‹åŠ›ä¸“æ³¨åœ¨å½“ä¸‹ï¼Œåœ¨æœ‰å¿…è¦çš„æ—¶å€™å†åˆ‡æ¢ä¸Šä¸‹æ–‡ã€‚ æœ¬æ–‡å°†ä»¥ Obsidian ä¸ºä¾‹ï¼Œåˆ†äº«æˆ‘æ„å»ºç¬¬äºŒå¤§è„‘çš„å®è·µï¼ä½ è¯´å®ƒæ˜¯ç¬¬äºŒå¤§è„‘ï¼Œä½†æ˜¯ä»ä¸åŒè§’åº¦å®¡è§†è¿™ä¸ªå¤§è„‘ï¼Œæˆ‘ä¹Ÿå¯ä»¥ç§°å®ƒä¸ºã€LifeOSã€ï¼Œå› ä¸ºæ— è®ºä»ç”Ÿæ´»è¿˜æ˜¯å·¥ä½œï¼Œæˆ‘éƒ½è®°å½•åœ¨ä¸Šé¢ï¼›æˆ‘ä¹Ÿå¯ä»¥ç§°å®ƒä¸ºã€å¯ç¼–ç¨‹ä¸ªäººç”Ÿäº§åŠ›ç³»ç»Ÿã€ï¼Œæˆ‘åœ¨ä¸Šé¢å†™äº†ä¸å°‘ä»£ç ï¼Œç”¨æ¥åšä¸€äº›æŸ¥è¯¢å’Œè‡ªåŠ¨åŒ–çš„äº‹æƒ…ï¼Œä¹Ÿæ˜¯æˆ‘ç”¨æ¥ç®¡ç†ä»»åŠ¡å’Œç›®æ ‡çš„ç”Ÿäº§åŠ›ç³»ç»Ÿï¼›ç”šè‡³å®ƒè¿˜æœ‰ç‚¹åƒã€Monorepo å·¥ç¨‹ã€ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®ä¸­çš„ README.md å°±åƒæ˜¯ Package.json ä¸€æ ·æè¿°äº†å½“å‰é¡¹ç›®çš„å…ƒä¿¡æ¯ã€‚ ğŸ“¢ æ³¨æ„ï¼šè¿™å¥—ç³»ç»Ÿä¸æ˜¯é‚£ç§è‡ªä¸Šè€Œä¸‹ã€å…ˆæœ‰è¿™å¥—æµç¨‹è€Œå»å®ç°çš„ï¼Œæ˜¯æˆ‘åœ¨ä½¿ç”¨ Obsidian è¿‡ç¨‹ä¸­é€æ¸å½¢æˆçš„ï¼Œè€Œä¸”ä¹Ÿä¸€ç›´åœ¨è¿­ä»£ä¸­ï¼Œå§‘ä¸”æŠŠå½“å‰çš„ç‰ˆæœ¬å®šä¸º 1.0ï¼Œç°åœ¨åˆ†äº«å‡ºæ¥æ˜¯æƒ³ç»™å¤§å®¶ä¸€ç‚¹ç‚¹çµæ„Ÿï¼Œå»å®Œå–„è‡ªå·±çš„ç³»ç»Ÿï¼ç›®å‰å·²ç»ç¼–å†™äº†ä¸€ä¸ª Obsidian Periodic PARA æ’ä»¶æ¥æ”¯æŒè¿™å¥—ç³»ç»Ÿï¼å€ŸåŠ©è¿™ä¸ªæ’ä»¶ï¼Œä½ ä¸éœ€è¦æœ‰ä»»ä½•ç¼–ç¨‹åŸºç¡€ï¼Œé€šè¿‡ç®€å•çš„å¯è§†åŒ–ç‚¹å‡»å°±èƒ½è½»æ¾åœ°åˆ›å»ºå‘¨æœŸç¬”è®°å’Œ PARA ç¬”è®°ï¼ æˆ‘çš„å®è·µ æˆ‘é‡‡ç”¨ä¸¤å¥—ç³»ç»Ÿï¼Œä¸€ä¸ªæ˜¯çŸ¥è¯†ç®¡ç†ç³»ç»Ÿï¼Œå¦ä¸€ä¸ªæ˜¯å‘¨æœŸç¬”è®°ï¼Œå‰è€…ä»¥é¡¹ç›®/é¢†åŸŸ/èµ„æºä¸ºç»´åº¦ï¼Œè¿›è¡ŒçŸ¥è¯†ç®¡ç†ï¼Œåè€…ä»¥æ—¶é—´ä¸ºç»´åº¦ï¼Œè¿›è¡Œä»»åŠ¡/ç›®æ ‡/æ—¶é—´ç®¡ç†ã€‚ ä¸¤å¥—ç³»ç»Ÿ çŸ¥è¯†ç®¡ç†ï¼šé‡‡ç”¨ PARA ç³»ç»Ÿ Projects -&gt; é¡¹ç›®æ˜¯ä¸ç›®æ ‡ç›¸å…³çš„ä¸€ç³»åˆ—ä»»åŠ¡ï¼Œæœ‰æˆªæ­¢æ—¥æœŸ Areas -&gt; é¢†åŸŸæ˜¯ä¸€ç§æ´»åŠ¨é¢†åŸŸï¼Œéœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…ä¿æŒä¸€å®šçš„æ ‡å‡† Resources -&gt; èµ„æºæ˜¯æŒç»­æ„Ÿå…´è¶£çš„è¯é¢˜æˆ–ä¸»é¢˜ Archives -&gt; å­˜æ¡£æ˜¯æ¥è‡ªä¸Šè¿°ä¸‰ä¸ªç±»åˆ«çš„éæ´»åŠ¨æ¡ç›® å‘¨æœŸç¬”è®° é•¿æœŸï¼šè‡ªé¡¶å‘ä¸‹ï¼Œä¸“æ³¨äºé•¿æœŸçš„ç›®æ ‡ ä¸‰å¹´è®° å¹´è®° å­£è®° çŸ­æœŸï¼šè‡ªåº•å‘ä¸Šï¼Œä¸“æ³¨äºçŸ­æœŸçš„ä»»åŠ¡ æœˆè®° å‘¨è®° æ—¥å¸¸ï¼šæ•æ‰æƒ³æ³•æ´è§ï¼Œå®ç°è‡ªæˆ‘è§‰å¯Ÿï¼›è€—æ—¶ç»Ÿè®¡ï¼Œç¡®ä¿èšç„¦äºé¡¹ç›® æ—¥è®° å…¶ä¸­ PARA è¶Šé è¿‘ Projectsï¼Œå®ƒçš„å¯æ“ä½œæ€§å°±è¶Šé«˜ï¼›å‘¨æœŸç¬”è®°è¶Šé•¿æœŸï¼Œå®ƒçš„å¯é¢„æµ‹æ€§å°±è¶Šä½ï¼› è¿™ä¸¤å¥—ç³»ç»Ÿç›¸å½“äºåˆ¶é€ äº†ä¸¤ä¸ªä¸Šä¸‹æ–‡ï¼Œè®©æˆ‘ä¿æŒèšç„¦ ä¸€ä¸ªæ˜¯åŸºäºæ—¶é—´çš„ï¼ˆå‘¨æœŸç¬”è®°ï¼‰ï¼Œå³æˆ‘åˆ°è¾¾æŸä¸ªæ—¶é—´èŠ‚ç‚¹ï¼Œæˆ‘å°±åŸºäºå¯¹åº”å‘¨æœŸç¬”è®°ä½œä¸šï¼Œä¸”ç¬”è®°ä¸­æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼› å¦ä¸€ä¸ªæ˜¯åŸºäºä¸»é¢˜çš„ï¼ˆPARAï¼‰ï¼Œå³æˆ‘æƒ³å¯¹æŸä¸ªä¸»é¢˜è¿›è¡Œè°ƒæŸ¥ç ”ç©¶çš„æ—¶å€™ï¼Œæˆ‘å°±åŸºäºå¯¹åº”ä¸»é¢˜çš„ç´¢å¼•ï¼ˆREADME.mdï¼‰ä½œä¸šï¼Œä¸”ç¬”è®°ä¸­å·²ç»æ”¶é›†äº†ä¸å°‘ä¸Šä¸‹æ–‡ï¼› åˆ‡é¢å­ç³»ç»Ÿ é¢å‘åˆ‡é¢ç¨‹åºè®¾è®¡ - Wikiwand åœ¨ä¸Šè¿°ä¸¤å¥—ç³»ç»Ÿä¹‹ä¸‹ï¼Œéšè—ç€ä»»åŠ¡/ç›®æ ‡/æ—¶é—´ç®¡ç†å­ç³»ç»Ÿï¼Œæˆ‘ä¸»è¦é€šè¿‡ã€å‘¨æœŸç¬”è®°ã€æ¥ç®¡ç†ï¼š ä»»åŠ¡ç®¡ç† é€šè¿‡æ—¥è®°/å‘¨è®°æ¥æ”¶é›† é€šè¿‡å‘¨è®°/æœˆè®°æ¥æ•´ç† ç›®æ ‡ç®¡ç† é€šè¿‡å¹´è®°è§„åˆ’å¹´åº¦ç›®æ ‡ é€šè¿‡å­£è®°åˆ†æ‹†å¹´åº¦ç›®æ ‡ é€šè¿‡æœˆè®°æ‹†è§£å¾…åŠäº‹é¡¹ è‡ªä¸Šè€Œä¸‹æ•´ç†ï¼ˆé€šè¿‡ç›®æ ‡æ‹†è§£ï¼‰ è‡ªä¸‹è€Œä¸Šæ•´ç†ï¼ˆé€šè¿‡æ”¶é›†æ‹†è§£ -&gt; æ—¥è®°/å‘¨è®°ï¼‰ æ—¶é—´ç®¡ç† é€šè¿‡æ—¥è®°æ‰‹åŠ¨ç»Ÿè®¡å„ä¸ªé¡¹ç›®çš„è€—æ—¶å’Œå æ¯”ï¼Œåé¦ˆå’Œè°ƒæ•´æ—¶é—´å¼€é”€ é€šè¿‡æ—¥è®°ã€å‘¨è®°ã€æœˆè®°ã€å­£è®°ã€å¹´è®°ä½¿ç”¨è„šæœ¬è‡ªåŠ¨ç»Ÿè®¡å„ä¸ªé¡¹ç›®çš„è€—æ—¶å’Œå æ¯”ï¼Œç”¨äºå¤ç›˜æ—¶é—´å¼€é”€ ä½ ä¹Ÿè®¸ä¼šå¥½å¥‡ï¼Œä¸Šè¿°å­ç³»ç»Ÿä¼¼ä¹åªä½¿ç”¨äº†ã€å‘¨æœŸç¬”è®°ã€ï¼Œå®é™…ä¸Šä¸¤ä¸ªçˆ¶ç³»ç»Ÿä¹‹é—´é€šè¿‡ä¸¤ç§æ–¹å¼å°†å„ä¸ªå­ç³»ç»Ÿè¿æ¥èµ·æ¥ã€‚ è¿æ¥ ç³»ç»Ÿä¹‹é—´å¦‚ä½•å…³è” æ ‡ç­¾è¿æ¥ å°† PARA ä¸‹çš„ä¸€çº§æ–‡ä»¶å¤¹ä½œä¸ºä¸€ç§ç‰¹æ®Šçš„æ ‡ç­¾ï¼ˆä¸ä¸€å®šè¦ä¸æ–‡ä»¶åå®Œå…¨ä¸€è‡´ï¼‰ï¼Œåœ¨ã€å‘¨æœŸç¬”è®°ã€ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆä¾¿å¯åœ¨å„ä¸ªä¸€çº§æ–‡ä»¶å¤¹ä¸­ï¼Œä»¥ç›¸åŒçš„æ–¹å¼è¿›è¡Œç»Ÿä¸€çš„ç´¢å¼•ã€‚è¿™æ ·èƒ½ä¿è¯æ¯ä¸ª PARA æ–‡ä»¶å¤¹ä¸‹çš„ README.md ç´¢å¼•æœ‰å½“å‰ä¸»é¢˜çš„æ‰€æœ‰ä¸Šä¸‹æ–‡ï¼š é¡¹ç›®è¿æ¥é€šè¿‡åœ¨ã€çŸ¥è¯†ç®¡ç†ã€ä¸­ç«‹é¡¹æ¥ç”Ÿæˆé¡¹ç›®ï¼Œä¸ºäº†å¢åŠ å¯¹é¡¹ç›®çš„å…³æ³¨ï¼Œåœ¨æ¯ç±»ã€å‘¨æœŸç¬”è®°ã€ä¸­å‡è®¾ç½®æœ‰ã€è¦äº‹åˆ—è¡¨ã€æˆ–ã€é¡¹ç›®åˆ—è¡¨ã€ï¼Œæ¯”å¦‚ æ—¥è®°ä¸­çš„ã€é¡¹ç›®åˆ—è¡¨ã€ï¼Œå®ƒæ˜¯ä¸€ä»½å½“å‰é¡¹ç›®åˆ—è¡¨çš„å¿«ç…§ï¼Œç”¨äºç»Ÿè®¡å½“å¤©èŠ±è´¹åœ¨å„ä¸ªé¡¹ç›®ä¸­çš„è€—æ—¶åŠå…¶å æ¯”ï¼Œç¡®ä¿æŠŠè¶³å¤Ÿçš„æ—¶é—´èŠ±åœ¨é¡¹ç›®ä¸Š å‘¨è®°å’Œæœˆè®°ä¸­çš„ã€è¦äº‹ç»´åº¦ã€ï¼Œæ˜¯ä»æœ¬å‘¨å’Œæœ¬æœˆçš„æ—¥è®°ä¸­è‡ªåŠ¨åˆå¹¶å»é‡å¾—åˆ°çš„ä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºå®‰æ’é¡¹ç›®ç»´åº¦çš„ä»»åŠ¡å’Œåç»­çš„å¤ç›˜ å­£è®°çš„ã€è¦äº‹ç»´åº¦ã€ï¼Œå®ƒæ˜¯ä¸€ä»½å½“å‰é¢†åŸŸåˆ—è¡¨çš„å¿«ç…§ï¼Œç”¨äºå®‰æ’è¦äº‹ç»´åº¦çš„ç›®æ ‡å’Œåç»­çš„å¤ç›˜ å¹´è®°ä¸­çš„ã€è¦äº‹ç»´åº¦ã€ï¼Œæ˜¯ä»æœ¬å¹´çš„å­£è®°ä¸­è‡ªåŠ¨åˆå¹¶å»é‡å¾—åˆ°çš„ä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºè®¾ç½®é¢†åŸŸç»´åº¦çš„ç›®æ ‡å’Œåç»­çš„å¤ç›˜ æ£€ç´¢ æ ‡ç­¾ æ¯”å¦‚ï¼Œæ—¥è®°çš„ èŠ‚æ—¥ã€ä¼‘å‡ æ ‡ç­¾ ç´¢å¼•æ–‡ä»¶ æ¯”å¦‚ï¼Œæ¯ä¸ªé¡¹ç›®çš„ README.md ç´¢å¼•æœ¬é¡¹ç›®çš„ä»»åŠ¡ã€æ—¥å¿—ã€ä¸Šä¸‹æ–‡ æ–‡ä»¶å¤¹ æ¯”å¦‚ï¼Œæ¯ä¸ª PARA ç›®å½•ä½¿ç”¨ä¸€è‡´çš„ç›®å½•ç»“æ„ å¤ç›˜ å¤ç›˜ä¸»è¦é’ˆå¯¹æœ¬å‘¨æœŸå†…çš„é¡¹ç›®ï¼Œå¤ç›˜çš„åŒæ—¶è§„åˆ’ä¸‹ä¸ªå‘¨æœŸçš„ä»»åŠ¡ å‘¨è®°å¤ç›˜æœ¬å‘¨æ—¥è®°ï¼Œæœˆè®°å¤ç›˜æ¯å‘¨å¤ç›˜ï¼Œå­£è®°å¤ç›˜æ¯æœˆå¤ç›˜ å¿«é€Ÿä¸Šæ‰‹ä¸‹è½½ ç‚¹æˆ‘ä¸‹è½½ ä½¿ç”¨ obsidian æ‰“å¼€å³å¯äº«ç”¨ åˆ›å»ºç¬”è®° é€šè¿‡å·¦ä¸Šè§’ç¬”è®°åˆ›å»ºæ¨¡å—ï¼Œå¿«é€Ÿåˆ›å»ºæ—¥è®°ã€å‘¨è®°ã€æœˆè®°ã€å­£è®°ã€å¹´è®° é€šè¿‡å·¦ä¸Šè§’ç¬”è®°åˆ›å»ºæ¨¡å—ï¼Œå¿«é€Ÿ PARA ç¬”è®°ï¼Œå³é¡¹ç›®ã€é¢†åŸŸã€èµ„æºã€å­˜æ¡£ ã€æ—¥è®°ã€ä¸ã€é¡¹ç›® READMEã€ ç”¨äºæ—¥å¸¸ç®¡ç†ï¼ŒåŒ…æ‹¬é¡¹ç›®åˆ—è¡¨ã€æ—¥å¸¸è®°å½•ã€ä¹ æƒ¯æ‰“å¡ã€ç²¾åŠ›åˆ†é…ã€ä»Šæ—¥å®Œæˆç­‰æ¨¡å— æ—¥è®°ä¸­çš„ã€é¡¹ç›®åˆ—è¡¨ã€æ˜¯ä¸€ä»½å½“å‰é¡¹ç›®ï¼ˆå³ Projects ç›®å½•ä¸‹ï¼‰çš„å¿«ç…§ ã€å‘¨è®°ã€ä¸ã€æœˆè®°ã€ ç”¨äºå®‰æ’å‘¨åº¦å’Œæœˆåº¦ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä»»åŠ¡å’Œå¤ç›˜æ¨¡å— åœ¨å‘¨è®°å’Œæœˆè®°ä¸­ï¼Œã€è¦äº‹ç»´åº¦ã€æ˜¯ä¸€ä»½æœ¬å‘¨æœŸæ—¥è®°ã€é¡¹ç›®åˆ—è¡¨ã€çš„å¿«ç…§åˆé›†ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ åœ¨å‘¨è®°å’Œæœˆè®°ä¸­ï¼Œã€å¤ç›˜ã€ä¸»è¦é’ˆå¯¹æœ¬å‘¨æœŸå†…çš„é¡¹ç›®è¿›è¡Œ ã€å­£è®°ã€ä¸ã€å¹´è®°ã€ ç”¨äºåˆ¶å®šå­£åº¦å’Œå¹´åº¦ç›®æ ‡ï¼ŒåŒ…æ‹¬ç›®æ ‡å’Œå¤ç›˜æ¨¡å— åœ¨å­£è®°ä¸­ï¼Œã€è¦äº‹ç»´åº¦ã€æ˜¯ä¸€ä»½å½“å‰é¢†åŸŸï¼ˆå³ Areas ç›®å½•ä¸‹ï¼‰çš„å¿«ç…§ åœ¨å¹´è®°ä¸­ï¼Œã€è¦äº‹ç»´åº¦ã€æ˜¯ä¸€ä»½æœ¬å‘¨æœŸå­£è®°ã€è¦äº‹ç»´åº¦ã€çš„å¿«ç…§åˆé›†ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ åœ¨å­£è®°å’Œå¹´è®°ä¸­ï¼Œã€å¤ç›˜ã€ä¸»è¦é’ˆå¯¹æœ¬å‘¨æœŸå†…çš„é¢†åŸŸè¿›è¡Œ ã€PARA ç´¢å¼•ã€ä¸ã€ä»»åŠ¡ç´¢å¼•ã€ ã€æ•è·ã€ä¸ã€è¡¨è¾¾ã€é¦–å…ˆä»‹ç»ä¸€ä¸ªæ¦‚å¿µï¼Œå³ CODE æ¨¡å‹ï¼Œå…¶ä¸­ï¼š C æ˜¯ Capture - æ•è·ï¼šæŠŠå¼•å‘å…±é¸£çš„ä¿¡æ¯æ”¶é›†èµ·æ¥ O æ˜¯ Organize- ç»„ç»‡ï¼šå¯¹æ”¶é›†çš„è¿™äº›ä¿¡æ¯è¿›è¡Œæ•´ç†ï¼Œå³ PARA D æ˜¯ Distill - æç‚¼ï¼šæç‚¼è¿™äº›å†…å®¹çš„ç²¾é«“ï¼Œç­›é€‰æœ€æœ‰ç”¨çš„ä¿¡æ¯ E æ˜¯ Express - è¡¨è¾¾ï¼šå’Œä»–äººåˆ†äº«ï¼Œåœ¨å®è·µä¸­å»åº”ç”¨ä½ çš„çŸ¥è¯† ç†Ÿæ‚‰ PARA çš„æœ‹å‹è‚¯å®šçœ‹å‡ºæ¥äº†ï¼Œè¿™ä¸ªæ¨¡å‹å…¶å®å°±æ˜¯ Tiago Forte åœ¨ ã€Šæ‰“é€ ç¬¬äºŒå¤§è„‘ã€‹ä¸­æå‡ºçš„ï¼Œå®ƒæ˜¯åŒ…å«äº† PARA ç»„ç»‡æ³•çš„ä¸Šå±‚æ¨¡å‹ï¼Œå…¶ä¸­çš„ O å³æŒ‡çš„ PARA ç»„ç»‡æ³•ã€‚ è€Œæˆ‘çš„å®è·µå°±æ˜¯åœ¨ã€æ•è·ã€ç›®å½•ä¸­ï¼Œæš‚æ—¶å­˜æ”¾ä¸€äº›æ ‡è®°è¿‡çš„æ–‡ç« ï¼ŒåŒæ—¶å€ŸåŠ©ã€-1. æ•è·/README.mdã€æ–‡ä»¶å»ç´¢å¼•åˆ†æ•£åœ¨æ—¥è®°ä¸­ï¼Œè¢«æ‰“ä¸Š #PARA/Capture æ ‡ç­¾çš„è®°å½•ï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘åœ¨ç‰¹å®šçš„æ—¶é—´èŠ‚ç‚¹ï¼Œæ¯”å¦‚æ¯å‘¨æœ«ã€æ¯æœˆæœ«ã€æ¯å­£åº¦æœ«è¿›è¡Œå›é¡¾æ¢³ç†ï¼Œé¦–å…ˆå°†æ ‡è®°æ–‡ç« æ¢³ç†åˆ°å„ä¸ª PARA ä¸»é¢˜ç›®å½•ï¼Œæ¥ç€å°†æ—¥è®°ä¸­çš„æŸäº›çµæ„Ÿè®°å½•è½¬åŒ–æˆä¸€äº›æ˜ç¡®çš„å¾…åŠäº‹é¡¹ï¼› æ¥ä¸‹æ¥è¯´è¯´ã€è¡¨è¾¾ã€ï¼Œæˆ‘ä¼šæŠŠè‡ªå·±çš„åšå®¢æ”¾åˆ°è¡¨è¾¾ä¸­ï¼Œä¹Ÿä¼šåœ¨æ—¥è®°ä¸­è®°å½•ä¸€äº›é›¶ç¢çš„è®°å½•å¹¶æ‰“ä¸Š PARA/Express æ ‡ç­¾ï¼Œè¿™äº›éƒ½æ˜¯è‡ªå·±å†…åŒ–åçš„è¾“å‡ºï¼Œå¦‚æœè¿™ä¸ªè¾“å‡ºéœ€è¦è¿›ä¸€æ­¥å‘å¸ƒåˆ°æŒ‡å®šçš„ç¤¾äº¤å¹³å°ï¼Œæ¯”å¦‚çŸ¥ä¹ã€å°çº¢ä¹¦ï¼Œæˆ‘ä¼šé¡ºæ‰‹æŠŠå®ƒè®°å½•ä¸ºä»»åŠ¡ï¼Œå½“æˆ‘åœ¨å›é¡¾ã€5. è¡¨è¾¾/README.mdã€æ–‡ä»¶ç´¢å¼•çš„æ—¶å€™ï¼Œå‘ç°æœ‰å¾…åŠä»»åŠ¡ï¼Œç›´æ¥ä¸€é¡¹ä¸€é¡¹çš„å®Œæˆå³å¯ã€‚ å®è·µä¸­çš„å° Tipsç¼“å­˜åŒºæœºåˆ¶æŠŠä¸é‡è¦ä¸ç´§æ€¥çš„äº‹æƒ…ï¼Œé€šè¿‡åˆ›å»ºä»»åŠ¡ï¼Œå¿«é€Ÿæ”¾åˆ°ç¼“å­˜åŒºï¼ˆInboxï¼‰ï¼ŒæŠŠå¤§éƒ¨åˆ†æ³¨æ„åŠ›ä¿æŒåœ¨ã€é¡¹ç›®ã€ä¸­ ä»»åŠ¡åˆ—è¡¨ä»»åŠ¡çš„è®°å½•ä¸è¦æœ‰å¤ªå¤§çš„å¿ƒé‡Œå‹åŠ›ï¼Œè®°ä¸‹çš„ä¸ä»£è¡¨ä¸€å®šè¦åšï¼›è®°ä¸‹äº†èƒ½å¤Ÿå‡è½»ä½ çš„å¿ƒé‡Œè´Ÿæ‹…ï¼Œä¸ç”¨è€æƒ³ç€è¿™ä¸ªäº‹ï¼Œä¹Ÿä¸æ€•å¿˜è®°è¿™ä¸ªäº‹ï¼›æˆ‘æœ‰éå¸¸å¤šçš„ä»»åŠ¡è®°ä¸‹æ¥äº†ï¼Œåç»­ç»è¿‡è¯„ä¼°ä¹Ÿç¡®å®æ²¡å®ç°ã€‚ æˆ‘ä»¬åªè¦ä¿è¯ä¸€å®šçš„æœºåˆ¶èƒ½å›é¡¾åˆ°è¿™äº›è¢«è®°ä¸‹çš„ä»»åŠ¡å³å¯ï¼Œæ¯”å¦‚ ä½¿ç”¨ tasks æ’ä»¶æ¥åšä¸€äº›ä»»åŠ¡åˆ—è¡¨çš„ æŸ¥è¯¢è§†å›¾ æ¯ä»½å‘¨æœŸç¬”è®°ä¸­éƒ½æœ‰å½“å‰å‘¨æœŸæ”¶é›†çš„ ä»»åŠ¡åˆ—è¡¨ é¡¹ç›®ç´¢å¼•æ–‡ä»¶ä¸­çš„ ä»»åŠ¡åˆ—è¡¨ ä»»åŠ¡æé†’æˆ‘è®¤ä¸ºä»»åŠ¡æœ‰ä¸‰ç§æé†’æ–¹å¼ å¼ºæé†’ï¼Œæ¯”å¦‚æŠ¢èŒ…å°ã€æŠ¢æ¼”å”±ä¼šé—¨ç¥¨è¿™ç§ï¼Œåˆ°ç‚¹å°±è¦è¿›è¡Œï¼Œå°±éœ€è¦å¼ºæé†’ï¼Œé€šè¿‡æ‰‹æœºè®¾ç½®é—¹é’Ÿæé†’å³å¯ å¼±æé†’ï¼ŒæŸå¤©éœ€è¦å®Œæˆï¼Œæ¯”å¦‚ä¿¡ç”¨å¡è¿˜æ¬¾ã€è´·æ¬¾è¿˜æ¬¾ä¹‹ç±»çš„ï¼Œé€šè¿‡ GTD è½¯ä»¶è®¾ç½®æé†’å³å¯ åˆ—è¡¨ç±»ï¼Œç”¨äºè®°å½•ä»»åŠ¡ï¼Œè®©ä½ åç»­ç»Ÿç­¹å®‰æ’çš„ï¼Œæ ¹æ®éœ€è¦å¯ä»¥è½¬æˆå¼ºæé†’æˆ–è€…å¼±æé†’äº‹ä»¶ï¼Œæœ‰ç‚¹ç±»ä¼¼ GTD é‡Œçš„æ”¶ä»¶ç®± å¾®ä¹ æƒ¯ æˆ‘ä¼šåœ¨æ—¥è®°ä¸­åˆ—ä¸€äº›å¾®ä¹ æƒ¯ï¼Œåˆ‡è®°ä¸æ˜¯ä»»åŠ¡ï¼Œå®Œä¸å®Œæˆéƒ½è¡Œï¼Œä¸»è¦ç”¨æ¥æé†’ã€è¿™äº›å¾®ä¹ æƒ¯ï¼Œä½ ä»Šå¤©è€ƒè™‘åšä¸€ä¸‹å—ï¼Ÿã€ï¼Œå³åœ¨æˆ‘æœ‰ã€èƒ½åŠ›ã€å’Œã€åŠ¨æœºã€çš„æ—¶å€™ï¼Œèµ·åˆ°ã€æç¤ºã€çš„ä½œç”¨ï¼Œæ¯”å¦‚ï¼š å¾®ä¹ æƒ¯ ä¸€å¬åˆ°é—¹é’Ÿå“å°±èµ·åºŠå–æ°´ ä¸€ä¸‹è½¦å°±æˆ´è€³æœºå¬å°å®‡å®™ ä¸€ä¸Šåœ°é“å°±æ‰“å¼€å¾®ä¿¡è¯»ä¹¦ ä¸€åˆ°å·¥ä½å°±å†™ä¸‹ä¸‰ä»¶å¾…åŠ ä¸€åˆ°åç‚¹åŠå°±å¼€å§‹å¹²æ­£äº‹ æ˜“äºé‡æ„åœ¨æ¯ä»½å‘¨æœŸç¬”è®°ä¸­ï¼Œç›¸åŒåŠŸèƒ½çš„æ¨¡å—éƒ½ä½¿ç”¨åŒä¸€ä¸ªè¯­å¥ï¼Œæ¯”å¦‚ã€æœ¬å‘¨æœŸæ”¶é›†çš„ä»»åŠ¡ã€ï¼Œéƒ½æ˜¯é€šè¿‡æ’å…¥å¦‚ä¸‹æŸ¥è¯¢è¯­å¥ï¼Œè€Œã€æœ¬å‘¨æœŸã€çš„å˜é‡æ˜¯å½“å‰çš„æ–‡ä»¶åæä¾›ï¼Œè¿™å°±ä½¿å¾—æ‰¹é‡é‡æ„æ‰€æœ‰å‘¨æœŸæ–‡ä»¶å˜å¾—ååˆ†æ–¹ä¾¿ï¼Œåªéœ€è¦æ‰¹é‡æ›¿æ¢å³å¯ï¼š 123```PeriodicPARATaskRecordListByTime``` å–„ç”¨å¿«æ·é”®è®¾ç½®å…¨å±€ä¸€è‡´çš„å¿«æ·é”®ï¼Œä½¿å¾—æ— è®ºåœ¨å“ªä¸ªè½¯ä»¶éƒ½èƒ½ä½¿ç”¨åŒä¸€ä¸ªå¿«æ·é”®å”¤èµ·åŒä¸€ä¸ªåŠŸèƒ½ï¼Œå¦‚ä¸‹æ˜¯æˆ‘çš„éƒ¨åˆ†è®¾ç½®ï¼š å…‰æ ‡ç§»åŠ¨ è§„å¾‹ï¼šControl + æ–¹å‘é¦–å­—æ¯/VIM æ–¹å‘ ç¤ºä¾‹ï¼š A: Head of line E: End of line F/L: Forward B/H: Backward N/J: Next line P/K: Previous line W: Delete a word(Backward) D: Delete a character(Forward) çª—å£ç®¡ç† è§„å¾‹ï¼šCommand + Option + é¦–å­—æ¯ ç¤ºä¾‹ï¼š L: å·¦ä¾§åŠå± R: å³ä¾§åŠå± C: å±…ä¸­ M: æœ€å¤§åŒ– [: æ˜¾ç¤º/éšè—å·¦ä¾§æ  ]: æ˜¾ç¤ºéšè—å³ä¾§æ  â€˜: æ˜¾ç¤º/éšè—åº•æ  T: æ–°å»º Tab(æ›´å…·ä½“çš„çª—å£ä¸‹ï¼Œé¡¶å±‚ Tab ä½¿ç”¨ Command + T) W: å…³é—­ Tab(æ›´å…·ä½“çš„çª—å£ä¸‹ï¼Œé¡¶å±‚ Tab ä½¿ç”¨ Command + W) J: ä¸‹ä¸€ä¸ª Tab K: ä¸Šä¸€ä¸ª Tab æ–‡æ¡£ç¼–è¾‘ è§„å¾‹ 1ï¼šCommand + Option + æ•°å­—/ç¬¦å· ç¤ºä¾‹ï¼š 1: Markdown ä¸€çº§æ ‡é¢˜ 2: Markdown äºŒçº§æ ‡é¢˜ 3: Markdown ä¸‰çº§æ ‡é¢˜ 4: Markdown å››çº§æ ‡é¢˜ 5: Markdown äº”çº§æ ‡é¢˜ 6: Markdown å…­çº§æ ‡é¢˜ æ— åºåˆ—è¡¨: ~ åˆ é™¤çº¿: - åŠŸèƒ½ç±» è§„å¾‹ï¼šControl + é¦–å­—æ¯ ç¤ºä¾‹ï¼š C: Copy link(Obsidian block link, Arc browser link, VScode git link) D: Download I: Add to inbox K: Quick Search","link":"/2023/06/18/%E4%B8%80%E7%A7%8D%E5%AE%9E%E7%94%A8%E6%96%B0%E5%9E%8B%20Obsidian%20%E5%AE%9E%E8%B7%B5%E4%B9%8B%E6%9E%84%E5%BB%BA%E6%88%91%E7%9A%84%E7%AC%AC%E4%BA%8C%E5%A4%A7%E8%84%91%20%F0%9F%A7%A0/"},{"title":"ä¸è¦å«æˆ‘ç¨‹åºçŒ¿,æˆ‘æ˜¯å‰ç«¯å¼€å‘å·¥ç¨‹ç‹®","text":"ä¸Šå­¦æœŸæœŸæœ«å¼€å§‹äº†è§£åˆ°å‰ç«¯å¼€å‘ï¼Œå½“æ—¶å¿™äºåšå®éªŒã€å†™è®ºæ–‡ã€æŠ•æ–‡ç« ï¼Œä¹Ÿå°±æ²¡æ·±å…¥äº†è§£ï¼Œå½“æ—¶è§‰å¾—æŒºå¥½ç©çš„ï¼Œæ‰€ä»¥å±é¢ å±é¢ çš„å»å€Ÿäº†ä¸€æœ¬ã€ŠHTMLä¸CSSå…¥é—¨ç»å…¸ã€‹ï¼Œå½“æ—¶é‚£ä¸ªè¿·èŒ«å•Šã€‚ä¸€å¼€å§‹æ˜¯å€Ÿäº†ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹å’Œã€ŠAndroid 4.Xä»å…¥é—¨åˆ°ç²¾é€šã€‹ï¼Œæƒ³ç€å¤ä¹ ä¸‹Javaï¼Œç„¶ååŠ¨æ‰‹å†™å†™å®‰å“ï¼Œç„¶åæ¯•ä¸šæå®‰å“å¼€å‘ï¼Œåæ¥ä¹Ÿæ²¡çœ‹ä¸‹å»ã€‚é‚£æœ¬å…¥é—¨ç»å…¸æ˜¯å¾ˆåŸºç¡€çš„é‚£ç§ï¼Œçœ‹èµ·æ¥è½»è½»æ¾æ¾åœ°ï¼Œå…´è¶£ä¹Ÿæ…¢æ…¢åŸ¹å…»èµ·æ¥ã€‚ å¼•è¨€ä¸Šå­¦æœŸæœŸæœ«å¼€å§‹äº†è§£åˆ°å‰ç«¯å¼€å‘ï¼Œå½“æ—¶å¿™äºåšå®éªŒã€å†™è®ºæ–‡ã€æŠ•æ–‡ç« ï¼Œä¹Ÿå°±æ²¡æ·±å…¥äº†è§£ï¼Œå½“æ—¶è§‰å¾—æŒºå¥½ç©çš„ï¼Œæ‰€ä»¥å±é¢ å±é¢ çš„å»å€Ÿäº†ä¸€æœ¬ã€ŠHTMLä¸CSSå…¥é—¨ç»å…¸ã€‹ï¼Œå½“æ—¶é‚£ä¸ªè¿·èŒ«å•Šã€‚ä¸€å¼€å§‹æ˜¯å€Ÿäº†ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹å’Œã€ŠAndroid 4.Xä»å…¥é—¨åˆ°ç²¾é€šã€‹ï¼Œæƒ³ç€å¤ä¹ ä¸‹Javaï¼Œç„¶ååŠ¨æ‰‹å†™å†™å®‰å“ï¼Œç„¶åæ¯•ä¸šæå®‰å“å¼€å‘ï¼Œåæ¥ä¹Ÿæ²¡çœ‹ä¸‹å»ã€‚é‚£æœ¬å…¥é—¨ç»å…¸æ˜¯å¾ˆåŸºç¡€çš„é‚£ç§ï¼Œçœ‹èµ·æ¥è½»è½»æ¾æ¾åœ°ï¼Œå…´è¶£ä¹Ÿæ…¢æ…¢åŸ¹å…»èµ·æ¥ã€‚ä¹‹åéš”äº†ä¸€ä¸ªå¯’å‡å›æ¥ï¼Œè®ºæ–‡å´è¢«æ‹’äº†ã€‚å·®ä¸å¤šä¹Ÿæ˜¯é‚£æ—¶å¼€å§‹å†³å¿ƒå¥½å¥½å­¦ä¹ å‰ç«¯ï¼Œæ‰€ä»¥å€Ÿäº†ä¸€äº›ç‰¹åˆ«ç»å…¸çš„å‰ç«¯ä¹¦ç±ï¼Œä¾‹å¦‚ï¼šã€ŠCSSæƒå¨æŒ‡å—ã€‹ã€ã€Šç²¾é€šCSS:é«˜çº§Webæ ‡å‡†è§£å†³æ–¹æ¡ˆã€‹ã€ã€ŠJavaScriptç¼–ç¨‹ç²¾è§£ã€‹ã€ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹ã€‚ å­¦ä¹ å½“æ—¶æ»¡è…”çƒ­æƒ…çš„å­¦ç€ï¼Œä¸€å¼€å§‹å…ˆçœ‹çš„ã€ŠJavaScriptç¼–ç¨‹ç²¾è§£ã€‹ï¼Œçœ‹èµ·æ¥çœŸæ˜¯è´¹åŠ²ï¼Œåæ¥çœ‹çŠ€ç‰›ä¹¦å°±é€šé¡ºå¤šäº†ï¼Œæœ¬æ¥æœ‰ç¼–ç¨‹åŸºç¡€çš„ç¨‹åºçŒ¿ï¼Œä¸Šæ‰‹JavaScriptæ˜¯æŒºå¿«çš„ã€‚ç„¶åé…åˆç½‘ä¸Šçš„è§†é¢‘ï¼ŒåŠ¨æ‰‹åšä¸€äº›å°ä¾‹ç¨‹ï¼Œè¿›æ­¥éå¸¸å¿«ï¼Œå¥½åœ¨å¯¼å¸ˆä¹Ÿæ²¡çƒ¦æˆ‘ï¼Œå®Œå…¨æ”¾ç¾ŠçŠ¶æ€ï¼Œæ›´èƒ½å…¨å¿ƒå…¨æ„åœ°å­¦ä¹ ã€‚æœŸé—´è¿˜å†™äº†ä¸€ç¯‡è®ºæ–‡ï¼Œè·Ÿä¹‹å‰è¢«æ‹’ç»çš„ä¸€èµ·å†æŠ•å‡ºå»äº†ï¼Œå¥½åœ¨è¿™ä¸¤ç¯‡éƒ½ä¸­äº†ï¼Œæ¯•ä¸šè¦æ±‚è¾¾åˆ°äº†ï¼Œå°±æ›´æœ‰åº•æ°”å­¦è‡ªå·±å–œæ¬¢çš„ä¸œè¥¿ã€‚ 2048ç½‘é¡µç‰ˆ é¢è¯•&amp;ç¬”è¯• ä¸€ç›´æƒ³å‡ºå»å®ä¹ ï¼Œä¿—è¯è¯´ï¼šâ€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…â€ï¼Œä¹‹å‰ä»æ¥æ²¡æœ‰æ‰¾è¿‡å·¥ä½œï¼Œæ²¡ä»€ä¹ˆç»éªŒã€‚æ³¨å†Œäº†æ™ºè”æ‹›è˜ï¼Œéš”ä¸‰å·®äº”å°±æœ‰äººæ‰“ç”µè¯ï¼Œä¸æ˜¯äº†è§£æƒ…å†µå°±æ˜¯è®©æˆ‘å»é¢è¯•ï¼Œå¯è§å‰ç«¯éœ€æ±‚è¿˜æ˜¯ç›¸å½“å¤§çš„ã€‚å…¶ä¸­æˆ‘å»äº†ä¸¤å®¶ï¼Œä¸€å®¶æ˜¯GXGç”·è£…ï¼Œæƒ³æƒ³ä¹Ÿå¥½ç©ï¼Œæˆ‘ç«Ÿç„¶å»äº†ï¼Œæˆ‘åŒå­¦é—®æˆ‘æ˜¯ä¸æ˜¯å»åº”è˜æ¨¡ç‰¹ï¼Ÿå“ˆå“ˆã€‚é¢è¯•å®˜é—®æˆ‘æœ‰åšè¿‡ä»€ä¹ˆé¡¹ç›®æ²¡ï¼Œæˆ‘è¯´æ²¡æœ‰ï¼Œéƒ½æ˜¯è‡ªå·±åœ¨çœ‹ä¹¦ï¼›è¿˜å„ç§ç»™æˆ‘çŒè¾“ï¼Œæ‰“æ‚æ˜¯åº”è¯¥çš„ï¼Œè€Œä¸”å‡ ä¹ä¸é—®å‰ç«¯çš„çŸ¥è¯†ç‚¹ï¼ŒçœŸå¿ƒè§‰å¾—å¥½å‘ã€‚å¦ä¸€ä¸ªå…¬å¸æˆ‘å¿˜äº†å«ä»€ä¹ˆï¼Œä»äº‹ä½“æ£€æ–¹é¢çš„å…¬å¸ï¼Œä¹Ÿæ˜¯æ‰¾äººæ‰“æ‚ï¼Œä¹Ÿä¸é—®æˆ‘å­¦åˆ°çš„çŸ¥è¯†ç‚¹ã€‚ è·ŸåŒå­¦ä¸€èµ·å»æ­å·å‚åŠ äº†è˜‘è‡è¡—çš„å®£è®²ä¼šï¼Œç¬”è¯•è¢«è™å¾—å¾ˆæƒ¨ï¼Œéƒ½æ˜¯åŸºç¡€çš„ç®—æ³•é¢˜ï¼Œå¤ªä¹…æ²¡æ¥è§¦ï¼Œè€ƒå®Œç ”éƒ½å¿˜å…‰äº†ã€‚åœ¨æ­å·å‘†äº†ä¸€æ™šï¼Œè·Ÿçˆ¹å¨˜ä¼šåˆå»ä¹Œé•‡ç©äº†ã€‚å›æ¥æŠ¥åå‚åŠ äº†ä¸€ä¸ªç½‘ä¸Šçš„åœ¨çº¿é¢è¯•ï¼Œ50RMBã€‚ä¸€å…±æœ‰ä¸¤ä¸ªé¢è¯•å®˜è·Ÿæˆ‘è§†é¢‘ï¼Œç®€ç›´ä¸€é—®ä¸‰ä¸çŸ¥ï¼Œæ‰“å‡»çœŸçš„å¤ªå¤§äº†ï¼Œä¹‹åé’ˆå¯¹ä»–é—®çš„ä¸€äº›ç¼ºæ¼ï¼Œæœ‰é’ˆå¯¹çš„ç ”ç©¶äº†ä¸€é˜µå­ï¼Œè¿›æ­¥è·Ÿæ‰“å‡»ä¸€æ ·å¤§å“ˆã€‚ å®éªŒå®¤çš„åŒå­¦ä»‹ç»äº†ä¸€ä¸ªæ‰“ç®—å‡ºæ¥åˆ›ä¸šåšæ—…æ¸¸ç½‘ç«™çš„ç¨‹åºå‘˜ç»™æˆ‘ï¼Œè¯´æ˜¯éœ€è¦å‰ç«¯å·¥ç¨‹å¸ˆï¼Œè”ç³»ä¹‹åæ‰çŸ¥é“ï¼Œé¡¹ç›®è¿˜æ²¡å¯åŠ¨å‘¢ã€‚ä¸è¿‡ä»–ç»™æˆ‘å¸ƒç½®äº†ä¸ªå°ä»»åŠ¡ï¼Œå®ç°ä¸€ä¸ªç½‘é¡µç‰ˆçš„å¾®ä¿¡ï¼Œå†™äº†ä¸€å‘¨ã€‚åˆè¯´è¦é€‚é…ç§»åŠ¨ç«¯ï¼Œç”¨å“åº”å¼åª’ä½“æŸ¥è¯¢è¯­å¥ï¼ŒçœŸæ˜¯éº»çƒ¦åˆ°æ­»ï¼Œé€‚é…ç§»åŠ¨ç«¯è¿™ç§éœ€æ±‚åº”è¯¥ä¸€å¼€å§‹å°±è¦è€ƒè™‘åˆ°ï¼Œåæ­£æ”¹å¾—å¾ˆéš¾å—ã€‚ä¹‹åä¹Ÿæ²¡è”ç³»äº†ï¼Œä¸è¿‡é€šè¿‡è¿™æ¬¡ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šã€‚ ç½‘é¡µç‰ˆå¾®ä¿¡ æœ¬äººä½œä¸ºçŸ¥ä¹è„‘æ®‹ç²‰ï¼Œåœ¨ä¸€ä¸ªå…³äºå‰ç«¯å…¥é—¨çš„å›ç­”é‡Œï¼Œå¶ç„¶å‘ç°äº†ç™¾åº¦æ¨å‡ºçš„ä¸€ä¸ªå…¬ç›Šæ€§è´¨çš„å‰ç«¯å­¦é™¢ã€‚è¯¥é¡¹ç›®æ‰˜ç®¡åœ¨githubä¸Šï¼Œç¬¬ä¸€æ¬¡çœ‹åˆ°githubï¼ŒæŒºæƒŠå¥‡çš„ï¼Œä¹‹å‰å¤‡ä»½éƒ½æ˜¯ç›´æ¥å¤‡ä»½æ•´ä¸ªç›®å½•ï¼Œç„¶åæ‰æ•¢æ”¹ä»£ç ã€‚åœ¨ç™¾åº¦çš„è¿™ä¸ªé¡¹ç›®ä¸Šï¼Œåšäº†ä¸‰ä¸ªä»»åŠ¡ï¼Œå­¦äº†å¾ˆå¤šç»†è‡´å…¥å¾®çš„çŸ¥è¯†ç‚¹ï¼Œè™½ç„¶æœ€åä¸€ä¸ªâ€œå¾…åŠäº‹é¡¹â€çš„ä»»åŠ¡ç”±äºä¸€å¼€å§‹æ²¡å‘ç°è¦æœ¬åœ°å­˜å‚¨çš„è¿™ä¸ªéœ€æ±‚ï¼Œå°±å±é¢ å±é¢ çš„å†™èµ·æ¥ï¼Œåæ¥è¿™ä¸ªéœ€æ±‚ä¹Ÿå°±ä¸äº†äº†ä¹‹äº†ã€‚ ç™¾åº¦å‰ç«¯å­¦é™¢ä»»åŠ¡ çŸ­ä¿¡æ”¶åˆ°æŒ–è´¢çš„åœ¨çº¿ç¬”è¯•é€šçŸ¥ï¼Œè¿™åœ¨çº¿ç¬”è¯•è¿˜è¦æ±‚æ‘„åƒå¤´å¸¸å¼€ï¼Œè¿™é€¼æ ¼ä¹Ÿæ˜¯å¤Ÿäº†ã€‚ç¬”è¯•åšèµ·æ¥å¾ˆé¡ºåˆ©ï¼Œå¼€æ”¾é¢˜ä¹Ÿæ˜¯æƒŠå¥‡ã€‚ç¬”è¯•è‡ªæˆ‘æ„Ÿè§‰æŒºå¥½çš„ï¼Œå¯å°±æ˜¯ä¸€ç›´ç­‰ä¸åˆ°é¢è¯•é€šçŸ¥ï¼ŒæŸä¸€å¤©åˆåœ¨å„å¤§æ‹›è˜ç½‘ç«™é—²é€›ï¼Œçªç„¶æŒ–è´¢å°±æ¥ç”µè¯é€šçŸ¥é¢è¯•äº†ï¼ŒçœŸæ˜¯â€œæ²¡æœ‰ä¸€ç‚¹ç‚¹é˜²å¤‡ï¼Œä¹Ÿæ²¡æœ‰ä¸€ä¸ä¸â€¦â€ã€‚è®¢äº†éš”å¤©çš„ç¥¨å°±å¥”å‘çœåŸäº†ï¼Œé¢è¯•ä¹ŸæŒºé¡ºåˆ©çš„ï¼Œéƒ½æ˜¯åŸºç¡€é—®é¢˜ï¼ŒæœŸé—´æ¢äº†ä¸€ä¸ªé¢è¯•å®˜ã€‚è¿™ä½é¢è¯•å®˜é—®äº†ç¨å¾®æ·±å…¥çš„ä¸€äº›é—®é¢˜ï¼Œæœ«äº†ï¼Œç»™äº†ä¸¤ä¸ªä»»åŠ¡è®©æˆ‘å›å»åšï¼Œä¸€ä¸ªæ˜¯å®ç°æˆªå›¾å®æ—¶æ˜¾ç¤ºï¼Œå¦ä¸€ä¸ªä»»åŠ¡åˆ™æ˜¯ç»™ä½ ä¸€ä¸ªpsdï¼Œè®©ä½ ç…§ç€åšï¼Œè¦æ±‚é€‚é…ç§»åŠ¨ç«¯çš„ç½‘é¡µã€‚ ä»»åŠ¡ä¸€ã€ä»»åŠ¡äºŒä¹Ÿé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œä¸è¿‡åæ¥éƒ½è§£å†³äº†ï¼Œé¢è¯•å®˜æŒºæ»¡æ„çš„ï¼Œè¯´æ˜¯ç¡®å®šè¦æˆ‘ã€‚åˆé—®æˆ‘æœ‰æ²¡æœ‰å…´è¶£å†åšä¸€é¢˜ï¼Œâ€œåˆæ˜¯æ²¡æœ‰ä¸€ç‚¹ç‚¹é˜²å¤‡â€ã€‚æˆ‘èƒ½è¯´æ²¡å…´è¶£ä¹ˆï¼Ÿå½“ç„¶ï¼Œä»»åŠ¡ä¸‰ä¹Ÿå®Œæˆäº†ã€‚ ä»»åŠ¡ä¸€ ä»»åŠ¡äºŒ ä»»åŠ¡ä¸‰ å®ä¹ æ‰“ç®—ç«¯åˆè¿‡åå»æ­å·å®ä¹ ï¼Œå¥½å–œæ¬¢æ­å·å•Šï¼Œä¹Ÿç®—æ˜¯æ­£å¼å…¥äº†å‰ç«¯è¿™ä¸ªå‘äº†ï¼Œå¯¹è¿™å‡ ä¸ªæœˆè®¤çœŸå­¦ä¹ æœ‰äº†ä¸ªäº¤ä»£ã€‚","link":"/2015/06/14/%E4%B8%8D%E8%A6%81%E5%8F%AB%E6%88%91%E7%A8%8B%E5%BA%8F%E7%8C%BF-%E6%88%91%E6%98%AF%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E7%8B%AE/"},{"title":"ä¸ºå‰ç«¯åº”ç”¨å¼€å‘ä¸€ä¸ªæœ¬åœ°æ¥å£ mock æœåŠ¡","text":"æ— æ³•å¿å—æ²¡æœ‰ mock æœåŠ¡çš„æ—¥å­ èƒŒæ™¯æœ¬åœ°å¼€å‘æ—¶ï¼Œç›®å‰é€šè¿‡ç›´è¿æµ‹è¯•ç¯å¢ƒå’Œä¿®æ”¹ä»£ç ä¸¤ç§æ–¹å¼è°ƒè¯•æ¥å£ï¼Œå‰è€…ååˆ†ä¾èµ–åç«¯çš„æ•°æ®çŠ¶æ€å’ŒæœåŠ¡ç¨³å®šï¼Œä½¿å¾—æœ¬åœ°å¼€å‘è°ƒè¯•å®¹æ˜“å—å¤–éƒ¨å½±å“ï¼›åè€…ä¿®æ”¹ä»£ç å®¹æ˜“é€ æˆé—®é¢˜ï¼Œå¦‚æœæ¶‰åŠå¤šå¤„ä»£ç æ”¹åŠ¨ï¼Œè¿˜éœ€è¦å¯¹è¿™äº›åˆ†æ•£çš„ä»£ç è¿›è¡Œæ’¤é”€æ”¹åŠ¨ï¼Œä»è€Œé€ æˆä¸å¿…è¦çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚å› æ­¤ï¼Œä»¥ä¸Šä¸¤ç§æ–¹å¼éƒ½ä¸èƒ½è‰¯å¥½åœ°åšåˆ°å‰åç«¯åˆ†ç¦»å¼€å‘ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå‰ç«¯åº”åœ¨å¼€å‘é˜¶æ®µä½¿ç”¨ api mock æœåŠ¡ï¼Œå½“æµç¨‹èµ°é€šä¹‹åï¼Œå†åˆ‡åˆ°æµ‹è¯•ç¯å¢ƒä¸åç«¯è”è°ƒã€‚ æœ‰ç°æˆçš„å·¥å…·å—ï¼Ÿæœ‰çš„ï¼Œç›®å‰å…¬å¸ç°æœ‰ mock å¹³å° èƒ½æ”¯æŒè¿™ä¸ªéœ€æ±‚ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬çš„åº”ç”¨ä½¿ç”¨çš„æ˜¯ gateway çš„æ–¹å¼è°ƒç”¨åç«¯æ–¹æ³•ï¼Œå³æ‰€æœ‰æ¥å£éƒ½æ˜¯è®¿é—®åŒä¸€ä¸ª api åœ°å€ï¼Œå¹¶é€šè¿‡åŒºåˆ† query å‚æ•°æ ‡è¯†ä¸åŒ dubbo æ–¹æ³•ï¼Œå› æ­¤è¯¥ mock å¹³å°ä¸èƒ½å¾ˆå¥½åœ°æ”¯æŒè¿™ç§åœºæ™¯ï¼Œéœ€è¦é€šè¿‡å¯¹åŒä¸€ api åœ°å€æ·»åŠ å¤šç§ http method çš„æ¥å£ï¼Œæ¥ç€é€šè¿‡è®¾ç½®ä¸åŒã€æœŸæœ›ã€ä»¥è¾¾åˆ°æ ¹æ®ä¸åŒ query å‚æ•°è¿”å›ä¸åŒæ•°æ®çš„æ•ˆæœã€‚æ­¤å¤–ï¼Œç›®å‰é¡¹ç›®æ²¡æœ‰ç¼–å†™ mock æ¥å£é…ç½®çš„ä¹ æƒ¯ï¼Œä¸å¯èƒ½å¯¹ç™¾æ¥ä¸ªæ¥å£è¿›è¡Œä¸€ä¸€é…ç½®è°ƒè¯•ï¼Œå› æ­¤æ¥å…¥ mock ä¸èƒ½åšåˆ°ä¸€è¹´è€Œå°±ã€‚ æ€ä¹ˆåŠï¼Ÿé’ˆå¯¹ä»¥ä¸Šæƒ…å†µï¼Œæˆ‘è§‰å¾—å¯ä»¥é€šè¿‡å¼€å‘ä¸€ä¸ªæœ¬åœ°æ¥å£ Mock æœåŠ¡å¦‚ä¸‹æ–¹å¼è§£å†³ï¼š åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ª mock æœåŠ¡ï¼Œå½“æœ¬åœ°å­˜åœ¨å¯¹åº”æ¥å£çš„ mock json æ–‡ä»¶æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ mock æ•°æ®ï¼Œå¦åˆ™è°ƒç”¨æµ‹è¯•ç¯å¢ƒã€‚è¿™æ ·æ—¢ä¿è¯äº†é¡¹ç›®åœ¨å¼€å‘è°ƒè¯•é˜¶æ®µä¸å—å¤–éƒ¨å½±å“ï¼Œåšåˆ°å®Œå…¨åœ°å‰åç«¯åˆ†ç¦»å¼€å‘ï¼ˆé€šè¿‡åˆ‡æ¢ç¯å¢ƒå†³å®šè¿æ¥ mock æ¥å£è¿˜æ˜¯æµ‹è¯•ç¯å¢ƒæ¥å£ï¼‰ï¼Œåˆèƒ½å¤Ÿé€æ­¥å®ç°ä¸Šç™¾ä¸ªæ¥å£çš„ mockã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨æœ¬åœ° mock æœåŠ¡ï¼Œè€Œä¸æ˜¯åœ¨çº¿ mock æœåŠ¡ï¼Ÿæ— è®ºæ˜¯å‰å…¬å¸ï¼Œè¿˜æ˜¯ç°å…¬å¸ï¼Œéƒ½å­˜åœ¨å¤šä¸ªåœ¨çº¿ mock æœåŠ¡ï¼Œæœ‰çš„æ˜¯å‰ç«¯å›¢é˜Ÿä¸»å¯¼çš„ï¼Œæœ‰çš„æ˜¯æµ‹è¯•å›¢é˜Ÿä¸»å¯¼çš„ï¼Œè¿™äº›æœåŠ¡è¦ä¹ˆä»…æœ‰å°‘æ•°é¡¹ç›®ä½¿ç”¨ï¼Œè¦ä¹ˆå‡ ä¹æ²¡äººç”¨ã€‚è¿™äº›æœåŠ¡å¤§å¤šæ²¡æœ‰è§£å†³å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š è€é¡¹ç›®å¦‚ä½•å¿«é€Ÿæ¥å…¥ï¼Ÿæ¯ä¸ªè€é¡¹ç›®æ¶‰åŠå‡ åä¸Šç™¾ä¸ªæ¥å£ï¼Œå‡ ä¹ä¸å¯èƒ½ä¸»åŠ¨å»æ¥å…¥è¿™äº›å¹³å°ã€‚ æ¥å£ç›´æ¥å¦‚ä½•é¿å…ç›¸äº’å½±å“ï¼ŸåŒä¸€ä¸ªå·¥ç¨‹ï¼ŒA åŒå­¦ä¿®æ”¹äº† M æ¥å£è¿”å› N ä»¥æµ‹è¯•æµç¨‹ Xï¼Œè€Œ B åŒå­¦éœ€è¦ä¿®æ”¹ M æ¥å£è¿”å› P ç”¨ä»¥æµ‹è¯•æµç¨‹ Yï¼Œè¿™å°±é€ æˆäº†å†²çªï¼ˆå¼€å‘é˜¶æ®µåº”å°½é‡é¿å…å¤–ç•Œçš„å½±å“ï¼Œå¼€å‘ä¸€ä¸ªåŠŸèƒ½å®åœ¨ä¸åº”è¯¥å› ä¸º mock æ¥å£è¿”å›çš„ä¿®æ”¹æˆ–è€…æµ‹è¯•ç¯å¢ƒçš„å‡ºé”™è€Œé˜»å¡ï¼‰ è€Œæœ¬åœ° mock æœåŠ¡å¯ä»¥è¾ƒå¥½åœ°é€šè¿‡ç¼“å­˜æµ‹è¯•ç¯å¢ƒæˆ–çº¿ä¸Šç¯å¢ƒçš„æ¥å£æ•°æ®è§£å†³é—®é¢˜1ï¼›é€šè¿‡å°†æ¥å£æ•°æ®ç¼“å­˜åœ¨æœ¬åœ°è§£å†³é—®é¢˜2ï¼Œä¹Ÿå°±æ˜¯è¯´ A åŒå­¦åœ¨æœ¬åœ°çš„æ“ä½œæ˜¯ä¸ä¼šå½±å“åˆ° B åŒå­¦çš„è°ƒè¯•çš„ã€‚ ä¸è¿‡ï¼Œæˆ‘è®¤ä¸ºæœ¬åœ° mock å’Œåœ¨çº¿ mock äºŒè€…å¹¶ä¸å†²çªï¼ŒäºŒè€…å¯ä»¥ç›¸äº’åŒæ­¥æ¥å£æ•°æ®ï¼Œè¿™æ ·æ—¢ä¿è¯äº†åœ¨çº¿ç»´æŠ¤æ¥å£çš„ä¾¿åˆ©ï¼Œåˆèƒ½éš”ç¦»å¼€å‘æ—¶ï¼Œåœ¨çº¿ç¼–è¾‘æ¥å£è¿”å›å€¼å¯¼è‡´çš„ç›¸äº’å½±å“ã€‚ è¿˜èƒ½æ€ä¹ˆç©ï¼Ÿå¯¹äºè¿™ç§ç¼“å­˜æµ‹è¯•æ•°æ®åˆ°æœ¬åœ°çš„æ¨¡å¼ï¼Œæˆ‘æƒ³åˆ°ä¸€ä¸ªæœ‰è¶£çš„ä½¿ç”¨æ–¹å¼ï¼Œå½“ä¸åç«¯è”è°ƒæ—¶ï¼Œé€šè¿‡ç‰¹å®šå‚æ•°å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡ï¼Œä½¿å¾—å½“å‰æ¯ä¸ªæ¥å£éƒ½å¼ºåˆ¶åŒæ­¥æµ‹è¯•ç¯å¢ƒæ•°æ®ï¼›æ¥ç€å°†è”è°ƒçš„é¡µé¢è·³è½¬è·¯å¾„ç‚¹å‡»ä¸€éï¼Œä¾¿å¯å°†æ­¤æ¬¡æµç¨‹æ¶‰åŠçš„æ¥å£æ‚‰æ•°ç¼“å­˜ï¼›é‡å¯æœ¬åœ°å¼€å‘æœåŠ¡ï¼Œè¿™æ ·åŒä¸€ä¸ªæ“ä½œæµç¨‹çš†ä½¿ç”¨äº†åˆšåˆšç¼“å­˜çš„æ¥å£ï¼Œåšåˆ°ã€æµç¨‹å›æ”¾ã€ï¼Œä»è€Œä¸éœ€è¦ä¾èµ–åç«¯é‡å¤é€ æ•°æ®ï¼Œéå¸¸æ–¹ä¾¿ B ç«¯è¿™ç§æµç¨‹å¤šï¼Œæ­¥éª¤é•¿ï¼ˆè¿™å¾€å¾€ååˆ†ä¾èµ–çŠ¶æ€ï¼Œè€ŒçŠ¶æ€åœ¨æ¯ä¸ªæ­¥éª¤ä¹‹åå¾€å¾€ä¼šæ”¹å˜ï¼‰çš„è”è°ƒã€‚","link":"/2019/07/21/%E4%B8%BA%E5%89%8D%E7%AB%AF%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E6%9C%AC%E5%9C%B0%E6%8E%A5%E5%8F%A3%20mock%20%E6%9C%8D%E5%8A%A1/"},{"title":"ä» line-height åˆ° 0.5 px","text":"å‰å‡ å¤©å‘ç°å†™çš„ä¸€æ®µä»£ç ï¼Œå…¶ä¸­line-heightï¼ˆ1.7remï¼‰ä¸heightï¼ˆ1.7remï¼‰ç›¸ç­‰ï¼Œfont-sizeï¼ˆ1.1remï¼‰ï¼›åœ¨iosè®¾å¤‡ä¸Šæ–‡å­—å‚ç›´å±…ä¸­ï¼Œè€Œåœ¨androidè®¾å¤‡ä¸Šç«Ÿä¸Šä¸‹ç¼éš™ç›¸å·®1pxï¼ˆå…¶å®æˆ‘çœ‹ä¸å‡ºæ¥æ˜¯ä¸æ˜¯ä¸€åƒç´ ï¼Œæˆ‘çŒœçš„ï¼‰ã€‚ é—®é¢˜å‰å‡ å¤©å‘ç°å†™çš„ä¸€æ®µä»£ç ï¼Œå…¶ä¸­line-heightï¼ˆ1.7remï¼‰ä¸heightï¼ˆ1.7remï¼‰ç›¸ç­‰ï¼Œfont-sizeï¼ˆ1.1remï¼‰ï¼›åœ¨iosè®¾å¤‡ä¸Šæ–‡å­—å‚ç›´å±…ä¸­ï¼Œè€Œåœ¨androidè®¾å¤‡ä¸Šç«Ÿä¸Šä¸‹ç¼éš™ç›¸å·®1pxï¼ˆå…¶å®æˆ‘çœ‹ä¸å‡ºæ¥æ˜¯ä¸æ˜¯ä¸€åƒç´ ï¼Œæˆ‘çŒœçš„ï¼‰ã€‚ ä¸ºä»€ä¹ˆæˆ‘è¯•äº†å¥½ä¹…ï¼Œæˆ‘ä»¥ä¸ºæ˜¯å­—ä½“çš„åŸå› ï¼Œæ¯•ç«Ÿiosç”¨äº†è‡ªå·±è®¾è®¡çš„å­—ä½“ï¼Œè™½ç„¶æˆ‘çš„å¤§é­…æ—ä¹Ÿæ˜¯è‡ªå·±è®¾è®¡ï¼ˆç™½æ°¸ç¥¥ï¼šè¿™å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼‰ã€‚åæ¥æˆ‘å‘ç°å½“æˆ‘æŠŠå­—ä½“è®¾ä¸º1remæ—¶ï¼Œandroidä¸Šçš„å­—ä½“çœ‹èµ·æ¥å°±å±…ä¸­äº†ï¼Œè€Œiosæ— è®ºå¦‚ä½•éƒ½æ˜¯å±…ä¸­çš„ï¼Œç™¾æ€ä¸å¾—å…¶è§£å•Šï¼› æœºæ™ºå¦‚æˆ‘ï¼Œè·å–äº†é­…æ—MX5çš„è®¾å¤‡å®½åº¦ï¼ˆ360ï¼‰ï¼Œæ‰€ä»¥æ ¹æ®æˆ‘çš„é¡µé¢è®¡ç®—å‡ºæ¥çš„remå¯¹åº”ä¸º18pxï¼Œä¹Ÿå°±æ˜¯è¯´line-heightå®é™…é«˜åº¦ä¸º1.7rem=1.718px=30.6pxï¼Œfont-sizeå®é™…å¤§å°ä¸º1.1rem=1.118px=19.8pxï¼› è€Œç”±äº1pxæ˜¯æœ€å°å•ä½ï¼Œé‚£ä¹ˆè¿™ä¸ªå¸¦å°æ•°ç‚¹çš„å•ä½åˆ°åº•æ˜¯å‘ä¸Šå–æ•´è¿˜æ˜¯å‘ä¸‹å–æ•´ï¼Œäº¦æˆ–æ˜¯å››èˆäº”å…¥ï¼Œæˆ‘åœ¨æˆ‘çš„MX5ä¸Šè®¾ç½®äº†â€œæ—â€è¿™ä¸ªå­—çš„å¦‚ä¸‹å­—å·ï¼š70ã€70.4ã€70.5ã€70.6ã€71pxï¼›æ¥ç€å±å¹•æˆªå›¾ï¼Œæ”¾åˆ°psé‡Œé‡äº†ä¸‹ï¼Œé«˜åº¦åˆ†åˆ«æ˜¯71ã€71ã€71ã€71ã€72ï¼›äº‹å®è¯æ˜æ˜¯å‘ä¸‹å–æ•´çš„ï¼Œä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆæ˜¯71è€Œä¸æ˜¯70ï¼Œå› ä¸ºæˆ‘ä¸å‘Šè¯‰ä½ ã€‚ é‚£ä¹ˆï¼Œå°±æœ‰äº†ä¸€ä¸ªå¾ˆå¥½çš„è§£é‡Šäº†ï¼šline-height - font-size = (30 - 19)px = 11pxï¼Œ11pxä¸Šä¸‹æ²¡æ³•å‡æ‘Šï¼Œç»“æœä¸Šé¢5pxï¼Œè€Œä¸‹é¢çš„ç©ºéš™å°±æ˜¯6pxï¼Œå¯¼è‡´äº†æ•´ä½“å‘ä¸Šåç§»ï¼Œç„¶è€Œè¿™æ²¡æ³•è§£é‡Šiosè®¾å¤‡ä¸ºä»€ä¹ˆå°±å¯ä»¥ä¸Šä¸‹å‡æ‘Šã€‚ å†è¯•è¯•ï¼Œå­—å·æ”¹ä¸º1remçš„æƒ…å†µï¼šline-height - font-size = (30 - 18)px = 12pxï¼Œä¸Šä¸‹å„è‡ªä¸º6pxï¼Œå› æ­¤èƒ½å±…ä¸­ã€‚ 0.5pxä»Šå¤©åœ¨æœå¯»å¦‚ä½•åœ¨retinaè®¾å¤‡ä¸Šå®ç°1pxï¼Œæ— æ„ä¸­å‘ç°ios8ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œæ˜¯æ”¯æŒ0.5pxçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ios8è®¾å¤‡ä¸Šçš„ç²¾åº¦æ˜¯0.5pxï¼Œæ‰€ä»¥11pxé™¤ä»¥2ï¼Œå„è‡ªéƒ½æ˜¯5.5pxï¼Œéš¾æ€ªå¯ä»¥å‚ç›´å±…ä¸­ã€‚ ios8ä¸­çš„è¿‘ä¼¼é‚£ä¹ˆï¼Œ70.4ã€70.5ã€70.6è¿™äº›å­—å·ï¼Œåœ¨ios8è¿™ç§ç²¾åº¦ä¸º0.5pxçš„è®¾å¤‡ä¸Šæ˜¯å¦‚ä½•è¿‘ä¼¼çš„å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼šåªè¦ä¸æ˜¯æ•´æ•°ï¼Œé€šé€šè®¾ä¸º70.5pxï¼Œè¿™èƒ½å«å±…ä¸­è¿‘ä¼¼å—ï¼Ÿå“ˆå“ˆ~ é‚£ä¹ˆé—®é¢˜æ¥äº†1pxè¾¹æ¡†åˆ°åº•å¦‚ä½•åœ¨éios8çš„retinaå±å¹•ä¸‹å®ç°å‘¢ï¼Ÿä»Šå¤©çœ‹åˆ°ä¸€ç¯‡åšå®¢é‡Œçš„ä¸€å¥è¯ï¼Œæˆ‘æ¿€åŠ¨äº†ï¼š è¦æ˜¯æ²¡æœ‰æœ€åä¸€å¥è¯è¯¥å¤šå¥½å•Š~ ç½‘ä¸Šæœäº†å¥½ä¹…ï¼Œæ‰¾åˆ°ä¸€ä¸ªä¸é”™çš„æ–¹æ³•ï¼š ä¼ªç±» + transform åŸç†æ˜¯æŠŠåŸå…ˆå…ƒç´ çš„ border å»æ‰ï¼Œç„¶ååˆ©ç”¨ :before æˆ–è€… :after é‡åš border ï¼Œå¹¶ transform çš„ scale ç¼©å°ä¸€åŠï¼ŒåŸå…ˆçš„å…ƒç´ ç›¸å¯¹å®šä½ï¼Œæ–°åšçš„ border ç»å¯¹å®šä½ å•æ¡ border: 12345678910111213141516.hairlines li{ position: relative; border:none;}.hairlines li:after{ content: ''; position: absolute; left: 0; background: #000; width: 100%; height: 1px; -webkit-transform: scaleY(0.5); transform: scaleY(0.5); -webkit-transform-origin: 0 0; transform-origin: 0 0;} å››æ¡ border: 1234567891011121314151617181920.hairlines li{ position: relative; margin-bottom: 20px; border:none;}.hairlines li:after{ content: ''; position: absolute; top: 0; left: 0; border: 1px solid #000; -webkit-box-sizing: border-box; box-sizing: border-box; width: 200%; height: 200%; -webkit-transform: scale(0.5); transform: scale(0.5); -webkit-transform-origin: left top; transform-origin: left top;} æ ·å¼ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦ç»“åˆ JS ä»£ç ï¼Œåˆ¤æ–­æ˜¯å¦ Retina å± 123if(window.devicePixelRatio &amp;&amp; devicePixelRatio &gt;= 2){ document.querySelector('ul').className = 'hairlines';} é‚£ä¹ˆé—®é¢˜åˆæ¥äº†æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å•Šï¼Ÿ","link":"/2015/09/14/%E4%BB%8Eline-height%E5%88%B00-5px/"},{"title":"ä½¿ç”¨ Jest æµ‹è¯• Node.js","text":"ä½¿ç”¨ Jest æµ‹è¯•ä½ çš„ Node.js åº”ç”¨ ç›®çš„ å¢å¼ºä»£ç çš„å¥å£®æ€§ åŠæ—¶å‘ç°æœªè¢«è¦†ç›–çš„ä»£ç é€»è¾‘ é¡¹ç›®äº¤æ¥æˆ–é‡æ„æ›´åŠ æ”¾å¿ƒ å·¥å…·1. å®‰è£…1npm install --save-dev jest supertest 2. é…ç½® package.json123456789101112131415161718192021222324&quot;scripts&quot;: { &quot;test&quot;: &quot;NODE_ENV=development jest&quot;, &quot;test-watch&quot;: &quot;npm test -- --watch&quot;,},&quot;jest&quot;: { &quot;verbose&quot;: true, &quot;notify&quot;: true, &quot;collectCoverage&quot;: true, &quot;testEnvironment&quot;: &quot;node&quot;, &quot;modulePaths&quot;: [ &quot;&lt;rootDir&gt;/server&quot; ], &quot;roots&quot;: [ &quot;&lt;rootDir&gt;/__tests__&quot; ], &quot;testPathIgnorePatterns&quot;: [ &quot;__tests__/(fixtures|__mocks__)/&quot; ], &quot;coverageReporters&quot;: [ &quot;html&quot;, &quot;text&quot;, &quot;text-summary&quot; ] } 3. æ·»åŠ  gitignore åœ¨ .gitignore é…ç½®æ–‡ä»¶ä¸­å¢åŠ å¿½ç•¥ coverage ç›®å½• 4. è¿è¡Œ12npm test # å…¨éƒ¨æµ‹è¯•npm run test-watch # å¼€å¯ watch æ¨¡å¼, åªè¿è¡Œä¿®æ”¹çš„æµ‹è¯•æ–‡ä»¶ 5. jest å‘½ä»¤çš„å®ç”¨å‚æ•° npm test -- fileName æ–‡ä»¶åæ”¯æŒæ­£åˆ™ï¼Œæ¯”å¦‚ npm test -- server/*ï¼›æ”¯æŒéƒ¨åˆ†åŒ¹é…ï¼Œæ¯”å¦‚ npm run test -- controllers/login npm test --bail [-- fileName] å½“é‡åˆ°å¤±è´¥çš„ç”¨ä¾‹æ—¶ï¼Œç«‹é©¬é€€å‡ºï¼Œæ–¹ä¾¿æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ npm test --watch [-- fileName] ç›‘å¬æµ‹è¯•æ–‡ä»¶ä¿®æ”¹ï¼Œä»…é‡æ–°æ‰§è¡Œæ‰€ä¿®æ”¹çš„æµ‹è¯•ç”¨ä¾‹ npm test --watchAll [-- fileName] ç›‘å¬æµ‹è¯•ä¿®æ”¹ï¼Œé‡æ–°æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ 6. ç›®å½•ç»“æ„çº¦å®š æµ‹è¯•æ–‡ä»¶ï¼š__tests__ mock æ¨¡å—ï¼š__mocks__ è¾…åŠ©å·¥å…·ï¼š__test__/fixtures 123456789__tests__â”œâ”€â”€ fixturesâ”œâ”€â”€ __mocks__â”‚ â””â”€â”€ request.jsâ””â”€â”€ server â”œâ”€â”€ controllers â”‚ â””â”€â”€ thread â”‚ â””â”€â”€ index.test.js â””â”€â”€ server.test.js æµ‹è¯•ç»´åº¦ æ­£å‘æµ‹è¯•ï¼šè¿™ä¸ªå‡½æ•°æ˜¯å¦æŒ‰ç…§å…¶å£°æ˜çš„é‚£æ ·å®ç°äº†éå¸¸åŸºæœ¬çš„åŠŸèƒ½ï¼Ÿ è´Ÿå‘æµ‹è¯•ï¼šä»£ç æ˜¯å¦å¯ä»¥å¤„ç†éæœŸå¾…å€¼ï¼Ÿ æµ‹è¯•è¦†ç›–ç‡æºä»£ç è¢«æµ‹è¯•çš„æ¯”ä¾‹, æœ‰å››ä¸ªæµ‹é‡ç»´åº¦ è¡Œè¦†ç›–ç‡ï¼ˆline coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸€è¡Œéƒ½æ‰§è¡Œäº†ï¼Ÿ å‡½æ•°è¦†ç›–ç‡ï¼ˆfunction coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªå‡½æ•°éƒ½è°ƒç”¨äº†ï¼Ÿ åˆ†æ”¯è¦†ç›–ç‡ï¼ˆbranch coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªifä»£ç å—éƒ½æ‰§è¡Œäº†ï¼Ÿ è¯­å¥è¦†ç›–ç‡ï¼ˆstatement coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªè¯­å¥éƒ½æ‰§è¡Œäº†ï¼Ÿ 1234567891011-----------|----------|----------|----------|----------|----------------|File | % Stmts | % Branch | % Funcs | % Lines |Uncovered Lines |-----------|----------|----------|----------|----------|----------------|All files | 100 | 85.71 | 100 | 100 | | logger.js | 100 | 85.71 | 100 | 100 | |-----------|----------|----------|----------|----------|----------------|Test Suites: 1 passed, 1 totalTests: 9 passed, 9 totalSnapshots: 0 totalTime: 0.836s, estimated 1sRan all test suites. é™„ï¼šå•å…ƒæµ‹è¯•å‡†åˆ™ æ–‡æ¡£è¾ƒé•¿ï¼Œå»ºè®®é¥­åæŸ¥çœ‹ æµ‹å“ªäº›ä¸œè¥¿ server - å¯åŠ¨æ˜¯å¦æ­£å¸¸ middlewares - åŠ è½½æ­£å¸¸ï¼Œè¯·æ±‚æ—¶æ­£å¸¸å·¥ä½œ controllers - è¯·æ±‚ç‰¹å®šè·¯ç”±ï¼Œçœ‹å“åº”æ˜¯å¦æ˜¯ç¬¦åˆé¢„æœŸ services - è°ƒç”¨ç‰¹å®šæ–¹æ³•ï¼Œè¿”å›ç»“æœç¬¦åˆé¢„æœŸï¼Œè¾¹ç•Œæƒ…å†µ routesã€lib - æ™®é€šæµ‹è¯• æµ‹è¯•ç”¨ä¾‹æ’°å†™ä¸€ä¸ªæ™®é€šä¸”å®Œå¤‡çš„å•æµ‹æ–‡ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041describe('api æ˜ å°„æ¨¡å—', () =&gt; { // åœ¨æ‰€æœ‰å•æµ‹è¿è¡Œå‰æ‰§è¡Œï¼Œç”¨äºå‡†å¤‡å½“å‰ describe æ¨¡å—æ‰€éœ€è¦çš„ç¯å¢ƒå‡†å¤‡ï¼Œæ¯”å¦‚å…¨å±€çš„æ•°æ®åº“ï¼› beforeAll(() =&gt; { }) // åœ¨æ¯ä¸ªå•æµ‹è¿è¡Œå‰æ‰§è¡Œï¼Œç”¨äºå‡†å¤‡æ¯ä¸ªç”¨ä¾‹ï¼ˆitï¼‰æ‰€éœ€è¦çš„æ“ä½œï¼Œæ¯”å¦‚é‡ç½® server app æ“ä½œ beforeEach(() =&gt; { }) // åœ¨æ¯ä¸ªå•æµ‹è¿è¡Œåæ‰§è¡Œï¼Œç”¨äºæ¸…ç†æ¯ä¸ªç”¨ä¾‹ï¼ˆitï¼‰çš„ç›¸å…³å˜é‡ï¼Œæ¯”å¦‚é‡ç½®æ‰€æœ‰æ¨¡å—çš„ç¼“å­˜ afterEach(() =&gt; { jest.resetModules() }) // åœ¨æ‰€æœ‰å•æµ‹è¿è¡Œåæ‰§è¡Œï¼Œç”¨äºæ¸…ç†ç¯å¢ƒï¼Œæ¯”å¦‚æ¸…ç†ä¸€äº›ä¸ºäº†å•æµ‹è€Œç”Ÿæˆçš„â€œç¯å¢ƒå‡†å¤‡â€ afterAll(() =&gt; { }) // æ³¨ï¼šä»¥ä¸Šå››ä¸ªæ–¹æ³•å‡æ”¯æŒè¿”å›ä¸€ä¸ª Promiseï¼Œæ­¤æ—¶ Jest å°†ç­‰å¾…è¯¥ Promise resolve åç»§ç»­ it('å½“ env ä¸ºé»˜è®¤çš„ development ç¯å¢ƒæ—¶ï¼Œè¿”å› localhost åœ°å€', async() =&gt; { process.env.NODE_ENV = '' const API = require('lib/api') expect(API).toThrow() // æœŸæœ› API æŠ›é”™ expect(API('')).toMatch(/localhost/) // æœŸæœ›è¿”å›åŒ…å« 'localhost' å­—æ®µ }) it.only('å½“ env ä¸ºæµ‹è¯•ç¯å¢ƒæ—¶ï¼Œè¿”å›æµ‹è¯•ç¯å¢ƒåœ°å€', async() =&gt; { // ä»…æ‰§è¡Œæœ¬æµ‹è¯•ç”¨ä¾‹ï¼Œå¸¸ç”¨äºè°ƒè¯•å½“å‰ç”¨ä¾‹ process.env.NODE_ENV = 'test' const API = require('lib/api') expect(API('get_items')).toMatch(/test.baidu.info/) })}) â€‹ é™„ï¼šexpect å¸¸ç”¨è¯­å¥ï¼Œæ›´å¤šè¯·æŸ¥çœ‹å®˜æ–¹ expect æ–‡æ¡£ 12345678910111213.toBe(value) // æœŸæœ›å€¼ä¸º value.toEqual(value) // æœŸæœ›ä¸¤ä¸ªå¯¹è±¡å†…å®¹å®Œå…¨ç›¸ç­‰.toBeDefined() // æœŸæœ›è¢«å®šä¹‰.toBeFalsy() // æœŸæœ›ä¸º Falsy.toBeTruthy() // æœŸæœ› Truthy.toMatch() // æœŸæœ›ç¬¦åˆï¼Œæ”¯æŒå­—ç¬¦ä¸²å’Œæ­£åˆ™å¯¹è±¡.toThrow() // æœŸæœ›æŠ›é”™.toHaveBeenCalled() // æ–¹æ³•è¢«è°ƒç”¨.toHaveBeenCalledWith(arg1, arg2, ...) // æ–¹æ³•è¢«ä»¥å‚æ•° arg1, arg2, ... è°ƒç”¨.toHaveBeenCalledTimes(number) // æ–¹æ³•è¢«è°ƒç”¨æ¬¡æ•°ä¸º number æ¬¡// ä»¥ä¸Š expect è¯­å¥å‡å¯å–éï¼Œå½¢å¼å¦‚ä¸‹ï¼šnot.toBe() mock ç¤ºä¾‹jest ä¸­ mock ä¸»è¦æœ‰ä¸¤ç§ä½œç”¨ï¼šå±è”½å¤–éƒ¨å½±å“ï¼š123456789101112131415161718192021222324// number-add.js...const debug = require('debug')module.exports = (a, b) =&gt; { debug('value a: ', a) debug('value b: ', b) return a + b}...// number-add.test.js// mock debug æ¨¡å—ï¼Œä½¿å¾—æ¯æ¬¡ require è¯¥æ¨¡å—æ—¶ï¼Œè¿”å›è‡ªåŠ¨ç”Ÿæˆçš„ mock å®ä¾‹jest.mock('debug')...it('è¿”å› a å’Œ b çš„å’Œ', () =&gt; { const add = require('utils/number-add') const total = add(1, 2) expect(total).toBe(3)})... æ¨¡æ‹Ÿå¤–éƒ¨è°ƒç”¨ï¼š123456789101112131415161718192021222324252627// string-add-async.jsconst fetch = require('node-fetch')module.exports = async (apiA, apiB) =&gt; { const stringA = await fetch(apiA) const stringB = await fetch(apiB) return stringA + stringB}// string-add-async.test.jsdescribe('æµ‹è¯• string-add-async æ¨¡å—', () =&gt; { it('è¿”å›æ¥å£ a å’Œ æ¥å£ b æ‰€è¿”å›çš„å­—ç¬¦ä¸²æ‹¼æ¥', async () =&gt; { // mock node-fetch æ¨¡å— jest.mock('node-fetch', () =&gt; { return jest .fn() .mockImplementationOnce(async () =&gt; 'Hello ') // é¦–æ¬¡è°ƒç”¨æ—¶è¿”å› 'Hello ' .mockImplementationOnce(async () =&gt; 'world!') // ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶è¿”å› ' world!' }) const addAsync = require('utils/string-add-async') const string = await addAsync('apiA', 'apiB') expect(string).toBe('Hello world!') })}) å¦‚ä½•æ­£ç¡®çš„ mock ä¸€ä¸ªæ¨¡å— æ­¤å¤„ä»¥ string-add-async æ¨¡å—ä¸ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243// æ–¹å¼ä¸€describe('æµ‹è¯• string-add-async æ¨¡å—', () =&gt; { it('è¿”å›æ¥å£ a å’Œ æ¥å£ b æ‰€è¿”å›çš„å­—ç¬¦ä¸²æ‹¼æ¥', async () =&gt; { // mock node-fetch æ¨¡å— jest.mock('node-fetch', () =&gt; { return jest .fn() .mockImplementationOnce(async () =&gt; 'Hello ') // é¦–æ¬¡è°ƒç”¨æ—¶è¿”å› 'Hello ' .mockImplementationOnce(async () =&gt; 'world!') // ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶è¿”å› ' world!' }) const addAsync = require('utils/string-add-async') const string = await addAsync('apiA', 'apiB') expect(string).toBe('Hello world!') })})// æ–¹å¼äºŒdescribe('æµ‹è¯• string-add-async æ¨¡å— 2', () =&gt; { it('è¿”å›æ¥å£ a å’Œ æ¥å£ b æ‰€è¿”å›çš„å­—ç¬¦ä¸²æ‹¼æ¥', async () =&gt; { // mock node-fetch æ¨¡å—ï¼Œä½¿å¾—æ¯æ¬¡ require è¯¥æ¨¡å—æ—¶ï¼Œè¿”å› mock å®ä¾‹ jest.mock('node-fetch') const fetch = require('node-fetch') fetch .mockImplementationOnce(async () =&gt; 'Hello ') // é¦–æ¬¡è°ƒç”¨æ—¶è¿”å› 'Hello ' .mockImplementationOnce(async () =&gt; 'world!') // ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶è¿”å› ' world!' const addAsync = require('utils/string-add-async') const string = await addAsync('apiA', 'apiB') expect(string).toBe('Hello world!') })})// æ–¹å¼ä¸‰// __tests__/__mocks__/node-fetch.jsmodule.exports = async apiUrl =&gt; { return apiUrl} æ³¨ï¼šå¼ºçƒˆä¸å»ºè®®ä½¿ç”¨æ–¹å¼ä¸‰ï¼Œå› ä¸ºè¯¥æ–¹å¼å½±å“èŒƒå›´æ¯”è¾ƒå¤§ï¼Œä¸è¿‡é€‚åˆ å±è”½å¤–éƒ¨å½±å“ çš„æƒ…å†µ mock å®ä¾‹ å½“ä¸€ä¸ªæ¨¡å—è¢« mock ä¹‹åï¼Œä¾¿è¿”å›äº†ä¸€ä¸ª mock å®ä¾‹ï¼Œè¯¥å®ä¾‹ä¸Šæœ‰ä¸°å¯Œçš„æ–¹æ³•å¯ä»¥ç”¨æ¥è¿›ä¸€æ­¥ mockï¼›ä¸”è¿˜ç»™å‡ºäº†ä¸°å¯Œçš„å±æ€§ç”¨ä»¥æ–­è¨€ mockImplementation(fn) å…¶ä¸­ fn å°±æ˜¯æ‰€ mock æ¨¡å—çš„å®ç° mockImplementationOnce(fn) ä¸ 1 ç±»ä¼¼ï¼Œä½†æ˜¯ä»…ç”Ÿæ•ˆä¸€æ¬¡ï¼Œå¯é“¾å¼è°ƒç”¨ï¼Œä½¿å¾—æ¯æ¬¡ mock çš„è¿”å›éƒ½ä¸ä¸€æ · mockReturnValue(value) ç›´æ¥å®šä¹‰ä¸€ä¸ª mock æ¨¡å—çš„è¿”å›å€¼ mockReturnValueOnce(value) ç›´æ¥å®šä¹‰ä¸€ä¸ª mock æ¨¡å—çš„è¿”å›å€¼ï¼ˆä¸€æ¬¡æ€§ï¼‰ mock.calls è°ƒç”¨å±æ€§ï¼Œæ¯”å¦‚ä¸€ä¸ª mock å‡½æ•° fun è¢«è°ƒç”¨ä¸¤æ¬¡ï¼šfun(arg1, arg2); fun(arg3, arg4);ï¼Œåˆ™ mock.calls å€¼ä¸º [['arg1', 'arg2'], ['arg3', 'arg4']] é™„ï¼šæ›´å¤š mock å®ä¾‹å±æ€§ä¸æ–¹æ³•è¯¦è§å®˜æ–¹æ–‡æ¡£ æµ‹è¯•ç¤ºä¾‹å®Œæ•´ä»£ç æš‚ä¸æä¾›å·¥å…·æ¨¡å—çš„æµ‹è¯•æ–¹æ³•å‚çœ‹æœ¬æ–‡æ¡£ mock ç¤ºä¾‹ éƒ¨åˆ†æœåŠ¡å¯åŠ¨çš„æµ‹è¯•æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748const supertest = require('supertest')describe('server æœåŠ¡', () =&gt; { let app, server beforeEach(async () =&gt; { app = await require('server') // ç¦ç”¨ koa-logger æ—¥å¿—è¾“å‡º app.log.level('fatal') }) afterEach(() =&gt; { if (server) { server.close() } app = null server = null }) const request = () =&gt; { if (!server) { server = app.listen(0) } return supertest(server) } it('å¯åŠ¨æ­£å¸¸', async () =&gt; { expect(request).not.toThrow() }) it('app æŠ›å‡ºå¼‚å¸¸å¤„ç†', async () =&gt; { app.use(async ctx =&gt; { app.emit('error', new Error('app error'), ctx) ctx.body = 'ok' }) await request() .get('/throw-error') .expect(200) .then(res =&gt; { expect(res.text).toBe('ok') }) })}) ä¸­é—´ä»¶æµ‹è¯•çš„æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758const supertest = require('supertest')describe('é”™è¯¯ä¸­é—´ä»¶', () =&gt; { let app, server beforeEach(async () =&gt; { app = await require('server') // å¯ä»¥è¯•è¯•å–æ¶ˆæ³¨é‡Šè¿™ä¸€å¥ï¼Œå¯ä»¥å‘ç°ç”±äºæ²¡æœ‰é‡ç½®æ¨¡å—ç¼“å­˜ï¼Œå¯¼è‡´æµ‹è¯•ç”¨ä¾‹ 3 ä½¿ç”¨äº†ç”¨ä¾‹ 2 ä¸­çš„ server å®ä¾‹ jest.resetModules() }) afterEach(() =&gt; { if (server) { server.close() } app = null server = null }) const request = () =&gt; { if (!server) { server = app.listen(0) } return supertest(server) } it('æŠ›å‡ºå¼‚å¸¸-ä¸­é—´ä»¶å‡ºé”™ï¼ˆè‡ªå®šä¹‰é”™è¯¯ï¼‰', async () =&gt; { app.use(async (ctx, next) =&gt; { await Promise.reject(new Error('ä¸­é—´ä»¶å‡ºé”™')) await next() }) await request() .get('/throw-error') .expect(200) .then(res =&gt; { expect(res.body.error).toBe('ä¸­é—´ä»¶å‡ºé”™') }) }) it('app æŠ›å‡ºå¼‚å¸¸-ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•ï¼ˆé»˜è®¤é”™è¯¯ï¼‰', async () =&gt; { app.use(async (ctx, next) =&gt; { await Promise.reject(new Error('')) await next() }) await request() .get('/throw-error') .expect(200) .then(res =&gt; { expect(res.body.error).toBe('ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•') }) })}) æ¥å£æµ‹è¯•çš„æ–¹æ³•// add-api.js 1234567891011121314151617181920const AddService = require('./add-service')module.exports = async router =&gt; { router.get('/add', async ctx =&gt; { const { a, b } = ctx.query const numberA = Number(a) const numberB = Number(b) if (Number.isNaN(numberA) || Number.isNaN(numberB)) { throw new Error('å‚æ•°å¿…é¡»ä¸ºæ•°å­—ï¼') } const projectService = new AddService(ctx) const ret = await projectService.add(numberA, numberB) // å¤„ç†è¯·æ±‚æˆåŠŸåçš„æ•°æ® ctx.body = `æ¥å£è®¡ç®—ç»“æœï¼š${ret}` })} // add.test.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566jest.mock('./add-service')const Service = require('./add-service')const addApi = require('add-api')const Router = class { constructor (ctx) { return new Proxy({}, { get (target, name) { return async (path, callback) =&gt; { callback(ctx) } } }) }}describe('æµ‹è¯• add æ¥å£', () =&gt; { it(`å½“ a=1 ä¸” b=2ï¼Œè¿”å› 'æ¥å£è®¡ç®—ç»“æœï¼š1 + 2 = 3'`, async () =&gt; { const mockedAdd = jest.fn(async () =&gt; '1 + 2 = 3') const ctx = { query: { a: '1', b: '2' } } Service.mockImplementation(() =&gt; { return { add: mockedAdd } }) const router = new Router(ctx) await addApi(router) expect(mockedAdd).toBeCalledWith(1, 2) // or expect(mockedAdd.mock.calls).toEqual([[1, 2]]) expect(ctx.body).toBe('æ¥å£è®¡ç®—ç»“æœï¼š1 + 2 = 3') }) it(`å½“ a=1 ä¸” b=xxxï¼Œæ¥å£æŠ¥é”™`, async () =&gt; { const mockedAdd = jest.fn(async () =&gt; '1 + 2 = 3') const ctx = { query: { a: '1', b: 'xxx' } } Service.mockImplementation(() =&gt; { return { add: mockedAdd } }) const router = new Router(ctx) try { await addApi(router) } catch (error) { expect(error).toBeEqual(new Error('å‚æ•°å¿…é¡»ä¸ºæ•°å­—ï¼')) } expect(mockedAdd).not.toBeCalled() })}) æœåŠ¡å±‚çš„æµ‹è¯•æ–¹æ³•// project-service.js 12345678910const add = require('utils/number-add')module.exports = class { add (a, b) { const ret = add(a, b) return `${a} + ${b} = ${ret}` }} // project-service.test.js 12345678910111213141516describe('æµ‹è¯• project service', function() { it('æµ‹è¯• service çš„ add æ–¹æ³•', async () =&gt; { jest.mock('utils/number-add') const add = require('utils/number-add') const Service = require('project-service') const service = new Service() add.mockImplementation(() =&gt; 100) const ret = await service.add(1, 2) expect(ret).toBe('1 + 2 = 100') })}) FAQconsole.log æœ‰æ—¶æ— æ•ˆ è¯•è¯• console.warn mock æ²¡èµ·ä½œç”¨ mock æ¨¡å—æ˜¯å¦åœ¨å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­ç›¸äº’å½±å“äº†ï¼› mock æ“ä½œæ˜¯å¦åœ¨ require ä¹‹åï¼› æ˜¯å¦éœ€è¦åœ¨ beforeEach ä¸­æ‰§è¡Œ jest.resetModules() æˆ– jest.resetAllMocks()ï¼› æ˜¯å¦éœ€è¦å•ç‹¬æ‰§è¡Œ mock çš„å®ä¾‹æ–¹æ³•mockResetï¼› å‚è€ƒ Jest - Getting Started","link":"/2018/02/22/%E4%BD%BF%E7%94%A8%20Jest%20%E6%B5%8B%E8%AF%95%20Node.js/"},{"title":"ä½¿ç”¨ Linux ç³»ç»Ÿå¼€å‘Webå‰ç«¯","text":"ä¸ºä»€ä¹ˆä½¿ç”¨ Linux? Macçºµæœ‰åƒåƒä¸‡ä¸‡çš„å¥½ï¼Œä½œä¸ºå­¦ç”Ÿå…šæ¥è¯´ï¼Œæ¯•ç«Ÿå…¶è¾ƒé«˜çš„ä»·æ ¼è®©çš„ç¡®è®©è®¸å¤šæˆ‘â€å…šâ€œäººå£«æœ›è€Œå´æ­¥ï¼Œå»å¹´åˆšè¿›å…¬å¸å®ä¹ çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯Win7ï¼Œå¯¹äºWindowsä¸‹çš„å‘½ä»¤è¡Œä½“éªŒçœŸæ˜¯æ— åŠ›åæ§½ï¼Œç‰¹åˆ«æ˜¯å¯¹äºWebå‰ç«¯æ¥è¯´ï¼Œéå¸¸å¤šçš„å·¥å…·éƒ½è¿è¡Œåœ¨ç»ˆç«¯å†…ï¼Œæ¯”å¦‚ä¸è®¡å…¶æ•°çš„Node.jså·¥å…·ï¼Œåæ¥æ”¹ç”¨Linuxå°±èˆ’ç•…å¤šäº†ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨ LinuxMacçºµæœ‰åƒåƒä¸‡ä¸‡çš„å¥½ï¼Œä½œä¸ºå­¦ç”Ÿå…šæ¥è¯´ï¼Œæ¯•ç«Ÿå…¶è¾ƒé«˜çš„ä»·æ ¼è®©çš„ç¡®è®©è®¸å¤šæˆ‘â€å…šâ€œäººå£«æœ›è€Œå´æ­¥ï¼Œå»å¹´åˆšè¿›å…¬å¸å®ä¹ çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯Win7ï¼Œå¯¹äºWindowsä¸‹çš„å‘½ä»¤è¡Œä½“éªŒçœŸæ˜¯æ— åŠ›åæ§½ï¼Œç‰¹åˆ«æ˜¯å¯¹äºWebå‰ç«¯æ¥è¯´ï¼Œéå¸¸å¤šçš„å·¥å…·éƒ½è¿è¡Œåœ¨ç»ˆç«¯å†…ï¼Œæ¯”å¦‚ä¸è®¡å…¶æ•°çš„Node.jså·¥å…·ï¼Œåæ¥æ”¹ç”¨Linuxå°±èˆ’ç•…å¤šäº†ã€‚ å‘è¡Œç‰ˆæœ¬é€‰æ‹©å‘è¡Œç‰ˆæœ¬ä¸ªäººè¿˜æ˜¯æ¨èä¸»æµä¹‹ä¸€çš„Ubuntuï¼Œå»ºè®®ä½¿ç”¨Gnome Flavorç‰ˆæœ¬ï¼Œç®€æ´ä¼˜é›…çš„Gnome3æ¡Œé¢ï¼Œä½¿ç”¨èµ·æ¥ç›¸å½“é¡ºæ‰‹ï¼ŒUbuntuè‡ªå¸¦çš„Unityç•Œé¢ä¸‘åˆ°æˆ‘æƒ³å“­ã€‚ä¹Ÿå¯ä½¿ç”¨Fedoraï¼Œå®ƒé»˜è®¤å°±æ˜¯Gnome3ï¼ŒäºŒè€…ä¸»è¦æ˜¯åŒ…ç®¡ç†å™¨ä¸ä¸€æ ·ï¼Œå‰è€…ä½¿ç”¨apt-getï¼Œåè€…ä½¿ç”¨yumã€‚ ç³»ç»Ÿå®‰è£…å»ºè®®ä½¿ç”¨Uç›˜åˆ»å½•å®‰è£…ï¼Œæ¨èåˆ»å½•è½¯ä»¶UNetbootinï¼Œå°†ä¸‹è½½å¥½çš„ISOæ–‡ä»¶é€šè¿‡UNetbootinçƒ§è¿›Uç›˜ï¼Œå®‰è£…å‰è®°å¾—ç©ºå‡ºä¸€å—ç£ç›˜ï¼Œç³»ç»Ÿæœ¬èº«å ç”¨å¾ˆå°ï¼Œ10Gè™½ç„¶å¤Ÿï¼Œè¿˜æ˜¯å»ºè®®20Gå§ã€‚å®‰è£…è¿‡ç¨‹ä¸ç»†è¯´äº†ï¼Œç½‘ä¸Šæ•™ç¨‹ä¸€å¤§å †ï¼Œå»ºè®®ç¬¬ä¸€æ¬¡å®‰è£…è¿˜æ˜¯å¯¹ç€æ•™ç¨‹æ¥å§ï¼Œè®°å¾—å¤‡ä»½é‡è¦æ–‡ä»¶ã€‚è¿™æ˜¯æˆ‘å®‰è£…åçš„æ¡Œé¢ï¼š å¼€å‘è½¯ä»¶å‰ç«¯å¼€å‘æ‰€éœ€çš„è½¯ä»¶å¤§éƒ½æœ‰å¯¹åº”çš„Linuxç‰ˆæœ¬ï¼Œæ¯”å¦‚Sublimeã€Atomã€Charlesã€WebStormã€Chromeï¼Œå¤§å®¶å¯è‡ªè¡ŒGoogleä¸‹è½½ã€‚ å®‰è£…Gitï¼šsudo apt-get install git é…ç½®github(å¦‚æœä½ ä½¿ç”¨çš„è¯ï¼Œå¦åˆ™å¯ç•¥è¿‡)ï¼š é…ç½®gitç”¨æˆ·åå’Œé‚®ç®± git config user.name &quot;ç”¨æˆ·å&quot; git config user.email &quot;é‚®ç®±&quot; åœ¨configååŠ å‚æ•° â€“global å¯è®¾ç½®å…¨å±€ç”¨æˆ·åå’Œé‚®ç®±ã€‚ ç”Ÿæˆssh key ssh-keygen -t rsa -C &quot;é‚®ç®±&quot; ç„¶åæ ¹æ®æç¤ºè¿ç»­å›è½¦å³å¯åœ¨~/.sshç›®å½•ä¸‹å¾—åˆ°id_rsaå’Œid_rsa.pubä¸¤ä¸ªæ–‡ä»¶ï¼Œid_rsa.pubæ–‡ä»¶é‡Œå­˜æ”¾çš„å°±æ˜¯å…¬é’¥ã€‚ ä¸Šä¼ å…¬é’¥åˆ°github å¤åˆ¶å…¬é’¥å†…å®¹ï¼Œæ¥ç€ç™»å½•githubï¼Œè¿›å…¥Settingsï¼Œé€‰æ‹© SSH and GPG keysï¼Œç‚¹å‡» New SSH keyã€‚ æµ‹è¯•æ˜¯å¦é…ç½®æˆåŠŸ ssh -T git@github.com å¦‚æœé…ç½®æˆåŠŸï¼Œåˆ™ä¼šæ˜¾ç¤ºï¼š Hi username! Youâ€™ve successfully authenticated, but GitHub does not provide shell access. å®‰è£…Node.jsï¼šæ–¹æ³•é›¶ï¼šä½¿ç”¨aptå®‰è£… sudo apt-get install nodejs npm ln -s nodejs /usr/bin sudo apt-get install openjdk-9-jdk sudo npm i -g wnpm sudo wnpm i -g wac-cli æ–¹æ³•ä¸€ï¼šä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ï¼ˆæ¨èæ–°æ‰‹ä½¿ç”¨ï¼‰å®‰è£… 5.x ç‰ˆæœ¬ï¼š sudo apt-get install curl curl -sL https://deb.nodesource.com/setup_5.x | sudo -E bash - sudo apt-get install nodejs æ–¹æ³•äºŒï¼šä½¿ç”¨ NVM å®‰è£…å¹¶ç®¡ç† nodeï¼Œå»ºè®®æœ‰ä¸€å®š Linux å‘½ä»¤è¡Œå’Œ Node.js ç»éªŒçš„äººä½¿ç”¨ï¼š https://github.com/creationix/nvm æ–¹æ³•ä¸‰ï¼šä¹Ÿå¯é‡‡ç”¨ç¼–è¯‘æºç çš„æ–¹å¼å®‰è£…ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œå…¶æ­¥éª¤å¦‚ä¸‹ã€‚ å®‰è£… build-essentialï¼Œå³è½¯ä»¶ç¼–è¯‘å·¥å…·é›†ï¼Œç”¨äºä»æºä»£ç ç¼–è¯‘å’Œå®‰è£…è½¯ä»¶ã€‚ sudo apt-get update sudo apt-get install build-essential å…‹éš†åˆ†æ”¯å¹¶è¿›å…¥nodeç›®å½•ï¼š git clone https://github.com/nodejs/node.git &amp;&amp; cd node åˆ‡æ¢åˆ°ä¸€ä¸ªä½ éœ€è¦çš„ç¨³å®šåˆ†æ”¯ï¼š git checkout v4.0.0-rc ç¼–è¯‘å¹¶å®‰è£…ï¼š ./configure make sudo make install æŸ¥çœ‹nodeå®‰è£…ä½ç½®å¹¶æ·»åŠ è½¯è¿æ¥ï¼š whereis node sudo ln -s /usr/local/bin/node /usr/bin/node sudo ln -s /usr/local/bin/npm /usr/bin/npm æŸ¥çœ‹nodeç‰ˆæœ¬ node -v PlayOnLinux &amp;&amp; PhotoShopä»¤äººå¤´ç–¼çš„PhotoShopï¼ŒAdobeæ²¡æœ‰å¯¹åº”çš„Linuxç‰ˆæœ¬ï¼Œæ­¤å¤„ä½¿ç”¨Wineæ–¹æ¡ˆï¼Œæ¨èå®‰è£…PlayOnLinuxï¼Œä½ åªè¦æœ‰exeæ–‡ä»¶å°±å¥½äº†ï¼ŒWineçš„ç¯å¢ƒé…ç½®ä¸éœ€è¦ä½ æ“å¿ƒï¼ŒPlayOnLinuxå¸®ä½ æå®šã€‚å®‰è£…PlayOnLinuxåªéœ€è¾“å…¥ä¸€æ¡å‘½ä»¤æå®šï¼š sudo apt-get install playonlinux è£…å¥½åï¼Œæ‰“å¼€PlayOnLinuxï¼Œå¦‚ä½•å®‰è£…è¯·çœ‹ä¸‹å›¾ï¼š å†å¾€åå°±æ˜¯ä¸‹ä¸€æ­¥ã€ä¸‹ä¸€æ­¥ã€ä¸‹ä¸€æ­¥ã€å®Œæˆã€‚ wineè½¯ä»¶å¯èƒ½å‡ºç°ä¸­æ–‡ä¹±ç ï¼Œå¯å‚çœ‹å½»åº•æ¶ˆé™¤wineä¸­æ–‡ä¹±ç  Zshç»ˆç«¯ï¼š é¦–å…ˆå®‰è£…zshï¼š sudo apt-get install zsh åˆ‡æ¢shellï¼š chsh -s which zsh é‡å¯ç³»ç»Ÿå³å¯ç”Ÿæ•ˆ å®‰è£…ä¸»é¢˜ï¼Œæœ¬äººæ¨èä¸»é¢˜bullet-train-oh-my-zsh-theme å…¶å®ƒè½¯ä»¶è¶Šè¿‡é•¿åŸ æœç‹—è¾“å…¥æ³• WPS QQ easystrokeé¼ æ ‡æ‰‹åŠ¿ï¼š sudo apt-get install easystroke audaciouså¬æ­Œï¼š sudo apt-get install audacious","link":"/2016/04/17/%E4%BD%BF%E7%94%A8%20Linux%20%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91Web%E5%89%8D%E7%AB%AF/"},{"title":"ä½¿ç”¨ Node.js å°†çè—çš„ bash è„šæœ¬å°è£…æˆå‘½ä»¤è¡Œå·¥å…·","text":"é˜è¿°å¦‚ä½•å°†ä¸€ä¸ªå¸¸ç”¨çš„ bash è„šæœ¬èå…¥ npm ç”Ÿæ€ä¹‹ä¸­ï¼Œæ­¤å¤„ä»¥æœ€è¿‘é‡åˆ°çš„ä¸€ä¸ª CR æäº¤è„šæœ¬ä¸ºä¾‹ã€‚ èƒŒæ™¯ä½œä¸ºç¨‹åºçŒ¿ï¼Œå¤§å®¶æˆ–å¤šæˆ–å°‘åœ°éƒ½ç”¨è¿‡ GitHub ä¸Šçš„ merge request åŠŸèƒ½ã€‚å½“ç„¶ï¼Œé™¤äº†è¿™ç±» Code Review æ–¹å¼ï¼Œä¸å°‘å…¬å¸éƒ½æœ‰è‡ªå·±çš„ Code Review å¹³å°ï¼Œæˆ‘å¸ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç±»ä¼¼ Gerrit çš„å·¥å…·ï¼Œæ­¤å¤„æˆ‘ä»¬æš‚ä¸”ä»¥ Gerrit æŒ‡ä»£ã€‚ç”±äºæœ€è¿‘åœ¨æ²»ç†å·¥ç¨‹æ—¶ï¼Œéœ€è¦å…¨é¢åˆ‡ï¼ˆè¦ï¼‰åˆ°ï¼ˆæ±‚ï¼‰ä½¿ç”¨ Gerrit è¿›è¡Œ CR æäº¤ã€‚å‘ç° Gerrit æäº¤å‘½ä»¤ä¸æ˜¯é‚£ä¹ˆå¥½è®°ï¼Œç»å¸¸éœ€è¦å…ˆ git pushï¼Œæ¥ç€è¢«æ‹¦æˆªæŠ¥é”™ä¹‹åï¼Œå†æ ¹æ®æç¤ºå¤åˆ¶å‘½ä»¤è¡Œï¼Œå†æ¬¡æ‰§è¡Œæ–¹å¯æˆåŠŸæäº¤ Gerrit ã€‚ä½œä¸ºæ”»åŸç‹®ï¼Œè¿™æœ‰ç‚¹éš¾ä»¥å¿å—äº†ï¼ï¼ï¼ è¯‰æ±‚ä¸€ã€æœ‰æ²¡æœ‰å•ç‹¬çš„å‘½ä»¤è®©æˆ‘ç›´æ¥æäº¤ Gerritï¼ŸäºŒã€æœ‰æ²¡æœ‰å‘½ä»¤è¡Œå·¥å…·ï¼Œæˆ‘ç›´æ¥å®‰è£…å°±èƒ½ä½¿ç”¨ï¼Ÿä¸‰ã€åœ¨ git push åï¼Œç»ç”± git hook æ‹¦æˆªåæŒ‰éœ€æäº¤ Gerritï¼Ÿè§£å†³ä¸€ã€æœ‰æ²¡æœ‰å•ç‹¬çš„å‘½ä»¤è®©æˆ‘ç›´æ¥æäº¤ Gerritï¼Ÿ ç­”ï¼šæœ‰çš„ï¼Œæœ‰æ¬¡åŒäº‹è§æˆ‘æäº¤ Gerrit ä¸é¡ºç•…ï¼Œè½¬å‘äº†ä¸€ä¸ª bash è„šæœ¬ç»™æˆ‘ï¼šä½ æŠŠå®ƒå¤åˆ¶åˆ° /usr/local/bin ç›®å½•ä¸‹ï¼Œå°±èƒ½ç›´æ¥ä½¿ç”¨ gerrit æ‰§è¡Œäº†ï¼Œçè—è„šæœ¬å¦‚ä¸‹ï¼ˆgerritï¼‰ï¼š 12branch=$(git symbolic-ref --short -q HEAD)git push origin HEAD:refs/for/${branch} äºŒã€æœ‰æ²¡æœ‰å‘½ä»¤è¡Œå·¥å…·ï¼Œæˆ‘ç›´æ¥å®‰è£…å°±èƒ½ä½¿ç”¨ï¼Ÿ ç­”ï¼šæœ‰çš„ï¼Œæ—¢ç„¶éƒ½æœ‰è„šæœ¬äº†ï¼Œä½œä¸ºå‰ç«¯å¼€å‘ï¼Œå¿…é¡»ç”¨å¿ƒçˆ±çš„ Node.js å°è£…ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œåªéœ€ä¸¤æ­¥å³å¯ä½¿ç”¨ï¼šé¦–å…ˆæ‰§è¡Œ npm i @dd/gerrit-cli -g ï¼›æ¥ç€åœ¨å·¥ç¨‹ç›®å½•ä¸‹æ‰§è¡Œ gerrit å³å¯ä½¿ç”¨ã€‚ ä¸‰ã€åœ¨ git push åï¼Œç»ç”± git hook æ‹¦æˆªåæŒ‰éœ€æäº¤ Gerritï¼Ÿ ç­”ï¼šæœ‰çš„ï¼Œå¦‚æœä½ è¿˜è§‰å¾—å…¨å±€å®‰è£…å‘½ä»¤è¡Œå¤ªéº»çƒ¦ï¼Œæˆ–è€…å®³æ€•æ–°äººæ¥äº†ä¸€è„¸æ‡µé€¼ã€‚é‚£ä¹ˆï¼Œè¿˜å¯ä»¥å€ŸåŠ© git hook è¿›è¡Œæ‹¦æˆªï¼Œç”¨æˆ·åªéœ€è¦ã€æ— è„‘åœ°ã€æ‰§è¡Œ git push å³å¯ã€‚å½“ç„¶å‰ç«¯è¿™å—æœ‰ç°æˆçš„ git hook ç¥å™¨ï¼Œå®ƒå°±æ˜¯äººè§äººçˆ±çš„å“ˆå£«å¥‡ï¼Œè‡³äºå…¶å®ƒè¯­è¨€ç”Ÿæ€ï¼Œå¤§å®¶æ‰¾æ‰¾åº”è¯¥æœ‰çš„ã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å°è£…ä¸Šè¿°è„šæœ¬å§ï¼ å®ç°æ–¹å¼1.é…ç½®å‘½ä»¤å¦‚ä½•èƒ½è®©åˆ«äººå®‰è£…ä½ çš„ npm åŒ…æ—¶ï¼Œå°±èƒ½åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤è¡Œå‘¢ï¼Ÿåªéœ€å¯¹ä½ çš„ npm åŒ…çš„ package.json æ·»åŠ  bin å­—æ®µï¼š 123456789{ &quot;name&quot;: &quot;your-first-cli-package&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;ä½ çš„ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;bin&quot;: { &quot;yourCommand&quot;: &quot;index.js&quot; },} ä¹‹ååˆ«äººä½¿ç”¨ npm i -g your-first-cli-package æ—¶ï¼Œå³å¯åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ yourCommand è°ƒç”¨ä½ çš„ index.js çš„é€»è¾‘å•¦ã€‚å¦‚æœä½¿ç”¨å±€éƒ¨å®‰è£…çš„æ–¹å¼ï¼Œå³ npm i your-first-cli-packageï¼Œå‘½ä»¤è¡Œå°†è¢«å®‰è£…åˆ° node_modules/.bin/yourCommand ä¸‹ï¼Œå…¶å†…å®¹æ­£æ˜¯ index.js çš„å†…å®¹ã€‚æ­¤æ—¶å¯ç¼–è¾‘ npm scripts è°ƒç”¨ã€‚ 2.è°ƒç”¨å£°æ˜ç”±äºæˆ‘ä»¬ä½¿ç”¨ Node.js å®ç°ï¼Œå› æ­¤å‘½ä»¤è¡Œå¯¹åº”çš„å…¥å£ js æ–‡ä»¶ï¼ˆæ­¤å¤„å³ index.jsï¼‰éœ€è¦å£°æ˜å½“å‰æ–‡ä»¶ä½¿ç”¨ node æ‰§è¡Œï¼š 12#!/usr/bin/env node// æ­¤å¤„ç¼–å†™ yourCommand å‘½ä»¤çš„é€»è¾‘ 3.ç¼–å†™é€»è¾‘æ­¤å¤„å®ç°å¾—æ¯”è¾ƒç²—ç³™ï¼Œç›®å‰å°±ä¸€ä¸ªå‘½ä»¤ï¼Œå› æ­¤æœªå¼•å…¥ args è¿™ç±»åŒ…ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960#!/usr/bin/env nodeconst execa = require('execa')const chalk = require('chalk')const run = async () =&gt; { let branch = '' let result = '' try { console.log(chalk.gray(`è·å–å½“å‰åˆ†æ”¯...`)) const { stdout } = await execa.command('git symbolic-ref --short -q HEAD') branch = stdout console.log(chalk.gray(`å½“å‰åˆ†æ”¯ä¸º: ${branch}`)) } catch (error) { console.log(chalk.red(`è·å–åˆ†æ”¯å¤±è´¥ï¼š${error.message}`)) process.exit(1) // ä»¥å¤±è´¥ç é€€å‡ºï¼Œç”¨äº git hooks æ‹¦æˆªè¯†åˆ« } try { console.log(chalk.gray(`æ£€æŸ¥å½“å‰åˆ†æ”¯æ˜¯å¦æ¨é€è¿‡è¿œç¨‹ä»“åº“...`)) await execa.command(`git rev-parse --abbrev-ref ${branch}@{upstream}`) console.log(chalk.gray(`å½“å‰åˆ†æ”¯å­˜åœ¨äº ${branch} è¿œç¨‹ä»“åº“...`)) } catch (error) { console.log( chalk.yellow(`å½“å‰åˆ†æ”¯ ${branch} æœªæ¨é€è¿œç¨‹ä»“åº“ ${error.message}`), ) try { console.log(chalk.green(`å°è¯•æ¨é€åˆ†æ”¯ ${branch} è‡³è¿œç¨‹ä»“åº“`)) const { stderr } = await execa.command( `git push --set-upstream origin ${branch} --no-verify`, ) result = stderr } catch (error) { console.log(chalk.red(`æäº¤ gerrit å¤±è´¥ï¼š${error.message}`)) process.exit(1) } } try { console.log(chalk.gray(`å¯¹åˆ†æ”¯ ${branch} æäº¤ gerrit ...`)) const { stderr } = await execa.command( `git push origin HEAD:refs/for/${branch} --no-verify`, ) result = stderr } catch (error) { console.log(chalk.red(`æäº¤ gerrit å¤±è´¥ï¼š${error.message}`)) process.exit(1) } console.log(chalk.green(`${branch} æäº¤ gerrit æˆåŠŸï¼Œä¿¡æ¯å¦‚ä¸‹ï¼š\\n${result}`)) process.exit(0) // ä»¥æˆåŠŸç é€€å‡ºï¼Œç”¨äº git hooks é€šè¿‡è¯†åˆ«}run() ä½¿ç”¨æ–¹å¼å…¨å±€ä½¿ç”¨ï¼ˆéå‰ç«¯å·¥ç¨‹æ¨èä½¿ç”¨ï¼‰å®‰è£…npm i @dd/gerrit-cli -g æ‰§è¡Œ ç¡®ä¿åœ¨ git å·¥ç¨‹ç›®å½•ä¸‹ gerrit ç¤ºä¾‹ JavaScript å·¥ç¨‹å±€éƒ¨ä½¿ç”¨ï¼ˆå‰ç«¯å·¥ç¨‹æ¨èä½¿ç”¨ï¼‰å®‰è£…npm i @dd/gerrit-cli --save-dev åœ¨ package.json ä¸­æ–°å¢ gerrit scripts12345&quot;scripts&quot;: { ... &quot;cr&quot;: &quot;gerrit&quot; ... }, æ‰§è¡Œ ç¡®ä¿åœ¨ git å·¥ç¨‹ç›®å½•ä¸‹ npm run cr ç¤ºä¾‹ å’Œ husky é…åˆä½¿ç”¨åœ¨ package.json ä¸­æ–°å¢ gerrit scripts12345678910&quot;scripts&quot;: { ... &quot;cr&quot;: &quot;gerrit&quot; ...},&quot;husky&quot;: { &quot;hooks&quot;: { &quot;pre-push&quot;: &quot;npm run cr&quot; }}, æ‰§è¡Œ ç¡®ä¿åœ¨ git å·¥ç¨‹ç›®å½•ä¸‹ git push ç¤ºä¾‹ TODO æ–°å¢å­å‘½ä»¤æ”¯æŒç”Ÿæˆ gerrit çš„é…ç½®æ–‡ä»¶ æ‰“å°å¯¹åº”çš„ CR è§„èŒƒçš„æ–‡æ¡£é“¾æ¥ï¼Œå¦åˆ™æ–°äººä¼šæ‡µé€¼ å°è£…æˆ SDK ä¾›å…¶å®ƒå·¥å…·è°ƒç”¨ æ€»ç»“æˆ‘ä»¬å¤šå¤šå°‘å°‘ä¼šé‡åˆ°ç±»ä¼¼çš„åœºæ™¯ï¼Œä»¥å·¥ç¨‹åŒ–çš„è§†è§’å»å°è£…å®ƒï¼Œè®©åŸæœ¬ npm ç”Ÿæ€ä¹‹å¤–çš„ bash è„šæœ¬ä¹Ÿèƒ½èäºæ— å½¢ï¼","link":"/2020/10/02/%E4%BD%BF%E7%94%A8%20Node.js%20%E5%B0%86%E7%8F%8D%E8%97%8F%E7%9A%84%20bash%20%E8%84%9A%E6%9C%AC%E5%B0%81%E8%A3%85%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/"},{"title":"å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„æŸ¯é‡ŒåŒ–åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ","text":"å‡½æ•°å¼ç¼–ç¨‹æœ€è¿‘è¶Šæ¥è¶Šæ´»è·ƒï¼Œå»å¹´å®ä¹ çš„æ—¶å€™ä¹°äº†ä¸€æœ¬ ã€ŠJavaScript å‡½æ•°å¼ç¼–ç¨‹ã€‹ï¼Œå›«å›µåæ£çš„çœ‹äº†ä¸€éï¼Œä¼¼æ‡‚éæ‡‚çš„ï¼Œ ä»Šå¹´é‡æ–°çœ‹äº†ä¸€éï¼Œç°å†™ä¸‹è¿™ç¯‡åšå®¢ï¼Œè°ˆè°ˆæˆ‘å¯¹æŸ¯é‡ŒåŒ–çš„ç†è§£å§ã€‚ æŸ¯é‡ŒåŒ–æŸ¯é‡ŒåŒ–å‡½æ•°ä¸ºæ¯ä¸€ä¸ªé€»è¾‘å‚æ•°è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ã€‚(ã€ŠJavaScript å‡½æ•°å¼ç¼–ç¨‹ã€‹) ç®€å•è¯´ï¼Œå‡½æ•°æŸ¯é‡ŒåŒ–å°±æ˜¯å¯¹é«˜é˜¶å‡½æ•°çš„é™é˜¶å¤„ç†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå°±æ˜¯æŠŠåŸæœ¬ï¼šfunction(arg1,arg2)å˜æˆfunction(arg1)(arg2)function(arg1,arg2,arg3)å˜æˆfunction(arg1)(arg2)(arg3)function(arg1,arg2,arg3,arg4)å˜æˆfunction(arg1)(arg2)(arg3)(arg4)â€¦â€¦function(arg1,arg2,â€¦,argn)å˜æˆfunction(arg1)(arg2)â€¦(argn) ä½œè€…ï¼šå°è¶æƒŠé¸¿é“¾æ¥ï¼šhttps://www.zhihu.com/question/40374792/answer/86268208æ¥æºï¼šçŸ¥ä¹è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒã€‚ ä¸¾ä¸ªä¾‹å­ä¸€ä¸ªå‚æ•° å¼ºåˆ¶åªæ¥æ”¶ä¸€ä¸ªå‚æ•° 123456789101112131415161718// æ¥æ”¶ä¸€ä¸ªå‚æ•°è‡ªåŠ¨æŸ¯é‡ŒåŒ–function curry (fun) { return function (arg) { return fun(arg); }}// es6 è£…é€¼ç‰ˆfunction curry (fun) { return arg =&gt; fun(arg);}[1, 2, 3, 4, 5].map(parseInt)//[1, NaN, NaN, NaN, NaN][1, 2, 3, 4, 5].map(curry(parseInt))//[1, 2, 3, 4, 5] ä¸¤ä¸ªå‚æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960// æ™®é€šäºŒå‚æ•°çš„åŠ æ³•function normalAdd(x, y) { return x + y;}// æŸ¯é‡ŒåŒ–ç‰ˆæœ¬function add(y) { return function(x) { return x + y; }}let add2 = add(2);add2(3);// 5// æ™®é€šäºŒå‚æ•°ä¹˜æ³•function normalMultiply(x, y) { return x * y;}// æŸ¯é‡ŒåŒ–ç‰ˆæœ¬function multiply(y) { return function(x) { return x * y; }}let multiply2 = multiply(2);multiply2(3);// 6// è‡ªåŠ¨æŸ¯é‡ŒåŒ–function curry2 (fun) { return function (arg2) { return function (arg1) { return fun(arg1, arg2); } }}// es6 è£…é€¼ç‰ˆfunction curry2 (fun) { return arg2 =&gt; arg1 =&gt; fun(arg1, arg2);}let curryAdd = curry2(normalAdd);let curryAdd2 = curryAdd(2);let curryMultiply = curry2(normalMultiply);let curryMultiply2 = curryMultiply(2);curryAdd2(3);// 5curryMultiply2(3);// 6 ä¸‰ä¸ªå‚æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// æ™®é€šç‰ˆæœ¬function normalAddThenMultiply(arr, factor, increase) { let tempArr = arr.map(function(ele, index) { return normalAdd(ele, increase); }); return tempArr.map(function(ele, index) { return normalMultiply(ele, factor); });}normalAddThenMultiply([1, 2, 3], 3, 2);// [9, 12, 15]// æŸ¯é‡ŒåŒ–ç‰ˆæœ¬function addThenMultiply(increase){ return function(factor) { return function(arr) { let addStep = curry2(normalAdd); let multiplyFactor = curry2(normalMultiply); let tempArr = arr.map(addStep(increase)); return tempArr.map(multiplyFactor(factor)); } } }let add2Multiply = addThenMultiply(2);let add2Multiply3 = add2Multiply(3);add2Multiply3([1, 2, 3]);// [9, 12, 15]// è‡ªåŠ¨æŸ¯é‡ŒåŒ–function curry3 (fun) { return function (last) { return function (middle) { return function (first) { return fun(first, middle, last); } } }}// es6 è£…é€¼ç‰ˆfunction curry3(fun) { return last =&gt; middle =&gt; first =&gt; fun(first, middle, last);}let curryAddMultiply = curry3(normalAddThenMultiply);let curryAdd2Multiply = curryAddMultiply(2);let curryAdd2Multiply3 = curryAdd2Multiply(3);curryAdd2Multiply3([1, 2, 3]);// [9, 12, 15] æŸ¯é‡ŒåŒ–åˆ°åº•æœ‰ä»€ä¹ˆç”¨ æ¯ä¸ªæ­¥éª¤éƒ½æ˜¯æ˜¾æ€§è°ƒç”¨ï¼ˆæ¶ˆè€—ä¸€ä¸ªå‚æ•°ï¼‰ï¼ŒåŒæ—¶å°†è¯¥æ­¥éª¤çš„ç»“æœç¼“å­˜ï¼ˆè¿”å›åŒ¿åé—­åŒ…ï¼Œè¯¥é—­åŒ…ç­‰å¾…ä¸‹ä¸€ä¸ªå‚æ•°ï¼‰ï¼Œä»è€Œæš‚ç¼“è°ƒç”¨ï¼Œå¾…æ—¶æœºæˆç†Ÿæ—¶ä¾¿å¯ä¼ å…¥ä¸‹ä¸€ä¸ªå‚æ•°ä»¥ä¾¿ç»§ç»­è°ƒç”¨ï¼› ä¸¤ä¸ªå‚æ•°æƒ…å†µä¸‹çš„åº”ç”¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546 // ç”¨äºå®šä¹‰ä¸€ç³»åˆ— action actionList = [{ &quot;action&quot;: &quot;isLogin&quot;, &quot;hasCallback&quot;: true }, { &quot;action&quot;: &quot;doLogin&quot;, &quot;hasCallback&quot;: false }, { &quot;action&quot;: &quot;setTitle&quot;, &quot;hasCallback&quot;: true }]; // æ‰¹é‡ç”Ÿæˆ API çš„å·¥å‚å‡½æ•° factory(actionList) { for (let value of actionList) { this[`${value.action}`] = this.generator(value); } } // ç®€åŒ–ç‰ˆæœ¬çš„ API ç”Ÿæˆå‡½æ•° generator(action) { return function(params) { let MyPromise = es6Promise.Promise; action['params'] = params; return new MyPromise((resolve, reject) =&gt; { let callbackId = this.generateId(); this.responseCallbackList[callbackId] = (data) =&gt; { resolve(data); } this.sendAction(action, callbackId); }); } }// æœ€ç»ˆçš„è°ƒç”¨æ–¹å¼ï¼Œ å…¶ä¸­ params æ˜¯ç”¨æˆ·è°ƒç”¨æ—¶æ‰ä¼ å…¥çš„ bridge.setTitle({skin: 'red', color: '#666'}) .then((data) =&gt; { alert(data); }) .catch((err) =&gt; { alert(err); }); ä¸‰ä¸ªå‚æ•°æƒ…å†µä¸‹çš„åº”ç”¨12345// redux-thunk ä¸­é—´ä»¶export default function thunkMiddleware({ dispatch, getState }) { return next =&gt; action =&gt; typeof action === 'function' ? action(dispatch, getState) : next(action);} è¯¥ä¸­é—´ä»¶æœŸå¾…ä¸€ä¸ªç¬¬ä¸€ä¸ªå‚æ•° { dispatch, getState }, å¹¶è¿”å›ä¸€ä¸ªæœŸå¾…ä¸€ä¸ª next å‚æ•°çš„åŒ¿åå‡½æ•°ï¼Œ ç”±äº next çš„å€¼ç”±ä¸Šä¸€ä¸ªä¸­é—´ä»¶å†³å®šï¼Œ å› æ­¤æš‚ç¼“è°ƒç”¨ï¼Œ ç›´è‡³ä¼ å…¥ next å‚æ•°ï¼Œ æœ€ç»ˆè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ˆå³åŠ å…¥ä¸­é—´ä»¶çš„ dispatch å‡½æ•°ï¼‰ï¼Œ è¯¥å‡½æ•°æœŸå¾…ä¸€ä¸ª action å‚æ•°ã€‚ å…·ä½“è°ƒç”¨è¿‡ç¨‹åŠåŸç†è¯¦è§ï¼šç†è§£ redux ä¸­é—´ä»¶ å‚è€ƒï¼šä¸“å±å‰ç«¯å‘çš„å‡½æ•°å¼ç¼–ç¨‹æ·±å…¥åˆ°æºç ï¼šè§£è¯» redux çš„è®¾è®¡æ€è·¯ä¸ç”¨æ³•ç†è§£ redux ä¸­é—´ä»¶","link":"/2016/10/06/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%9F%AF%E9%87%8C%E5%8C%96%E5%88%B0%E5%BA%95%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F/"},{"title":"å‡½æ•°å¼ç¼–ç¨‹ä¹‹ Functor","text":"ä¸‡ä¸‡æ²¡æƒ³åˆ°ï¼ŒPromise ä¹Ÿå±äºå‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ","link":"/2018/02/05/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E4%B9%8B%20Functor/"},{"title":"å‰ç«¯ Monorepo åœ¨å­—èŠ‚è·³åŠ¨çš„å®è·µ","text":"å—é‚€å‚åŠ ç¬¬åä¸€å±Š Top100 å³°ä¼šï¼Œæ›´å¤šè¯¦æƒ…è§æ–‡ç« å¹´åº•äº†ï¼Œçœ‹çœ‹è¿™100ä½æŠ€æœ¯åˆ›æ–°å¸¦å¤´äººå¦‚ä½•åšå¤ç›˜ï¼Ÿ åˆ†äº«ä¼šèƒŒæ™¯å—é‚€å‚åŠ ç¬¬åä¸€å±Š Top100 å³°ä¼šï¼Œæ›´å¤šè¯¦æƒ…è§æ–‡ç« å¹´åº•äº†ï¼Œçœ‹çœ‹è¿™100ä½æŠ€æœ¯åˆ›æ–°å¸¦å¤´äººå¦‚ä½•åšå¤ç›˜ï¼Ÿ æœ¬ä¸»é¢˜ç®€ä»‹ PPT æ­£æ–‡ å¤§å®¶æ—©ä¸Šå¥½ï¼Œæˆ‘æ˜¯æ—å®œä¸™ï¼Œä»Šå¤©æˆ‘å¸¦æ¥çš„åˆ†äº«ä¸»é¢˜æ˜¯ã€Šå‰ç«¯ Monorepo åœ¨å­—èŠ‚è·³åŠ¨çš„å®è·µã€‹ ç®€å•ä»‹ç»ä¸‹æˆ‘è‡ªå·±ï¼Œæˆ‘æ¥è‡ªå­—èŠ‚è·³åŠ¨çš„ Web Infra éƒ¨é—¨ï¼Œæ‹¥æœ‰å¤šå¹´å‰ç«¯å·¥ç¨‹åŒ–çš„ç»éªŒï¼Œä¸»è¦å¸®åŠ©å‰ç«¯å·¥ç¨‹å¸ˆæ›´å¥½åœ°ç®¡ç†å’Œæ²»ç†å·¥ç¨‹ ç›®å‰è´Ÿè´£å‰ç«¯ Monorepo è§£å†³æ–¹æ¡ˆçš„è®¾è®¡åŠå…¶è½åœ°å·¥ä½œï¼Œæœ‰ä¸°å¯Œçš„ Monorepo å®è·µå’Œæ²»ç†ç»éªŒ ä»Šå¤©çš„åˆ†äº«åˆ†ä¸ºä»¥ä¸‹äº”ä¸ªéƒ¨åˆ† é¦–å…ˆåˆ†æã€ç°ä»£å‰ç«¯å·¥ç¨‹å¼€å‘ã€çš„è¶‹åŠ¿ï¼Œå¹¶å¼•å‡ºå­—èŠ‚è·³åŠ¨ï¼Œå‰ç«¯å·¥ç¨‹å¼€å‘é¢ä¸´çš„ç—›ç‚¹ å…¶æ¬¡ç®€å•ä»‹ç»ä¸‹ Monorepoï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆèƒ½è§£å†³æˆ‘ä»¬é¢ä¸´çš„ç—›ç‚¹ æ¥ç€é’ˆå¯¹æˆ‘ä»¬åœ¨è½åœ°è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠå…¶å®è·µ å†æ¥ç€åˆ†äº«ä¸‹è‡ªç ”çš„æ–¹æ¡ˆåœ¨å­—èŠ‚è·³åŠ¨çš„è½åœ°æƒ…å†µ æœ€åæ€»ç»“å½“å‰æ–¹æ¡ˆçš„é—®é¢˜å’Œé’ˆå¯¹è¿™äº›é—®é¢˜çš„å±•æœ› OKï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç°ä»£å‰ç«¯å·¥ç¨‹å¼€å‘çš„å‡ ä¸ªè¶‹åŠ¿ é¦–å…ˆæ˜¯å‰ç«¯å·¥ç§çš„è¶‹åŠ¿ ç¬¬ä¸€ä¸ªè¶‹åŠ¿æ˜¯æ¶‰åŠçš„å¹³å°è¶Šæ¥è¶Šå¤šï¼ŒWebï¼ŒNodeï¼Œå®¢æˆ·ç«¯å’Œè·¨å¹³å°ç­‰ ç¬¬äºŒä¸ªè¶‹åŠ¿æ˜¯æ‰€èƒ½æ”¯æ’‘çš„ä¸šåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå¤æ‚åº¦è¶Šæ¥è¶Šå¤§ï¼Œç‰¹åˆ«æ˜¯è¿‘å¹´æ¥å‰ç«¯ä¾§æ¶Œç°å‡ºä¸å°‘é‡å‰ç«¯äº¤äº’çš„åº”ç”¨ï¼Œæ¯”å¦‚æ­å»ºç±»çš„ figmaï¼Œæ–‡æ¡£ç±»çš„é£ä¹¦ç­‰ ç¬¬ä¸‰ä¸ªè¶‹åŠ¿æ˜¯éšç€ä¸Šè¿°ä¸¤ä¸ªè¶‹åŠ¿è€Œæ¥åœ°ã€ä¸å¯é¿å…åœ°ä½¿å¾—å‰ç«¯å›¢é˜Ÿçš„è§„æ¨¡ä¸æ–­å¢å¤§ ä¸Šè¿°ä¸‰ä¸ªè¶‹åŠ¿åˆå®¢è§‚ä¸Šé€ æˆäº†å‰ç«¯å·¥ç¨‹çš„å››ä¸ªè¶‹åŠ¿ï¼Œå³ï¼š ä»£ç è§„æ¨¡å¢å¤§ï¼Œå†…éƒ¨å·²ç»å‡ºç°ä»£ç é‡è¶…è¿‡ 10G çš„å¤§å‹å·¥ç¨‹ ç»´æŠ¤äººæ•°å¢å¤šï¼Œä¸€ä¸ªå·¥ç¨‹å°‘åˆ™åæ¥äººï¼Œå¤šåˆ™å››äº”åäºº ç ”å‘å·¥å…·å¢åŠ ï¼Œä¸æ–­å‡ºç°çš„æ–°å·¥å…·åœ¨ä¸€ä¸ªå·¥ç¨‹ä¸Šå †å ï¼Œæ„å»ºæ–¹é¢æ¯”å¦‚ webpackï¼Œrollupï¼Œvite ç­‰ï¼Œæµ‹è¯•æ–¹é¢æ¯”å¦‚ jestï¼Œvitest ç­‰ ä¾èµ–å…³ç³»å¤æ‚ï¼Œå„ç±»é¡¹ç›®å®‰è£…ä¾èµ–åçš„ lock æ–‡ä»¶å¤§å°ï¼Œè¶³ä»¥è¯´æ˜ä¸€ä¸ªå·¥ç¨‹çš„å¤æ‚ä¾èµ–å…³ç³» é‚£ä¹ˆï¼Œåœ¨ä¸Šè¿°è¿™äº›ä¸ªè¶‹åŠ¿ä¸‹ï¼Œæˆ‘ä»¬çš„å‰ç«¯å·¥ç¨‹å¼€å‘é¢ä¸´äº†å“ªäº›ç—›ç‚¹å‘¢ï¼Ÿä¸»è¦æœ‰ä¸‰ä¸ªï¼š å…¶ä¸€ï¼Œé¡¹ç›®åŸºå»ºé‡å¤ï¼Œæ¯æ¬¡æ–°å¢é¡¹ç›®éƒ½éœ€è¦é‡å¤é…ç½® Gitï¼Œæ„å»ºå¹³å°ï¼ŒCI/CD é…ç½®ç­‰ å…¶äºŒï¼Œä»£ç å¤ç”¨å›°éš¾ï¼Œè·¨é¡¹ç›®çš„ä»£ç å¤ç”¨å’Œè°ƒè¯•æå…¶ç¹çï¼Œå¾€å¾€é€šè¿‡å‘å¸ƒ npm åŒ…æ¥å¤ç”¨ï¼Œè€Œè¿™ç§å¤ç”¨æ–¹å¼åˆä¸å¯é¿å…åœ°é‡åˆ°æ›´æ–°è§¦è¾¾ç‡çš„é—®é¢˜ å…¶ä¸‰ï¼Œå·¥ä½œæµç¨‹å‰²è£‚ï¼Œä¸€ä¸ªåŠŸèƒ½å¾€å¾€æ¶‰åŠåˆ°å¤šä¸ªæ¨¡å—ï¼Œè¿™æ—¶éœ€è¦åˆ†åˆ«åœ¨å„ä¸ªæ¨¡å—çš„å·¥ç¨‹ä¸Šå¼€å‘ã€åˆç ã€ä¸Šçº¿å’ŒéªŒè¯ï¼Œè¿™æ˜¯ç¹çå’Œå‰²è£‚çš„ é¢å¯¹ä¸Šè¿°ç—›ç‚¹ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ›´å¥½åœ°ç»„ç»‡å·¥ç¨‹ï¼Œä»¥æé«˜å·¥ç¨‹çš„ã€å¯ç»´æŠ¤æ€§ã€å’Œã€å¼€å‘æ•ˆç‡ã€ï¼Ÿæˆ‘ä»¬ç»™å‡ºçš„ç­”æ¡ˆæ˜¯ Monorepoï¼ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ç®€å•ä»‹ç»ä¸‹ Monorepo é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œä»€ä¹ˆæ˜¯ Monorepo å‘¢ï¼ŸMonorepo æ˜¯ä¸€ç§æºä»£ç ç®¡ç†çš„æ¨¡å¼ï¼Œå…¶å½¢å¼å°±æ˜¯å°†å¤šä¸ªé¡¹ç›®é›†ä¸­åˆ°ä¸€ä¸ªä»“åº“ä¸­ç®¡ç†ï¼› ä¸ Monorepo ç›¸å¯¹çš„æ˜¯ Polyrepo æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼å„ä¸ªé¡¹ç›®éƒ½æœ‰ç‹¬ç«‹çš„ä»“åº“ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„ï¼ŒMonorepo çš„å­é¡¹ç›®ä¸ä»…ä»…æ˜¯ç®€å•åœ°æ”¾åˆ°ä¸€ä¸ªä»“åº“ä¸­ç»´æŠ¤è€Œå·²ï¼Œå¤„ç†å­é¡¹ç›®é—´çš„å…³ç³»ä¹Ÿååˆ†é‡è¦ã€‚ å­é¡¹ç›®ä¹Ÿå¯ä»¥æ˜¯ä»»æ„çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ web é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥æ˜¯ node é¡¹ç›®å’Œ Lib åº“ã€‚ æ€»è€Œè¨€ä¹‹ï¼ŒMonorepo å°±æ˜¯å°†å¤šä¸ªä¸åŒçš„é¡¹ç›®ä»¥è‰¯å¥½çš„ç»„ç»‡å…³ç³»æ”¾åˆ°å•ä¸ªä»“åº“ä¸­ç»´æŠ¤ã€‚ åœ¨å‰ç«¯é¢†åŸŸï¼Œå¤§å®¶å¯èƒ½å¯¹ Lib å‹çš„ Monorepo æ›´åŠ ç†Ÿæ‚‰ï¼ŒçŸ¥åçš„å¼€æºé¡¹ç›®æ¯”å¦‚ Reactã€Vueã€Babel ç­‰éƒ½é‡‡ç”¨ Monorepo æ–¹å¼ç®¡ç†æºç ï¼Œå¤§å®¶çœ‹å·¦è¾¹è¿™ä¸ªå›¾ï¼Œé€šè¿‡å°†æ•´ä¸ªç³»ç»Ÿæ‹†åˆ†æˆå¤šä¸ª packageï¼Œä¾¿äºæŠ½è±¡å’Œå¤ç”¨ï¼Œå¹¶ä¸”è¿™äº› package å¾€å¾€ä¸éœ€è¦èµ°çº¿ä¸Šéƒ¨ç½²æµç¨‹ï¼Œåªéœ€è¦å‘å¸ƒåˆ° npm registry å³å¯ã€‚æˆ‘ç›¸ä¿¡å¤§å®¶åœ¨å…¬å¸ä¸­æ¥è§¦å’Œä½¿ç”¨åˆ°çš„å¤§éƒ¨åˆ† Monorepo é¡¹ç›®å°±æ˜¯è¿™ä¸ªç±»å‹ï¼Œä½†æ˜¯è¿™ç±»é¡¹ç›®å¾€å¾€åœ¨å•†ä¸šå…¬å¸ä¸­å¹¶ä¸æ˜¯ä¸»æµã€‚ é™¤äº† Lib å‹ä»¥å¤–ï¼Œæˆ‘ä»¬çœ‹å³è¾¹è¿™å¼ å›¾ï¼Œå¤šä¸ª App ä¹Ÿæ˜¯å¯ä»¥æ”¾åˆ°ä¸€ä¸ªä»“åº“ä¸­ç»´æŠ¤çš„ï¼Œè¿™å°±æ˜¯ App å‹çš„ Monorepoï¼Œå®ƒåŒ…å«å¤šä¸ª App é¡¹ç›®ï¼Œä»¥åŠé¡¹ç›®å…±äº«çš„ç»„ä»¶ã€å·¥å…·å‡½æ•°ç­‰ç­‰ï¼ŒApp ç±»å‹çš„é¡¹ç›®éœ€è¦èµ°å®Œæ•´çš„éƒ¨ç½²æµç¨‹ï¼ŒApp åŠå…¶ä¾èµ–çš„ Lib ä¸€èˆ¬ä¸éœ€è¦å‘å¸ƒåˆ° npm registryï¼Œè¿™ç±»é¡¹ç›®å‘¢ï¼Œæ‰æ˜¯å•†ä¸šå…¬å¸çš„ä¸»æµã€‚ åœ¨å­—èŠ‚è·³åŠ¨ï¼Œå¤§éƒ¨åˆ†çš„é¡¹ç›®éƒ½æ˜¯ App åº”ç”¨ï¼Œæˆ‘ä»¬ä¾§é‡åœ¨è¿™ä¸ªç±»å‹ä¸Šå»ºè®¾è‡ªç ”çš„ Monorepo æ–¹æ¡ˆï¼Œå®ƒçš„è¦†ç›–çš„äººç¾¤å’Œè¦†ç›–çš„åº”ç”¨æ˜¯æœ€å¤šçš„ï¼Œå› æ­¤å®ƒçš„æ”¶ç›Šä¹Ÿæ˜¯å·¨å¤§çš„ï¼›å½“ç„¶æ”¯æŒäº† App å‹çš„ Monorepoï¼Œè‡ªç„¶ä¹Ÿå°±æ”¯æŒäº† Lib å‹çš„ Monorepoã€‚ é‚£ä¸ºä»€ä¹ˆè¦é‡‡ç”¨ Monorepo å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨ Monorepo çš„æ”¶ç›Šéƒ½æœ‰å“ªäº›ï¼Ÿå®ƒæ˜¯å¦‚ä½•è§£å†³æˆ‘ä»¬é‡åˆ°çš„ç—›ç‚¹çš„ï¼Ÿ é¦–å…ˆï¼ŒMonorepo å¯ä»¥é™ä½å¤šé¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ï¼Œä»è€Œè§£å†³é¡¹ç›®åŸºå»ºé‡å¤çš„ç—›ç‚¹ã€‚ Polyrepo ä¸‹ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦æœ‰åŒå­¦åˆ›å»ºå’Œç»´æŠ¤ï¼Œå½“åˆ›å»ºæ›´å¤šé¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦æ›´å¤šåŒå­¦ï¼Œæˆ–è€…æ›´å¤šç²¾åŠ›å»åˆ›å»ºå’Œç»´æŠ¤ã€‚ è€Œåœ¨ Monorepo ä¸­ï¼Œåªéœ€è¦å°‘æ•°å‡ ä¸ªåŒå­¦è´Ÿè´£è®¾ç«‹èµ· Monorepoï¼Œæ‰€æœ‰çš„é¡¹ç›®ä»¥åŠå°†æ¥çš„é¡¹ç›®éƒ½èƒ½å¤Ÿåœ¨ä¸€ä¸ªä»“åº“ä¸­ç»Ÿä¸€ç»´æŠ¤ï¼Œä»è€Œé™ä½å¤šé¡¹ç›®ç»´æŠ¤æˆæœ¬ï¼› æ­¤å¤–ï¼ŒPolyrepo ä¸‹ï¼Œå¤šä¸ªé¡¹ç›®çš„åŸºå»ºæœ‰å¾ˆå¤šé‡å¤ï¼Œå½“å›¢é˜Ÿæœ‰å¤šä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦é¢‘ç¹åˆ›å»º git ä»“åº“ï¼Œé…ç½® CIã€Lint è§„åˆ™ã€æ„å»ºç­‰ç­‰ï¼Œè€Œä¸”ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºçš„åŸºå»ºåç»­éƒ½éœ€è¦æœ‰äººæ¥ç»´æŠ¤ã€‚ åŒæ—¶å°†ä¸€ä¸ªé¡¹ç›®çš„è°ƒæ•´ï¼ŒåŒæ­¥åˆ°å…¶ä»–é¡¹ç›®çš„æˆæœ¬ä¹Ÿå¾ˆé«˜ï¼Œæ¯”å¦‚æƒ³åœ¨ CI æµç¨‹ä¸­ä¸ºæ‰€æœ‰é¡¹ç›®åŠ å…¥ç±»å‹æ£€æŸ¥ï¼Œæ¥æé«˜ä¸‹ ts é¡¹ç›®çš„è´¨é‡ï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹æ¯ä¸ªé¡¹ç›®ï¼Œæäº¤ä»£ç ï¼Œè·‘ CIï¼Œè¿™æ ·æˆæœ¬å…¶å®æ˜¯å¾ˆé«˜çš„ã€‚è€Œåœ¨ Monorepoï¼Œåªéœ€è¦åˆ›å»ºä¸€å¥—åŸºå»ºï¼Œæ‰€æœ‰å­é¡¹ç›®ï¼Œä»¥åŠæœªæ¥çš„å­é¡¹ç›®éƒ½èƒ½å¤Ÿæ¥å…¥ç°æœ‰çš„åŸºå»ºã€‚è¿™äº›åŸºå»ºçš„è°ƒæ•´å’Œç»´æŠ¤ï¼Œä¹Ÿèƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°åº”ç”¨åˆ°å¤šä¸ªé¡¹ç›®ã€‚ åœ¨ Polyrepo ä¸­ï¼Œå¦‚æœè¦å¼€å‘å¤šä¸ªé¡¹ç›®çš„è¯ï¼Œè¿˜å¯èƒ½éœ€è¦æ¥å›åˆ‡æ¢å¼€å‘ç¯å¢ƒã€åˆ‡æ¢ä»“åº“ï¼Œlink ä»£ç ï¼Œè€Œåœ¨ Monorepo ä¸­å¯ä»¥ä¸€é”®å¯åŠ¨å¤šä¸ªå­é¡¹ç›®çš„è°ƒè¯•ã€æ„å»ºï¼Œä»è€Œæé«˜ç ”å‘æ•ˆç‡ã€‚ å…¶æ¬¡ï¼Œåœ¨ Monorepo ä¸‹å¯ä»¥å¾ˆæ–¹ä¾¿çš„å…±äº«ä»£ç ï¼Œä»è€Œè§£å†³ä»£ç å¤ç”¨å›°éš¾çš„ç—›ç‚¹ã€‚ Polyrepo ä¸­ï¼Œå¤ç”¨å…¬ç”¨ä»£ç æ¯”è¾ƒå›°éš¾ï¼Œéœ€è¦ä¸ºå…¬ç”¨ä»£ç å•ç‹¬ç»´æŠ¤ä¸€ä¸ªä»“åº“ï¼Œæ­¤å¤–å‡çº§ã€è°ƒè¯•æµç¨‹ä¹Ÿååˆ†ç¹çä½æ•ˆã€‚ é¦–å…ˆæ˜¯è°ƒè¯•å¾ˆç¹çï¼Œå…¬ç”¨æ¨¡å—çš„è°ƒè¯•éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ linkï¼Œä¸å½“å‰è°ƒè¯•çš„é¡¹ç›®å…³è”èµ·æ¥ï¼Œå¦‚æœå…¬ç”¨æ¨¡å—è¾ƒå¤šçš„è¯ï¼Œlink æ­¥éª¤å°†éå¸¸ç¹çä½æ•ˆã€‚ å…¶æ¬¡å…¬ç”¨æ¨¡å—çš„å‡çº§å¾ˆç¹çï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†è¿™ç§ä¾èµ–å…³ç³»ï¼Œå…ˆå‡çº§åº•å±‚çš„æ¨¡å—ï¼Œç„¶åå‘å¸ƒï¼Œæœ€åå†å‡çº§é¡¶å±‚æ¨¡å—ï¼Œå¦‚æœå‡çº§å®Œä¹‹åå‘ç°æœ‰é—®é¢˜ï¼Œè¿™äº›æ­¥éª¤è¿˜å¾—é‡æ¥ä¸€æ¬¡ã€‚æ­¤å¤–ï¼Œæ¨åŠ¨ä¸Šå±‚æ¨¡å—æ›´æ–°ä¹Ÿä¸èƒ½åŠæ—¶è§¦è¾¾ã€‚ è€Œåœ¨ Monorepo ä¸­ï¼Œå¯ä»¥ç›´æ¥ä¸€é”®åˆ›å»ºå…¬ç”¨æ¨¡å—ï¼Œé¡¶å±‚çš„æ¨¡å—ä¸€é”®å¼•å…¥å…¬ç”¨æ¨¡å—è¿›è¡Œå¼€å‘ã€è°ƒè¯•ï¼Œåº•å±‚æ¨¡å—çš„æ›´æ”¹èƒ½å¤Ÿç›´æ¥è¢«ä¸Šå±‚æ„ŸçŸ¥ï¼Œç”šè‡³ä¸éœ€è¦ç»è¿‡ link å’Œ npm å‘å¸ƒï¼Œå³å¯åœ¨æœ¬åœ°è°ƒè¯•æˆ–è€…éƒ¨ç½²å¹³å°å‘å¸ƒï¼Œé™ä½äº†å¾ˆå¤šé‡å¤çš„å·¥ä½œã€‚ å› æ­¤ï¼Œåœ¨ Polyrepo ä¸­å¤ç”¨ä»£ç æ¯”è¾ƒå›°éš¾ï¼Œå¯¼è‡´ä»£ç å¤ç”¨ç‡æ¯”è¾ƒä½ï¼Œè€Œ Monorepo ä¸­èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„å¤ç”¨ä»£ç ï¼ŒæŠ½ç¦»æ–°çš„å·¥å…·åº“çš„æˆæœ¬éå¸¸ä½ï¼Œè¿™ä½¿å¾—å¤§å®¶æ›´æ„¿æ„åšè¿™ç±»æŠ½ç¦»å·¥ä½œï¼Œæé«˜äº†ä»£ç å¤ç”¨ç‡ã€‚ å†æ¬¡ï¼Œåœ¨ Monorepo é‡Œèƒ½å¤Ÿå®ç°è‡ªåŠ¨åŒ–çš„å¤šé¡¹ç›®å·¥ä½œæµï¼Œä»è€Œè§£å†³å·¥ä½œæµç¨‹å‰²è£‚çš„ç—›ç‚¹ã€‚ å¦‚æœæˆ‘çš„ä¸šåŠ¡éœ€æ±‚è¦æ¶‰åŠåˆ°å¤šä¸ªé¡¹ç›®ï¼Œåœ¨ Polyrepo æ¨¡å¼ä¸­ï¼Œæˆ‘éœ€è¦ä¿®æ”¹å¤šä¸ªé¡¹ç›®ï¼Œå¯¹å¤šä¸ªé¡¹ç›®å„è‡ªæäº¤ commitï¼Œæ¯ä¸ªé¡¹ç›®å•ç‹¬è·‘ CI æµç¨‹ï¼Œå¦‚æœé¡¹ç›®é—´æœ‰ä¾èµ–å…³ç³»çš„è¯ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨å‡çº§é¡¹ç›®çš„ä¾èµ–ç‰ˆæœ¬ã€‚ä¾‹å¦‚éœ€è¦ä¿®æ”¹å›¾ä¸­çš„ä¸‰ä¸ªé¡¹ç›®ï¼Œéœ€è¦å…ˆä¿®æ”¹æäº¤åº•å±‚æ¨¡å—ï¼Œè·‘æ¯ä¸ªæ¨¡å—çš„ CI æµç¨‹ï¼Œåœ¨å¤„ç†é¡¶å±‚æ¨¡å—æ—¶ï¼Œè¿˜å¾—æ›´æ–°åº•å±‚ä¾èµ–ï¼Œæ¥ç€å†è·‘ä¸€æ¬¡ CI æµç¨‹ï¼Œè¿™ä¸€å¥—æµç¨‹éå¸¸ç¹çä¸”ä¸è¿ç»­ã€‚ è€Œåœ¨ Monorpeo ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹å¤šä¸ªå­é¡¹ç›®ï¼Œåªéœ€ä¸€æ¬¡ commit æäº¤ï¼Œå¤šä¸ªå­é¡¹ç›®çš„ CI å’Œå‘å¸ƒæµç¨‹ä¹Ÿæ˜¯ä¸€æ¬¡æ€§çš„ã€‚ä»è€Œå°†æ•´ä¸ªå¤šé¡¹ç›®çš„å·¥ä½œæµè‡ªåŠ¨åŒ–ï¼Œè¿ç»­åŒ–ã€‚ æˆ‘ä»¬ç®€å•çš„åšä¸€ä¸ªæ€»ç»“ï¼šåœ¨ Polyrepo çš„æ¨¡å¼ä¸‹ï¼Œæ¯ä¸€ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„åœ°å€ã€ä»“åº“ï¼Œè¿™ä¼šå¯¼è‡´å…±äº«ä»£ç å¾ˆå›°éš¾ï¼ŒåŸºå»ºæ¯”è¾ƒé‡å¤ï¼ŒåŒæ—¶å·¥ä½œæµä¹Ÿæ¯”è¾ƒå‰²è£‚ã€‚ ä½†æ˜¯åœ¨ Monorepo é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªé¡¹ç›®çš„å·¥ä½œæµè¿›è¡Œè§„èŒƒç»Ÿä¸€ã€‚æ¯”å¦‚è¯´ç»Ÿä¸€çš„ CI æµç¨‹ã€ code review ç­‰ç­‰ã€‚åŒæ—¶ï¼Œå®ƒçš„ä»£ç å…±äº«ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å¤šä¸ªé¡¹ç›®å…±äº«çš„ç»„ä»¶æˆ–è€…å·¥å…·å‡½æ•°ï¼ŒæŠ½ç¦»å‡ºæ¥ï¼Œä¾¿å¯ä»¥åœ¨å¤šä¸ªé¡¹ç›®é—´å¤ç”¨ï¼Œå½“ç„¶ï¼Œå¤šä¸ªé¡¹ç›®çš„åŸºå»ºä¹Ÿå¯ä»¥å¤ç”¨ã€‚ å¾ˆå¤šæ—¶å€™ä¸€ä¸ªå›¢é˜Ÿã€æˆ–è€…ä¸€å—ä¸šåŠ¡ï¼Œä»–ä»¬çš„é¡¹ç›®ä¹‹é—´å¹¶ä¸æ˜¯å®Œå…¨å‰²è£‚çš„ï¼Œè€Œæ˜¯ç›¸äº’è”ç³»çš„ï¼ŒMonorepo å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†è¿™äº›é¡¹ç›®ç»„ç»‡åˆ°ä¸€èµ·ï¼Œè¿›è¡Œç»´æŠ¤ã€‚å½“å›¢é˜Ÿæœ‰å¤šé¡¹ç›®éœ€æ±‚çš„æ—¶å€™ï¼Œæ¨èä½¿ç”¨ Monorepoã€‚ å½“ç„¶ï¼ŒMonorepo å¹¶ä¸æ˜¯é“¶å¼¹ï¼ŒPolyrepo ä¹Ÿèƒ½ç¬¦åˆå¤§éƒ¨åˆ†çš„åœºæ™¯ï¼Œæˆ‘ä»¬é€‰æ‹© Monorepo æ˜¯åŸºäºæˆ‘ä»¬é‡åˆ°çš„ç—›ç‚¹è€ƒè™‘å’Œæƒè¡¡çš„ï¼Œä½¿ç”¨ Monorepo è™½ç„¶å¾ˆå¥½åœ°è§£å†³æˆ‘ä»¬é‡åˆ°çš„ç—›ç‚¹ï¼Œä½†æ˜¯ä¹Ÿç»™æˆ‘ä»¬æ¥äº†ä¸å°‘é¢å¤–æˆæœ¬ï¼Œæ¥ä¸‹æ¥çš„éƒ¨åˆ†æˆ‘ä¼šç€é‡åˆ†äº«ï¼Œåœ¨é‡‡ç”¨ Monorepo æ–¹æ¡ˆåï¼Œæ‰€å¸¦æ¥çš„é—®é¢˜åŠå…¶å®è·µã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¼•å…¥ Monorepo æ–¹æ¡ˆåé‡åˆ°çš„é—®é¢˜ï¼Œä»¥åŠæˆ‘ä»¬åœ¨è§£å†³è¿™äº›é—®é¢˜æ–¹é¢çš„å®è·µ æˆ‘ä»¬çš„è‡ªç ”æ–¹æ¡ˆåœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œä¸»è¦é‡åˆ°å¦‚ä¸‹å››ä¸ªæ–¹é¢çš„é—®é¢˜ï¼š ç¬¬ä¸€ä¸ªï¼Œå› ä¸ºå¤§éƒ¨åˆ†ç”¨æˆ·ä¹ æƒ¯äº Polyrepo çš„å¼€å‘ï¼Œæœ‰äº›ç”šè‡³æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ Monorepoï¼Œå› æ­¤å­˜åœ¨ç”¨æˆ·æ•™è‚²ï¼Œä¸Šæ‰‹é—¨æ§›çš„é—®é¢˜ ç¬¬äºŒä¸ªæ˜¯éšç€ä¸šåŠ¡çš„è¿­ä»£ï¼ŒMonorepo å·¥ç¨‹çš„è§„æ¨¡ï¼Œå³å­åº”ç”¨æ•°é‡è¿…é€Ÿå¢å¤šï¼Œè€Œä¸€æ¬¡è°ƒè¯•å’Œæ„å»ºå¾€å¾€æ¶‰åŠå¤šä¸ªå­åº”ç”¨ï¼Œä»è€Œå¯¼è‡´è°ƒè¯•ã€æ„å»ºæ€§èƒ½ä¸‹é™ ç¬¬ä¸‰ä¸ªæ˜¯ Monorepo å·¥ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå¾€å¾€æ¯” Ployrepo é•¿å¾ˆå¤šï¼Œä¸”å‚ä¸å¼€å‘çš„åŒå­¦ä¹Ÿéå¸¸å¤šï¼Œå¦‚ä½•ç¡®ä¿åˆå…¥å·¥ç¨‹çš„ä»£ç ä¿æŒè‰¯å¥½çš„å¯ç»´æŠ¤æ€§ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæŒ‘æˆ˜ ç¬¬å››ä¸ªï¼Œå­—èŠ‚çš„ä¸šåŠ¡çº¿ä¼—å¤šï¼Œå·ç§° App å·¥å‚ï¼Œé‚£ä¹ˆé¢å¯¹è¿™äº›ä¸åŒä¸šåŠ¡çš„éœ€æ±‚ï¼Œå¦‚ä½•æä¾›ä¸°å¯Œçš„æ‰©å±•èƒ½åŠ›å‘¢ï¼Ÿ æ­¤å¤„ç®€è¿°æˆ‘ä»¬è‡ªç ”æ–¹æ¡ˆçš„æ•´ä½“æ¶æ„ï¼Œä¸»è¦åˆ†ä¸ºä¸‰å±‚ï¼Œåº•å±‚æ˜¯å¼€æºå·¥å…·å±‚ï¼Œå³æˆ‘ä»¬ä¾èµ–çš„å¼€æºæ–¹æ¡ˆï¼Œæœ‰ npm åŒ…ç®¡ç†å™¨ï¼Œchangesets ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå­åº”ç”¨é›†æˆå·¥å…·ï¼Œæ¯”å¦‚ jest å’Œ webpack ç­‰ï¼› é¡¶å±‚æ˜¯å„ç±»ä¸šåŠ¡åœºæ™¯çš„æ”¯æ’‘ï¼Œæœ‰å¾®å‰ç«¯ã€è·¨ç«¯ã€BFFã€H5ã€Library ç­‰åœºæ™¯ï¼› ä¸­é—´å±‚æ˜¯è‡ªç ”çš„è§£å†³æ–¹æ¡ˆï¼Œæ–¹æ¡ˆä¹ŸåŒ…å«ä¸‰ä¸ªå±‚æ¬¡ï¼Œåº•å±‚æ˜¯å„ç±»åŸºç¡€èƒ½åŠ›çš„å°è£…ï¼Œæ¯”å¦‚ç¼“å­˜ç®¡ç†ã€ä»»åŠ¡ç®¡ç†ã€ä¾èµ–ç®¡ç†ã€å­é¡¹ç›®ç®¡ç†ç­‰ï¼›ä¸­é—´æ˜¯é¢å‘ç”¨æˆ·çš„åŠŸèƒ½æ¨¡å—å°è£…ï¼Œæ¯”å¦‚ Checkerã€Builderã€Pipeline ç­‰ï¼›é¡¶å±‚åˆ™æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Œæä¾›å„ç§å‘½ä»¤ç”¨äºè°ƒç”¨ Monorepo çš„èƒ½åŠ›ï¼› å³ä¾§åˆ™æ˜¯è‡ªç ”æ–¹æ¡ˆæä¾›çš„ï¼ŒåŸºäºæ’ä»¶çš„æ‰©å±•èƒ½åŠ›ã€‚ æ¶æ„è®¾è®¡ä¸æ˜¯æœ¬æ¬¡åˆ†äº«çš„é‡ç‚¹ï¼Œæ¥ä¸‹æ¥æ‰æ˜¯æˆ‘ä»¬çš„é‡ç‚¹ï¼Œé‡ç‚¹åˆ†äº«è¿™å¥—è‡ªç ”æ–¹æ¡ˆï¼Œåœ¨é¢å¯¹ä¸Šè¿°å››ä¸ªé—®é¢˜æ—¶ï¼Œå®ƒæ˜¯å¦‚ä½•å®è·µçš„ã€‚ å› ä¸ºç›¸å½“å¤šçš„ç”¨æˆ·å¯¹ Monorepo é¡¹ç›®çš„å¼€å‘æ–¹å¼äº†è§£ä¸è¶³ï¼Œä¹ æƒ¯äº Polyrepo çš„å¼€å‘ï¼Œç”šè‡³æ­¤å‰éƒ½æ²¡æœ‰æ¥è§¦è¿‡ Monorepo é¡¹ç›®çš„å¼€å‘ã€‚ å› æ­¤åœ¨åŠ å¼ºç”¨æˆ·æ•™è‚²ï¼Œé™ä½ä¸Šæ‰‹é—¨æ§›æ–¹é¢ï¼Œæˆ‘ä»¬ç´§å¯†è´´åˆå­—èŠ‚åŸºç¡€è®¾æ–½ï¼Œå®è·µæœ‰ æä¾›ã€å†…ç½®è„šæ‰‹æ¶ã€å·¥å…·ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿä¸€é”®åˆ›å»ºå­—èŠ‚å¸¸è§çš„åº”ç”¨ç±»å‹ æä¾›ã€CI/CD èƒ½åŠ›ã€ï¼Œé€‚é…å­—èŠ‚åŸºå»ºçš„å‘åŒ…å’Œæ„å»ºæµæ°´çº¿ æä¾›ã€å¯è§†åŒ–æ‰©å±•ã€ï¼Œé€šè¿‡ç•Œé¢æ•™è‚²å’Œå¼•å¯¼ç”¨æˆ·ä½¿ç”¨ æ¥ä¸‹æ¥æˆ‘ä»¬å±•å¼€è¯´è¯´ å†…ç½®è„šæ‰‹æ¶æ–¹é¢ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ç§ç”Ÿæˆå™¨çš„æ¨¡ç‰ˆæœºåˆ¶æ¥åº”å¯¹å­é¡¹ç›®çš„åˆå§‹åŒ–ï¼Œæˆ‘ä»¬é›†æˆå­—èŠ‚å¸¸è§åº”ç”¨ç±»å‹çš„æ¨¡ç‰ˆï¼ˆLynxã€Guluã€Garfishã€ç»„ä»¶åº“/å·¥å…·åº“ç­‰ï¼‰ï¼Œæ­¤å¤–ä¹Ÿèƒ½å®ç°è‡ªå·±çš„æ¨¡ç‰ˆï¼Œæ¨¡ç‰ˆæ—¢å¯ä»¥æ˜¯é¡¹ç›®çº§åˆ«çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»„ä»¶çº§åˆ«çš„ã€‚ å¦‚å›¾å°±æ˜¯ç”Ÿæˆå™¨çš„æ¶æ„å›¾ï¼Œå®ƒç”± 5 ä¸ª stage ç»„æˆï¼Œæ¯”å¦‚ prompt é˜¶æ®µç”¨äºæ”¶é›†ç”¨æˆ·çš„å‘½ä»¤è¡Œè¾“å…¥ï¼Œrender é˜¶æ®µæ˜¯æ¸²æŸ“æ¨¡ç‰ˆæ–‡ä»¶é˜¶æ®µï¼Œemit é˜¶æ®µæ˜¯ç”Ÿæˆæ¨¡ç‰ˆæ–‡ä»¶ï¼Œç„¶åé€šè¿‡æ’ä»¶æœºåˆ¶ï¼Œä½¿å¾—æ¯ä¸ªæ’ä»¶èƒ½å¤Ÿåœ¨ä¸Šè¿° 5 ä¸ª stage ä¸­å¤„ç†æ’ä»¶çš„é€»è¾‘ï¼Œæˆ‘ä»¬æä¾›çš„æ’ä»¶æœ‰ Git ä»“åº“åˆ›å»ºæ’ä»¶ã€SCM åˆ›å»ºæ’ä»¶ã€Npm ä¾èµ–å®‰è£…æ’ä»¶ç­‰ã€‚ åŸºäºç”Ÿæˆå™¨çš„è®¾è®¡ï¼Œç”¨æˆ·èƒ½å¤Ÿå®šåˆ¶åˆé€‚è‡ªå·±ä¸šåŠ¡çº¿çš„ã€å¼€ç®±å³ç”¨çš„æ¨¡ç‰ˆï¼Œä¸€é”®åˆ›å»ºé¡¹ç›®åŠå…¶ Git ä»“åº“ã€é…ç½® SCM æ„å»ºç­‰ï¼Œé™ä½äº†åˆ›å»ºé¡¹ç›®çš„æˆæœ¬ã€‚ æ¥ä¸‹æ¥çœ‹çœ‹ CI/CD èƒ½åŠ›æ–¹é¢çš„å®è·µï¼Œå¦‚ä¸‹æ˜¯æ¶æ„å›¾ï¼Œå®ƒä¹Ÿæ˜¯é€šè¿‡æ’ä»¶çš„æœºåˆ¶æ¥å®ç°çš„ï¼Œæ¯”å¦‚ EntryPackagePlugin ç”¨äºå…¥å£åº”ç”¨æ¢æµ‹ï¼ŒBuildDependenciesPlugin ç”¨äºæ„å»ºä¾èµ–ï¼ŒRunSubPackageBuildShPlugin ç”¨äºæ‰§è¡Œå­åº”ç”¨çš„ shell è„šæœ¬ï¼› ä¸ºäº†å®ç°å¤šç¯å¢ƒæ”¯æŒï¼Œå®ƒä¼šå¯¹æ¯ä¸€ç§åœºæ™¯éƒ½æœ‰å¯¹åº”çš„ Pipelineï¼Œæ¯”å¦‚ GitlabPipeline å’Œ SCMPipelineï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼Œä¸ºæ¯ä¸ªåœºæ™¯ç»´æŠ¤äº†ä¸€ä»½æ’ä»¶é›†åˆï¼Œç„¶ååœ¨å¯¹åº”çš„åœºæ™¯æ‰§è¡Œæ—¶ä¼šè°ƒç”¨å¯¹åº”åœºæ™¯çš„ Pipelineï¼Œæ¯ä¸ª Pipeline éƒ½ä¼šæ‰§è¡Œç›¸åŒçš„ stageï¼› stage åˆ—è¡¨å¦‚å³è¾¹æ‰€ç¤ºï¼Œå…¶ä¸­ analyzeEntries stage ä¼šåˆ†æä¾èµ–ï¼Œå¾—å‡ºå“ªäº›ä»£ç å˜æ›´äº†ï¼Œcollect tasks stage ä¼šå»è°ƒåº¦å­é¡¹ç›®çš„ä»»åŠ¡æµæ°´çº¿ã€‚ åŸºäºæ’ä»¶é›†çš„å®šåˆ¶ï¼Œä½¿å¾—å½“å‰çš„ Pipeline æœºåˆ¶åœ¨ SCM å’Œ Gitlab CI åœºæ™¯ä¸‹å¼€ç®±å³ç”¨ï¼Œä¹Ÿæ–¹ä¾¿ä¸ºæœªæ¥æ–°çš„åœºæ™¯è¿›è¡Œæ‰©å±•ã€‚ è¿™å¥—æœºåˆ¶æ”¯æŒäº† Gitlab CI è‡ªåŠ¨å‘ç‰ˆæµæ°´çº¿ä¸ SCM æ„å»ºæµæ°´çº¿ç­‰åœºæ™¯ï¼Œå¤§å¤§é™ä½äº†åº”ç”¨æ¥å…¥å‘ç‰ˆå¹³å°å’Œæ„å»ºå¹³å°çš„æˆæœ¬ã€‚ å¯è§†åŒ–æ‰©å±•æ–¹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ç•Œé¢æ•™è‚²å’Œå¼•å¯¼ç”¨æˆ·ï¼Œæä¾›å¿«æ·æ“ä½œåˆ›å»ºå­åº”ç”¨ã€è°ƒç”¨å„ç±»å‘½ä»¤ã€æœç´¢å­åº”ç”¨ã€é…ç½® Monorepo ç­‰ï¼› ä»è€Œé™ä½æ–°æ‰‹ç”¨æˆ·çš„ä¸Šæ‰‹æˆæœ¬ã€é™ä½è®°ä½å‘½ä»¤çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚ å› ä¸º Monorepo åŠ¿å¿…ä¼šè®©å­åº”ç”¨è¿…é€Ÿå¢å¤šï¼Œè€Œä¸€æ¬¡è°ƒè¯•å’Œæ„å»ºå¾€å¾€æ¶‰åŠå¤šä¸ªå­åº”ç”¨ï¼Œä»è€Œå¯¼è‡´è°ƒè¯•ã€æ„å»ºæ€§èƒ½ä¸‹é™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ç‰¹åˆ«çš„æ–¹æ¡ˆæ¥ä¿éšœè°ƒè¯•å’Œæ„å»ºçš„æ€§èƒ½ã€‚ å› æ­¤åœ¨è§„æ¨¡å¢å¤§å¯¼è‡´æ€§èƒ½ä¸‹é™æ–¹é¢ï¼Œæˆ‘ä»¬é€šè¿‡å¤šç§æ–¹å¼æé«˜æ„å»ºæ•ˆç‡ï¼Œå®è·µæœ‰ æ”¯æŒã€ä»»åŠ¡å¹¶è¡Œèƒ½åŠ›ã€ï¼Œé‡‡ç”¨æœ€å¤§é™åº¦çš„æ‰¹é‡ä»»åŠ¡å¹¶è¡ŒåŠ é€Ÿ æ”¯æŒã€å¤šçº§ç¼“å­˜èƒ½åŠ›ã€ï¼Œå¯¹ä¾èµ–å®‰è£…ã€æ„å»ºäº§ç‰©ã€æµ‹è¯•ç»“æœç­‰å®ç°äº†å¤šçº§ç¼“å­˜ æ”¯æŒã€æŒ‰éœ€æ„å»ºèƒ½åŠ›ã€ï¼Œæ ¹æ®ä¾èµ–å›¾å’Œä»£ç æ›´æ”¹çš„å½±å“é¢æ¥æ„å»ºå’Œæµ‹è¯• æ¥ä¸‹æ¥çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦‚ä½•å®è·µä»»åŠ¡å¹¶è¡Œèƒ½åŠ›çš„ï¼ å¦‚å›¾æ‰€ç¤ºï¼Œæ ¹æ®å­é¡¹ç›®çš„ä¾èµ–å…³ç³»è½¬æˆä¸€ä¸ªä»»åŠ¡ä¾èµ–å›¾ï¼Œå°±å¯ä»¥æ ¹æ®è¿™ä¸ªä¾èµ–å›¾è¿›è¡Œä»»åŠ¡çš„è°ƒåº¦ã€‚ çœ‹å·¦ä¸‹è§’çš„ä»»åŠ¡ä¾èµ–å›¾ï¼Œå®ƒçš„æ„å»ºé¡ºåºå¿…é¡»ç¬¦åˆè¿™æ ·ä¸€ç§è¦æ±‚ï¼Œå³ä¸Šå±‚çš„é¡¹ç›®æ„å»ºä¾èµ–äºåº•å±‚é¡¹ç›®æ„å»ºçš„å®Œæˆã€‚ OKï¼Œæˆ‘ä»¬çœ‹æ–¹å¼ä¸€ï¼Œä¸€ç§æœ€æœ´ç´ çš„æ–¹å¼ï¼Œå³é€šè¿‡ä¸²è¡Œæ’æˆ DEBCAï¼Œè¿™æ˜¯èƒ½å¤Ÿç¬¦åˆæ„å»ºè¦æ±‚çš„ï¼›ä½†æ˜¯å®ƒçš„æ€§èƒ½æ˜¯æ¯”è¾ƒä½çš„ï¼Œæ¯”å¦‚ D å’Œ E æ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œæ‰€ä»¥ç¬¬äºŒç§æ–¹å¼å°±æ˜¯é€šè¿‡æŠŠ DE ä»¥åŠ BC è¿›è¡Œå¹¶è¡Œå¤„ç†ï¼Œè¿™æ ·ä¾¿èƒ½æŠŠå‰é¢çš„ 5 ä¸ªæ­¥éª¤åŠ é€Ÿåˆ° 3 ä¸ªæ­¥éª¤ã€‚ä½†è¿™ç§ä¼˜åŒ–è¿˜ä¸å¤Ÿæè‡´ï¼Œæˆ‘ä»¬å‘ç°ä»»åŠ¡ C å‘¢ï¼Œä¸ä¾èµ–ä»»åŠ¡ E çš„å®Œæˆï¼Œä½†æ˜¯æ–¹å¼äºŒä¸‹ï¼Œä»»åŠ¡ C å´å¾—ç­‰å¾… D å’Œ E éƒ½å®Œæˆæ‰å¼€å§‹æ‰§è¡Œã€‚ å› æ­¤ä¾¿å¼•å‡ºç¬¬ä¸‰ç§æ–¹å¼ï¼Œåœ¨ä»»åŠ¡ E å®Œæˆåï¼ŒD å’Œ C ä¾¿å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼›è€ƒè™‘åˆ°å¹¶è¡Œæ‰§è¡Œæ¶‰åŠçš„å­é¡¹ç›®ä»»åŠ¡è¿‡å¤šæ—¶ï¼Œä¼šå¯¼è‡´ cpu è¿‡è½½ï¼Œå› æ­¤è¿˜é…å¥—äº†å¹¶å‘æ§åˆ¶èƒ½åŠ›ï¼Œæ¯”å¦‚å³ä¾§çš„æ—¶åºå›¾ï¼Œ4 ä¸ªéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæœ€å¤§çš„å¹¶å‘æ•°ä¸º 2ã€‚ æ¥ä¸‹æ¥çœ‹çœ‹å¤šçº§ç¼“å­˜èƒ½åŠ›çš„å®è·µï¼Œå½“ monorepo ä½“ç§¯å¢å¤§ä»¥åï¼Œæ¯ä¸€æ¬¡å¼€å‘æˆ–è€…ä¸Šçº¿éƒ½å¯èƒ½æ¶‰åŠåˆ°æ•°ä¸ªå­é¡¹ç›®ï¼Œæ¯æ¬¡éƒ½éœ€è¦å¯¹è¿™äº›å­åº”ç”¨è¿›è¡Œé‡æ–°æ„å»ºï¼Œè¿™å°†ä¼šæå¤§åœ°æ‹–æ…¢æ„å»ºå’Œéƒ¨ç½²æ—¶é—´ã€‚ æˆ‘ä»¬æä¾›äº†å¯¹æ„å»ºäº§ç‰©è¿›è¡Œç¼“å­˜çš„èƒ½åŠ›ï¼Œèƒ½å¤ŸåŒæ—¶å°†äº§ç‰©ç¼“å­˜åˆ°æœ¬åœ°å’Œè¿œç¨‹ï¼Œå½“ç›¸å…³çš„å­é¡¹ç›®æ²¡æœ‰ä¿®æ”¹è¿‡ä»£ç æ—¶ï¼Œå°†ä¼šå¤ç”¨ä¹‹å‰çš„æ„å»ºäº§ç‰©ä»¥å‡å°‘æ„å»ºæ—¶é—´ã€‚æ­¤å¤–ï¼Œé™¤äº†æ„å»ºä»»åŠ¡ï¼Œå…¶å®ƒçš„æ“ä½œï¼Œæ¯”å¦‚å•æµ‹ä»»åŠ¡çš„æ‰§è¡Œï¼Œä¹Ÿä¼šç¼“å­˜ç»“æœï¼Œä»è€Œè·³è¿‡å•æµ‹ä»»åŠ¡ã€‚ æŒ‰éœ€æ„å»ºèƒ½åŠ›æ–¹é¢çš„å®è·µï¼Œæˆ‘ä»¬æ”¯æŒæŒ‰å½±å“é¢æ‰§è¡Œ CI æµç¨‹ï¼Œé€šè¿‡ diff æ›´æ”¹çš„ä»£ç å¹¶è¿›è¡Œä¾èµ–åˆ†æï¼Œå¾—åˆ°æ•´ä¸ª Monorepo ä¸­å—å½±å“çš„é¡¹ç›®ï¼Œå¹¶æ‰§è¡Œå…¶ CI æµæ°´çº¿ï¼›å¦åˆ™æ¯æ¬¡ CI éƒ½ä¼šå®Œæ•´çš„æ„å»ºæ•´ä¸ªæ‰€æœ‰çš„å­é¡¹ç›® æ­¤å¤„ä»¥ä¸€ä¸ªç®€å•çš„ Monorepo ä¸ºä¾‹ï¼Œä¾èµ–å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼Œä¸‰ä¸ª Appï¼Œä¸€ä¸ª Componentï¼Œä¸€ä¸ª Sdk å’Œå·¥å…·åº“ å¦‚æœä¸€æ¬¡æ€§å…¨é‡æ„å»ºæ‰€æœ‰åº”ç”¨ï¼Œè€—æ—¶çº¦ä¸º 17.72ç§’ å¦‚æœä»…ä»…æ”¹åŠ¨äº† component æ¨¡å—ï¼Œé‚£ä¹ˆæŒ‰éœ€æ„å»ºçš„è¯ï¼Œæˆ‘åªéœ€è¦æ„å»º component, app1, app2ï¼Œæ­¤æ—¶è€—æ—¶ 8.94ç§’ï¼ŒèŠ‚çº¦ 50% çš„æ—¶é—´ å†æ¥çœ‹çœ‹æ— ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»…ä»…æ„å»º App1, App2, App3 å®ƒä»¬çš„è€—æ—¶åœ¨ 10.77ç§’åˆ°16.94ç§’ä¹‹é—´ å¦‚æœæœ‰ç¼“å­˜çš„è¯ï¼Œæ¯”å¦‚ component, sdk, util å·²ç»æ„å»ºè¿‡ï¼Œé‚£ä¹ˆå†å•ç‹¬æ„å»º App1, App2, App3 æ—¶ï¼Œæ„å»ºè€—æ—¶åœ¨ 7.55ç§’åˆ°9.74ç§’ ä¹‹é—´ï¼Œå¤§çº¦èŠ‚çº¦ 45% çš„æ—¶é—´ å› ä¸º Monorepo ä¼šè®©ä¼—å¤šæ°´å¹³ä¸ä¸€å·¥ç¨‹å¸ˆåœ¨åŒä¸€ä¸ªä»“åº“é‡Œå¼€å‘ï¼Œè€Œä¸”ä»“åº“æ¯å‘¨æ–°å¢çš„ä»£ç é‡éƒ½æ˜¯å·¨å¤§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´éœ€è¦å»ä¿éšœä»£ç è´¨é‡ã€‚ å› æ­¤åœ¨ä»£ç é˜²åŠ£åŒ–æ–¹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ Checker æœºåˆ¶è¿›è¡Œå„ç±»è§„èŒƒçš„æ£€æŸ¥ï¼Œå®è·µæœ‰ æ”¯æŒã€å†…ç½®å¤šç§ Checkerã€ï¼Œç¡®ä¿é¡¹ç›®åŸºæœ¬çš„å¯ç»´æŠ¤æ€§ æ”¯æŒã€è‡ªå®šä¹‰ Checkerã€ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿç¼–å†™åŸºäºå„è‡ªå›¢é˜Ÿçš„è§„èŒƒæ£€æŸ¥ æ”¯æŒã€æ”¯æŒè‡ªåŠ¨ä¿®å¤ã€ï¼Œè‡ªåŠ¨ä¿®å¤ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç æˆ–é…ç½® æˆ‘ä»¬å†…ç½®äº†å¤šç§ Checkerï¼Œç”¨äºä¿è¯åŸºæœ¬çš„å¯ç»´æŠ¤æ€§ï¼Œæ¯”å¦‚ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬ï¼Œå®ƒä¼šæ£€æŸ¥å„é¡¹ç›®çš„ package.json ä¸‹ç›¸åŒä¾èµ–ç‰ˆæœ¬æ˜¯å¦ä¸€è‡´ç­‰ç­‰ æ­¤å¤„ä»¥ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ä¸ºä¾‹ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¦‚æœå¤šä¸ªé¡¹ç›®ä½¿ç”¨ç›¸åŒä¾èµ–çš„ä¸åŒç‰ˆæœ¬å®¹æ˜“å¯¼è‡´é—®é¢˜ï¼Œæ¯”å¦‚ components å’Œ app çš„ react ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå°±ä¼šæœ‰ react hooks æŠ¥é”™ç­‰é—®é¢˜ï¼Œæ­¤æ—¶åº”ç”¨è¿™é‡Œçš„ç¬¬ä¸€ä¸ª Checkerï¼Œå°±èƒ½æ£€æµ‹è¿™ä¸ªé—®é¢˜ï¼Œå¹¶è‡ªåŠ¨ä¿®å¤ä¸ºç»Ÿä¸€çš„ç‰ˆæœ¬ã€‚ å¦‚æœå†…ç½®çš„ Checker ä¸æ»¡è¶³ç”¨æˆ·å¯¹äºè§„èŒƒçš„éœ€æ±‚å‘¢ï¼Ÿæˆ‘ä»¬ä¹Ÿæä¾›äº†è‡ªå®šä¹‰ Checker çš„èƒ½åŠ›ï¼Œåœ¨æ¯ä¸ª Checker å†…éƒ¨ï¼Œæˆ‘ä»¬æ³¨å…¥å½“å‰ Monorepo å·¥ç¨‹çš„é…ç½®å’Œä¾èµ–å›¾ç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒChecker å¼€å‘è€…ä¾¿èƒ½é€šè¿‡è¿™äº›ä¿¡æ¯å» check å½“å‰çš„å·¥ç¨‹æ˜¯å¦ç¬¦åˆè§„èŒƒã€‚ å½“æˆ‘ä»¬æ¢æµ‹å‡ºé—®é¢˜åï¼Œå…¶å®æœ‰äº›ä¸è§„èŒƒæ˜¯èƒ½é€šè¿‡è‡ªåŠ¨ä¿®å¤è§£å†³çš„ï¼Œå°±åƒ eslint ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿæ”¯æŒè‡ªåŠ¨ä¿®å¤ä»£ç  å› ä¸ºå­—èŠ‚çš„ä¸šåŠ¡çº¿ä¼—å¤šï¼Œå·ç§° App å·¥å‚ï¼Œæ‰€ä»¥å„ä¸ªä¸šåŠ¡å¯¹ Monorepo æœ‰è¿™æ ·æˆ–é‚£æ ·çš„æ‰©å±•éœ€æ±‚ã€‚ å› æ­¤åœ¨é¢å¯¹è¿™äº›ä¸åŒä¸šåŠ¡çš„æ‰©å±•éœ€æ±‚æ–¹é¢ï¼Œæˆ‘ä»¬é€šè¿‡æ’ä»¶æœºåˆ¶æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å‘½ä»¤ï¼ŒCheckerï¼Œç”Ÿæˆå™¨ï¼Œå¹¶æš´éœ²æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„é’©å­ï¼Œä»¥æä¾›æ›´çµæ´»çš„æ‰©å±•èƒ½åŠ› ä»¥ä¸Šå°±æ˜¯è‡ªç ”æ–¹æ¡ˆåœ¨å®è·µè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œæ¥ä¸‹æ¥ç®€è¦è¯´è¯´æ•´ä½“çš„è½åœ°æƒ…å†µ åœ¨å­—èŠ‚å‰ç«¯é¢†åŸŸï¼Œæˆ‘ä»¬çš„è‡ªç ”æ–¹æ¡ˆåœ¨æ‰€æœ‰çš„ Monorepo å·¥ç¨‹ä¸­ ä»“åº“å æ¯”è¾¾ 25%ï¼Œé‡‡ç”¨è‡ªç ”æ–¹æ¡ˆçš„ä»“åº“ç»å¯¹æ•°é‡å·²ç»æœ‰ä¸Šåƒä¸ª æœˆæ´»å æ¯” 47%ï¼Œæ‹å¹³åçš„å­åº”ç”¨æ€»æ•°æ¥è¿‘å¤šä»“é¡¹ç›®æ•°é‡ æ¯å‘¨çš„ npm åŒ…ä¸‹è½½é‡è¾¾ 14ä¸‡+ åœ¨å­—èŠ‚è·³åŠ¨çš„å‰ç«¯é¢†åŸŸï¼Œæ— è®ºä»ä»“åº“å æ¯”ï¼Œæœˆæ´»å æ¯”ï¼Œä»¥åŠä¸‹è½½é‡æ¥çœ‹ï¼Œæˆ‘ä»¬çš„è‡ªç ”æ–¹æ¡ˆéƒ½æ˜¯æ’åç¬¬ä¸€çš„ Monorepo å·¥å…· è¿‡å»é€šè¿‡è‡ªç ”æ–¹æ¡ˆçš„å»ºè®¾ï¼Œæ‹¥æœ‰é«˜æ•ˆç‡ã€å¯æ‰©å±•ã€å¼€ç®±å³ç”¨çš„ Monorepo è§£å†³æ–¹æ¡ˆï¼Œè‰¯å¥½åœ°æœåŠ¡äº†å­—èŠ‚è·³åŠ¨ä¸Šåƒä¸ª Monorepo å·¥ç¨‹ï¼Œé¢‡å—ä¸šåŠ¡å¥½è¯„ã€‚å½“å‰çš„ Monorepo æ–¹æ¡ˆï¼Œé¢ä¸´å‡ ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š ç¬¬ä¸€ä¸ªï¼Œæœ¬åœ°ä»»åŠ¡è°ƒåº¦æ€§èƒ½ç“¶é¢ˆï¼Œå·¨å‹ Monorepo ä»“åº“å¼€å§‹å‡ºç°ä¾èµ–å®‰è£…å’Œæ„å»ºé€Ÿåº¦é—®é¢˜ï¼Œéœ€è¦æ›´æè‡´çš„æ€§èƒ½å’Œä½“éªŒä¼˜åŒ– ç¬¬äºŒä¸ªï¼Œç¼ºä¹ç¼“å­˜ç®¡ç†èƒ½åŠ›ï¼Œå¦‚ä½•è·Ÿè¸ªå’Œè§£å†³ç¼“å­˜å‘½ä¸­ç‡åä½é—®é¢˜ ç¬¬ä¸‰ä¸ªï¼Œä¾èµ–å¯è¯»æ€§é—®é¢˜ï¼Œç›®å‰æ–‡æœ¬å½¢å¼çš„ä¾èµ–ç»“æ„éš¾ä»¥ç†è§£ï¼Œè¿™ä¹Ÿå¯¼è‡´éš¾ä»¥å¯¹ä¾èµ–è¿›è¡Œæœ‰æ•ˆçš„ç®¡ç† æˆ‘ä»¬å¯¹ä¸Šè¿°é—®é¢˜çš„è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š é’ˆå¯¹æ€§èƒ½ï¼Œæˆ‘ä»¬å°†ä¼šè‡ªç ”ä¾èµ–å®‰è£…é€»è¾‘ï¼ŒåŠ é€Ÿå®‰è£…ï¼›ä»»åŠ¡è°ƒåº¦æ€§èƒ½åŠ å¼ºï¼ˆæ¯”å¦‚å­é¡¹ç›®ä»»åŠ¡è°ƒåº¦èƒ½åŠ›ï¼Œè¿œç¨‹ä»»åŠ¡æ‰§è¡Œèƒ½åŠ›ï¼‰ï¼ŒåŠ é€Ÿæ„å»º é’ˆå¯¹ç¼“å­˜ï¼Œæˆ‘ä»¬å°†ä¼šå¼€å‘ç¼“å­˜ sdkï¼Œæä¾›ç¼“å­˜çš„ç®¡ç†å’Œå¤ç”¨èƒ½åŠ›ï¼Œè·Ÿè¸ªå’Œæé«˜ç¼“å­˜å‘½ä¸­ç‡ é’ˆå¯¹ä¾èµ–ç®¡ç†ï¼Œæˆ‘ä»¬å°†æä¾›å¼€å‘è¾…åŠ©å·¥å…·ï¼Œç”¨å¯è§†åŒ–çš„æ–¹å¼ç®¡ç†å¤æ‚çš„ä¾èµ–å…³ç³» PPT é™„ä»¶","link":"/2022/12/31/%E5%89%8D%E7%AB%AF%20Monorepo%20%E5%9C%A8%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E7%9A%84%E5%AE%9E%E8%B7%B5/"},{"title":"å‰ç«¯å…«è‚¡çŸ¥è¯†ç‚¹-é€Ÿè®°è„‘å›¾","text":"ä¸ºé¢è¯•è€Œæ•´ç†çš„å‰ç«¯å…«è‚¡æ–‡è„‘å›¾ï¼ RepositoryGithub repository Preview é˜…è¯»æ–¹å¼ï¼šåœ¨çº¿ç‚¹å¼€æ¯ä¸ªå­ç›®å½•å¯ä»¥é¢„è§ˆè„‘å›¾ä¸‹è½½æœ¬ä»“åº“ï¼Œä½¿ç”¨è½¯ä»¶å¯æ‰“å¼€ mindnode æ–‡ä»¶","link":"/2021/04/06/%E5%89%8D%E7%AB%AF%E5%85%AB%E8%82%A1%E7%9F%A5%E8%AF%86%E7%82%B9-%E9%80%9F%E8%AE%B0%E8%84%91%E5%9B%BE/"},{"title":"å‘½ä»¤è¡Œå·¥å…·çš„ç›‘æ§å‘Šè­¦å»ºè®¾","text":"æœ¬äººäº”å¹´çš„å·¥ä½œç»éªŒï¼Œå†ç»ä¸‰ä»½å·¥ä½œï¼Œç«Ÿç„¶æ¯ä»½éƒ½å¼€å‘ç»´æŠ¤è¿‡å‰ç«¯å‘½ä»¤è¡Œå·¥å…·ï¼Œå¤§å®¶å¯¹å‰ç«¯é¡µé¢å’ŒæœåŠ¡ç«¯åº”ç”¨æœ‰ç›‘æ§å‘Šè­¦è¿™ä»¶äº‹ä¹ ä»¥ä¸ºå¸¸ï¼Œå…¶å®è¿™ç±»å·¥å…·ä¹Ÿéœ€è¦ç›‘æ§å‘Šè­¦ï¼Œæœ¬æ–‡å°†ä»é”™è¯¯å¤„ç†åˆ°ä¸ŠæŠ¥æ’æŸ¥è¿›è¡Œåˆ†äº«ã€‚ èƒŒæ™¯ä½œä¸ºå‰ç«¯å¤§å®¶å…¶å®éƒ½ä¹ æƒ¯äº†å‰ç«¯é¡µé¢æœ‰ sentry ç±»çš„åº”ç”¨è¿›è¡Œé”™è¯¯ç›‘æ§ï¼›Node.js åº”ç”¨æ‰“å°æ—¥å¿—ï¼Œå¹¶åœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨ç±» kibana çš„åº”ç”¨è¿›è¡Œæ—¥å¿—æŸ¥è¯¢ï¼Œä¸”å¾€å¾€é…å¥—ç›‘æ§å‘Šè­¦ã€‚è€Œå‰ç«¯å¼€å‘å‡ ä¹æ¯å¤©éƒ½ä¼šæ‰“äº¤é“çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå´åœ¨æ¯æ¬¡æŠ¥é”™æ—¶ï¼Œè¦ä¹ˆè”ç³»å¼€å‘è€…ï¼Œè¦ä¹ˆå»ç”¨æˆ·ç¾¤å’¨è¯¢ã€‚ ç›®çš„æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å‘½ä»¤è¡Œå·¥å…·çš„å‡ ä¸ªç‰¹ç‚¹ï¼š åœ¨ç”¨æˆ·çš„ç»ˆç«¯ä¸­æ‰§è¡Œï¼Œåƒä¸€ä¸ªå®¢æˆ·ç«¯ è¿è¡Œåœ¨ Node.js ç¯å¢ƒä¸­ï¼ŒåƒæœåŠ¡ç«¯åº”ç”¨ ç”¨æˆ·æ˜¯å¼€å‘è€…ï¼Œå¾€å¾€ä¸èƒ½åƒä¸€ä¸ªçœŸå®äº§å“ä¸€æ ·è¢«è¿è¥ åŸºäºå¦‚ä¸Šå‡ ä¸ªç‰¹ç‚¹ï¼Œå‘½ä»¤è¡Œå·¥å…·çš„ç›‘æ§å‘Šè­¦éœ€è¦æœ‰ä¸ŠæŠ¥å¤„ç†ï¼›é”™è¯¯å¤„ç†éœ€è¦å€Ÿé‰´ Node.js åº”ç”¨ï¼›å¼€å‘è€…å¯¹ bug çš„å®¹å¿åº¦æ¯”è¾ƒé«˜ï¼Œå–„äºè‡ªè¡Œæ’æŸ¥ï¼Œå‘½ä»¤è¡Œå·¥å…·çš„ç»´æŠ¤è€…éœ€è¦ä¸»åŠ¨è§£å†³æŸä¸€ç±»é—®é¢˜ï¼Œä»¥å‡å°‘å¼€å‘è€…åœ¨æ’æŸ¥ä¸­æµªè´¹æ—¶é—´ï¼›éœ€è¦ä¸€ä¸ªåé¦ˆæœºåˆ¶ï¼Œä½¿å¾—å·¥å…·èƒ½å¤Ÿè¶Šæ¥è¶Š bug lessã€‚ ä½œä¸ºå‘½ä»¤è¡Œçš„ç»´æŠ¤è€…ï¼Œå€ŸåŠ©ç›‘æ§å‘Šè­¦çš„ç›®çš„ä¸»è¦æœ‰ï¼š ä¸»åŠ¨å‘ç°å¼‚å¸¸ï¼Œæå‰ä»‹å…¥å¤„ç†ï¼Œè€Œä¸æ˜¯ç§¯ç´¯åˆ°ä¸€å®šç¨‹åº¦ï¼Œç”¨æˆ·ä¸»åŠ¨ä¸Šé—¨æ—¶æ‰ä»‹å…¥ å¤§éƒ¨åˆ†ç”¨æˆ·å¾€å¾€ä¸ä¼šä¸»åŠ¨ä¸Šé—¨ï¼Œå¦‚æœæœ‰æ›¿ä»£å“æˆ–è€…ä¸æ˜¯å¿…é¡»ä½¿ç”¨çš„è¯ï¼Œç”¨æˆ·å°±æµå¤±äº† å³ä½¿ç”¨æˆ·æ²¡æœ‰æµå¤±ï¼Œä¸€ä¸ªç»å¸¸å‡ºé”™çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œä¼šä½¿å¾—ç”¨æˆ·å˜å¾—ä¸ä¿¡ä»» æ¥å…¥ç›‘æ§å‘Šè­¦é‡ç‚¹æ˜¯å‘ç°ã€é‡å¤ç±»ã€çš„é”™è¯¯ï¼Œè§£å†³ä¸€æ‰¹é”™è¯¯è€Œä¸æ˜¯å¶ç°é”™è¯¯ï¼Œä»è€Œè¿…é€Ÿæ”¶æ•›é”™è¯¯ é”™è¯¯å¤„ç†åœ¨é˜è¿°ç›‘æ§å‘Šè­¦ä¹‹å‰ï¼Œæœ‰å¿…è¦é‡ç‚¹è¯´æ˜ä¸‹å¦‚ä½•ç§‘å­¦åœ°å¤„ç†ç¨‹åºå‡ºç°çš„é”™è¯¯ã€‚å¦‚æœç¨‹åºä¾§æ— æ³•å¾ˆå¥½åœ°å¤„ç†å’Œä¸ŠæŠ¥é”™è¯¯ï¼Œé‚£ä¹ˆç›‘æ§å‘Šè­¦å°†èµ·ä¸åˆ°æœ‰æ•ˆçš„ä½œç”¨ã€‚ é”™è¯¯åˆ†ç±»æ­£ç¡®åœ°åŒºåˆ†é”™è¯¯åˆ†ç±»ï¼Œæœ‰åŠ©äºæˆ‘ä»¬åˆ†åˆ«é‡‡å–ä¸åŒçš„æ–¹å¼å¤„ç†é”™è¯¯ï¼Œé”™è¯¯ä¸»è¦åˆ†ä¸ºï¼š æ“ä½œæ€§çš„é”™è¯¯(é¢„æœŸå†…) ç¨‹åºå‘˜çš„é”™è¯¯(é¢„æœŸå¤–) è¿™ä¸¤ç±»é”™è¯¯çš„åŒºåˆ«ï¼š ã€æ“ä½œæ€§çš„é”™è¯¯ã€æ˜¯ç¨‹åºæ­£å¸¸æ“ä½œçš„ä¸€éƒ¨åˆ† ã€ç¨‹åºå‘˜çš„é”™è¯¯ã€æ˜¯ Bugï¼Œå¾€å¾€ç”±äºç¨‹åºå‘˜æ²¡æœ‰æ­£ç¡®å¤„ç†å¯¼è‡´ ä¸¾å‡ ä¸ªä¾‹å­ï¼š æ“ä½œæ€§çš„é”™è¯¯ è¿æ¥ä¸åˆ°æœåŠ¡å™¨ æ— æ³•è§£æä¸»æœºå æ— æ•ˆçš„ç”¨æˆ·è¾“å…¥ è¯·æ±‚è¶…æ—¶ æœåŠ¡å™¨è¿”å›500 å¥—æ¥å­—è¢«æŒ‚èµ· ç¨‹åºå‘˜çš„é”™è¯¯ è¯»å– undefined çš„ä¸€ä¸ªå±æ€§ è°ƒç”¨å¼‚æ­¥å‡½æ•°æ²¡æœ‰æŒ‡å®šå›è°ƒ è¯¥ä¼ å¯¹è±¡çš„æ—¶å€™ä¼ äº†ä¸€ä¸ªå­—ç¬¦ä¸² è¯¥ä¼ IPåœ°å€çš„æ—¶å€™ä¼ äº†ä¸€ä¸ªå¯¹è±¡ ä¸åŒç±»åˆ«çš„é”™è¯¯å¦‚ä½•å¤„ç†ï¼Ÿæ“ä½œæ€§çš„é”™è¯¯ ç›´æ¥å¤„ç†ï¼ˆå¤„ç†å®Œæˆåï¼Œç»§ç»­æ‰§è¡Œï¼‰ å‘ä¸Šå±‚ä¼ é”™ï¼ˆåŠæ—¶å‘ä¸Šå±‚æŠ›é”™ï¼Œç”±ä¸Šå±‚å¤„ç†ï¼‰ é‡è¯•æ“ä½œï¼ˆå°è¯•é‡è¯•ï¼Œæ¯”å¦‚é‡å‘è¯·æ±‚ï¼‰ ç›´æ¥å´©æºƒï¼ˆå´©æºƒé€€å‡ºè¿›ç¨‹ï¼Œæ¯”å¦‚å†…å­˜ä¸è¶³ï¼‰ è®°å½•é”™è¯¯ï¼ˆä»…è®°å½•æˆ–ä¸ŠæŠ¥é”™è¯¯ï¼‰ ç¨‹åºå‘˜çš„é”™è¯¯ æ— æ³•å¤„ç†ï¼ˆlog &amp; crashï¼‰ é”™è¯¯ä¸ŠæŠ¥æˆ‘ä»¬å¾€å¾€èƒ½å¦¥å–„åœ°å¤„ç†å¤§éƒ¨åˆ†ã€æ“ä½œæ€§çš„é”™è¯¯ã€ï¼Œä½†æ˜¯ä¸€æ—¦å‡ºç°æ— èƒ½ä¸ºåŠ›çš„ã€æ“ä½œæ€§çš„é”™è¯¯ã€æˆ–è€…ã€ç¨‹åºå‘˜çš„é”™è¯¯ã€ï¼Œæ­¤æ—¶æˆ‘ä»¬èƒ½åšçš„ä¸€èˆ¬åªæœ‰æ‰“å°é”™è¯¯å‘ŠçŸ¥ç”¨æˆ·åé€€å‡ºåº”ç”¨ï¼ŒåŒæ—¶å°†é”™è¯¯ä¸ŠæŠ¥ã€‚æ¥ç€åœ¨æœåŠ¡ç«¯æ ¹æ®é”™è¯¯ä¿¡æ¯åŒºåˆ†ç›‘æ§å’Œå‘Šè­¦ï¼Œé‚£ä¹ˆä»€ä¹ˆæ ·çš„é”™è¯¯å±äºå‘Šè­¦ï¼Œä»€ä¹ˆæ ·çš„é”™è¯¯å±äºç›‘æ§å‘¢ï¼Ÿ å‘Šè­¦ å½“ç¨‹åºå‡ºç°ã€ç¨‹åºå‘˜çš„é”™è¯¯ã€ï¼Œéœ€è¦ç´§æ€¥ä»‹å…¥æ—¶ï¼Œæ¯”å¦‚ç”¨æˆ·åˆå§‹åŒ–æ¨¡ç‰ˆæ—¶ï¼Œè¿›ç¨‹å¼‚å¸¸é€€å‡º å½“ç¨‹åºå‡ºç°ã€æ“ä½œæ€§çš„é”™è¯¯ã€ï¼Œä¸”æœ€ç»ˆæ— æ³•è¢«å¤„ç†æ—¶ï¼Œæ¯”å¦‚ç”¨æˆ·åˆ›å»º gitlab æ—¶ï¼Œé‡è¯•æ¬¡æ•°è¾¾åˆ°ä¸Šé™ï¼Œä¸”ä»æœªæˆåŠŸæ—¶ ç›‘æ§ å½“ç¨‹åºå‡ºç°ã€æ“ä½œæ€§çš„é”™è¯¯ã€ï¼Œéœ€è¦å¼•èµ·è¶³å¤Ÿé‡è§†ï¼Œæ¯”å¦‚ç”¨æˆ·è¾“å…¥äº†ä¸åˆæ³•çš„è·¯å¾„ã€ç”¨æˆ·åˆ›å»º gitlab æ—¶ç»å¸¸éœ€è¦é‡è¯• 2 æ¬¡æ‰èƒ½æˆåŠŸ å½“ç¨‹åºè¿›å…¥éœ€è¦å¼•èµ·è¶³å¤Ÿé‡è§†çš„é€»è¾‘ï¼ˆå¯ä»¥ä¸æ˜¯é”™è¯¯ï¼‰ï¼Œæ¯”å¦‚å‡ºç°äº†æ–°ç”¨æˆ·ã€æ–°éƒ¨é—¨ã€æ–°å·¥ç¨‹ å“ªäº›åœ°æ–¹éœ€è¦ä¸ŠæŠ¥é¢„æœŸå¤–çš„é”™è¯¯12345678910process.on('unhandledRejection', error =&gt; { reportAlarm({ error }); console.error('Unhandled Rejection Error: ', error); setTimeout(() =&gt; process.exit(1), 1000);});process.on('uncaughtException', error =&gt; { reportAlarm({ error }); console.error('Unhandled Exception Error: ', error); setTimeout(() =&gt; process.exit(1), 1000);}); é¢„æœŸå†…çš„é”™è¯¯1234567try { // å‘½ä»¤è¡Œå¤„ç†é€»è¾‘} catch (error) { console.error('Handled Error: ', error); await reportAlarm({ error }); process.exit(1);} é”™è¯¯æ’æŸ¥æœ‰æ•ˆçš„é”™è¯¯ä¸ŠæŠ¥ï¼Œå¯¹é”™è¯¯çš„ç›‘æ§å‘Šè­¦å¤„ç†èµ·åˆ°äº†å†³å®šæ€§çš„ä½œç”¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸¤åˆ™ä¸ŠæŠ¥æ¶ˆæ¯ï¼š Bad case1234567891011121314é”™è¯¯æ¨¡å—ï¼šæ¨¡ç‰ˆåˆå§‹åŒ–é”™è¯¯ä¿¡æ¯ï¼šè¾“å…¥è·¯å¾„éæ³•é”™è¯¯æ ˆï¼š/Users/linleyang/code/temp/case.js:2 throw new Error('è¾“å…¥è·¯å¾„éæ³•'); ^Error: è¾“å…¥è·¯å¾„éæ³• at init (/Users/linleyang/code/temp/case.js:2:9) at Object.&lt;anonymous&gt; (/Users/linleyang/code/temp/case.js:5:1) at Module._compile (internal/modules/cjs/loader.js:999:30) at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10) at Module.load (internal/modules/cjs/loader.js:863:32) at Function.Module._load (internal/modules/cjs/loader.js:708:14) at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:60:12) at internal/main/run_main_module.js:17:47 Good case12345678910111213141516é”™è¯¯æ¨¡å—ï¼šæ¨¡ç‰ˆåˆå§‹åŒ–é”™è¯¯ä¿¡æ¯ï¼šè¾“å…¥è·¯å¾„éæ³•é”™è¯¯æ ˆï¼š/Users/linleyang/code/temp/case.js:2 throw new Error('è¾“å…¥è·¯å¾„éæ³•'); ^Error: è¾“å…¥è·¯å¾„éæ³• at init (/Users/linleyang/code/temp/case.js:2:9) at Object.&lt;anonymous&gt; (/Users/linleyang/code/temp/case.js:5:1) at Module._compile (internal/modules/cjs/loader.js:999:30) at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10) at Module.load (internal/modules/cjs/loader.js:863:32) at Function.Module._load (internal/modules/cjs/loader.js:708:14) at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:60:12) at internal/main/run_main_module.js:17:47è¾“å…¥å€¼ï¼š$/home/linleyangè§¦å‘ç”¨æˆ·ï¼šæ—å®œä¸™ è¿™ä¸¤ä¸ªç¤ºä¾‹ï¼Œä¸‹é¢é‚£ä¸ªé™¤äº†ä¸ŠæŠ¥é”™è¯¯æ¶ˆæ¯å’Œé”™è¯¯æ ˆä¹‹å¤–ï¼Œè¿˜ä¸ŠæŠ¥äº†è¶³å¤Ÿå¤šçš„é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé”™è¯¯ç°åœºï¼Œæœ‰äº†é”™è¯¯ç°åœºï¼Œæˆ‘ä»¬ä¾¿å¯èƒ½è‡ªè¡Œå¤ç°ï¼Œæˆ–è€…é˜…è¯»æºç å°±èƒ½è§£å†³é—®é¢˜ï¼Œé”™è¯¯ç°åœºæ—¢ç„¶å¦‚æ­¤é‡è¦ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€èˆ¬å¯ä»¥ä¸ŠæŠ¥å“ªäº›ç°åœºä¿¡æ¯ï¼š é”™è¯¯å‘ç”Ÿæ—¶çš„å…¥å‚ é”™è¯¯å‘ç”Ÿæ—¶çš„çŠ¶æ€ï¼ˆå…³é”®å˜é‡ï¼‰ è§¦å‘äºº é”™è¯¯ä¿¡æ¯/é”™è¯¯æ ˆ ç¯å¢ƒä¿¡æ¯ï¼ˆSCMï¼ŒCIï¼Œæœ¬åœ°ï¼‰â€¦â€¦ æˆ‘ä»¬æ­£ç¡®å¤„ç†äº†é”™è¯¯ï¼Œæ­£ç¡®ä¸ŠæŠ¥äº†ç°åœºï¼Œè¿™æ ·æœåŠ¡ç«¯ä¾¿å¯æ ¹æ®è¿™äº›ä¿¡æ¯å°†é”™è¯¯åˆ†å‘åˆ°å„ä¸ªæ¨¡å—è´Ÿè´£äººï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647æ¨¡ç‰ˆåˆå§‹åŒ– | è½½å…¥æ¨¡ç‰ˆå¤±è´¥ | é”™è¯¯æŠ¥è­¦æ¨¡å—è´Ÿè´£äºº@æ—å®œä¸™åŸºæœ¬ä¿¡æ¯Version: 1.0.1 Node: v12.22.5 Env: localProject: https://github.com/quanru/baguç”¨æˆ·ä¿¡æ¯å§“å: @æ—æŸæŸé¦–æ¬¡ä½¿ç”¨çš„æ—¶é—´: 2021-08-31 05:00:29æœ€è¿‘ä½¿ç”¨çš„æ—¶é—´: 2021-11-23 06:00:00å†å²æ‰§è¡Œæ¬¡æ•°: 111éƒ¨é—¨ä¿¡æ¯åç§°: XXéƒ¨é—¨é¦–æ¬¡ä½¿ç”¨çš„æ—¶é—´: 2021-05-24 04:03:43ä½¿ç”¨çš„æ€»äººæ•°: 21ä¿¡æ¯é“¾æ¥: https://quanru.github.io/é”™è¯¯ä¿¡æ¯çº§åˆ«: æœªè®¾ç½®ä¿¡æ¯:Cannot read property 'replace' of undefinedè¿‘ 24 å°æ—¶å†…è¯¥ç”¨æˆ·å‡ºç°è¯¥é”™è¯¯ä¿¡æ¯çš„æ¬¡æ•°: 4è¿‘ 24 å°æ—¶å†…è¯¥ç”¨æˆ·å‡ºç°æ‰€æœ‰é”™è¯¯ä¿¡æ¯çš„æ¬¡æ•°: 4è¿‘ä¸‰ä¸ªæœˆè¯¥ç”¨æˆ·å‡ºç°è¯¥é”™è¯¯ä¿¡æ¯çš„æ¬¡æ•°: 4è¿‘ä¸‰ä¸ªæœˆæ‰€æœ‰ç”¨æˆ·å‡ºç°è¯¥é”™è¯¯ä¿¡æ¯çš„æ¬¡æ•°: 26é”™è¯¯æ ˆ:Error: è¾“å…¥è·¯å¾„éæ³• at init (/Users/linleyang/code/temp/case.js:2:9) at Object.&lt;anonymous&gt; (/Users/linleyang/code/temp/case.js:5:1) at Module._compile (internal/modules/cjs/loader.js:999:30) at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10) at Module.load (internal/modules/cjs/loader.js:863:32) at Function.Module._load (internal/modules/cjs/loader.js:708:14) at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:60:12) at internal/main/run_main_module.js:17:47ä¸Šä¸‹æ–‡ä¿¡æ¯è¾“å…¥å€¼ï¼š$/home/linleyangé™„åŠ ä¿¡æ¯command: cra init hello-world ä¸ŠæŠ¥ç­–ç•¥ä¸ºäº†è®©å‘½ä»¤è¡Œç»´æŠ¤è€…æ›´èšç„¦çš„å¤„ç†é”™è¯¯ï¼Œè¯·åˆ‡è®°ã€ç›‘æ§å‘Šè­¦ã€ï¼š åªæä¾›ä¸€ä¸ªé€šé“ï¼Œç”¨æˆ·éœ€è¦é…Œæƒ…ä¸ŠæŠ¥ éƒ½ä¸ŠæŠ¥å’Œéƒ½ä¸ä¸ŠæŠ¥åŒºåˆ«ä¸å¤§ æœåŠ¡ä¾§éœ€æä¾›é»˜è®¤çš„ä¸ŠæŠ¥ç­–ç•¥ï¼š è¿™äº›ç­–ç•¥æä¾›å‚æ•°ä¾›ä¸ŠæŠ¥ä¾§è®¾ç½® åŒä¸€ä¸ªäººï¼ŒåŠå°æ—¶å†…ä»…ä¸ŠæŠ¥ä¸€æ¬¡ åŒä¸€ä¸ªäººï¼Œé¦–æ¬¡æ— éœ€ä¸ŠæŠ¥ ä¸å­˜åœ¨ä¸Šä¸‹æ–‡ä¿¡æ¯å’Œé™„åŠ ä¿¡æ¯çš„é™çº§ä¸ºç›‘æ§ ä¸ŠæŠ¥ä¾§éœ€è¦è€ƒè™‘ï¼š è°ƒè¯•æµé‡/æµ‹è¯•ç‰ˆæœ¬ä¸ä¸ŠæŠ¥ ä¸ŠæŠ¥ä¾§åº”ä¸»åŠ¨åŒºåˆ†ç›‘æ§å’Œå‘Šè­¦ï¼ˆæ¯”å¦‚ï¼šnpm startï¼‰ ç”¨æˆ·ç›®å½•ä¸‹çš„ä»£ç æ”¹åŠ¨ï¼Œå¯ä»¥æ˜¯ç›‘æ§ æˆ‘ä»¬çš„æ¨¡å—ä»£ç å‡ºé”™ï¼Œåº”è¯¥æ˜¯å‘Šè­¦ å°½é‡ä¸»åŠ¨å¤„ç†é¢„æœŸå†…é”™è¯¯ï¼Œå‡å°‘æŠ›åˆ°å…œåº•å¤„ç†ï¼ˆæ¯”å¦‚ï¼šæŸä¸ª npm åŒ…æœªå®‰è£…ï¼‰ æŒ‰éœ€é…ç½®ã€ä¸ŠæŠ¥ç­–ç•¥ã€ å‘ç”Ÿä¸»åŠ¨å¼‚å¸¸é€€å‡º (process.exit(1)) æ—¶ï¼Œä½¿ç”¨ console.error è€Œä¸æ˜¯ console.logï¼Œè¿™æ ·çˆ¶è¿›ç¨‹èƒ½è·å–åˆ° stderr æ ‡å‡†é”™è¯¯è¾“å‡º spawnSync å­è¿›ç¨‹æ—¶ï¼Œå°†æ ‡å‡†é”™è¯¯ pipe åˆ°çˆ¶è¿›ç¨‹è¿›è¡Œå¤„ç† å‚è€ƒ https://www.joyent.com/node-js/production/design/errors","link":"/2021/12/05/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7%E7%9A%84%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6%E5%BB%BA%E8%AE%BE/"},{"title":"åŸºäº Gitlab Web Hook çš„è‡ªåŠ¨ Eslint è¯­æ³•æ£€æŸ¥","text":"Eslint, ä¸€ä¸ªæ’ä»¶åŒ–çš„ Javascript è¯­æ³•æ£€æŸ¥å·¥å…·, å¦‚ä½•å°†å…¶ç»“åˆ Gitlab å¹¶åº”ç”¨äºå¼€å‘å‘¢? Gitlab Web HookGitlab Web Hook æä¾›å¦‚ä¸‹äº‹ä»¶çš„ Hook: Push events Tag push events Comments Issues events Merge Request eventsâ€¦ å½“å¯¹åº”äº‹ä»¶å‘ç”Ÿæ—¶, å°†è§¦å‘é¢„è®¾çš„ URL (å³ Web Hook), å¹¶å‘å…¶å‘é€ä¸€ä¸ªåŒ…å«è¯¥äº‹ä»¶è¯¦ç»†ä¿¡æ¯çš„ POST è¯·æ±‚, æ­£æ˜¯é€šè¿‡è¯¥ POST è¯·æ±‚ä»è€Œå¯¹å„ä¸ªäº‹ä»¶è¿›è¡Œå¤„ç†çš„. ä¾‹å¦‚ Merge Requests events: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879//Request body:{ &quot;object_kind&quot;: &quot;merge_request&quot;, &quot;user&quot;: { &quot;name&quot;: &quot;Administrator&quot;, &quot;username&quot;: &quot;root&quot;, &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=40\\u0026d=identicon&quot; }, &quot;object_attributes&quot;: { &quot;id&quot;: 99, &quot;target_branch&quot;: &quot;master&quot;, &quot;source_branch&quot;: &quot;ms-viewport&quot;, &quot;source_project_id&quot;: 14, &quot;author_id&quot;: 51, &quot;assignee_id&quot;: 6, &quot;title&quot;: &quot;MS-Viewport&quot;, &quot;created_at&quot;: &quot;2013-12-03T17:23:34Z&quot;, &quot;updated_at&quot;: &quot;2013-12-03T17:23:34Z&quot;, &quot;st_commits&quot;: null, &quot;st_diffs&quot;: null, &quot;milestone_id&quot;: null, &quot;state&quot;: &quot;opened&quot;, &quot;merge_status&quot;: &quot;unchecked&quot;, &quot;target_project_id&quot;: 14, &quot;iid&quot;: 1, &quot;description&quot;: &quot;&quot;, &quot;source&quot;:{ &quot;name&quot;:&quot;Awesome Project&quot;, &quot;description&quot;:&quot;Aut reprehenderit ut est.&quot;, &quot;web_url&quot;:&quot;http://example.com/awesome_space/awesome_project&quot;, &quot;avatar_url&quot;:null, &quot;git_ssh_url&quot;:&quot;git@example.com:awesome_space/awesome_project.git&quot;, &quot;git_http_url&quot;:&quot;http://example.com/awesome_space/awesome_project.git&quot;, &quot;namespace&quot;:&quot;Awesome Space&quot;, &quot;visibility_level&quot;:20, &quot;path_with_namespace&quot;:&quot;awesome_space/awesome_project&quot;, &quot;default_branch&quot;:&quot;master&quot;, &quot;homepage&quot;:&quot;http://example.com/awesome_space/awesome_project&quot;, &quot;url&quot;:&quot;http://example.com/awesome_space/awesome_project.git&quot;, &quot;ssh_url&quot;:&quot;git@example.com:awesome_space/awesome_project.git&quot;, &quot;http_url&quot;:&quot;http://example.com/awesome_space/awesome_project.git&quot; }, &quot;target&quot;: { &quot;name&quot;:&quot;Awesome Project&quot;, &quot;description&quot;:&quot;Aut reprehenderit ut est.&quot;, &quot;web_url&quot;:&quot;http://example.com/awesome_space/awesome_project&quot;, &quot;avatar_url&quot;:null, &quot;git_ssh_url&quot;:&quot;git@example.com:awesome_space/awesome_project.git&quot;, &quot;git_http_url&quot;:&quot;http://example.com/awesome_space/awesome_project.git&quot;, &quot;namespace&quot;:&quot;Awesome Space&quot;, &quot;visibility_level&quot;:20, &quot;path_with_namespace&quot;:&quot;awesome_space/awesome_project&quot;, &quot;default_branch&quot;:&quot;master&quot;, &quot;homepage&quot;:&quot;http://example.com/awesome_space/awesome_project&quot;, &quot;url&quot;:&quot;http://example.com/awesome_space/awesome_project.git&quot;, &quot;ssh_url&quot;:&quot;git@example.com:awesome_space/awesome_project.git&quot;, &quot;http_url&quot;:&quot;http://example.com/awesome_space/awesome_project.git&quot; }, &quot;last_commit&quot;: { &quot;id&quot;: &quot;da1560886d4f094c3e6c9ef40349f7d38b5d27d7&quot;, &quot;message&quot;: &quot;fixed readme&quot;, &quot;timestamp&quot;: &quot;2012-01-03T23:36:29+02:00&quot;, &quot;url&quot;: &quot;http://example.com/awesome_space/awesome_project/commits/da1560886d4f094c3e6c9ef40349f7d38b5d27d7&quot;, &quot;author&quot;: { &quot;name&quot;: &quot;GitLab dev user&quot;, &quot;email&quot;: &quot;gitlabdev@dv6700.(none)&quot; } }, &quot;work_in_progress&quot;: false, &quot;url&quot;: &quot;http://example.com/diaspora/merge_requests/1&quot;, &quot;action&quot;: &quot;open&quot;, &quot;assignee&quot;: { &quot;name&quot;: &quot;User1&quot;, &quot;username&quot;: &quot;user1&quot;, &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=40\\u0026d=identicon&quot; } }} ä»è¿™ä¸ªè¯·æ±‚ä½“ä¸­å¯çŸ¥è¯¥ Merge Request çš„åˆ›å»ºè€…, åˆ†æ”¯, æºåˆ†æ”¯ä¿¡æ¯, ç›®æ ‡åˆ†æ”¯ä¿¡æ¯, æœ€è¿‘ä¸€æ¬¡ Commit, åˆ†é…ç»™å“ªä¸ªç”¨æˆ·, å¯¹åº”çš„çŠ¶æ€ç­‰ä¿¡æ¯. Eslintä½œä¸ºæ’ä»¶åŒ–çš„ lint æ–¹æ¡ˆ, é€æ¸æ‰“è´¥äº†åŸæœ‰çš„ JSLint å’Œ JSHint, å¹¶â€™åå¹¶â€™äº† JSCS, å…¶æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯æ ‡æ¦œçš„å¯æ’ä»¶åŒ–, å¹¶ä¸”æœ‰å„ç§æ’ä»¶å¯ä»¥æ‰©å±•, ä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿçµæ´»çš„é…ç½®è§„åˆ™, å¦‚æœè¿™è¿˜ä¸æ»¡è¶³ä½ çš„éœ€æ±‚, ä½ è¿˜èƒ½æ–¹ä¾¿çš„å¼€å‘é’ˆå¯¹è‡ªå·±éœ€æ±‚çš„æ’ä»¶, æ­¤å¤–å®ƒè¿˜æ”¯æŒ Es6, Jsx è¯­æ³•, å‰ç«¯ç¨‹åºå‘˜çœŸæ˜¯ä¸€ç¾¤è¿½æ±‚â€™æ—¶å°šâ€™çš„çŒ¿, ä½ ä¸èƒ½é˜»æ­¢ä¸€ä¸ªå‰ç«¯ä½¿ç”¨æ–°å·¥å…· â€¦â€¦ ç¼–å†™è‡ªå·±çš„ config/plugin npm packageä¸¤ç§æ–¹å¼: ç¬¬ä¸€ç§æ˜¯ç±»ä¼¼äº eslint-google-config çš„æ–¹å¼, é€šè¿‡ç¼–å†™é…ç½®æ–‡ä»¶ npm package, å…·ä½“è¯¦è§å®˜æ–¹æ•™ç¨‹; ç¬¬äºŒç§ä»¥æ’ä»¶å½¢å¼, ç±»ä¼¼äºeslint-plugin-react-native, é€šè¿‡ç¼–å†™ç‹¬ç«‹çš„ Eslint æ’ä»¶; æœ¬æ–‡é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼, ä¸ä»…æ–¹ä¾¿é…ç½®ç°æœ‰çš„ rules, ä¹Ÿæ–¹ä¾¿æœªæ¥æ·»åŠ è‡ªå·±çš„ rules: 12345678910111213141516171819202122232425262728293031import ReactEslint from 'eslint-plugin-react';import ReactNativeEslint from 'eslint-plugin-react-native';const reactRules = ReactEslint.rules;const reactNativeRules = ReactNativeEslint.rules;const ReactNativeDemo = { rules: { 'split-platform-components': reactNativeRules['split-platform-components'], 'no-inline-styles': reactNativeRules['no-inline-styles'], 'no-did-mount-set-state': reactRules['no-did-mount-set-state'], 'no-did-update-set-state': reactRules['no-did-update-set-state'] }, configs: { recommended: { parserOptions: { ecmaFeatures: { jsx: true } }, rules: { 'react-native-demo/split-platform-components': 2, 'react-native-demo/no-inline-styles': 2, 'react-native-demo/no-did-mount-set-state': 2, 'react-native-demo/no-did-update-set-state': 2 } } }};export default MyEslinPlugin; å‡è®¾ä½ çš„æ’ä»¶å«åš: eslint-react-demo, é‚£ä¹ˆé€šè¿‡å®‰è£…è¯¥æ’ä»¶(å‰ææ˜¯ä½  npm publishäº†è¿™ä¸ªæ’ä»¶): 1npm install eslint-react-demo babel-eslint eslint --save-dev å¹¶åœ¨é¡¹ç›®æ ¹ç›®å½•é…ç½®å¦‚ä¸‹ .eslintrc æ–‡ä»¶å³å¯: 1234567{ &quot;parser&quot;: &quot;babel-eslint&quot;, &quot;plugins&quot;: [ &quot;react-demo&quot;, ], &quot;extends&quot;: [&quot;plugin:react-demo/recommended&quot;]} ä½¿ç”¨ Node ç¼–å†™ Gitlab Web Hook æ¥å£ç°åœ¨æ’ä»¶æœ‰äº†, è¿˜æ˜¯èŠèŠæ€ä¹ˆå®ç°è‡ªåŠ¨åŒ– Eslint æ£€æŸ¥å§, ç”±äºç›®å‰é‡‡ç”¨ Issue æ–¹å¼å¼€å‘, å½“çŒ¿ä»¬æœ€ç»ˆå†™å®ŒåŠŸèƒ½, éœ€è¦åˆå¹¶åˆ° master åˆ†æ”¯æ—¶, å¿…é¡»æä¸€ä¸ª Merge Request, æ­¤æ—¶é€šè¿‡ç›‘å¬æ‹¦æˆª Merge Request äº‹ä»¶, å¯¹åº”çš„ Web Hook éœ€è¦å®Œæˆä»¥ä¸‹ä»»åŠ¡: åˆ¤æ–­ Merge Request äº‹ä»¶çš„è§¦å‘åŠ¨ä½œ, è‹¥ä¸º open æˆ–è€… reopen, åˆ™æ‰§è¡Œ Eslint æ£€æŸ¥ é€šè¿‡ POST è¯·æ±‚ä½“è·å–å¯¹åº”äº‹ä»¶çš„ git åœ°å€, åˆ†æ”¯ç­‰ä¿¡æ¯, å°†å¯¹åº”ä»“åº“æ‹‰åˆ°æœ¬åœ° æ‰§è¡Œ Eslint æ£€æŸ¥ å¦‚æœé€šè¿‡ Eslint æ£€æŸ¥, åˆ™ä»€ä¹ˆéƒ½ä¸åš, å¦åˆ™å°† Eslint æ£€æŸ¥ç»“æœä½œä¸ºè¯„è®ºå›å¤åœ¨è¯¥ Merge Request é¡µé¢, å¹¶å…³é—­è¯¥ Merge Request(å½“ç„¶, ä½ ä¹Ÿå¯ä»¥å‘é‚®ä»¶ç»™å¯¹åº”çš„å¼€å‘äººå‘˜); å…³é”®ä»£ç å¦‚ä¸‹: 12345678910111213141516171819check(mr) { return new Promise((resolve, reject) =&gt; { // TODO fs.chmodSync(shellFilePath, 755); return execFile(shellFilePath, [mr.author, mr.project_path, mr.source_branch, mr.repo], { cwd: rootPath }, (err, stdout, stderr) =&gt; { // æ­¤å¤„ä¸å¤„ç† err, å› ä¸º eslint ä¸é€šè¿‡ä¹Ÿç®—ä¸€ç§ err...... resolve(stdout); }); }) .then(async(ret) =&gt; { const projectService = new ProjectService(); if(ret) { await projectService.createMrNotes(mr, `\\`\\`\\`\\n ${ret} \\`\\`\\`\\n`); await projectService.updateMr(mr, 'close'); return Promise.resolve(false); } else { return Promise.resolve(true); } })} å…¶ä¸­ç”¨åˆ°çš„ shell è„šæœ¬å†…å®¹å¦‚ä¸‹: 1234567891011121314151617181920212223#!/bin/bashif [ ! -d eslint ]; thenmkdir eslintficd eslintif [ ! -d $1 ]; thenmkdir $1ficd $1if [ ! -d $2 ]; thengit clone -b $3 $4 &gt; /dev/nullcd $2elsecd $2git checkout $3 &gt; /dev/nullgit pull &gt; /dev/nullfi../../.././node_modules/eslint/bin/eslint.js . å‰§ç»ˆ","link":"/2016/10/02/%E5%9F%BA%E4%BA%8E%20Gitlab%20Web%20Hook%20%E7%9A%84%E8%87%AA%E5%8A%A8%20Eslint%20%E8%AF%AD%E6%B3%95%E6%A3%80%E6%9F%A5/"},{"title":"å¦‚ä½•æ‰“é€ ä¸€ä¸ªæ»¡è¶³å¿«é€Ÿå®šåˆ¶èƒ½åŠ›çš„ç§æœ‰åŒ–éƒ¨ç½²ç³»ç»Ÿï¼Ÿ","text":"æ‰“é€ ç§æœ‰åŒ–éƒ¨ç½²ç³»ç»Ÿè¿‡ç¨‹ä¸­çš„ä¸€äº›å’Œæ€»ç»“ åœºæ™¯æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªåœºæ™¯ï¼Œä¸€ä¸ªã€è§„æ¨¡ä¸å¤§ã€æˆ–è€…ã€ç²¾åŠ›æœ‰é™ã€çš„ä¸­å°å‹å…¬å¸ï¼Œæ¥å…¥ä¸‰æ–¹å…¬å¸çš„æ•ˆç‡å·¥å…·ï¼Œæ¯”å¦‚ IM å·¥å…·ï¼ˆä¼ä¸šå¾®ä¿¡ï¼‰ã€æ–‡æ¡£åä½œç³»ç»Ÿï¼ˆè¯­é›€ï¼‰ã€é—®å·ç³»ç»Ÿï¼ˆé—®å·æ˜Ÿï¼‰ã€ç»©æ•ˆç³»ç»Ÿç­‰ç­‰ã€‚ä¸‰æ–¹å…¬å¸æä¾›æ¥å…¥çš„ä¸»æµæ–¹å¼ä¸º SASSï¼Œé€šè¿‡ç”¨æˆ·åˆ†çº§çš„æ–¹å¼ï¼ˆæ™®é€šç”¨æˆ·ã€ä¼šå‘˜ç”¨æˆ·ã€ä¼ä¸šç”¨æˆ·ï¼‰å”®å–è‡ªèº«çš„äº§å“ï¼Œè¿™å¯¹ä¸‰æ–¹å…¬å¸æ¥è¯´ï¼Œæ˜“äºç»Ÿä¸€ç»´æŠ¤ã€‚ ç„¶è€Œæˆ‘è¿™è¾¹ä¸¾çš„å‡ ä¸ªä¾‹å­å¾€å¾€å…³ç³»åˆ°å…¬å¸å†…éƒ¨çš„æ•æ„Ÿä¿¡æ¯ï¼Œæ¯”å¦‚é«˜å±‚å‘˜å·¥é—´çš„å¯¹è¯ã€æ ¸å¿ƒæˆ˜ç•¥æ–‡æ¡£ã€eNps è°ƒç ”æ•°æ®ã€ç»©æ•ˆä¿¡æ¯ç­‰ã€‚è¿™äº›æ•°æ®å¦‚æœä¿å­˜åœ¨ä¸‰æ–¹å…¬å¸ç»´æŠ¤çš„æœåŠ¡å™¨é‡Œï¼Œå¤šå°‘ä¼šæœ‰ä¸€äº›å®‰å…¨é—®é¢˜ï¼›æ­¤å¤–ã€ç”¨æˆ·åˆ†çº§ã€çš„æ–¹å¼å°±åƒå¥—é¤ï¼Œéš¾ä»¥æ»¡è¶³å„ç±»ç”¨æˆ·çš„å®šåˆ¶éœ€æ±‚ã€‚å› æ­¤ç›®å‰è¶Šæ¥è¶Šå¤šçš„ä¸‰æ–¹å…¬å¸æ”¯æŒç§æœ‰åŒ–éƒ¨ç½²çš„æ–¹å¼ï¼Œå°†è‡ªèº«çš„æœåŠ¡éƒ¨ç½²åœ¨å®¢æˆ·æŒ‡å®šçš„æœåŠ¡å™¨ä¸Šï¼Œæ¯”å¦‚ä¼ä¸šå†…éƒ¨æœºæˆ¿ã€å…¬æœ‰äº‘å’Œä¸“æœ‰äº‘ï¼ˆé˜¿é‡Œäº‘ã€åä¸ºäº‘ï¼‰ã€‚ç›®å‰ï¼Œæˆ‘ä»¬å¯¹å¤–æä¾›çš„ä¸€æ¬¾æœåŠ¡ä¹Ÿé‡åˆ°æ­¤ç±»é—®é¢˜ï¼Œå½“å®¢æˆ·ä¸æ»¡è¶³äºæˆ‘ä»¬æä¾›çš„ã€ç”¨æˆ·åˆ†çº§ã€å¥—é¤ï¼Œä¸”å¯¹ã€æ•°æ®å­˜å‚¨ã€ååˆ†æ•æ„Ÿæ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•å¿«é€Ÿå®šåˆ¶å¹¶ç§æœ‰åŒ–éƒ¨ç½²æœåŠ¡å‘¢ï¼Ÿ ç°æœ‰é—®é¢˜ç›´æ¥å°†ç°æœ‰çš„ç³»ç»Ÿï¼Œæ‰“åŒ…éƒ¨ç½²åˆ°å®¢æˆ·æŒ‡å®šçš„æœåŠ¡å™¨ä¸Šä¸å°±å®Œäº‹äº†ï¼Ÿäº‹æƒ…æ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œå®ƒå­˜åœ¨å¦‚ä¸‹3ä¸ªå…³é”®çš„é—®é¢˜ï¼š ä¸€ã€ä¾èµ–å†…éƒ¨ç¯å¢ƒåœ¨å…¬å¸å†…éƒ¨ç»´æŠ¤äº†å¤šå¹´çš„ç³»ç»Ÿï¼Œä¸å°‘èƒ½åŠ›éƒ½å¼ºä¾èµ–äº†å†…éƒ¨æä¾›çš„åŸºç¡€è®¾æ–½ï¼Œæ¯”å¦‚ CDNã€æ•°æ®åº“ã€ç¼“å­˜æœåŠ¡ã€åŠ¨æ€é…ç½®ã€ç”¨æˆ·ä½“ç³»ç­‰ã€‚è¿™äº›åŸºç¡€è®¾æ–½å¯èƒ½åœ¨ç”¨æˆ·æŒ‡å®šçš„æœåŠ¡å™¨ä¸Šä¸ä¸€è‡´ï¼Œç”šè‡³ä¸å­˜åœ¨ã€‚ äºŒã€ç¼ºä¹å®šåˆ¶èƒ½åŠ›å½“å¼€æ”¾ç”¨æˆ·å¯¹ç³»ç»Ÿçš„å®šåˆ¶èƒ½åŠ›åï¼Œç°æœ‰çš„ç³»ç»Ÿä»…ä»…æ”¯æŒã€ç”¨æˆ·åˆ†çº§ã€çš„æ–¹å¼ï¼Œæ˜¯éš¾ä»¥æ”¯æŒç”¨æˆ·ã€å˜å¹»è«æµ‹ã€çš„å®šåˆ¶éœ€æ±‚çš„ï¼Œå¦‚ä½•å¿«é€Ÿå“åº”ç”¨æˆ·çš„å®šåˆ¶éœ€æ±‚ï¼Œæ˜¯éœ€è¦å…¨æ–°çš„ä¸€å¥—ã€æ¨¡å—ç»„ç»‡æ–¹å¼ã€ã€‚ ä¸‰ã€ å¹¶è¡Œç»´æŠ¤æˆæœ¬å¦‚æœæ”¯æŒç”¨æˆ·ç§æœ‰åŒ–éƒ¨ç½²ï¼Œé‚£ä¹ˆä¸å¾—ä¸é¢ä¸´ä¸€ä¸ªè¿™æ ·çš„é—®é¢˜ï¼Œå½“ N ä¸ªå…¬å¸æ¥å…¥æ—¶ï¼Œæˆ‘ä»¬ä¼šåŒæ—¶ç»´æŠ¤ N å¥—ç³»ç»Ÿï¼Œé‚£æ¶‰åŠåˆ°ä¸€ç³»åˆ—åœ¨å¤šå¥—ç³»ç»Ÿä¹‹é—´åŒæ­¥ bug å’Œ feature çš„è§„èŒƒã€å¤šä¸ªç‰ˆæœ¬å¹¶è¡Œã€å¼€å‘è°ƒè¯•æ„å»ºéƒ¨ç½²ã€çš„ç ”å‘æµç¨‹ã€‚ è§£å†³æ–¹æ³•é‚£ä¹ˆï¼Œå¦‚ä½•æ‰“é€ ä¸€ä¸ªæ»¡è¶³å¿«é€Ÿå®šåˆ¶èƒ½åŠ›çš„ç§æœ‰åŒ–éƒ¨ç½²ç³»ç»Ÿå‘¢ï¼Ÿä¾æ—§ä»ä¸Šè¿°ä¸‰ç‚¹é—®é¢˜å‡ºå‘ï¼š ä¸€ã€æ‘†è„±ä¾èµ–å†…éƒ¨ç¯å¢ƒé…ç½®åŒ–ä¸ºäº†æ‘†è„±å¯¹å†…éƒ¨ç¯å¢ƒçš„ä¾èµ–ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç°æœ‰ç³»ç»Ÿè¿›è¡Œé…ç½®åŒ–æ”¹é€ ï¼Œæ”¯æŒå¯¹æ¶‰åŠåˆ°çš„åŸºç¡€è®¾æ–½è¿›è¡Œé…ç½®ï¼Œè¿™äº›é…ç½®å¯ä»¥æ‰‹åŠ¨å†™åœ¨é…ç½®æ–‡ä»¶é‡Œã€å¯æ„å»ºæ—¶ç”Ÿæˆã€è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹ã€‚æœ€ç»ˆåšåˆ°æ ¹æ® N ä»½é…ç½®ï¼Œå³å¯äº§å‡ºé’ˆå¯¹ N ä¸ªå…¬å¸çš„éƒ¨ç½²åŒ…ã€‚ äºŒã€æ»¡è¶³éœ€æ±‚å®šåˆ¶èƒ½åŠ›æ¨¡å—åŒ–æŠ½ç¦»åŠŸèƒ½æ¨¡å—ï¼Œé€šè¿‡ã€å¼€å…³ã€ã€ã€é…ç½®ã€è¿›è¡Œè®¾ç½®ã€‚é‚£æ¨¡å—å¦‚ä½•æ‹†åˆ†å’Œç»´æŠ¤å‘¢ï¼Ÿæ‹†åˆ†å¯è€ƒè™‘ä»ã€å‚ç›´ã€è§’åº¦ï¼Œæ¯”å¦‚ã€æŠ•æ”¾åŠŸèƒ½ã€ã€ã€ä¸ªäººä¸­å¿ƒã€ç­‰ï¼›æˆ–è€…ä»ã€æ°´å¹³ã€è§’åº¦ï¼Œæ¯”å¦‚ã€ç™»å½•ã€ã€ã€æƒé™ã€ç­‰ã€‚ ä¸‰ã€é™ä½å¹¶è¡Œç»´æŠ¤æˆæœ¬ç³»ç»Ÿèåˆå¯¹ç°å­˜çš„ç³»ç»Ÿè¿›è¡Œèåˆï¼Œç»´æŠ¤ä¸€ä¸ªåŸºçº¿ç‰ˆæœ¬çš„ã€åŸºç¡€ç‰ˆã€ï¼Œè¿™ä¸ªæ‰€è°“çš„ã€åŸºç¡€ç‰ˆã€æœ‰ä¸¤ä¸ªç›®çš„ï¼š å½“æœ‰æ–°çš„ä¼ä¸šéœ€è¦æ¥å…¥æ—¶ï¼Œå¯ä½¿ç”¨æœ¬ã€åŸºç¡€ç‰ˆã€å¿«é€Ÿå®šåˆ¶å¼€å‘ ä½œä¸ºæ‰€æœ‰å¹¶è¡Œç³»ç»Ÿçš„ä¸Šæ¸¸ä»£ç åˆ†æ”¯ï¼ˆmasterï¼‰ï¼Œä¸‹æ¸¸ä»£ç åˆ†æ”¯ï¼ˆå„ä¼ä¸šåˆ†æ”¯ï¼‰å®šæœŸä»è¯¥åˆ†æ”¯ pick bugfix &amp; feature æµç¨‹æ”¹é€ æˆ‘ä»¬çš„æœåŠ¡æ¯”è¾ƒç‰¹æ®Šï¼ˆå‚è€ƒé¡µé¢æ­å»ºç±»æœåŠ¡ï¼‰ï¼Œæœ‰è´Ÿè´£é…ç½®çš„ B ç«¯ï¼Œä»¥åŠç”± B ç«¯ç”Ÿæˆçš„ C ç«¯é¡µé¢ã€‚è¿™æ ·æˆ‘ä»¬å°±æœ‰ 4 ä¸ªå·¥ç¨‹ï¼Œæ¯æ¬¡åŠŸèƒ½å¼€å‘éƒ½å¯èƒ½æ¶‰åŠåˆ° 4 ä¸ªå·¥ç¨‹çš„å¼€å‘ã€è°ƒè¯•ã€è”è°ƒã€æ„å»ºã€å‘å¸ƒï¼ŒåŒæ—¶ C ç«¯çš„é™æ€èµ„æºç‰ˆæœ¬å’ŒæœåŠ¡åœ°å€åˆæ˜¯è‡ªèº«å†³å®šçš„ã€‚è¿™ä¸¤ç‚¹æ— ç–‘å¢åŠ äº†å¼€å‘äººå‘˜çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚ é¦–å…ˆï¼Œå°† BC ä¸¤ç«¯çš„å‰åç«¯å„æ”¾å…¥ä¸€ä¸ªå·¥ç¨‹ä¸­ç»´æŠ¤ï¼Œæ¯æ¬¡å‘å¸ƒæœ€å¤§ä»…éœ€è¦å‘å¸ƒä¸¤æ¬¡ã€‚åŒæ—¶ B ç«¯æ—¢ç„¶ä½œä¸ºé…ç½®ä¾§ï¼Œé‚£ä¹ˆä¸ä»… C ç«¯é¡µé¢æœ¬èº«çš„åŠŸèƒ½éœ€è¦ç”± B ç«¯å†³å®šï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å°†è¯¸å¦‚é™æ€èµ„æºç‰ˆæœ¬å’ŒæœåŠ¡åœ°å€è¿™ç±»é…ç½®ä¹Ÿäº¤ç”± B ç«¯è·å–å’Œè®¾ç½®ã€‚ æ¥ç€ï¼Œå¯¹åº”ç”¨åˆå§‹åŒ–ã€å¼€å‘ã€è°ƒè¯•ã€è”è°ƒã€æ„å»ºã€å‘å¸ƒè¿›è¡Œè§„èŒƒï¼Œè§„èŒƒæ˜¯ä¸€ç§çº¦å®šï¼Œä¸ºäº†æ›´å¥½åœ°å°†è§„èŒƒè½åœ°ï¼Œæœ‰å¿…è¦å®ç°ä¸€å¥—å‘½ä»¤è¡Œå·¥å…·æˆ–é¡µé¢æµç¨‹ä½œä¸ºè§„èŒƒçš„è½½ä½“ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¯æŠ½è±¡åº”ç”¨æ¦‚å¿µï¼Œè¿™æ ·æ‰€æœ‰çš„æµç¨‹éƒ½å›´ç»•ç€è¿™ç±»åº”ç”¨å¼€å±•ï¼› BC ä¸¤ç«¯å¯ä»¥æ˜¯è¿™ç±»åº”ç”¨ï¼ŒåŒæ—¶æ‹†åˆ†çš„æ¨¡å—ä¹Ÿå¯ä»¥æ˜¯è¿™ç±»åº”ç”¨ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„æ‰€æœ‰æµç¨‹éƒ½æ˜¯å›´ç»•ç€è¿™ä¸ªåº”ç”¨æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒBC ä¸¤ç«¯ä»¥åŠæ‹†åˆ†å‡ºçš„å‡ åç”šè‡³ä¸Šç™¾çš„æ¨¡å—éƒ½å…±ç”¨ä¸€å¥—åˆå§‹åŒ–ã€å¼€å‘ã€è°ƒè¯•ã€è”è°ƒã€æ„å»ºã€å‘å¸ƒæµç¨‹ã€‚ é…ç½®åŒ–æ­¤å¤–ï¼Œé…ç½®åŒ–ä¹Ÿæœ‰åŠ©äºé™ä½å¹¶è¡Œç»´æŠ¤æˆæœ¬ï¼Œæˆ‘ä»¬é€šè¿‡ç»´æŠ¤é…ç½®è€Œä¸æ˜¯ç»´æŠ¤å„ç±»ä»£ç é€»è¾‘ã€‚é¿å…è¯¸å¦‚ã€å¦‚æœæ˜¯Aå…¬å¸ï¼Œå°±æ‰§è¡ŒBé€»è¾‘ã€è¿™ç±»é€»è¾‘ï¼Œé…ç½®æ›´å…³æ³¨åŠŸèƒ½ï¼Œæ¯”å¦‚ A å…¬å¸çš„é…ç½®å¼€å¯äº†ã€Bé€»è¾‘ã€ã€‚ é™¤äº†é™ä½æˆæœ¬ä¹‹å¤–ï¼Œé…ç½®åŒ–è¿˜ç”¨äºåº”å¯¹æœªæ¥çš„è§„åˆ’ï¼Œç”±äºç›®å‰æ‰€æœ‰çš„ä¼ä¸šã€å®šåˆ¶éœ€æ±‚ã€éƒ½æ˜¯é€šè¿‡äººå·¥æ–¹å¼å»ç»„è£… BC ç«¯åº”ç”¨ã€‚åœ¨æœªæ¥å½“æˆ‘ä»¬æ¥å…¥çš„ä¼ä¸šè¶Šæ¥è¶Šå¤šï¼Œæ²‰æ·€å‡ºå¤§é‡çš„ã€æ¨¡å—ã€åº”ç”¨ä¹‹æ—¶ï¼Œä¾¿å¯å»æ¢ç´¢å¦‚ä½•æ‘†è„±æ‰‹å·¥ç»„è£…ï¼Œä¹Ÿå³é€šè¿‡åœ¨çº¿é¡µé¢é€šè¿‡æ­ç§¯æœ¨çš„æ–¹å¼ç»„è£…ï¼Œå€ŸåŠ©äºé…ç½®åŒ–ï¼Œæˆ‘ä»¬çš„è®¾è®¡å¯ä»¥å¾ˆå¥½åœ°æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚ ç»“è¯­æ­¤å¤„ä»…ç®€å•è®¨è®ºäº†ä¸‹ä¸€ä¸ªç§æœ‰åŒ–éƒ¨ç½²ç³»ç»Ÿæ‰€éœ€è¦çš„æ”¹é€ ï¼Œæ­¥éª¤ä¸‰ä¸­çš„æµç¨‹æ”¹é€ æ¶‰åŠåˆ°å¤§é‡å‰ç«¯å·¥ç¨‹åŒ–ç›¸å…³çš„èƒ½åŠ›ï¼Œè¿˜éœ€è¿›ä¸€æ­¥å±•å¼€~","link":"/2021/04/05/%E5%A6%82%E4%BD%95%E6%89%93%E9%80%A0%E4%B8%80%E4%B8%AA%E6%BB%A1%E8%B6%B3%E5%BF%AB%E9%80%9F%E5%AE%9A%E5%88%B6%E8%83%BD%E5%8A%9B%E7%9A%84%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2%E7%B3%BB%E7%BB%9F/"},{"title":"å­—èŠ‚è·³åŠ¨çš„å‰ç«¯å·¥ç¨‹åŒ–å®è·µ","text":"å—é‚€å‚åŠ  2023 51CTO ä¸¾åŠçš„ã€WOTå…¨çƒæŠ€æœ¯åˆ›æ–°å¤§ä¼šã€ åˆ†äº«ä¼šèƒŒæ™¯ å—é‚€å‚åŠ  2023 51CTO ä¸¾åŠçš„ã€WOTå…¨çƒæŠ€æœ¯åˆ›æ–°å¤§ä¼šã€ å­—èŠ‚è·³åŠ¨çš„å‰ç«¯å·¥ç¨‹åŒ–å®è·µï¼Œå¤§å¹…æé«˜å·¨å‹åº”ç”¨æ„å»ºå’Œç»´æŠ¤æ•ˆç›Š-51CTO.COM æœ¬ä¸»é¢˜ç®€ä»‹ PPT æ­£æ–‡ å¤§å®¶æ—©ä¸Šå¥½ï¼Œæˆ‘å«æ—å®œä¸™ï¼Œä»Šå¤©å¸¦æ¥çš„åˆ†äº«ä¸»é¢˜æ˜¯ã€å­—èŠ‚è·³åŠ¨çš„å‰ç«¯å·¥ç¨‹åŒ–å®è·µã€ã€‚ ç®€å•ä»‹ç»ä¸‹æˆ‘è‡ªå·±ï¼Œæˆ‘æ˜¯ä¸€åæ¥ Web Infra éƒ¨é—¨çš„å‰ç«¯æ¶æ„å·¥ç¨‹å¸ˆï¼Œæ‹¥æœ‰å¤šå¹´å‰ç«¯å·¥ç¨‹åŒ–çš„ç»éªŒï¼Œè‡´åŠ›äºå¸®åŠ©å‰ç«¯å·¥ç¨‹å¸ˆæ›´å¥½åœ°ç®¡ç†å’Œæ²»ç†å·¥ç¨‹ï¼›ç›®å‰è´Ÿè´£å·¥ç¨‹æ²»ç†æ–¹å‘çš„æ–¹æ¡ˆè®¾è®¡å’Œè½åœ°å·¥ä½œã€‚ ä»Šå¤©çš„åˆ†äº«åŒ…æ‹¬ä»¥ä¸‹å››ä¸ªéƒ¨åˆ† é¦–å…ˆåˆ†æã€å½“ä¸‹å‰ç«¯å¼€å‘é¢†åŸŸçš„è¶‹åŠ¿ã€ï¼Œå¹¶å¼•å‡ºå­—èŠ‚è·³åŠ¨å‰ç«¯å¼€å‘æ‰€é¢ä¸´çš„æ–°æŒ‘æˆ˜ï¼› å…¶æ¬¡åˆ†äº«æˆ‘ä»¬ç›®å‰é€šè¿‡å“ªäº›å®è·µæ¥åº”å¯¹è¿™äº›æ–°æŒ‘æˆ˜ï¼› æ¥ç€åˆ†äº«è‡ªç ”çš„æ–¹æ¡ˆåœ¨å­—èŠ‚è·³åŠ¨çš„æ•´ä½“è½åœ°æƒ…å†µï¼› æœ€åæ€»ç»“å’Œå±•æœ›å‰ç«¯å·¥ç¨‹åŒ–çš„å‘å±•è§„å¾‹ï¼› OKï¼Œåœ¨åˆ†äº«ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ã€ä»€ä¹ˆæ˜¯å‰ç«¯å·¥ç¨‹åŒ–ï¼Ÿã€ æ‰€è°“å‰ç«¯å·¥ç¨‹åŒ–ï¼Œå°±æ˜¯åœ¨å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨ä¸€ç³»åˆ—çš„æŠ€æœ¯æ‰‹æ®µå’Œå·¥å…·ï¼Œæ¥æé«˜å¼€å‘æ•ˆç‡ã€ä¿è¯ä»£ç è´¨é‡ã€æé«˜ä»£ç å¤ç”¨æ€§ã€å®ç°è‡ªåŠ¨åŒ–æµç¨‹å’Œä¿ƒè¿›å›¢é˜Ÿåä½œç­‰æ–¹é¢çš„ç›®æ ‡ï¼Œæ˜¯ç°ä»£å‰ç«¯å¼€å‘ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼› åœ¨è¿™é‡Œå‘¢æˆ‘è¦ç‰¹åˆ«è¯´æ˜ä¸€ä¸‹ï¼Œæœ¬æ¬¡ä¸»é¢˜æ‰€è¦åˆ†äº«çš„å¹¶ä¸æ˜¯å¤§è€Œå…¨çš„å‰ç«¯å·¥ç¨‹åŒ–ï¼Œè€Œæ˜¯åˆ†äº«ä¸ºäº†åº”å¯¹å½“å‰ã€æ–°è¶‹åŠ¿ã€ä¸‹çš„ã€æ–°æŒ‘æˆ˜ã€ï¼Œæˆ‘ä»¬æ‰€åšçš„ã€æ–°å®è·µã€ï¼Œæ¥ä¸‹æ¥ä¸€èµ·çœ‹çœ‹ï¼Œå‰ç«¯å¼€å‘å‡ºç°äº†å“ªäº›æ–°è¶‹åŠ¿å‘¢ï¼Ÿ é¦–å…ˆæ˜¯å‰ç«¯å·¥ç§çš„è¶‹åŠ¿ ç¬¬ä¸€ä¸ªè¶‹åŠ¿æ˜¯æ¶‰åŠçš„å¹³å°è¶Šæ¥è¶Šå¤šï¼ŒWebï¼ŒNodeï¼Œå®¢æˆ·ç«¯å’Œè·¨å¹³å°ç­‰ ç¬¬äºŒä¸ªè¶‹åŠ¿æ˜¯æ‰€èƒ½æ”¯æ’‘çš„ä¸šåŠ¡ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå¤æ‚åº¦è¶Šæ¥è¶Šå¤§ï¼Œç‰¹åˆ«æ˜¯è¿‘å¹´æ¥å‰ç«¯ä¾§æ¶Œç°å‡ºä¸å°‘é‡å‰ç«¯äº¤äº’çš„åº”ç”¨ ç¬¬ä¸‰ä¸ªçš„è¯ï¼Œæ˜¯éšç€ä¸Šè¿°ä¸¤ä¸ªè¶‹åŠ¿è€Œæ¥åœ°ã€ä¸å¯é¿å…åœ°ä½¿å¾—å‰ç«¯å›¢é˜Ÿçš„è§„æ¨¡å¢å¤§ ä¸Šè¿°ä¸‰ä¸ªè¶‹åŠ¿åˆå®¢è§‚ä¸Šé€ æˆäº†å‰ç«¯å·¥ç¨‹çš„å››ä¸ªè¶‹åŠ¿ï¼Œä¹Ÿå°±æ˜¯ï¼š ç¬¬ä¸€ä¸ªæ˜¯ï¼Œä»£ç è§„æ¨¡å¢å¤§ï¼Œå†…éƒ¨å·²ç»å‡ºç°ä»£ç é‡è¶…è¿‡ 10G çš„å¤§å‹å·¥ç¨‹ï¼ŒåŒæ—¶ä¸€ä¸ªåº”ç”¨çš„ä¸Šä¸‹æ¸¸ä¾èµ–æ‰€æ¶‰åŠçš„é¡¹ç›®æ•°é‡ä¹Ÿæ˜¯éå¸¸çš„å¤š ç¬¬äºŒä¸ªï¼Œç»´æŠ¤äººæ•°å¢å¤šï¼Œä¸€ä¸ªå·¥ç¨‹å°‘åˆ™åæ¥äººï¼Œå¤šåˆ™å››äº”åäºº ç¬¬ä¸‰ä¸ªï¼Œåº”ç”¨ä½“ç§¯å¢åŠ ï¼Œéšç€åº”ç”¨åŠŸèƒ½çš„è¿­ä»£ï¼Œä½“ç§¯è¶Šæ¥è¶Šåºå¤§ ç¬¬å››ä¸ªï¼Œæ²»ç†éš¾åº¦å¢é«˜ï¼Œå¤æ‚çš„ä¾èµ–å…³ç³»éš¾ä»¥æ²»ç†ï¼Œå¤æ‚çš„æ„å»ºäº§ç‰©éš¾ä»¥è¯Šæ–­ é‚£ä¹ˆï¼Œåœ¨ä¸Šè¿°è¿™äº›è¶‹åŠ¿ä¸‹ï¼Œæˆ‘ä»¬çš„å‰ç«¯å¼€å‘é¢ä¸´äº†å“ªäº›æ–°çš„æŒ‘æˆ˜å‘¢ï¼Ÿä¸»è¦æœ‰å››ä¸ªï¼š ç¬¬ä¸€ä¸ªæ˜¯å¤šé¡¹ç›®ç»´æŠ¤æˆæœ¬æ¯”è¾ƒé«˜ï¼Œé¡¹ç›®åŸºå»ºé‡å¤ã€ä»£ç å¤ç”¨å›°éš¾ã€å·¥ä½œæµç¨‹å‰²è£‚ç­‰ ç¬¬äºŒä¸ªæ˜¯å¤šäººå¼€å‘åä½œæˆæœ¬æ¯”è¾ƒé«˜ï¼Œç›¸äº’ä¾èµ–çš„æµç¨‹ã€çº§è”çš„ä¾èµ–å‡çº§ï¼Œéƒ½å¢åŠ äº†åä½œæˆæœ¬ ç¬¬ä¸‰ä¸ªæ˜¯å·¨å‹åº”ç”¨æ„å»ºé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œæ„å»ºè€—æ—¶éšç€åº”ç”¨å¢å¤§è€Œå˜æ…¢ ç¬¬å››ä¸ªæ˜¯å¤§å‹åº”ç”¨åŠ£åŒ–é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œæˆ‘ä»¬ç¼ºä¹æœ‰æ•ˆçš„é˜²åŠ£åŒ–æ‰‹æ®µ ä¸ºäº†è§£å†³ä¸Šè¿°æ–°æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æŠ•èµ„å¦‚ä¸‹å·¥å…·æ¥åº”å¯¹ ç¬¬ä¸€ä¸ªæ˜¯è‡ªç ” Monorepo å·¥å…·ï¼Œç”¨äºé™ä½å¤šé¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ ç¬¬äºŒä¸ªæ˜¯å¯¹åŸæœ‰çš„å¾®å‰ç«¯æ¡†æ¶è¿›è¡Œå‡çº§ï¼Œè¿›ä¸€æ­¥é™ä½å¤šäººå¼€å‘çš„åä½œæˆæœ¬ ç¬¬ä¸‰ä¸ªæ˜¯å¼€å‘ Bundler å’Œ Build Systemï¼Œæ¥åŠ å¿«å·¨å‹åº”ç”¨çš„æ„å»ºé€Ÿåº¦ ç¬¬å››ä¸ªæ˜¯æä¾›è¯Šæ–­å·¥å…·ï¼Œæ¥æœ‰æ•ˆåœ°é˜²æ­¢åº”ç”¨åŠ£åŒ– æ¥ä¸‹æ¥å°†ä»è¿™å››ä¸ªä¸»é¢˜å±•å¼€èŠèŠï¼Œä¸ºäº†è¾¾åˆ°ä¸Šè¿°ç›®æ ‡ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•å®è·µçš„ ä»€ä¹ˆæ˜¯ Monorepoï¼Ÿ å®ƒæ˜¯ä¸€ç§æºä»£ç ç®¡ç†çš„æ¨¡å¼ï¼Œå…¶å½¢å¼å°±æ˜¯å°†å¤šä¸ªé¡¹ç›®é›†ä¸­åˆ°ä¸€ä¸ªä»“åº“ä¸­ç®¡ç†ï¼› ä¸ä¹‹ç›¸å¯¹çš„æ˜¯ Polyrepo æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä¸‹å„ä¸ªé¡¹ç›®éƒ½æœ‰ç‹¬ç«‹çš„ä»“åº“ï¼› ç®€è€Œè¨€ä¹‹ï¼ŒMonorepo å°±æ˜¯å°†å¤šä¸ªä¸åŒçš„é¡¹ç›®ä»¥è‰¯å¥½åœ°ç»„ç»‡å…³ç³»ï¼Œæ”¾åˆ°å•ä¸ªä»“åº“ä¸­ç»´æŠ¤ï¼› é‚£ä¹ˆ Monorepo æ˜¯å¦‚ä½•é™ä½å¤šé¡¹ç›®çš„ç»´æŠ¤æˆæœ¬çš„ï¼Ÿä»–é€šè¿‡ å¤ç”¨åŸºå»ºï¼Œè®©å¼€å‘äººå‘˜é‡æ–°ä¸“æ³¨äºåº”ç”¨æœ¬èº« ä»£ç å…±äº«ï¼Œèƒ½å¤Ÿä½æˆæœ¬çš„åšåˆ°ä»£ç å¤ç”¨ åŸå­æäº¤ï¼Œä½¿ç”¨è‡ªåŠ¨åŒ–çš„å¤šé¡¹ç›®å·¥ä½œæµ é¦–å…ˆæ˜¯é€šè¿‡å¤ç”¨åŸºå»ºï¼Œè®©å¼€å‘äººå‘˜é‡æ–°ä¸“æ³¨äºåº”ç”¨æœ¬èº«ï¼š åœ¨ä¼ ç»Ÿçš„ Polyrepo æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦æœ‰å¼€å‘äººå‘˜åˆ›å»ºå’Œç»´æŠ¤ï¼›è€Œåœ¨ Monorepo ä¸­ï¼Œåªéœ€è¦ä¸€ä¸¤ä¸ªå¼€å‘äººå‘˜è´Ÿè´£å»ºç«‹ Monorepo å·¥ç¨‹ï¼Œæ‰€æœ‰çš„é¡¹ç›®éƒ½èƒ½å¤Ÿåœ¨ä¸€ä¸ªä»“åº“ä¸­ç»Ÿä¸€ç»´æŠ¤ï¼Œé€šè¿‡å¤ç”¨ä¸€å¥—åŸºå»ºï¼ˆæ¯”å¦‚ CI é…ç½®ã€Lint è§„åˆ™ã€æ„å»ºè„šæœ¬ç­‰ï¼‰ï¼Œä»è€Œé™ä½å¤šé¡¹ç›®ç»´æŠ¤æˆæœ¬ æ­¤å¤–ï¼Œå¤ç”¨åŸºå»ºä¹Ÿä½¿å¾—ç»Ÿä¸€æ”¹é€ å’Œå‡çº§åŸºå»ºå˜å¾—æ–¹ä¾¿ï¼Œæ¯”å¦‚æƒ³åœ¨ CI æµç¨‹ä¸­ä¸ºæ‰€æœ‰é¡¹ç›®åŠ å…¥ç±»å‹æ£€æŸ¥ï¼Œæ¥æé«˜ä¸‹é¡¹ç›®çš„è´¨é‡ï¼Œåœ¨ Polyrepo ä¸‹éœ€è¦ä¿®æ”¹æ¯ä¸€ä¸ªé¡¹ç›®ï¼Œè¿™æ ·æˆæœ¬å…¶å®æ˜¯å¾ˆé«˜çš„ã€‚è€Œåœ¨ Monorepo ä¸‹ï¼ŒåŸºå»ºçš„è°ƒæ•´å’Œç»´æŠ¤ï¼Œèƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°åº”ç”¨åˆ°å¤šä¸ªé¡¹ç›®ä¸­ã€‚ å…¶æ¬¡æ˜¯é€šè¿‡ä»£ç å…±äº«ï¼Œè®©å¼€å‘äººå‘˜èƒ½å¤Ÿä½æˆæœ¬åœ°å¤ç”¨ä»£ç ï¼š Polyrepo ä¸­ï¼Œç»´æŠ¤å…¬ç”¨æ¨¡å—çš„æˆæœ¬æ¯”è¾ƒé«˜ï¼Œé¦–å…ˆæ˜¯è°ƒè¯•å¾ˆç¹çï¼Œå…¬ç”¨æ¨¡å—çš„è°ƒè¯•éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ npm linkï¼Œä¸å½“å‰è°ƒè¯•çš„é¡¹ç›®å…³è”èµ·æ¥ï¼Œå¦‚æœå…¬ç”¨æ¨¡å—è¾ƒå¤šçš„è¯ï¼Œnpm link æ­¥éª¤å°†éå¸¸ç¹çä½æ•ˆã€‚ å…¶æ¬¡å…¬ç”¨æ¨¡å—çš„å‡çº§å¾ˆç¹çï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†è¿™ç§ä¾èµ–å…³ç³»ï¼Œå…ˆå‡çº§åº•å±‚çš„æ¨¡å—ï¼Œç„¶åå‘å¸ƒï¼Œæœ€åå†å‡çº§é¡¶å±‚æ¨¡å—ï¼Œå¦‚æœä¸­é€”å‡ºé”™äº†ï¼Œæˆ‘è¿˜å¾—å†æ¥ä¸€éè¿™ä¸ªè¿‡ç¨‹ã€‚ è€Œåœ¨ Monorepo ä¸­ï¼Œå¯ä»¥ç›´æ¥ä¸€é”®åˆ›å»ºå…¬ç”¨æ¨¡å—ï¼Œé¡¶å±‚çš„æ¨¡å—ä¸€é”®å¼•å…¥å…¬ç”¨æ¨¡å—è¿›è¡Œå¼€å‘ã€è°ƒè¯•ï¼Œåº•å±‚æ¨¡å—çš„æ›´æ”¹èƒ½å¤Ÿç›´æ¥è¢«ä¸Šå±‚æ„ŸçŸ¥ï¼Œç”šè‡³ä¸éœ€è¦ç»è¿‡ link å’Œ npm å‘å¸ƒï¼Œå‡å°‘äº†å¾ˆå¤šé‡å¤çš„å·¥ä½œï¼Œå¤§å¤§é™ä½äº†æŠ½ç¦»æ–°çš„ã€å¤ç”¨ä»£ç ã€çš„æˆæœ¬ï¼Œè¿™ä½¿å¾—å¤§å®¶æ›´æ„¿æ„åšè¿™ç±»æŠ½ç¦»å·¥ä½œï¼Œè¿™åè¿‡æ¥åˆæé«˜äº†ä»£ç å¤ç”¨ç‡ã€‚ å†æ¬¡ï¼Œæ˜¯é€šè¿‡åŸå­æäº¤ï¼Œè®©å¼€å‘äººå‘˜äº«å—è‡ªåŠ¨åŒ–çš„å¤šé¡¹ç›®å·¥ä½œæµ å¦‚æœæˆ‘çš„ä¸šåŠ¡éœ€æ±‚è¦æ¶‰åŠåˆ°å¤šä¸ªé¡¹ç›®ï¼Œåœ¨ Polyrepo æ¨¡å¼ä¸­ï¼Œä¾‹å¦‚éœ€è¦ä¿®æ”¹å›¾ä¸­çš„ä¸‰ä¸ªé¡¹ç›®ï¼Œéœ€è¦å…ˆä¿®æ”¹æäº¤åº•å±‚æ¨¡å—ï¼Œè·‘æ¯ä¸ªæ¨¡å—çš„ CI æµç¨‹ï¼Œåœ¨å¤„ç†é¡¶å±‚æ¨¡å—æ—¶ï¼Œè¿˜å¾—æ›´æ–°åº•å±‚ä¾èµ–ï¼Œæ¥ç€å†è·‘ä¸€æ¬¡ CI æµç¨‹ï¼Œè¿™ä¸€å¥—æµç¨‹éå¸¸ç¹çä¸”ä¸è¿ç»­ã€‚ è€Œåœ¨ Monorpeo ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸€æ¬¡æ€§è°ƒæ•´å¹¶æäº¤å¤šä¸ªé¡¹ç›®ï¼ŒCI å’Œå‘å¸ƒæµç¨‹ä¹Ÿéƒ½æ˜¯ä¸€æ¬¡æå®šçš„ï¼Œä»è€Œå°†å¤šé¡¹ç›®çš„å·¥ä½œæµè‡ªåŠ¨åŒ–ã€‚ æˆ‘ä»¬ç®€å•çš„åšä¸€ä¸ªæ€»ç»“ï¼š åœ¨ Polyrepo çš„æ¨¡å¼ä¸‹ï¼Œæ¯ä¸€ä¸ªé¡¹ç›®éƒ½æœ‰å„è‡ªçš„ä¸€å¥—åŸºå»ºï¼Œä¸”ä»£ç å¤ç”¨å›°éš¾ã€å·¥ä½œæµç¨‹å‰²è£‚ï¼Œä½†æ˜¯åœ¨ Monorepo é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥è®©å¤šä¸ªé¡¹ç›®å¤ç”¨ä¸€å¥—åŸºå»ºï¼›æ–¹ä¾¿åœ°å…±äº«ä»£ç ï¼Œä½¿ç”¨ä¸€è‡´çš„å·¥ä½œæµã€‚ å¾ˆå¤šæ—¶å€™ä¸€ä¸ªå›¢é˜Ÿçš„é¡¹ç›®å¾€å¾€ä¸æ˜¯å‰²è£‚çš„ï¼Œè€Œæ˜¯ç›¸äº’è”ç³»çš„ï¼ŒMonorepo å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†è¿™äº›é¡¹ç›®ç»„ç»‡åˆ°ä¸€ä¸ªå¤§ä»“åº“ä¸­ç»´æŠ¤ï¼Œä»è€Œæå¤§åœ°é™ä½äº†å¤šé¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ã€‚ æ¥ä¸‹æ¥åˆ†äº«ä¸‹ bunlder å’Œ build stystem çš„å·¥ç¨‹åŒ–å®è·µï¼Œå› ä¸ºæ— è®ºæ˜¯å•ä»“é¡¹ç›®è¿˜æ˜¯å¤šä»“é¡¹ç›®ï¼Œéšç€ä»£ç è§„æ¨¡å’Œå­åº”ç”¨æ•°é‡çš„å¢åŠ ï¼Œéƒ½ä¼šå¯¼è‡´æ„å»ºæ€§èƒ½ä¸‹é™ï¼Œä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åˆ†åˆ«å»ºè®¾äº† Bundler å’Œ Build System å·¥å…·ã€‚ å…¶ä¸­ Bundler æ˜¯ä¸ºäº†è§£å†³å•ä¸ªå·¨çŸ³åº”ç”¨æ„å»ºé€Ÿåº¦æ…¢çš„é—®é¢˜ï¼› è€Œ Build System åˆ™æ˜¯ä¸ºäº†è§£å†³ Monorepo ä¸‹æ„å»ºé€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚ åœ¨å‰ç«¯é¢†åŸŸï¼ŒBundler æ˜¯ä¸€ç§å·¥å…·ï¼Œç”¨äºå°†å¤šä¸ªå‰ç«¯èµ„æºï¼ˆä¾‹å¦‚ JSã€CSSã€å›¾åƒç­‰æ–‡ä»¶ï¼‰æ‰“åŒ…åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œä»è€Œè®©æµè§ˆå™¨èƒ½å¤Ÿç›´æ¥è¿è¡Œï¼› å¸¸è§çš„ Bundler å·¥å…·æœ‰ Webpackã€Rollupã€Viteã€Parcelã€Esbuildã€‚ æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬è‡ªç ”çš„ Rspack Bundlerï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäº Rust è¯­è¨€çš„é«˜æ€§èƒ½æ„å»ºå¼•æ“ï¼Œ å…·å¤‡ä¸ Webpack ç”Ÿæ€ç³»ç»Ÿçš„äº’æ“ä½œæ€§ã€‚ ä»è¿™å¥ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒRspack æœ‰ä¸¤ä¸ªç‰¹æ€§ï¼Œä¸€ä¸ªæ˜¯é«˜æ€§èƒ½ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸ Webpack ç”Ÿæ€çš„å…¼å®¹æ€§ã€‚ é¦–å…ˆç¬¬ä¸€ä¸ªç‰¹æ€§ï¼Œå³é‡‡ç”¨ Rust è¯­è¨€å®ç°ï¼Œç”±äº JS æ˜¯å•çº¿ç¨‹çš„ï¼Œè™½ç„¶åœ¨ JS ä¸­ä¹Ÿæœ‰äº›æ–¹å¼åšåˆ°å¹¶å‘ï¼Œä½†è¿™äº›æ–¹æ³•éƒ½æœ‰ç§å¸¦ç€é•£é“è·³èˆçš„æ„Ÿè§‰ï¼Œè€Œåœ¨ Rust ä¸­æˆ‘ä»¬èƒ½å¾ˆå¥½åœ°æ”¯æŒå¹¶å‘ç‰¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æ„å»ºè¿‡ç¨‹ä¸­çš„ä»»åŠ¡ï¼Œåˆ©ç”¨å¹¶å‘çš„ç‰¹æ€§å»æ‰§è¡Œï¼Œè¿™æå¤§æå‡äº†æ„å»ºæ€§èƒ½ï¼› è¿™ä¸¤å¼ å›¾ç‰‡æ˜¯ Webpack ä¸ RSpack åœ¨æ„å»ºè¿‡ç¨‹ä¸­çš„çº¿ç¨‹æƒ…å†µå¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥æ˜æ˜¾åœ°çœ‹å‡ºï¼ŒWebpack å…¶å®åªæ˜¯ä¸€ä¸ªå•çº¿ç¨‹ï¼Œè€Œ Rspack åˆ™èƒ½å……åˆ†å‘æŒ¥å¤šæ ¸ CPU çš„ä¼˜åŠ¿ï¼Œæè‡´åœ°å‹æ¦¨å‡ºæ€§èƒ½ã€‚ è¿™æ˜¯æˆ‘ä»¬å®˜ç½‘ä¸Šçš„ä¸€ä¸ªå¯¹æ¯”å›¾ï¼Œåœ¨ç›¸åŒçš„é¡¹ç›®ä¸‹ï¼ŒRSpack åªéœ€è¦ 4.2ç§’ï¼Œè€Œ Webpack éœ€è¦ 34.8ç§’ Rspack ç¬¬äºŒä¸ªç‰¹æ€§å°±æ˜¯ä¸ webpack éƒ¨åˆ†å…¼å®¹ï¼Œç›®å‰çš„å®ç°å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ª webpack çš„å­é›†ï¼Œè¿™å¥—å­é›†é‡ŒåŒ…å«äº†å¤§éƒ¨åˆ†çš„å¸¸ç”¨é…ç½®ï¼Œæ»¡è¶³äº†æ—¥å¸¸çš„ä¸šåŠ¡å¼€å‘ï¼Œé‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦ä¸ webpack ç”Ÿæ€å…¼å®¹ï¼Ÿ é¦–å…ˆï¼Œwebpack çš„æ’ä»¶æœºåˆ¶æ»¡è¶³äº†é¡¹ç›®å¯¹å®šåˆ¶åŒ–çš„è¦æ±‚ å…¶æ¬¡ï¼Œå¤ç”¨ webpack ä¸°å¯Œçš„ç”Ÿæ€ï¼Œç›¸å½“äºç”¨æœ€å°çš„æˆæœ¬ä¼˜åŒ–å·¨å‹é¡¹ç›®çš„å¼€å‘ä½“éªŒ æœ€åï¼Œå­˜é‡çš„ webpack é¡¹ç›®éå¸¸å¤šï¼Œå…¼å®¹ webpack èƒ½å¤§å¤§é™ä½è¿ç§»æˆæœ¬ è¿™æ˜¯ä¸¤ä¸ªå…¸å‹ä¸šåŠ¡ä¸Šçš„æ”¶ç›Šï¼Œä¸¤ä¸ªé¡¹ç›®åŸæœ¬ dev å¯åŠ¨è€—æ—¶5åˆ†é’Ÿå·¦å³ï¼Œä½¿ç”¨ Rspack ååªéœ€ 20 ç§’å·¦å³ï¼ŒåŸæœ¬ hmr éœ€è¦ 20 ç§’å·¦å³ï¼Œä½¿ç”¨ Rspack ååªéœ€è¦ 1 ç§’å·¦å³ï¼Œæ€§èƒ½æ”¶ç›ŠåŸºæœ¬éƒ½åœ¨ 10 å€å·¦å³ ç®€å•ä»‹ç»ä¸‹ Build Systemï¼Œå®ƒé€šè¿‡å¤„ç† Monorepo ä¸‹çš„é¡¹ç›®ä¾èµ–å…³ç³»å›¾ï¼Œå¹¶æ ¹æ®è¿™ä¸ªå…³ç³»å›¾è°ƒåº¦æ„å»ºä»»åŠ¡ï¼› ä¸ºä»€ä¹ˆ Monorepo ä¸‹éœ€è¦ä¸€ä¸ª Build System å‘¢ï¼Ÿ å› ä¸º Monorepo ä¸æ˜¯ç®€å•çš„å°†å¤šä¸ªé¡¹ç›®ç›´æ¥ç»´æŠ¤åˆ°å•ä¸ªä»“åº“è€Œå·²ï¼Œå®ƒè¿˜éœ€è¦å€ŸåŠ© Build System æ¥ç®¡ç†æ•´ä¸ªä»£ç ä»“åº“ä¸­çš„å¤šä¸ªé¡¹ç›®ï¼Œå¹¶æ ¹æ®é¡¹ç›®ä¹‹é—´çš„ä¾èµ–å…³ç³»è¿›è¡Œæ„å»ºï¼› å¸¸è§çš„ Build System å·¥å…·æœ‰ Bazelã€NXã€Turborepoã€Lage ç­‰ æ¥ä¸‹æ¥ä»‹ç»ä¸‹åœ¨æˆ‘ä»¬è‡ªç ”çš„ Monorepo å·¥å…·ä¸­ï¼Œå¦‚ä½•å®è·µ Build Systemï¼Œæˆ‘ä»¬é€šè¿‡ æ”¯æŒã€ä»»åŠ¡å¹¶è¡Œèƒ½åŠ›ã€ï¼Œé‡‡ç”¨æœ€å¤§é™åº¦çš„å¹¶è¡Œä»»åŠ¡åŠ é€Ÿ æ”¯æŒã€å¤šçº§ç¼“å­˜èƒ½åŠ›ã€ï¼Œå¯¹æ„å»ºä»»åŠ¡å®ç°äº†å¤šçº§ç¼“å­˜ æ”¯æŒã€æŒ‰éœ€æ„å»ºèƒ½åŠ›ã€ï¼Œæ ¹æ®ä»£ç æ›´æ”¹çš„å½±å“é¢æ¥æ„å»º å¦‚å›¾æ‰€ç¤ºï¼Œæ ¹æ®å­é¡¹ç›®çš„ä¾èµ–å…³ç³»è½¬æˆä¸€ä¸ªä»»åŠ¡ä¾èµ–å›¾ï¼Œå®ƒçš„æ„å»ºé¡ºåºå¿…é¡»ç¬¦åˆè¿™æ ·ä¸€ç§è¦æ±‚ï¼Œå³ä¸Šå±‚çš„é¡¹ç›®æ„å»ºï¼Œéœ€è¦ç­‰å¾…åº•å±‚é¡¹ç›®æ„å»ºçš„å®Œæˆã€‚ OKï¼Œæˆ‘ä»¬çœ‹æ–¹å¼ä¸€ï¼Œå³é€šè¿‡ä¸²è¡Œæ’æˆ DEBCAï¼Œè¿™æ˜¯èƒ½å¤Ÿç¬¦åˆæ„å»ºè¦æ±‚çš„ï¼›ä½†æ˜¯å®ƒçš„æ€§èƒ½æ˜¯æ¯”è¾ƒä½çš„ï¼Œæ¯”å¦‚ D å’Œ E æ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œæ‰€ä»¥ç¬¬äºŒç§æ–¹å¼å°±æ˜¯é€šè¿‡æŠŠ DE ä»¥åŠ BC è¿›è¡Œå¹¶è¡Œå¤„ç†ï¼Œè¿™æ ·ä¾¿èƒ½æŠŠå‰é¢çš„ 5 ä¸ªæ­¥éª¤åŠ é€Ÿåˆ° 3 ä¸ªæ­¥éª¤ã€‚ æ­¤æ—¶æˆ‘ä»¬å‘ç°ä»»åŠ¡ C å‘¢ï¼Œå®ƒä¸ä¾èµ–ä»»åŠ¡ D çš„å®Œæˆï¼Œä½†æ˜¯æ–¹å¼äºŒä¸‹ï¼Œä»»åŠ¡ C å´å¾—ç­‰å¾… D å’Œ E éƒ½å®Œæˆæ‰å¼€å§‹æ‰§è¡Œã€‚ å› æ­¤ä¾¿å¼•å‡ºç¬¬ä¸‰ç§æ–¹å¼ï¼Œåœ¨ä»»åŠ¡ E å®Œæˆåï¼ŒD å’Œ C ä»¥å¹¶è¡Œæ–¹å¼æ‰§è¡Œï¼› å½“ monorepo å­é¡¹ç›®è§„æ¨¡å¢å¤§åï¼Œæ¯ä¸€æ¬¡å¼€å‘æˆ–è€…ä¸Šçº¿éƒ½ä¼šæ¶‰åŠå¤šä¸ªå­é¡¹ç›®ï¼Œå¦‚æœæ¯æ¬¡éƒ½éœ€è¦å¯¹è¿™äº›å­é¡¹ç›®è¿›è¡Œé‡æ–°æ„å»ºï¼Œè¿™å°†ä¼šæå¤§åœ°æ‹–æ…¢æ„å»ºå’Œéƒ¨ç½²é€Ÿåº¦ã€‚ æˆ‘ä»¬æä¾›äº†å¯¹æ„å»ºäº§ç‰©è¿›è¡Œç¼“å­˜çš„èƒ½åŠ›ï¼Œèƒ½å¤ŸåŒæ—¶å°†äº§ç‰©ç¼“å­˜åˆ°æœ¬åœ°å’Œè¿œç¨‹ï¼Œå½“ç›¸å…³çš„å­é¡¹ç›®æ²¡æœ‰ä¿®æ”¹è¿‡ä»£ç æ—¶ï¼Œå°†ä¼šå¤ç”¨ä¹‹å‰çš„æ„å»ºäº§ç‰©ä»¥å‡å°‘æ„å»ºæ—¶é—´ã€‚ æŒ‰éœ€æ„å»ºèƒ½åŠ›æ–¹é¢çš„å®è·µï¼Œæˆ‘ä»¬æ”¯æŒæŒ‰å½±å“é¢æ‰§è¡Œ CI æµç¨‹ï¼Œé€šè¿‡ git diff å½“å‰æœ‰æ”¹åŠ¨çš„ä»£ç è¿›è¡Œä¾èµ–åˆ†æï¼Œä»è€Œåªæ„å»ºå—å½±å“çš„é¡¹ç›®ï¼Œå¦åˆ™æ¯æ¬¡ CI éƒ½ä¼šå®Œæ•´çš„æ„å»ºæ‰€æœ‰çš„å­é¡¹ç›®ã€‚ æ­¤å¤„ä»¥ä¸€ä¸ªç®€å•çš„ Monorepo ä¸ºä¾‹ï¼Œä¾èµ–å…³ç³»å¦‚å›¾æ‰€ç¤º å¦‚æœä¸€æ¬¡æ€§å…¨é‡æ„å»ºæ‰€æœ‰é¡¹ç›®ï¼Œè€—æ—¶çº¦ä¸º 17.72ç§’ å¦‚æœä»…ä»…æ”¹åŠ¨äº† component æ¨¡å—ï¼Œé‚£ä¹ˆæŒ‰éœ€æ„å»ºçš„è¯ï¼Œæˆ‘åªéœ€è¦æ„å»º component, app1, app2ï¼Œæ­¤æ—¶è€—æ—¶ 8.94ç§’ï¼ŒèŠ‚çº¦ 50% çš„æ—¶é—´ å†æ¥çœ‹çœ‹æ— ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»…ä»…æ„å»º App1, App2, App3 å®ƒä»¬çš„è€—æ—¶åœ¨ 10.77ç§’åˆ°16.94ç§’ä¹‹é—´ å¦‚æœæœ‰ç¼“å­˜çš„è¯ï¼Œæ¯”å¦‚ component, sdk, util å·²ç»æ„å»ºè¿‡ï¼Œé‚£ä¹ˆå†å•ç‹¬æ„å»º App1, App2, App3 æ—¶ï¼Œæ„å»ºè€—æ—¶åœ¨ 7.55ç§’åˆ°9.74ç§’ä¹‹é—´ï¼Œå¤§çº¦èŠ‚çº¦ 45% çš„æ—¶é—´ é€šè¿‡ Builder å’Œ Build System çš„å»ºè®¾ï¼Œæˆ‘ä»¬åˆ†åˆ«å€ŸåŠ© Rust è¯­è¨€çš„é«˜æ€§èƒ½å’Œè¿œç¨‹æ„å»ºç¼“å­˜èƒ½åŠ›ï¼Œæå¤§åœ°åŠ é€Ÿäº†å·¨å‹åº”ç”¨çš„æ„å»ºé€Ÿåº¦ï¼Œä½†è¿™åˆä¸ä»…ä»…æ˜¯å¼€å‘é€Ÿåº¦ä¸Šçš„æå‡ï¼Œå®ƒåŒæ—¶ç»™æˆ‘ä»¬çš„ä¸šåŠ¡å¸¦æ¥ä¸¤ä¸ªå·¨å¤§çš„æ”¶ç›Š æ‹‰é«˜äº†ä¸€ä¸ªå·¨çŸ³åº”ç”¨ä¸Šé™ï¼šä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå¼€å‘ä¸€ä¸ªæ›´å·¨å‹æ›´å¼ºå¤§çš„åº”ç”¨ åŠ å¿«è¿­ä»£é€Ÿåº¦ï¼šä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´å¿«æ›´å¤šåœ°åš AB æµ‹è¯•å’ŒåŠŸèƒ½å‘å¸ƒ æ‰€è°“å¾®å‰ç«¯ï¼Œå°±æ˜¯å‰ç«¯é¢†åŸŸçš„åº”ç”¨åˆ†æ²»è§£å†³æ–¹æ¡ˆï¼Œå­—èŠ‚è·³åŠ¨çš„å¾®å‰ç«¯å®è·µä¹Ÿç»è¿‡ iframe, spa, æ¡†æ¶é˜¶æ®µï¼›åœ¨å®è·µä¸­é‡åˆ°ä¸å°‘é—®é¢˜ï¼Œä¸ºäº†è¿›ä¸€æ­¥é™ä½å¤šäººåä½œçš„æˆæœ¬ï¼Œç›®å‰è¿›å…¥ä¸€ä¸ªæ–°æ–¹æ¡ˆçš„æ¢ç´¢é˜¶æ®µã€‚ æ¥ä¸‹æ¥çœ‹ä¸‹å¾®å‰ç«¯çš„å·¥ç¨‹åŒ–å®è·µï¼Œæ–°æ–¹æ¡ˆæ˜¯å¦‚ä½•é™ä½å¤šäººå¼€å‘çš„åä½œæˆæœ¬çš„ é¦–å…ˆï¼Œé€šè¿‡å‡è½»åŸºåº§è´Ÿæ‹…ï¼Œå°†åŸºåº§åº”ç”¨ä¸ä¸šåŠ¡é€»è¾‘è§£è€¦ å…¶æ¬¡ï¼Œé‡‡ç”¨ç»†ç²’åº¦çš„ç»„åˆï¼Œåœ¨æ›´ç»†ç²’åº¦çš„æ¨¡å—ä¸Šç‹¬ç«‹å¼€å‘ã€éƒ¨ç½² æœ€åï¼Œé€šè¿‡çº¦å®šæ¨¡å—åè®®æ ‡å‡†ï¼Œæˆ‘ä»¬æ­å»ºäº†æ¨¡å—ä¸­å¿ƒï¼Œç”šè‡³å¯ä»¥ç»“åˆä½ä»£ç å¹³å°ï¼Œä»è€Œå¸¦æ¥æ›´é«˜çš„æ¨¡å—å¤ç”¨ç‡ï¼›å¹¶æ”¯æŒæ¨¡å—çº§åˆ«çš„ç°åº¦å’ŒABèƒ½åŠ›ï¼› å®ƒæ˜¯å¦‚ä½•å‡è½»åŸºåº§è´Ÿæ‹…çš„å‘¢ï¼Ÿä¼ ç»Ÿçš„å¾®å‰ç«¯ï¼Œé€šè¿‡å»ºç«‹ä¸€ä¸ªå…¬å…±çš„åŸºåº§æ¥æ‰¿è½½å…¬å…±é€»è¾‘ï¼Œè¿™ç§å¤ç”¨æ–¹å¼ï¼Œé™¤äº†å·¥å…·åº“ä»¥å¤–ï¼Œå¾€å¾€å¯¼è‡´ä¸å°‘ä¸šåŠ¡é€»è¾‘è€¦åˆåˆ°åŸºåº§ä¸­ï¼Œè¿™å¯¼è‡´åŸºåº§æ›´é¢‘ç¹çš„æ”¹åŠ¨å’Œå‘å¸ƒï¼Œæ›´å®¹æ˜“å‡ºç°æ›´å¤§çš„æ•…éšœå½±å“é¢å’Œæ›´å®¹æ˜“å¤±æ•ˆçš„ç¼“å­˜ï¼› è¿™åˆè®©å­åº”ç”¨ä»ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²é‡æ–°å›åˆ°æŸç§ç¨‹åº¦ä¸Šåœ°ç›¸äº’ä¾èµ–ï¼Œå› æ­¤ï¼Œæ–°æ–¹æ¡ˆé€šè¿‡ä¸¤ç§æ–¹å¼æ¶ˆé™¤äº†è¿™ç±»åŸºåº§çš„å­˜åœ¨ï¼Œä¸€ä¸ªæ˜¯æ¶ˆè´¹æœºåˆ¶ï¼Œå¦ä¸€ä¸ªæ˜¯å…±äº«æœºåˆ¶ï¼Œå‰è€…ä¸€èˆ¬ç”¨äºå¤ç”¨ä¸šåŠ¡é€»è¾‘ï¼Œåè€…ç”¨äºå¤ç”¨ä¸šåŠ¡æ— å…³çš„å·¥å…·åº“ é‚£ä¹ˆï¼Œæ–°æ–¹æ¡ˆçš„æœºåˆ¶æ˜¯å¦‚ä½•èµ·ä½œç”¨çš„ï¼Ÿ ä¼ ç»Ÿçš„å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œå¤šä¸ªå­åº”ç”¨ä¹‹é—´æ˜¯ç›¸å¯¹éš”ç¦»çš„ï¼Œå¾€å¾€éƒ½ä¼šé€šè¿‡ä¸€å¥—æ²™ç®±æœºåˆ¶æ¥ä¿è¯è¿™ç§éš”ç¦»æ€§ï¼› ä½†éšç€å‰ç«¯å­åº”ç”¨çš„è§„æ¨¡å¢å¤§ï¼Œäººå‘˜å¢å¤šï¼Œå¦‚æ­¤ç²—ç²’åº¦çš„éš”ç¦»åˆä¼šåè¿‡æ¥åˆ¶çº¦æ¯ä¸ªå­åº”ç”¨å†…å¤–çš„äººå‘˜åä½œï¼› å› æ­¤ï¼Œæˆ‘ä»¬æ–°çš„åº”å¯¹æ–¹å¼å°±æ˜¯é€šè¿‡æä¾›æ›´ç»†ç²’åº¦çš„æ¨¡å—æ¶ˆè´¹å’Œå…±äº«æ–¹æ¡ˆï¼Œä»è€Œè®©å¼€å‘äººå‘˜èƒ½å¤Ÿä»¥æ›´å°çš„å•ä½è¿›è¡Œç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½² æ¨¡å—åè®®æ ‡å‡†çº¦å®šäº†æ¨¡å—çš„å…ƒä¿¡æ¯ï¼Œé€šè¿‡è¯¥åè®®åœ¨å„ä¸ªå¹³å°ä¹‹é—´æµè½¬ï¼Œæ¥è¾¾åˆ°ç‰¹å®šçš„åŠŸèƒ½ æ¯”å¦‚æ„å»ºå¹³å°ä¼šæ ¹æ®é…ç½®æ–‡ä»¶æ„å»ºå‡ºè¿™ä»½åè®®æ–‡ä»¶ æ¯”å¦‚éƒ¨ç½²å¹³å°ä¼šå°†å…ƒä¿¡æ¯è½¬æˆåŒ…å«å…·ä½“ cdn åœ°å€çš„æ•°æ®ï¼Œç›´æ¥å›å¡«åˆ° html é‡Œä¸‹å‘ï¼Œè¿™æ­¥æ“ä½œä¹Ÿæ˜¯èƒ½åšåˆ°æ¨¡å—ç°åº¦å’ŒABçš„å‰æ å†æ¯”å¦‚åº”ç”¨è¿è¡Œæ—¶ä¹Ÿä¼šæ ¹æ®è¿™ä»½åè®®åŠ¨æ€åŠ è½½æ¨¡å— æœ‰äº†ç»†ç²’åº¦ç»„åˆå’Œæ¨¡å—åè®®æ ‡å‡†çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬åˆèƒ½å¤Ÿååˆ†æ–¹ä¾¿åœ°å»ºç«‹ä¸€ä¸ªåœ¨çº¿æ¨¡å—ä¸­å¿ƒï¼Œæ— è®ºæ˜¯ä¸šåŠ¡ç›¸å…³çš„ç»„ä»¶ï¼Œè¿˜æ˜¯ä¸šåŠ¡æ— å…³çš„å·¥å…·åº“ï¼Œéƒ½èƒ½ä»¥æä½çš„æˆæœ¬åœ¨å›¢é˜Ÿå†…éƒ¨ï¼Œç”šè‡³è·¨å›¢é˜Ÿå¤ç”¨ï¼› æ­¤å¤–ï¼ŒåŸºäºè¿™å¥—æœºåˆ¶ï¼Œæˆ‘ä»¬è¿˜å°è¯•äº†ä¸ä½ä»£ç å¹³å°çš„é…åˆï¼Œé€šè¿‡ä½ä»£ç å¹³å°æ­å»ºå‡ºç¬¦åˆæ¨¡å—åè®®æ ‡å‡†çš„ç»„ä»¶ï¼Œå¹¶æ³¨å†Œä¸ºåœ¨çº¿æ¨¡å—åï¼Œèƒ½å¤Ÿæå¤§çš„æé«˜ä¸šåŠ¡å¼€å‘çš„æ•ˆç‡ã€‚ è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æ¥å…¥ä¸šåŠ¡ï¼Œæ¥å…¥ä¹‹åæˆ‘ä»¬å‘ç°ä»æ„å»ºè€—æ—¶ã€éƒ¨ç½²è€—æ—¶ï¼Œç”šè‡³è¿­ä»£é€Ÿåº¦å’Œéœ€æ±‚ååé‡éƒ½æœ‰äº†æ˜¾è‘—çš„æå‡æ•ˆæœã€‚ æ¥ä¸‹æ¥åˆ†äº«ä¸‹è¯Šæ–­å·¥å…·ï¼Œå¸‚é¢ä¸Šçš„å·¥å…·å¤§å¤šé¢å‘æ„å»ºäº§ç‰©è¿›è¡Œè¯Šæ–­å’Œåˆ†æï¼Œæ— æ³•å¯¹æ„å»ºè¿‡ç¨‹è¿›è¡Œæ›´æ·±å…¥è¯Šæ–­å’Œåˆ†æï¼Œä½œç”¨ååˆ†æœ‰é™ é‚£ä¹ˆæˆ‘ä»¬è‡ªç ”çš„è¯Šæ–­å·¥å…·ï¼Œæ˜¯å¦‚ä½•æœ‰æ•ˆåœ°é˜²æ­¢åº”ç”¨åŠ£åŒ–çš„å‘¢ï¼Ÿ é¦–å…ˆï¼Œæä¾›é¢å‘æ„å»ºè¿‡ç¨‹çš„åˆ†æèƒ½åŠ›ï¼Œç”±äºè®°å½•äº†æ„å»ºè¿‡ç¨‹çš„æ•°æ®ï¼Œæˆ‘ä»¬ä¼šæœ‰æ›´ç»†ç²’åº¦å’Œæ›´ä¸°å¯Œçš„åˆ†æï¼› å…¶æ¬¡ï¼Œæä¾›ä¸€å¥—å¯æ‰©å±•çš„è§„åˆ™æœºåˆ¶ï¼Œè®©ä¸åŒçš„å‚ç›´åœºæ™¯å’Œä¸šåŠ¡åœºæ™¯èƒ½å¤Ÿæ‰©å±•è‡ªèº«çš„è§„åˆ™ï¼› æœ€åï¼Œé€šè¿‡ä¸æ ¸å¿ƒç ”å‘æµç¨‹ç»“åˆï¼Œè®©è§„åˆ™çœŸæ­£å‘ç”Ÿä½œç”¨ï¼› è¿™æ˜¯ä¸€ä»½ statoscope çš„åˆ†æç»“æœé¡µé¢ï¼Œå®ƒæ˜¯å…¸å‹é¢å‘æ„å»ºäº§ç‰©åˆ†æçš„ï¼Œå³é€šè¿‡æ¶ˆè´¹ stats.json æ¥åˆ†æäº§ç‰©ï¼› å®ƒæ²¡æœ‰ loaderã€resolverã€plugin ç­‰å’Œæ„å»ºè¿‡ç¨‹ç›¸å…³çš„åˆ†æå’Œè¯Šæ–­ï¼› è€Œæˆ‘ä»¬çš„å·¥å…·èƒ½åšåˆ°å¦‚ä¸‹ä¸€äº›èƒ½åŠ›ï¼š webpack loader æ—¶åºåˆ†æ webpack loader åˆ†æ webpack resolver åˆ†æ webpack plugin åˆ†æ bundle æ·±åº¦åˆ†æ é‚£æˆ‘ä»¬æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡ç›‘å¬æ’ä»¶é’©å­å’ŒåŠ«æŒ Loader ç­‰æ–¹å¼ä»‹å…¥æ„å»ºè¿‡ç¨‹ï¼Œå¹¶æ”¶é›†å’Œç”Ÿæˆä¸“é—¨ç”¨äºè¯Šæ–­å’Œåˆ†æåœºæ™¯çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚ä¾èµ–å›¾ã€æ¨¡å—å›¾ã€ä¸‰æ–¹åŒ…å›¾ã€æºç ã€loaderã€pluginã€resolver ç­‰æ•°æ®ï¼Œä»è€Œè·å¾—æ›´å®Œå–„çš„æ„å»ºä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»¥ä¾¿æˆ‘ä»¬åç»­è¿›è¡Œæ·±åº¦çš„è¯Šæ–­å’Œåˆ†æ æˆ‘ä»¬æä¾›äº†ä¸€äº›é»˜è®¤çš„è¯Šæ–­è§„åˆ™ï¼Œæ¯”å¦‚ é‡å¤åŒ…æ£€æŸ¥ - Duplicate Packages åŒ…è§„èŒƒè¯­å¥åŒ¹é… - Default Import Check Loader æ€§èƒ½ä¼˜åŒ– - Loader Performance Optimization æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›ä¸€å¥—å¯æ‰©å±•çš„è¯Šæ–­è§„åˆ™æœºåˆ¶ï¼Œæˆ‘ä»¬å°†é‡æ–°ç”Ÿæˆçš„æ•°æ®ç»“æ„ä½œä¸ºä¸Šä¸‹æ–‡ä¼ é€’ç»™è‡ªå®šä¹‰çš„è§„åˆ™ï¼Œä¾¿èƒ½è½»æ¾çš„åšåˆ°å¦‚ä¸‹èƒ½åŠ›ï¼š ä¾èµ–çš„å¼•ç”¨æ–¹å¼æ£€æŸ¥ ç‰¹å®šä¾èµ–çš„ç‰ˆæœ¬æ£€æŸ¥ ç¦æ­¢ä½¿ç”¨ç‰¹å®šçš„è¯­å¥ å…‰æœ‰ä¸Šè¿°ä¸¤ä¸ªèƒ½åŠ›è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜è°‹æ±‚ä¸æ ¸å¿ƒç ”å‘æµç¨‹ç»“åˆï¼Œåœ¨ CI ä¸­æ”¯æŒåŸºäºåˆ†æ”¯çš„ diff æ‹¦æˆªï¼Œä»è€Œè®©è§„åˆ™çœŸæ­£å‘ç”Ÿä½œç”¨ æ€»ç»“ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€äº›å…¸å‹çš„ä¸šåŠ¡æ”¶ç›Šæƒ…å†µ è¿™æ˜¯ç›®å‰ä¸Šè¿°å‡ ä¸ªå·¥å…·çš„æ•´ä½“è½åœ°æƒ…å†µï¼Œå…¶ä¸­ Monorepo å·¥å…·æ¥å…¥å·¥ç¨‹xä¸ªï¼Œå¾®å‰ç«¯æ´»è·ƒç”¨æˆ·yä¸ªï¼ŒBundler å¼€æºå·¥å…· Rspack z starsï¼Œè¯Šæ–­å·¥å…·çš„å‘¨ä¸‹è½½é‡è¾¾åˆ°næ¬¡ æ¥ä¸‹æ¥åšä¸€ä¸ªç®€å•çš„æ€»ç»“å’Œå±•æœ›ï¼š å½“ä¸Šè¿°ä¸€ç³»åˆ—å·¥å…·é“¾æ”¯æ’‘äº†æ›´å¤§çš„å·¥ç¨‹è§„æ¨¡ï¼Œæ›´å¤šçš„äººå‘˜è§„æ¨¡ï¼Œæ›´åŠ å¿«é€Ÿçš„æ„å»ºé€Ÿåº¦ï¼Œæ›´å¯ç»´æŠ¤çš„å‰ç«¯å·¥ç¨‹ä¹‹åï¼› æˆ‘ç›¸ä¿¡æœªæ¥ä¸€å®šä¼šå‚¬ç”Ÿå‡ºæ›´ã€å¼ºå¤§ã€çš„å‰ç«¯åº”ç”¨ï¼Œå½“è¿™ä¸ªæ›´å¼ºå¤§çš„å‰ç«¯åº”ç”¨ç»§ç»­å¢å¤§å·¥ç¨‹è§„æ¨¡ï¼Œå¢åŠ å›¢é˜Ÿäººå‘˜ï¼Œæ¸æ¸åœ°æ‹‰ä½äº†æ„å»ºé€Ÿåº¦å’Œå¯ç»´æŠ¤æ€§ é‚£æœªæ¥å¿…å°†ä¼šå¯¹è¿™äº›å·¥å…·æå‡ºæ›´é«˜çš„è¦æ±‚ï¼Œä»è€Œå¸¦åŠ¨æ•´ä¸ªå‰ç«¯å·¥å…·é“¾å†ä¸€æ¬¡é©æ–° è°¢è°¢ï¼Œè¿™å°±æ˜¯æˆ‘ä»Šå¤©å¸¦æ¥çš„åˆ†äº« PPT é™„ä»¶","link":"/2023/06/17/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E7%9A%84%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%AE%9E%E8%B7%B5/"},{"title":"å®ä¹ æ€»ç»“","text":"ä¸Šæ¥ã€Šä¸è¦å«æˆ‘ç¨‹åºçŒ¿,æˆ‘æ˜¯å‰ç«¯å¼€å‘å·¥ç¨‹ç‹®ã€‹ï¼Œè¯è¯´æˆ‘å»äº†æŒ–è´¢å®ä¹ ï¼Œæ­¤å¤„çœç•¥ä¸€ä¸‡å­—ï¼Œç„¶åæˆ‘å°±é¡ºåˆ©è½¬æ­£ï¼Œæ¥ç€å›å­¦æ ¡æ’°å†™æ¯•ä¸šè®ºæ–‡äº†ã€‚ ä¸Šæ¥ã€Šä¸è¦å«æˆ‘ç¨‹åºçŒ¿,æˆ‘æ˜¯å‰ç«¯å¼€å‘å·¥ç¨‹ç‹®ã€‹ï¼Œè¯è¯´æˆ‘å»äº†æŒ–è´¢å®ä¹ ï¼Œæ­¤å¤„çœç•¥ä¸€ä¸‡å­—ï¼Œç„¶åæˆ‘å°±é¡ºåˆ©è½¬æ­£ï¼Œæ¥ç€å›å­¦æ ¡æ’°å†™æ¯•ä¸šè®ºæ–‡äº†ã€‚ çœç•¥ä¸€ä¸‡å­—ï¼ˆéƒ¨åˆ†å†…å®¹ï¼‰ æ‰¾å‘€æ‰¾å‘€æ‰¾å·¥ä½œå½“åˆåšçš„é€‰æ‹©æ˜¯å¤šä¹ˆæ­£ç¡®ï¼Œä¸€è·¯é¡ºé£é¡ºæ°´å°±æ‹¿åˆ°offerï¼ŒåŸºå‹ä»¬éƒ½è¿˜æ²¡ç€è½çš„æ—¶å€™ï¼Œæˆ‘å·²ç»å†³å®šç•™åœ¨æŒ–è´¢äº†ï¼ˆæŒ–è´¢å†³å®šç•™æˆ‘äº†ï¼‰ã€‚å¾…é‡æŒºæ»¡æ„ï¼Œå›¢é˜Ÿè¶…niceï¼Œæˆ‘å°±æ²¡æœ‰å†å‡ºå»æ‰¾å…¶ä»–å…¬å¸äº†ã€‚ å½“ç„¶ï¼Œè½¬æ­£ä¹‹å‰ï¼Œæˆ‘è¿˜æ˜¯è¯•äº†å‡ å®¶çš„ï¼›åšè¿‡é‚£ä¹ˆå¤šå®¶ç¬”è¯•ï¼Œå”¯ä¸€è¿›å…¥é¢è¯•çš„å°±æ˜¯é˜¿é‡Œäº†ï¼Œç„¶åä½ æ‡‚çš„ï¼Œé˜¿é‡Œå®ä¹ å®å®ä»¬éƒ½æ‹¥æŠ±â€œå˜åŒ–â€äº†ï¼Œæ¥ç€å®å®ä»¬å°±å‡ºæ¥æ‹¥æŠ±æˆ‘ä»¬äº†ï¼Œå¹¶æˆåŠŸè®©æˆ‘å¸ä¸€ä¸ªå‰ç«¯å®ä¹ ç”Ÿæ‹¥æŠ±äº†â€œå˜åŒ–â€ã€‚é˜¿é‡Œçš„é¢è¯•ï¼Œå°½é—®äº›å‰ç«¯å·¥ç¨‹åŒ–çš„é—®é¢˜ï¼Œäº‹å®ä¸Šï¼Œé‚£æ—¶æˆ‘è¿˜æ²¡æ¥è§¦åˆ°ï¼Œä¸€é—®ä¸‰ä¸çŸ¥å“ˆï¼Œåæ­£å°±æ˜¯å»æ‰“é…±æ²¹çš„ã€‚ å†…æ¨è¿›å…¥é¢è¯•çš„æœ‰ä¸¤å®¶ï¼Œä¸€å®¶æ˜¯è˜‘è‡è¡—ï¼Œä¸€å®¶æ˜¯51ä¿¡ç”¨å¡ç®¡å®¶ã€‚è˜‘è‡è¡—é¡ºåˆ©è¿›å…¥äº†äºŒé¢ï¼Œç„¶åä¹Ÿæ²¡æ€ä¹ˆé—®ï¼ŒæœŸé—´é—®æˆ‘èŒä¸šè§„åˆ’ä»€ä¹ˆçš„ï¼Œæˆ‘å°±blablaè¯´äº†ä¸€å¤§å †æˆ‘æƒ³å­¦çš„ï¼Œç„¶åæˆ‘åˆæ²¡æ—¶é—´ä»€ä¹ˆçš„ï¼Œæ‰€ä»¥é¢è¯•å®˜é—®æˆ‘ä½ åŠ ç­å—ï¼Ÿæˆ‘è¯´ä¸æ€ä¹ˆåŠ ç­ï¼Œâ€œé‚£ä½ å›åˆ°å®¶ï¼Œä¸ºä»€ä¹ˆä¸è‡ªå­¦â€ï¼Œå°±æ²¡ç„¶åäº†ï¼Œå…¶å®æˆ‘å›å®¶æ˜¯æœ‰å­¦ä¹ çš„ï¼Œæˆ‘å½“æ—¶æƒ³è¡¨è¾¾çš„æ˜¯æˆ‘æƒ³å­¦é‚£äº›ï¼Œå¯æ˜¯æˆ‘åœ¨å¿™ç€å­¦å…¶ä»–çš„ï¼Œæ€ªæˆ‘å’¯ã€‚ä¸‹æ¥¼é—®æˆ‘ä½•æ—¶èƒ½æ¥å®ä¹ ï¼ŒäºŒé€¼å¦‚æˆ‘ï¼šâ€œæ˜å¹´å…­æœˆä»½å§â€ï¼Œå—¯ï¼Œè¿™ä¸‹çœŸçš„æ²¡æœ‰ç„¶åäº†ã€‚ 51ä¿¡ç”¨å¡çœŸæ˜¯æ‰æ¸£å¤©ï¼Œ10ç‚¹é€šçŸ¥æˆ‘åˆ°ä»–é‚£é¢è¯•ï¼Œç„¶å10.30æ‰åŒ†åŒ†å¿™å¿™è·Ÿæˆ‘ç¢°ä¸Šå¤´ï¼›è·Ÿæˆ‘èŠæ„Ÿæƒ³â€¦.ç„¶åæˆ‘å°±å‘ç°è¿™å§ä»¬æ˜¯hrï¼Œæ‰€ä»¥æ²¡æœ‰æŠ€æœ¯é¢ï¼Ÿç„¶åä¹Ÿé—®äº†æˆ‘ä»€ä¹ˆæ—¶å€™èƒ½æ¥å®ä¹ ï¼Œå†ç»­äºŒé€¼ï¼šâ€œæ˜å¹´å…­æœˆä»½å§â€ï¼Œå…¶å®æˆ‘ä¸»è¦åœ¨ç­‰æŒ–è´¢ï¼Œå¯æƒœæŒ–è´¢è½¬æ­£é¢è¯•å¤ªæ™šå•¦ï¼ æŒ–è´¢çš„è½¬æ­£é¢è¯•ï¼Œåº”è¯¥æ˜¯èµ°ä¸ªè¿‡åœºï¼ŒCTOé¢çš„ï¼Œçœ‹æˆ‘ç®€å†ä¸Šå†™çš„å…³é”®å­—ä¸­æœ‰â€œLinuxâ€ï¼Œç„¶åå°±å»æ‹¿äº†å°macï¼Œé—®äº†ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼Œæ¯”å¦‚psï¼Œæ¯”å¦‚viï¼Œå†æ¯”å¦‚grepï¼›ä»–é—®æˆ‘å¹³æ—¶æ˜¯ç”¨Linuxå—ï¼Ÿæˆ‘è¯´æ˜¯çš„ï¼Œâ€œå‰ç«¯å±Œä¸ä¸éƒ½ç”¨macå—ï¼Ÿâ€ï¼Œå†…å¿ƒosï¼šäººå®¶æ‰ä¸æ˜¯å±Œä¸å‘¢ï¼ˆæˆ‘åªæ˜¯æ²¡é’±ï¼‰ï¼Œå¯¹äº†ï¼Œæˆ‘ç°åœ¨æ˜¯æˆ‘å¸å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰macçš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œéšæ„æ„Ÿå—ä¸‹ã€‚ å®ä¹ ç»å†åˆšæ¥æŒ–è´¢çš„æ—¶å€™ï¼Œä¸€åˆ‡éƒ½æ˜¯é‚£ä¹ˆæ–°é²œï¼Œæˆ‘è¿˜æ˜¯å¾ˆå±Œçš„ï¼Œä»€ä¹ˆgitå•Šï¼Œsvnå•Šï¼Œideaå•Šï¼Œvmå•Šï¼Œavalonå•Šï¼Œmvvmå•Šï¼Œgulpå•Šï¼Œwebpackå•Šæˆ‘éƒ½æ²¡å¬è¿‡ï¼Œå“ˆå“ˆ~è¿˜æœ‰ä¸€ä¸ªæœ‰æ±‚å¿…åº”çš„èµ„æ·±å‰ç«¯å°å“¥åœ¨æˆ‘æ—è¾¹ï¼Œéšæ—¶éƒ½å¯ä»¥è¯·æ•™ï¼Œè¿›æ­¥æ˜¯éå¸¸æ˜æ˜¾çš„ã€‚ æœŸé—´åšäº†å¾ˆå¤šæœ‰è¶£çš„é¡¹ç›®ï¼Œéƒ½ä¸å¤§ï¼Œä½†æ˜¯æŒºæœ‰æˆå°±æ„Ÿçš„ï¼Œæœ‰ä¸ªå¤§å’–ç§€é¡¹ç›®çš„æ´»åŠ¨é¡µé¢ç”Ÿæˆç®¡ç†ç³»ç»Ÿï¼Œç°åœ¨åˆå¢åŠ äº†æœ‰äº›å°éœ€æ±‚ï¼Œæ‰“ç®—åšæˆå‘å¸ƒå„ç§ç±»ä¼¼æ´»åŠ¨çš„ç®¡ç†ç³»ç»Ÿã€‚è¿˜æœ‰ä¸€ä¸ªè®©æˆ‘ç´¯æ­»ç´¯æ´»çš„åŒåä¸€æ´»åŠ¨ä¸»ä¼šåœºï¼Œå€’ä¸æ˜¯æœ‰å¤šéš¾ï¼Œä¸»è¦æ˜¯å¼€å‘äººå‘˜éƒ½åœ¨ä¸Šæµ·é‚£è¾¹ï¼Œè€Œè´Ÿè´£å‰ç«¯çš„æˆ‘ä¸€ä¸ªäººåœ¨æ­å·ï¼Œæ²Ÿé€šæä¸ºä¸ä¾¿ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œåˆè¦å…¼å®¹æˆ‘å¸å„ä¸ªappï¼Œä½†æ˜¯åšæˆäº†ï¼Œè¿˜æ˜¯è›®å¥½ç©çš„ã€‚ ç¬¬ä¸€ç¬”å®ä¹ å·¥èµ„å…¥è´¦çš„æ—¶å€™è¿˜æ˜¯å¾ˆæ¿€åŠ¨çš„ï¼Œå¿ƒæƒ³ï¼šæˆ‘ä¹Ÿæ˜¯èƒ½å¤Ÿå…»æ´»è‡ªå·±äº†ï¼Œè¿˜è·Ÿæˆ‘å¦ˆè¯´äº†ï¼Œä»¥åä¸ç”¨ç»™æˆ‘å¯„ç”Ÿæ´»è´¹å•¦ã€‚è¿˜æœ‰ä»¥åæˆ‘å°±è¦æ‰æ ¹æ­å·å•¦~å¤§çˆ±æ­åŸã€‚ å›æ ¡ç’ç€å¯¼å¸ˆå‡ºæ¥å®ä¹ ï¼Œå·²æœ‰æ•´æ•´å››ä¸ªæœˆåŠäº†ï¼Œå››ä¸ªæœˆçš„æ—¶å€™ï¼Œå¯¼å¸ˆä¼°è®¡å‘ç°ä»€ä¹ˆäº†ï¼Œåœ¨ç”µè¯é‡Œç¬¬ä¸€å¥å°±é—®æˆ‘ï¼šâ€œxxï¼Œå®ä¹ å¾—æ€ä¹ˆæ ·ï¼Ÿâ€ï¼Œçœ‹æ¥åˆ°äº†ä¸å¾—ä¸å›æ ¡çš„æ—¶å€™äº†ï¼Œäºæ˜¯è¯·äº†ä¸€ä¸ªé•¿é•¿é•¿çš„å‡å°±å›åˆ°æˆ‘æ ¡ï¼Œç€æ‰‹å‡†å¤‡æ’°å†™â€œä¼˜ç§€æ¯•ä¸šè®ºæ–‡â€å“ˆï¼Œå¼€ç©ç¬‘~","link":"/2015/11/18/%E5%AE%9E%E4%B9%A0%E6%80%BB%E7%BB%93/"},{"title":"æˆ‘ç»™æˆ‘çš„ Obsidian å®è·µå†™äº†ä¸€ä¸ªæ’ä»¶","text":"ä¸º ä¸€ç§å®ç”¨æ–°å‹ Obsidian å®è·µä¹‹æ„å»ºæˆ‘çš„ç¬¬äºŒå¤§è„‘ ğŸ§  å®ç° Obsidian æ’ä»¶ï¼ æœ¬æ–‡å†…å®¹å·²ç»è¿‡æ—¶ï¼Œæ›´å¤šå†…å®¹è¯·å‚è€ƒå®˜ç½‘ LifeOSï¼ èƒŒæ™¯æœ€è¿‘å°†è¿™ä¸ªæˆ‘çš„ Obsidian å®è·µï¼ˆä¸€ç§å®ç”¨æ–°å‹ Obsidian å®è·µä¹‹æ„å»ºæˆ‘çš„ç¬¬äºŒå¤§è„‘ ğŸ§ ï¼‰åˆ†äº«åï¼Œå¸®åŠ©åˆ°äº†å‡ ä¸ªäºº ä¸€ä¸ªä¸è®¤è¯†çš„åŒäº‹ç”¨ä¸Šåï¼Œè¡¨ç¤ºã€åƒå¼€å¯äº†æ–°å¤§é™†ã€ï¼Œå¹¶ç»™æˆ‘å‘äº†ä¸ªçº¢åŒ…ï¼Œè¯´è¯·æˆ‘å–å’–å•¡ ä¸€ä¸ªä¸è®¤è¯†çš„ç½‘å‹ç”¨ä¸Šåï¼Œè¡¨ç¤ºã€æ»¡è¶³äº†å¥¹å¯¹ä¸ªäººçŸ¥è¯†ç®¡ç†çš„å…¨éƒ¨éœ€æ±‚ã€ï¼Œç”šè‡³è¿˜ä¸ºæ­¤å†™äº†ä¸€ç¯‡ä¸Šæ‰‹æ–‡æ¡£ å½“ç„¶ï¼Œé™¤äº†é™Œç”Ÿäººä»¥å¤–ï¼Œæˆ‘ä¹Ÿæ¨èç»™ä¸å°‘ç†Ÿæ‚‰çš„åŒäº‹å’Œæœ‹å‹ï¼Œæ”¶åˆ°äº†ä¸å°‘åé¦ˆï¼Œæ¯”å¦‚ä¸Šæ‰‹æˆæœ¬é«˜ã€æ›´æ–°éš¾ä»¥è·Ÿè¿›ã€å…³ç³»å›¾è°±ä¸­æ— æ³•åŒºåˆ†é¡¹ç›®ï¼ˆæ‰€æœ‰éƒ½æ˜¯ README.mdï¼‰ç­‰ã€‚ ç›®æ ‡å› æ­¤è€ƒè™‘åˆ°ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘å†³å®šå®ç°ä¸€ä¸ªæ’ä»¶ï¼Œä¸»è¦æœ‰å¦‚ä¸‹å‡ ä¸ªç›®æ ‡ é™ä½ä¸Šæ‰‹æˆæœ¬ï¼Œç‰¹åˆ«é’ˆå¯¹éç¨‹åºå‘˜ç¾¤ä½“ æ›´æ–°åŠæ—¶è§¦è¾¾ï¼Œæ— è®ºæ˜¯æ–°åŠŸèƒ½è¿˜æ˜¯é—®é¢˜ä¿®å¤ å¢åŠ å—ä¼—ï¼Œä»¥è·å¾—åé¦ˆï¼Œå…±å»ºå¹¶å®Œå–„æµç¨‹ æ–‡æœ«æˆ‘è¿˜ä»‹ç»äº†ä¸€ç§æ¸è¿›çš„ä½¿ç”¨è¿™ä¸ªæ’ä»¶çš„æ–¹å¼ï¼ æ—§çš„æ–¹å¼åœ¨æœªä½¿ç”¨æ’ä»¶çš„ç¤ºä¾‹æ¨¡ç‰ˆé‡Œï¼Œå­˜åœ¨å¦‚ä¸‹å‡ ç±»çš„ã€ç¨‹åºä»£ç ã€ è„šæœ¬ç±» æ—¥æœŸè§£æ date æ ¹æ®å‘¨æœŸç¬”è®°çš„æ–‡ä»¶åï¼Œè§£æå‡ºæ—¥æœŸ æ ¹æ®è§£æå‡ºçš„æ—¥æœŸï¼Œè·å–æ—¥æœŸèŒƒå›´ æ ¹æ®è§£æå‡ºçš„æ—¥æœŸï¼Œè·å–æ–‡ä»¶åˆ—è¡¨ ä»»åŠ¡æŸ¥è¯¢ task æ ¹æ®æ—¥æœŸèŒƒå›´ï¼Œè·å–ä»»åŠ¡åˆ—è¡¨ é¡¹ç›®æŸ¥è¯¢ project è·å–å½“å‰é¡¹ç›®åˆ—è¡¨çš„å¿«ç…§ æ ¹æ®æ—¥æœŸèŒƒå›´å†…ï¼Œè·å–é¡¹ç›®åˆ—è¡¨ è®¡ç®—æ—¥æœŸèŒƒå›´å†…ï¼Œé¡¹ç›®çš„è€—æ—¶åŠå…¶å æ¯” é¢†åŸŸæŸ¥è¯¢ area è·å–å½“å‰é¢†åŸŸåˆ—è¡¨çš„å¿«ç…§ æ ¹æ®æ—¥æœŸèŒƒå›´å†…ï¼Œè·å–é¢†åŸŸåˆ—è¡¨ è§†å›¾ç±» ä»»åŠ¡å®Œæˆè§†å›¾ taskDoneList æ”¾åˆ°å‘¨æœŸç¬”è®°ä¸­ï¼Œå¯è·å–å½“å‰æ—¥æœŸèŒƒå›´å†…å®Œæˆçš„ä»»åŠ¡åˆ—è¡¨ ä»»åŠ¡è®°å½•è§†å›¾ taskRecordList æ”¾åˆ°å‘¨æœŸç¬”è®°ä¸­ï¼Œå¯è·å–å½“å‰æ—¥æœŸèŒƒå›´å†…æ”¶é›†çš„ä»»åŠ¡åˆ—è¡¨ é¡¹ç›®åˆ—è¡¨è§†å›¾ projectList æ”¾åˆ°å‘¨æœŸç¬”è®°ä¸­ï¼Œå¯è·å–å½“å‰æ—¥æœŸèŒƒå›´å†…é¡¹ç›®è€—æ—¶çš„å æ¯” é¢†åŸŸåˆ—è¡¨è§†å›¾ areaList æ”¾åˆ°å‘¨æœŸç¬”è®°ä¸­ï¼Œå¯è·å–å½“å‰æ—¥æœŸèŒƒå›´å†…é¢†åŸŸåˆ—è¡¨ ç›´æ¥å°†ä»£ç è·Ÿéšç¤ºä¾‹æ¨¡ç‰ˆè¾“å‡ºç»™ç”¨æˆ·ï¼Œè¿™å¤§å¤§å¢åŠ äº†ç”¨æˆ·çš„ä¸Šæ‰‹æˆæœ¬ï¼Œä¸”ç”¨æˆ·æ— æ³•æ›´æ–°è¿™äº›è„šæœ¬ã€‚ æ–°çš„æ–¹å¼å› æ­¤æˆ‘å†³å®šå®ç°ä¸€ä¸ªæ’ä»¶å°è£…ä¸Šè¿°ä¸¤ç±»ã€ç¨‹åºä»£ç ã€ï¼Œé€šè¿‡æä¾›ã€markdown ä»£ç å—ã€çš„æ–¹å¼æä¾›ã€è§†å›¾ã€ï¼Œè¿™æ ·ç”¨æˆ·åªè¦ä¼š Markdownï¼Œå°±èƒ½è¯»æ‡‚å¹¶ä½¿ç”¨ï¼Œé‚£ä¹ˆæˆ‘çš„æ’ä»¶å®ç°äº†å“ªäº›è§†å›¾å‘¢ï¼Ÿ åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæåˆ°æˆ‘çš„å®è·µæœ‰ä¸¤ä¸ªä¸Šä¸‹æ–‡ï¼Œè®©æˆ‘ä¿æŒèšç„¦ ä¸€ä¸ªæ˜¯åŸºäºæ—¶é—´çš„ï¼ˆå‘¨æœŸç¬”è®°ï¼‰ï¼Œå³æˆ‘åˆ°è¾¾æŸä¸ªæ—¶é—´èŠ‚ç‚¹ï¼Œæˆ‘å°±åŸºäºå¯¹åº”å‘¨æœŸç¬”è®°ä½œä¸šï¼Œä¸”ç¬”è®°ä¸­æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼› å¦ä¸€ä¸ªæ˜¯åŸºäºä¸»é¢˜çš„ï¼ˆPARAï¼‰ï¼Œå³æˆ‘æƒ³å¯¹æŸä¸ªä¸»é¢˜è¿›è¡Œè°ƒæŸ¥ç ”ç©¶çš„æ—¶å€™ï¼Œæˆ‘å°±åŸºäºå¯¹åº”ä¸»é¢˜çš„ç´¢å¼•ï¼ˆREADME.mdï¼‰ä½œä¸šï¼Œä¸”ç¬”è®°ä¸­å·²ç»æ”¶é›†äº†ä¸å°‘ä¸Šä¸‹æ–‡ï¼› å› æ­¤ï¼Œæ’ä»¶éœ€è¦å®ç°çš„è§†å›¾ä¹Ÿæ˜¯åŸºäºè¿™ä¸¤ä¸ªä¸Šä¸‹æ–‡ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä¸€ç¯‡æœˆè®°ï¼ˆ2023-07ï¼‰ï¼Œå®ƒæ‰€æ‹¥æœ‰çš„ä¸Šä¸‹æ–‡åº”åŒ…å«7æœˆä»½æ‰€æœ‰çš„æ—¥è®°å’Œå‘¨è®°å†…çš„ä»»åŠ¡ï¼ˆç›®å‰åªæœ‰ä»»åŠ¡ï¼Œä½†æ˜¯æˆ‘è§‰å¾—å¯ä»¥æœ‰å…¶å®ƒçš„ï¼‰ï¼›å†ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä¸€ä¸ª PARA çš„é¡¹ç›®ï¼ˆåˆ†äº«-2023-WOT åˆ†äº«ä¼šï¼‰ï¼Œå®ƒæ‰€æ‹¥æœ‰çš„ä¸Šä¸‹æ–‡åº”åŒ…å«æ‰€æœ‰è¢«æ‰“ä¸Š #WOT æ ‡ç­¾çš„ä»»åŠ¡å’Œè®°å½•ï¼› ç›®å‰æ’ä»¶æä¾›çš„è§†å›¾æœ‰å¦‚ä¸‹ä¸‰å¤§ç±»ï¼š æ ¹æ®æ—¶é—´ä¸Šä¸‹æ–‡æŸ¥è¯¢å³ä¸‹é¢åŒä¸€ä¸ªä»£ç å—ï¼Œæ”¾åœ¨ä¸åŒçš„å‘¨æœŸç¬”è®°ä¸­ï¼ˆæœˆè®°ã€å‘¨è®°ã€æ—¥è®°ï¼‰ï¼Œå‡ä¼šè§£æå¹¶è·å¾—å¯¹äºæ—¶é—´èŒƒå›´å†…çš„ã€å®Œæˆä»»åŠ¡åˆ—è¡¨ï¼ˆTaskDoneListByTimeï¼‰ã€ã€ã€è®°å½•ä»»åŠ¡åˆ—è¡¨ï¼ˆTaskRecordListByTimeï¼‰ã€ã€ã€æ¶‰åŠçš„é¡¹ç›®åˆ—è¡¨ï¼ˆProjectListByTimeï¼‰ã€ã€ã€æ¶‰åŠçš„é¢†åŸŸåˆ—è¡¨ï¼ˆAreaListByTimeï¼‰ã€ã€‚ 123```PeriodicPARATaskDoneListByTime``` 123```PeriodicPARATaskRecordListByTime``` 123```PeriodicPARAProjectListByTime``` 123```PeriodicPARAAreaListByTime``` æ ¹æ® PARA ä¸Šä¸‹æ–‡æŸ¥è¯¢å³ä¸‹é¢åŒä¸€ä¸ªä»£ç å—ï¼Œæ”¾åœ¨ä¸åŒçš„ PARA ç›®å½•çš„ README.md ä¸­ï¼ˆæ¯”å¦‚ 1. Projects/åˆ†äº«-2023-WOT åˆ†äº«ä¼š/README.mdï¼‰ï¼Œå‡ä¼šæŸ¥è¯¢å¹¶è·å– README.md å£°æ˜çš„ Metadata tags å­—æ®µï¼Œå¹¶æ ¹æ®è¿™äº› tag æŸ¥è¯¢å‡ºã€æ‰“ä¸Šè¯¥ tag çš„ä»»åŠ¡åˆ—è¡¨ï¼ˆTaskListByTagï¼‰ã€ã€ã€æ‰“ä¸Šè¯¥ tag çš„è®°å½•åˆ—è¡¨ï¼ˆBulletListByTagï¼‰ã€ 123```PeriodicPARATaskListByTag``` 123```PeriodicPARABulletListByTag``` æ ¹æ®ç›®å½•æŸ¥è¯¢ä¸ºäº†æ€»è§ˆå½“å‰ PARAï¼Œè¿˜æœ‰ä¸€ç±»åŸºäºç›®å½•çš„è§†å›¾ï¼Œæ¯”å¦‚æŸ¥è¯¢ã€å½“å‰é¡¹ç›®ç›®å½•ä¸‹çš„æ‰€æœ‰é¡¹ç›®ï¼ˆProjectListByFolderï¼‰ã€ã€ã€å½“å‰é¢†åŸŸç›®å½•ä¸‹çš„æ‰€æœ‰æœ‰é¢†åŸŸï¼ˆAreaListByFolderï¼‰ã€ã€ã€å½“å‰èµ„æºç›®å½•ä¸‹çš„æ‰€æœ‰æœ‰èµ„æºï¼ˆResourceListByFolderï¼‰ã€ã€ã€å½“å‰å½’æ¡£ç›®å½•ä¸‹çš„æ‰€æœ‰æœ‰å½’æ¡£ï¼ˆArchiveListByFolderï¼‰ã€ 123```PeriodicPARAProjectListByFolder``` 123```PeriodicPARAAreaListByFolder``` 123```PeriodicPARAResourceListByFolder``` 123```PeriodicPARAArchiveListByFolder``` é™¤äº†ä¸Šè¿°è§†å›¾ï¼Œæ’ä»¶è¿˜æä¾›äº†åœ¨å‘¨æœŸç¬”è®°æ¨¡ç‰ˆä¸­ä½¿ç”¨çš„è¾…åŠ©å‡½æ•°ï¼Œç›®å‰åªæœ‰ä¸€ä¸ªï¼Œå³ç”ŸæˆæŒ‡å®šç›®å½•ä¸‹çš„ README.md æ–‡ä»¶åˆ—è¡¨ï¼Œæ¯”å¦‚ æ¨¡ç‰ˆä¸­çš„å¦‚ä¸‹è¯­å¥ 1&lt;% PeriodicPARA.Project.snapshot() %&gt; å°†ä¼šæ›¿æ¢ä¸º 121. [[1. Projects/x-project/README|x-project]]2. [[1. Projects/y-project/README|y-project]] è¿™æ ·é¡¹ç›®åˆ—è¡¨å°†åœ¨æ—¥è®°ç¬”è®°åˆ›å»ºæ—¶ï¼Œè¢«ä½œä¸ºå¿«ç…§å›ºåŒ–ä¸‹æ¥ï¼Œæœ‰å‡ ä¸ªä½œç”¨ ä¿ç•™æ¯ä¸ªé¡¹ç›®éƒ½ç»å†äº†å“ªäº›æ—¥å­ï¼Œè€Œä¸”èƒ½æ‰‹åŠ¨ç»Ÿè®¡æ¯æ—¥é¡¹ç›®è€—æ—¶ æœªæ¥åŸºäºæ—¥è®°èƒ½ç»Ÿè®¡å‘¨è®°ã€æœˆè®°ç­‰æ—¶é—´èŒƒå›´å†…ï¼Œéƒ½æœ‰å“ªäº›é¡¹ç›®ï¼Œä¹Ÿèƒ½ç»Ÿè®¡æ¯å‘¨ã€æ¯æœˆçš„é¡¹ç›®è€—æ—¶ å¦‚ä½•æ¸è¿›ä½¿ç”¨è¿™å¥—ç³»ç»Ÿï¼Ÿåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæåˆ°æˆ‘çš„å®è·µæ˜¯æœ‰ä¸¤å¥—ç³»ç»Ÿçš„ï¼Œä¸€ä¸ªæ˜¯å‘¨æœŸç¬”è®°ï¼Œå¦ä¸€ä¸ªæ˜¯ PARAï¼›åæ¥æˆ‘å‘ç°ï¼Œä¸€ä¸Šæ¥å°±ä¸¤ä¸ªä¸€èµ·å®è·µï¼Œå…¶å®ä¸Šæ‰‹æˆæœ¬æŒºé«˜ï¼Œç‰¹åˆ«æ˜¯ä»æœªä½¿ç”¨è¿‡ Obsidianï¼Œä¸”ä¸äº†è§£ PARA çš„ç”¨æˆ·ï¼Œæˆ‘å¯¹è¿™ç±»ç”¨æˆ·çš„å»ºè®®æ˜¯ï¼Œä½ å¤§å¯å…ˆåªä½¿ç”¨å‘¨æœŸç¬”è®°ï¼ŒæŠŠæ¨¡ç‰ˆä¸­å…³äº PARA çš„ä¸€åˆ‡éƒ½å‰”é™¤ï¼Œè¿™æ ·ä½ ä»èƒ½äº«å—åˆ°ã€DailyLogã€ä»¥åŠã€åŸºäºæ—¶é—´çš„ä¸Šä¸‹æ–‡ã€ï¼Œå³ä½ åªç®¡æ¯å¤©è®°å½•æ—¥è®°ï¼Œå‰©ä½™çš„æ±‡æ€»å’Œå›é¡¾éƒ½äº¤ç»™ã€å‘¨è®°ã€ã€ã€æœˆè®°ã€ã€ã€å­£è®°ã€ã€ã€å¹´è®°ã€ï¼Œç­‰ä½ å®è·µä¸‹æ¥æœ‰è‡ªå·±çš„çœ‹æ³•å’Œæ„Ÿè§‰çš„æ—¶å€™ï¼Œä½ å¯ä»¥è€ƒè™‘è‡ªé¡¶å‘ä¸‹åœ¨ã€å‘¨è®°ã€å’Œã€æœˆè®°ã€ä¸­å®‰æ’ä»»åŠ¡ï¼Œåœ¨ã€å­£è®°ã€ã€ã€å¹´è®°ã€è®¾å®šç›®æ ‡ï¼ ä¸‹ä¸€æ­¥ï¼Ÿæˆ‘æœ¬äººåœ¨ä½¿ç”¨äº†è¿™å¥—æµç¨‹åï¼ŒçœŸçš„æ”¶è·å¾ˆå¤§ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘èƒ½æ—¥å¤ä¸€æ—¥åœ°ç…§ç€è¿™ä¸ªå®è·µçš„åŸå› ï¼å› æ­¤ï¼Œæˆ‘å¸Œæœ›æœ‰æ›´å¤šçš„ç”¨æˆ·èƒ½å°è¯•è¿™å¥—ç³»ç»Ÿï¼Œä¸€èµ·å…±åˆ›ï¼Œè®©è¿™å¥—ç³»ç»Ÿæ›´å¿«åœ°è¿­ä»£ï¼Œä¸ä»…èƒ½è®©æˆ‘å—ç›Šï¼Œä¹Ÿèƒ½è®©å¤§å®¶å—ç›Šï¼ ä¸‹é¢æ˜¯æˆ‘å‘å¸ƒ ä¸Šä¸€ç¯‡æ–‡ç«  æ–‡ç« åï¼Œæ”¶åˆ°çš„åé¦ˆæ‰€åšçš„å¾®å°å·¥ä½œ å¼€å‘æ’ä»¶ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ï¼Œä¸ºå‘¨æœŸç¬”è®°å’Œ PARA çš„æä¾›æŸ¥è¯¢è§†å›¾ï¼Œå°†æ‰€æœ‰å¤æ‚çš„æŸ¥è¯¢è¯­å¥å±è”½ å…³ç³»å›¾è°±ä¼˜åŒ–ï¼Œå³åœ¨ PARA ç›®å½•ä¸‹æ”¯æŒ XXX.README.md ä½œä¸ºç´¢å¼•ï¼Œå¦åˆ™æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½å°†æ˜¯ README å•ä¸€äº‹å®æ¥æºï¼Œç”¨æˆ·åªéœ€è¦è®¾ç½®å…ƒä¿¡æ¯ï¼Œæ’ä»¶è´Ÿè´£è¯»å–","link":"/2023/07/16/%E6%88%91%E7%BB%99%E6%88%91%E7%9A%84%20Obsidian%20%E5%AE%9E%E8%B7%B5%E5%86%99%E4%BA%86%E4%B8%80%E4%B8%AA%E6%8F%92%E4%BB%B6/"},{"title":"æ’æŸ¥ Node.js æœåŠ¡å†…å­˜æ³„æ¼ï¼Œæ²¡æƒ³åˆ°ç«Ÿæ˜¯å®ƒï¼Ÿ","text":"å›¢é˜Ÿæœ€è¿‘å°†ä¸¤ä¸ªé¡¹ç›®è¿ç§»è‡³ degg 2.0 ä¸­ï¼Œä¸¤ä¸ªé¡¹ç›®å‡å‡ºç°æ¯”è¾ƒä¸¥é‡çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Œæ­¤å¤„ä»¥æœ¬äººç»´æŠ¤çš„åŸ‹ç‚¹æœåŠ¡ä¸ºä¾‹è¿›è¡Œæ’æŸ¥ã€‚æœåŠ¡ä¸Šçº¿åå†…å­˜å¢é•¿å¦‚ä¸‹å›¾ï¼Œå…¶ä¸­çº¢æ¡†ä¸º degg 2.0 çº¿ä¸Šè¿è¡Œçš„æ—¶é—´çª—å£ï¼Œåœ¨çŸ­çŸ­ 36 å°æ—¶å†…ï¼Œå†…å­˜å·²ç»å¢é•¿åˆ° 50%ï¼Œè€Œå¹³æ—¶å†…å­˜ç¨³å®šåœ¨ 20%-30%ï¼Œå¯çŸ¥åä¹‹å…«ä¹å‡ºç°äº†å†…å­˜æ³„æ¼ã€‚ èƒŒæ™¯å›¢é˜Ÿæœ€è¿‘å°†ä¸¤ä¸ªé¡¹ç›®è¿ç§»è‡³ degg 2.0 ä¸­ï¼Œä¸¤ä¸ªé¡¹ç›®å‡å‡ºç°æ¯”è¾ƒä¸¥é‡çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Œæ­¤å¤„ä»¥æœ¬äººç»´æŠ¤çš„åŸ‹ç‚¹æœåŠ¡ä¸ºä¾‹è¿›è¡Œæ’æŸ¥ã€‚æœåŠ¡ä¸Šçº¿åå†…å­˜å¢é•¿å¦‚ä¸‹å›¾ï¼Œå…¶ä¸­çº¢æ¡†ä¸º degg 2.0 çº¿ä¸Šè¿è¡Œçš„æ—¶é—´çª—å£ï¼Œåœ¨çŸ­çŸ­ 36 å°æ—¶å†…ï¼Œå†…å­˜å·²ç»å¢é•¿åˆ° 50%ï¼Œè€Œå¹³æ—¶å†…å­˜ç¨³å®šåœ¨ 20%-30%ï¼Œå¯çŸ¥åä¹‹å…«ä¹å‡ºç°äº†å†…å­˜æ³„æ¼ã€‚ æ’æŸ¥æ€è·¯ç”±äºä¸¤ä¸ªæ¥å…¥ degg 2.0 çš„æœåŠ¡å‡å‡ºç°å†…å­˜æ³„æ¼é—®é¢˜ï¼Œå› æ­¤åˆæ­¥å°†æ’æŸ¥èŒƒå›´é”å®šåœ¨ degg 2.0 å¼•å…¥æˆ–é‡å†™çš„åŸºç¡€ç»„ä»¶ä¸Šï¼Œé‡ç‚¹æ€€ç–‘å¯¹è±¡ä¸º nodex-logger ç»„ä»¶ï¼›åŒæ—¶ä¸ºäº†æ’æŸ¥å†…å­˜æ³„æ¼ï¼Œæˆ‘ä»¬éœ€è¦è·å–æœåŠ¡è¿è¡Œè¿›ç¨‹çš„å †å¿«ç…§ï¼ˆheapsnapshotï¼‰ï¼Œè·å–æ–¹å¼å¯å‚çœ‹æ–‡ç« ï¼šNode æ¡ˆå‘ç°åœºæ­ç§˜ â€”â€” å¿«é€Ÿå®šä½çº¿ä¸Šå†…å­˜æ³„æ¼ã€‚ æ’æŸ¥è¿‡ç¨‹ä¸€ã€è·å–å †å¿«ç…§ä½¿ç”¨ alinode è·å–å †å¿«ç…§ï¼ŒæœåŠ¡å¯åŠ¨åï¼Œä½¿ç”¨å°æµé‡é¢„çƒ­ä¸€ä¸¤åˆ†é’Ÿä¾¿è®°å½•ç¬¬1ä»½å †å¿«ç…§ï¼ˆ2020-4-16-16:52ï¼‰ï¼Œæ¥ç€è®¾ç½® qps ä¸º 125 å¯¹æœåŠ¡è¿›è¡Œæ–½å‹ï¼Œç»è¿‡å¤§çº¦ä¸€ä¸ªå°æ—¶ï¼ˆ2020-4-16-15:46ï¼‰è·å–ç¬¬2ä»½å †å¿«ç…§ã€‚ä½¿ç”¨ Chrome dev å·¥å…·è½½å…¥ä¸¤ä»½å †å¿«ç…§ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‘ç°æœåŠ¡ä»…çŸ­çŸ­è¿è¡Œä¸€å°æ—¶ï¼Œå…¶å †å¿«ç…§æ–‡ä»¶å°±å¢å¤§äº† 45MBï¼Œè€Œåˆå§‹å¤§å°ä¹Ÿä¸è¿‡ 39.7MBï¼›æˆ‘ä»¬æŒ‰ Retained Size åˆ—è¿›è¡Œæ’åºï¼Œå¾ˆå¿«å°±å‘ç°äº†ä¸€ä¸ªã€å«Œç–‘çŠ¯ã€ï¼Œå³ generatorï¼›è¯¥é¡¹å ç”¨äº† 55% çš„å¤§å°ï¼ŒåŒæ—¶ Shallow Size å´ä¸º 0%ï¼Œä¸€é¡¹ä¸€é¡¹åœ°å±•å¼€ï¼Œé”å®šåˆ°äº†å›¾ä¸­é«˜äº®çš„è¿™è¡Œï¼Œä½†æ˜¯ç»§ç»­å±•å¼€å´æç¤º 0%ï¼Œçº¿ç´¢çªç„¶æ–­äº†ã€‚ ç›¯ç€ generator è¿›å…¥æ€è€ƒï¼Œæˆ‘çš„æœåŠ¡ä»£ç å¹¶æ²¡æœ‰ generator è¯­æ³•ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç° generator å¯¹è±¡çš„å†…å­˜æ³„æ¼å‘¢ï¼Ÿæ­¤æ—¶æˆ‘æŠŠæ³¨æ„åŠ›è½¬åˆ° node_modules ç›®å½•ä¸­ï¼Œç”±äºæœ€è¿‘ä¸€ç›´åœ¨ä¼˜åŒ– nodex-kafka ç»„ä»¶ï¼Œæœ‰æ—¶ç›´æ¥åœ¨ node_modules ç›®å½•ä¸­ä¿®æ”¹è¯¥ç»„ä»¶çš„ä»£ç è¿›è¡Œè°ƒè¯•ï¼Œå› æ­¤å‡ ä¹æ¯ä¸ªæ–‡ä»¶å¤´éƒ¨éƒ½æœ‰çš„ä¸€æ®µä»£ç å¼•èµ·äº†æˆ‘çš„æ³¨æ„ï¼š 12345678910&quot;use strict&quot;;var __awaiter = (this &amp;&amp; this.__awaiter) || function (thisArg, _arguments, P, generator) { function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); } return new (P || (P = Promise))(function (resolve, reject) { function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } } function rejected(value) { try { step(generator[&quot;throw&quot;](value)); } catch (e) { reject(e); } } function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); } step((generator = generator.apply(thisArg, _arguments || [])).next()); });}; è¿™ä¸ªä»£ç æ˜¯ typescript æºç ç¼–è¯‘åçš„äº§å‡ºï¼Œç”±äºä»£ç ä½¿ç”¨äº† async/await è¯­æ³•ï¼Œå› æ­¤éƒ½ç¼–è¯‘æˆ __awaiter çš„å½¢å¼ï¼Œåœ¨æºç ä¸­ä½¿ç”¨ async å‡½æ•°çš„åœ°æ–¹ï¼Œåœ¨ç¼–è¯‘åéƒ½ä½¿ç”¨ __awaiter è¿›è¡ŒåŒ…è£¹ï¼š 12345678910111213// ç¼–è¯‘å‰(async function() { await Promise.resolve(1); await Promise.resolve(2);})()// ç¼–è¯‘å(function () { return __awaiter(this, void 0, void 0, function* () { yield Promise.resolve(1); yield Promise.resolve(2); });})(); åŒæ—¶ä¸€ä¸ªå…³äº generator å†…å­˜æ³„æ¼çš„ #30753 generator functions - memory leak ä¹Ÿå¼•èµ·äº†æˆ‘çš„æ³¨æ„ï¼Œè¯¥ issue é‡åˆ°çš„é—®é¢˜æ— è®ºä» Node.js çš„ç‰ˆæœ¬å’Œå†…å­˜æ³„æ¼çš„è¡¨ç°éƒ½å’Œæˆ‘é‡åˆ°çš„é—®é¢˜ååˆ†ç›¸ä¼¼ã€‚æ‰€ä»¥æˆ‘åœ¨å·¥ç¨‹çš„ node_modules ä¸­æœç´¢æ‰€æœ‰ __awaiter å­—ç¬¦ä¸²ï¼Œå‘ç°äº† 3 ä¸ªæ¨¡å—ç¼–è¯‘å‡ºäº†ä¸Šè¿°ä»£ç ï¼Œåˆ†åˆ«æ˜¯ï¼š nodex-logger nodex-kafka nodex-apollo ç”±äºæ¨¡å—çš„ tsconfig.json çš„ target å­—æ®µå°†ç›®æ ‡äº§å‡ºä¸º es6ï¼Œå› æ­¤æ‰ä¼šä½¿ç”¨ generator å»æ¨¡æ‹Ÿ async/await è¯­æ³•ï¼Œä½†æ˜¯ä» Node.js v8.10.0 å¼€å§‹å·²ç» 100% æ”¯æŒäº† ES2017 çš„æ‰€æœ‰ç‰¹æ€§ï¼Œæ‰€ä»¥æœ¬ä¸è¯¥ç¼–è¯‘ async/await è¯­æ³•ï¼Œæ­¤å¤„é‚å°†è¿™ 3 ä¸ªæ¨¡å—çš„ç›®æ ‡äº§å‡ºé…ç½®æ”¹ä¸º es2017ï¼Œè¿™æ · tsc å°±ä¸ä¼šç¼–è¯‘ async/await è¯­æ³•ã€‚ äºŒã€éªŒè¯é‡å¤ä¹‹å‰è·å–å †å¿«ç…§çš„æ­¥éª¤ï¼ŒæƒŠå¥‡åœ°å‘ç°å³ä½¿è¿‡äº†ä¸€å¤©ï¼Œå†…å­˜ä¹Ÿæ²¡æœ‰å¢é•¿ï¼Œè€Œä¸” generator ä¹Ÿæ²¡æœ‰æŒæœ‰æœªé‡Šæ”¾çš„å†…å­˜ï¼š è‡³æ­¤ï¼Œå†…å­˜æ³„æ¼é—®é¢˜å·²ç»è§£å†³ï¼é‚£ä¹ˆå¦‚ä½•é¿å…é‡åˆ°è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ å¦‚ä½•é¿å…ä¸€ã€è§£å†³æ­¥éª¤æ­¥éª¤ä¸€è¯¥é—®é¢˜ä»…åœ¨ç‰¹å®šçš„ Node.js ç‰ˆæœ¬ä¸­å­˜åœ¨ï¼Œè¯·ä½¿ç”¨ç‰ˆæœ¬åŒºé—´ [v11.0.0 - v12.16.0) ä¹‹å¤–çš„ Node.jsï¼Œä»è€Œé˜²æ­¢äºŒæ–¹ npm ç»„ä»¶ã€ä¸‰æ–¹ npm ç»„ä»¶çš„ generator è¯­æ³•ä½¿ä½ çš„æœåŠ¡å‡ºé—®é¢˜ æ­¥éª¤äºŒå°†è‡ªå·±çš„ typescript çš„ç›®æ ‡ç¯å¢ƒï¼ˆtargetï¼‰ç¼–è¯‘ä¸º es2017 åŠä»¥ä¸Šï¼ŒåŒæ—¶åº”å°½é‡ä½¿ç”¨ async/await è¯­æ³•è€Œä¸æ˜¯ generator è¯­æ³•ï¼Œä»è€Œé˜²æ­¢åˆ«äººä½¿ç”¨ [v11.0.0 - v12.16.0) ç‰ˆæœ¬æ—¶ï¼Œå¼•å…¥ä½ çš„ npm ç»„ä»¶è€Œå¯¼è‡´å†…å­˜æ³„æ¼ äºŒã€è¯¦ç»†è¯´æ˜å‰æ–‡è¯´äº†ä» Node.js v8.10.0 å¼€å§‹å°±å·²ç»æ”¯æŒäº† async/await è¯­æ³•ï¼Œç»æŸ¥è¯¥ç‰ˆæœ¬äº 2018-03-06 å‘å¸ƒï¼Œç”±äºæ‰€æœ‰æœåŠ¡ä¹Ÿä¸å¯èƒ½ä¸€ä¸‹å…¨åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬ï¼Œå› æ­¤ä¸ºäº†å…¼å®¹ Node.js v6 ç‰ˆæœ¬çš„ç¯å¢ƒï¼Œéœ€è¦å°†ä»£ç ç¼–è¯‘åˆ° es6ã€‚ä½†æ˜¯ç«™åœ¨ç°åœ¨è¿™ä¸ª LTS ç‰ˆæœ¬å·²ç»æ˜¯ v12 çš„æ—¶é—´èŠ‚ç‚¹ï¼Œå®Œå…¨å¯ä»¥æ’æŸ¥ç°æœ‰ä½¿ç”¨ typescript çš„ npm ç»„ä»¶æ˜¯å¦éƒ½ç¼–è¯‘åˆ° es2017ï¼Œç”šè‡³æ¢è®¨ç¼–è¯‘åˆ° es2019 çš„å¯èƒ½ã€‚ æ­¤å¤–è¿™ä¸ªå†…å­˜æ³„æ¼é—®é¢˜æ˜¯ä»å“ªä¸ªç‰ˆæœ¬å¼€å§‹æœ‰çš„ï¼Œç°åœ¨æ˜¯å¦è§£å†³äº†å‘¢ï¼Ÿç¼–å†™å¯éªŒè¯çš„å†…å­˜æ³„æ¼çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920// node-leak.jsconst heapdump = require('heapdump')class Async { async run() { return null; }}const run = async () =&gt; { for (let index = 0; index &lt; 10000000; index++) { if (index % 1000000 === 0) console.log(Math.floor(process.memoryUsage().heapUsed / 10000), index); const doer = new Async(); await doer.run(); } heapdump.writeSnapshot((err, filename) =&gt; { console.log(&quot;Heap dump written to&quot;, filename); });};run(); 123456789101112131415161718192021222324252627282930// leak.js ç”± node-leak.js ç¼–è¯‘å¾—æ¥var __awaiter = (this &amp;&amp; this.__awaiter) || function (thisArg, _arguments, P, generator) { function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); } return new (P || (P = Promise))(function (resolve, reject) { function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } } function rejected(value) { try { step(generator[&quot;throw&quot;](value)); } catch (e) { reject(e); } } function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); } step((generator = generator.apply(thisArg, _arguments || [])).next()); });};class Async { run() { return __awaiter(this, void 0, void 0, function* () { return null; }); }}const run = () =&gt; __awaiter(this, void 0, void 0, function* () { const now = Date.now(); console.log('å¾ªç¯æ€»æ¬¡æ•°: ', 10000000); for (let index = 0; index &lt; 10000000; index++) { if (index % 1000000 === 0) { console.log('ç¬¬ %d æ¬¡å¾ªç¯ï¼Œæ­¤æ—¶å†…å­˜ä¸º %d', index, Math.floor(process.memoryUsage().heapUsed / 1000000)); } const instance = new Async(); yield instance.run(); } console.log('æ€»è€—æ—¶: %d ç§’', (Date.now() - now) / 1000);});run(); ç»è¿‡äºŒåˆ†æ’æŸ¥ï¼Œå‘ç°è¯¥æ³„æ¼é—®é¢˜ä» v11.0.0 å¼•å…¥ï¼Œåœ¨ v12.16.0 è§£å†³ï¼›å†…å­˜æ³„æ¼ç‰ˆæœ¬æ‰§è¡Œè„šæœ¬æ—¶ï¼Œå†…å­˜å ç”¨é€æ­¥é€’å¢ç›´åˆ° crashï¼Œè€Œæœªæ³„æ¼ç‰ˆæœ¬åˆ™ä¼šåŠæ—¶å›æ”¶å†…å­˜ã€‚ æ ¹æœ¬åŸå› æ ¹æœ¬åŸå› æ˜¯ v8 çš„ä¸€ä¸ª bugï¼Œç›¸å…³é“¾æ¥ï¼š v8 issue: https://bugs.chromium.org/p/v8/issues/detail?id=10031 v8 commit: https://chromium.googlesource.com/v8/v8.git/+/d3a1a5b6c4916f22e076e3349ed3619bfb014f29 node issue: https://github.com/nodejs/node/issues/30753 node commit: https://github.com/nodejs/node/pull/31005/files æ”¹è¿›åçš„ä»£ç ï¼Œåœ¨åˆ†é…æ–°å¢ WeakArrayList æ•°ç»„æ—¶ï¼Œå³ä½¿è¿”å›æ²¡æœ‰ç©ºé—²æ•°ç»„çš„æ ‡è®°ï¼ˆ kNoEmptySlotsMarker ï¼‰ï¼Œä»éœ€è¦è°ƒç”¨ ScanForEmptySlots æ–¹æ³•é‡æ–°æ‰«æä¸€æ¬¡æ•°ç»„ï¼Œå› ä¸ºè¯¥æ•°ç»„å…ƒç´ æœ‰å¯èƒ½æœ‰è¢« GC å›æ”¶ï¼Œè¿™äº›è¢«å›æ”¶çš„å…ƒç´ æ˜¯å¯ä»¥é‡å¤ä½¿ç”¨çš„ï¼›ä»…å½“è¿”å› kNoEmptySlotsMarker ä¸”æ•°ç»„ä¸­æ²¡æœ‰è¢« GC å›æ”¶çš„å…ƒç´ ï¼Œæ‰çœŸæ­£æ‰§è¡Œæ–°å¢é€»è¾‘ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364// https://github.com/targos/node/blob/cceb2a87295724b7aa843363460ffcd10cda05b5/deps/v8/src/objects/objects.cc#L4042// staticHandle&lt;WeakArrayList&gt; PrototypeUsers::Add(Isolate* isolate, Handle&lt;WeakArrayList&gt; array, Handle&lt;Map&gt; value, int* assigned_index) { int length = array-&gt;length(); if (length == 0) { // Uninitialized WeakArrayList; need to initialize empty_slot_index. array = WeakArrayList::EnsureSpace(isolate, array, kFirstIndex + 1); set_empty_slot_index(*array, kNoEmptySlotsMarker); array-&gt;Set(kFirstIndex, HeapObjectReference::Weak(*value)); array-&gt;set_length(kFirstIndex + 1); if (assigned_index != nullptr) *assigned_index = kFirstIndex; return array; } // If the array has unfilled space at the end, use it. if (!array-&gt;IsFull()) { array-&gt;Set(length, HeapObjectReference::Weak(*value)); array-&gt;set_length(length + 1); if (assigned_index != nullptr) *assigned_index = length; return array; } // If there are empty slots, use one of them. int empty_slot = Smi::ToInt(empty_slot_index(*array)); if (empty_slot == kNoEmptySlotsMarker) { // GCs might have cleared some references, rescan the array for empty slots. PrototypeUsers::ScanForEmptySlots(*array); empty_slot = Smi::ToInt(empty_slot_index(*array)); } if (empty_slot != kNoEmptySlotsMarker) { DCHECK_GE(empty_slot, kFirstIndex); CHECK_LT(empty_slot, array-&gt;length()); int next_empty_slot = array-&gt;Get(empty_slot).ToSmi().value(); array-&gt;Set(empty_slot, HeapObjectReference::Weak(*value)); if (assigned_index != nullptr) *assigned_index = empty_slot; set_empty_slot_index(*array, next_empty_slot); return array; } else { DCHECK_EQ(empty_slot, kNoEmptySlotsMarker); } // Array full and no empty slots. Grow the array. array = WeakArrayList::EnsureSpace(isolate, array, length + 1); array-&gt;Set(length, HeapObjectReference::Weak(*value)); array-&gt;set_length(length + 1); if (assigned_index != nullptr) *assigned_index = length; return array;}// staticvoid PrototypeUsers::ScanForEmptySlots(WeakArrayList array) { for (int i = kFirstIndex; i &lt; array.length(); i++) { if (array.Get(i)-&gt;IsCleared()) { PrototypeUsers::MarkSlotEmpty(array, i); } }} ä¸æ­¢å†…å­˜æ³„æ¼åœ¨æˆ‘æµ‹è¯•å†…å­˜æ³„æ¼æ—¶ï¼Œæœ‰ä¸€ä¸ªå‘ç°ï¼Œæ‰§è¡Œå‘ç”Ÿå†…å­˜æ³„æ¼æ—¶çš„ä»£ç ï¼ˆå‰æ–‡çš„ leak.jsï¼‰å’Œæœªå‘ç”Ÿå†…å­˜æ³„æ¼æ—¶çš„ä»£ç ï¼ˆå‰æ–‡çš„ node-leak.jsï¼‰æ—¶ï¼Œå³ä½¿åœ¨å·²ç»ä¿®å¤è¯¥é—®é¢˜çš„ Node.js v12.16.2 ç‰ˆæœ¬ä¸‹ï¼Œgenerator è¯­æ³•ä»ç„¶æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š å†…å­˜å›æ”¶æ•ˆç‡ä½ï¼Œå¯¼è‡´æ‰§è¡Œå®Œåï¼Œä»æœ‰ç›¸å½“å¤§çš„å†…å­˜å ç”¨ï¼› æ‰§è¡Œæ•ˆç‡éå¸¸æ…¢ï¼Œasync/await ç‰ˆæœ¬ä»…éœ€è¦ 0.953 ç§’ï¼Œè€Œ generator å´éœ€è¦ 17.754 ç§’ï¼› è¿™è¯´æ˜ï¼Œç›¸æ¯” generator è¯­æ³•ï¼Œasync/await è¯­æ³•æ— è®ºä»æ‰§è¡Œæ•ˆç‡è¿˜æ˜¯å†…å­˜å ç”¨æ–¹é¢éƒ½æœ‰å‹å€’æ€§ä¼˜åŠ¿ã€‚é‚£ä¹ˆæ‰§è¡Œæ•ˆç‡å¯¹æ¯”å¦‚ä½•å‘¢ï¼Ÿä¸Š benchmark å·¥å…·æ¯”åˆ’æ¯”åˆ’ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// benchmark.jsconst __awaiter = (this &amp;&amp; this.__awaiter) || function (thisArg, _arguments, P, generator) { function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); } return new (P || (P = Promise))(function (resolve, reject) { function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } } function rejected(value) { try { step(generator[&quot;throw&quot;](value)); } catch (e) { reject(e); } } function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); } step((generator = generator.apply(thisArg, _arguments || [])).next()); });};const Benchmark = require('benchmark');const suite = new Benchmark.Suite;suite .add('generator', { defer: true, fn: function (deferred) { (function () { return __awaiter(this, void 0, void 0, function* () { yield Promise.resolve(1); yield Promise.resolve(2); // æµ‹è¯•å®Œæˆ deferred.resolve(); }); })(); } }) .add('async/await', { defer: true, fn: function(deferred) { (async function() { await Promise.resolve(1); await Promise.resolve(2); // æµ‹è¯•å®Œæˆ deferred.resolve(); })() } }) .on('cycle', function(event) { console.log(String(event.target)); }) .run({ 'async': false }); Node.js v12.16.2 çš„ç»“æœï¼š 12generator x 443,891 ops/sec Â±4.12% (75 runs sampled)async/await x 4,567,163 ops/sec Â±1.96% (79 runs sampled) generator æ¯ç§’æ‰§è¡Œäº† 516,178 æ¬¡æ“ä½œï¼Œè€Œ async/await æ¯ç§’æ‰§è¡Œäº† 4,531,357 æ¬¡æ“ä½œï¼Œåè€…æ˜¯å‰è€…çš„ 10 å€å¤šï¼æˆ‘ä»¬çœ‹çœ‹å…¶å®ƒ Node.js ç‰ˆæœ¬è¡¨ç°å¦‚ä½•ï¼š ç”µè„‘é…ç½®ï¼šMacBook Pro (13-inch, 2017, Two Thunderbolt 3 ports) Node.js ç‰ˆæœ¬ generator async/await å€æ•° 12.16.2 443,891 4,567,163 10.29 11.15.0 424,073 680,795 1.60 10.20.1 427,799 669,910 1.57 9.11.2 275,526 500,487 1.82 8.17.0 281,571 535,317 1.90 äºŒè€…æ‰§è¡Œæ•ˆç‡å’Œ Node.js ç‰ˆæœ¬æˆæ­£æ¯”ï¼Œè€Œ Node.js v12 æ¥äº†ä¸€æ¬¡å¤§è·ƒè¿›ï¼Œç›´æ¥é«˜äº†ä¸€ä¸ªæ•°é‡çº§ï¼Œè¿™ä¸ªå¾—ç›Šäº v8 7.2 çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®˜ç½‘ç”¨äº†æ•´æ•´ä¸€ç¯‡æ–‡ç« è¯´æ˜ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹ã€‚ Chrome ä¹Ÿä¸­æ‹›äº†å—ï¼Ÿ ç›®å‰æœ€æ–°ç‰ˆï¼šç‰ˆæœ¬ 81.0.4044.113ï¼ˆæ­£å¼ç‰ˆæœ¬ï¼‰ ï¼ˆ64 ä½ï¼‰ å·²ç»ä¿®å¤è¿™ä¸ªé—®é¢˜ æ—¢ç„¶æ˜¯ v8 çš„é—®é¢˜ï¼Œé‚£ä¹ˆ chrome æµè§ˆå™¨ä¹Ÿæ˜¯æœ‰è¿™ä¸ªé—®é¢˜çš„ï¼Œæ‰“å¼€ç©ºç™½æ ‡ç­¾é¡µï¼Œæ‰§è¡Œå‰æ–‡ç»™å‡ºçš„ leak.js ä»£ç ï¼š å¯å‘ç°ï¼Œchrome ä¸‹ä¹Ÿä¼šæœ‰å†…å­˜æ³„æ¼é—®é¢˜ï¼Œåªä¸è¿‡ chrome é¡µé¢ä¸Šçš„ä»£ç è¿è¡Œä¸€èˆ¬ä¸ä¼šæœ‰å¯†é›†åœ°ã€é‡å¤åœ°æ‰§è¡ŒæŸæ®µã€å¯¼è‡´å†…å­˜æ³„æ¼ã€çš„ä»£ç ï¼Œå› æ­¤è¯¥é—®é¢˜åœ¨ chrome ç«¯ä¸å®¹æ˜“è¢«å¯Ÿè§‰ã€‚ æ€»ç»“æ²¡æƒ³åˆ°ä¸€ä¸ªå°å°çš„è¯­æ³•è½¬è¯‘ä¹Ÿä¼šé€ æˆå¦‚æ­¤ä¸¥é‡çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Œä¸”ä¸€ä¸ª V8 åº•å±‚å°å°çš„ bug åœ¨ä¸Šå±‚ä½¿ç”¨æ—¶ä¼šè¢«æ”¾å¤§å¾—å¦‚æ­¤ä¸¥é‡ã€‚ä½†æ˜¯åªè¦æˆ‘ä»¬ä¸æ”¾è¿‡æ¯ä¸€ä¸ªå¯ç–‘ç‚¹ï¼Œæ·±å…¥æ’æŸ¥æ€»ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ”¶è·ï¼","link":"/2020/04/20/%E6%8E%92%E6%9F%A5%20Node.js%20%E6%9C%8D%E5%8A%A1%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%EF%BC%8C%E6%B2%A1%E6%83%B3%E5%88%B0%E7%AB%9F%E6%98%AF%E5%AE%83%EF%BC%9F/"},{"title":"æ’æŸ¥å®ˆå€™åœ¨é›¶ç‚¹ä¸¤åˆ†çš„ bug","text":"æœ€è¿‘æ¥æ‰‹æ³›å‰ç«¯å›¢é˜Ÿçš„æœåŠ¡ç¨³å®šæ€§æ²»ç†ï¼Œé‡åˆ°ä¸€äº›å¾ˆæœ‰ç‰¹ç‚¹çš„çº¿ä¸Šé—®é¢˜ï¼Œè¿™è¾¹è®°å½•ä¸€æ¬¡ã€æœ‰è¶£çš„ bugã€æ’æŸ¥ èƒŒæ™¯æ•…äº‹çš„å¼€å§‹æ˜¯ç”±è€æ¿çš„ä¸€ä¸ªè‰¾ç‰¹å¼€å§‹çš„ï¼š å½“æ—¶æ’æŸ¥äº†ä¸‹æ²¡å•¥æ€è·¯ï¼Œå°±æ”¾å¼ƒäº†ï¼ˆä»¥ä¸ºå¶ç°ï¼Œè¿‡å‡ å¤©å®ƒèƒ½è‡ªå·±å¥½èµ·æ¥ï¼ï¼‰ã€‚ç›´åˆ°æŸä¸€å¤©æˆ‘åˆæ”¶åˆ°äº†åŒæ ·çš„å‘Šè­¦ï¼Œæˆ‘å›æƒ³äº†ä¸‹æœ€è¿‘å¥½å‡ å¤©éƒ½æœ‰è¿™ä¸ªå‘Šè­¦ã€‚ æŠ¬å¤´ä¸€çœ‹ï¼š å¿ƒé‡Œä¸€æƒŠï¼šåˆ«æå‡ºäº‹æ•…å•Šï¼å°±å¼€å§‹äº†æˆ‘çš„æ’æŸ¥ä¹‹è·¯ã€‚ æ’æŸ¥æ€è·¯æ ¹æ®å‘Šè­¦é”™è¯¯æ ˆæ˜¾ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ª â€œunhandledRejectionâ€ï¼š 1234567891011[ERROR][2020-09-16T23:59:59.582+0800][default:process.&lt;anonymous&gt; at /home/xxx/xxx/xxx/lib/app.js:49:10] _undef||traceid=64594b155f6231298ae0e2b114a1a02||spanid=38197e8a96a6d96a||pid=1431||msg=on unhandledRejection, error: { Error: ERR invalid expire time in set at JavascriptReplyParser.parseResult (/home/xxx/xxx/xxx/node_modules/redis-parser/lib/javascript.js:90:16) at JavascriptReplyParser.tryParsing (/home/xxx/xxx/xxx/node_modules/redis-parser/lib/javascript.js:117:21) at JavascriptReplyParser.run (/home/xxx/xxx/xxx/node_modules/redis-parser/lib/javascript.js:131:22) at JavascriptReplyParser.execute (/home/xxx/xxx/xxx/node_modules/redis-parser/lib/javascript.js:112:10) at Socket.&lt;anonymous&gt; (/home/xxx/xxx/xxx/node_modules/redis/index.js:223:27) at emitOne (events.js:116:13) at Socket.emit (events.js:211:7) at addChunk (_stream_readable.js:263:12) at readableAddChunk (_stream_readable.js:250:11) at Socket.Readable.push (_stream_readable.js:208:10) command: 'SET', code: 'ERR' } æ‰€ä»¥ä¸€å±‚ä¸€å±‚å¾€ä¸Šæ‰¾ï¼Œæ˜¯æ‰¾ä¸åˆ°æŠ›é”™çš„æºå¤´çš„ï¼çŒœæµ‹äº†ä¸€é€šæ— æœï¼Œäºæ˜¯æˆ‘å»ç¿»å‘Šè­¦ç¾¤çš„è®°å½•ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªæƒŠäººçš„è§„å¾‹ï¼Œè¯¥å‘Šè­¦åªè¦å‡ºç°ï¼Œå¿…å®šæ˜¯æ¯å¤©å‡Œæ™¨ 00:02ï¼š å› æ­¤æ’æŸ¥æ€è·¯é”å®šåœ¨ä»¥ä¸‹å‡ ä¸ªï¼š å­˜åœ¨æ¯å¤©å®šæ—¶ä»»åŠ¡è®¾ç½®æŸä¸ª redis å€¼çš„è¶…æ—¶æ—¶é—´ï¼Ÿ æœåŠ¡å™¨æ—¶é—´å­˜åœ¨è¯¯å·®ï¼Ÿ æ’æŸ¥è¿‡ç¨‹å‰§é€ä¸‹ï¼Œå¹¶ä¸æ˜¯ä¸Šè¿°ä¸¤ä¸ªåŸå› ã€‚ ç»è¿‡å¤šç•ªæœç´¢ä»£ç ï¼Œå‘ç°äº†å‡ å¤„è®¾ç½® redis å€¼çš„ä»£ç ï¼ŒåŒæ—¶ç»“åˆ Googleï¼Œæœ‰äººæŒ‡å‡º Redis è®¾ç½®çš„è¶…æ—¶æ—¶é—´ä¸èƒ½ä¸ºå°äº 0ã€‚ç»è¿‡æœ¬åœ°éªŒè¯ï¼Œçš„ç¡®å‘ç°è¶…æ—¶æ—¶é—´ä¸èƒ½ä¸º 0ï¼š äºæ˜¯æ’æŸ¥æ–¹å‘è½¬ä¸ºä»£ç ä¸­å“ªé‡Œå‡ºç°äº†è®¾ç½®è¶…æ—¶æ—¶é—´å°äº 0 çš„é€»è¾‘ã€‚å¯ç–‘ä»£ç å¦‚ä¸‹ï¼š 12345setRedisKey( redisTeamKey, data, 24 * 3600 - getPastTimeOfToday() / 1000,) é‚£ä¹ˆè¿™ä¸ªå€¼ 24*3600 - getPastTimeOfToday() / 1000 å¯èƒ½ä¸º 0 æˆ–è€…è´Ÿæ•°å—ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹å®Œæ•´é€»è¾‘ï¼š 12345678const getPastTimeOfToday = () =&gt; { const date = new Date() const year = date.getFullYear() const month = strPadding(date.getMonth() + 1, '0', 2) const day = strPadding(date.getDate(), '0', 2) const todayStartTs = +new Date(`${year}/${month}/${day} 00:00:00`) return +new Date() - +new Date(todayStartTs)} è¿™ä¸ªå€¼ä»£è¡¨å½“å‰è¿™ä¸ªæ—¶é—´ç‚¹ï¼Œç¦»ä»Šå¤©ç»“æŸè¿˜æœ‰å¤šå°‘ç§’çš„æ—¶é—´ã€‚å¯æ˜¯è¿™ä¸ªå€¼ä¸å¯èƒ½å°äº 0ï¼Œæˆ‘ç”šè‡³çŒœæµ‹æ˜¯å¦æ‰§è¡Œä¸Šè¿°ä»£ç ç¬¬äºŒè¡Œæ—¶æ˜¯æ˜¨å¤©ï¼Œè€Œç¬¬ä¸ƒè¡Œçš„æ—¶å€™æ˜¯ä»Šå¤©ï¼Œè¿™æ ·èƒ½éªŒè¯æˆ‘ä»¬çš„çŒœæµ‹ï¼Œå³è¿™ä¸ªå‡½æ•°è¿”å›çš„å€¼å¤§äº 24*3600ï¼Œé‚£ 24*3600 - getPastTimeOfToday() / 1000 å°±å°äº 0 äº†ã€‚ä¸è¿‡è¿™ä¸ªå¯èƒ½æ€§æ¯”è¾ƒä½ï¼Œäºæ˜¯æˆ‘è½¬è€Œå»æœåŠ¡å™¨å¤ç°è¿™ä¸ª bugï¼Œç¼–å†™å¦‚ä¸‹ä»£ç å¹¶æ‰§è¡Œï¼š 12345const { setRedisKey } = require('./lib/xxx/xxx/redis')process.on('unhandledRejection', console.log)setRedisKey('abc', 'value', 0) æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼Œä¸å‘Šè­¦çš„é”™è¯¯æ ˆä¸€è‡´ï¼š æ—¢ç„¶å¤ç°äº†é”™è¯¯ï¼Œå›å¤´ç»§ç»­æ‰¾ bugï¼Œæ·±å…¥åˆ° setRedisKey ä»£ç ï¼š 123const setRedisKey = (key, value, expireTime = DEFAULT_EXPIRETIME) =&gt; { return redis.set(key, value, 'EX', Math.floor(expireTime))} è¿‡æœŸæ—¶é—´ expireTime è¢« Math.floor åŒ…è£¹ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ 0 &lt; expireTime &lt; 1 æ—¶ï¼ŒMath.floor(expireTime) çš„å€¼ä¸º 0ã€‚é‚£ä¹ˆå½“æœåŠ¡å™¨æ—¶é—´åˆ°æ— é™æ¥è¿‘ 00:00:00 æ—¶ï¼ŒgetPastTimeOfToday å°†è¿”å› (24*3600-x)*1000 ï¼Œå› ä¸ºæ— é™æ¥è¿‘ 00:00:00ï¼Œå› æ­¤ x çš„å€¼ä»‹äº 0 - 1 ä¹‹é—´ï¼ˆæ¯•ç«Ÿæ—¶é—´æˆ³çš„æœ€å°å•ä½æ˜¯æ¯«ç§’ï¼Œæƒ³è±¡ä¸‹ã€å½“å¤©å‰©ä½™æ¯«ç§’æ•°ã€è¿˜æœ‰ä¸åˆ° 1000 çš„æƒ…å†µï¼‰ã€‚ ä¸ºä»€ä¹ˆ unhandledRejectionå¯¹äº†ï¼Œä¸ºä»€ä¹ˆè¯¥é”™è¯¯æ²¡æœ‰è¢«æ•è·ï¼Ÿå¦‚æœä¸€å¼€å§‹è¢«æ•è·ï¼Œä¹Ÿå°±æœ‰å®Œæ•´çš„é”™è¯¯æ ˆï¼Œé‚£ä¹ˆæ’æŸ¥è¿‡ç¨‹è‚¯å®šä¼šé¡ºåˆ©å¾ˆå¤šã€‚ä¸šåŠ¡ä»£ç å¦‚ä¸‹ï¼ˆå·²è„±æ•ï¼‰ï¼š 123Promise.resolve().then(() =&gt; { Promise.reject(new Error('å‡ºé”™äº†ï¼'))}).catch(console.error) å¤§å®¶å‘ç°äº†å§ï¼Œthen ä¸­çš„ Promise æ²¡æœ‰è¿”å›ï¼Œé‚£ä¹ˆæˆ‘è¿”å›äº†å°±ä¸€å®šä¼šè¢«æ•è·å—ï¼Ÿåœ¨è¿™ç§å†™æ³•ä¸‹æ˜¯ä¼šçš„ï¼Œå¤§å®¶å¯ä»¥å°è¯•ä¸‹ï¼Œä½†æ˜¯ä½ å†™æˆä¸‹é¢è¿™æ ·ï¼Œè¿˜æ˜¯ä¼š unhandledRejectionï¼š 123456789101112new Promise((resolve, reject) =&gt; { if (false) { resolve('å¯¹äº†ï¼') } if (true) { return Promise.reject(new Error('å‡ºé”™äº†ï¼')) } reject(new Error('å…œåº•é€»è¾‘ï¼'))}).catch(console.warn) ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºéœ€è¦æ‰‹åŠ¨è°ƒç”¨ reject æ‰å¯æŠ›é”™ï¼Œè¿™å°±éœ€è¦å±‚å±‚å°† resolve å’Œ reject ä¼ å…¥å¯èƒ½æŠ¥é”™çš„ Promise æ‰è¡Œï¼Œççˆ±ç”Ÿå‘½è¿œç¦» Promiseï¼Œå¤§å®¶è¿˜æ˜¯å°½é‡ç”¨ async/await è¯­æ³•ï¼ˆç›¸åŒåŠŸèƒ½ä¸‹ï¼‰ã€‚ è§£å†³æ–¹å¼åŸå› æ—¢ç„¶ä¾æ—§æ‰¾åˆ°ï¼Œè§£å†³æ–¹å¼ä¹Ÿå°±å‡ºæ¥äº†ï¼š å‘ä¸‹å–æ•´ Math.floor æ”¹ä¸ºå‘ä¸Šå–æ•´ Math.ceilï¼ˆä¸è¿‡æç«¯æƒ…å†µä¸‹è¿˜æ˜¯å­˜åœ¨å½“å¤©å‰©ä½™æ¯«ç§’æ•°æ°å¥½ä¸º 0 çš„æƒ…å†µï¼‰ åˆ¤æ–­ expireTime å€¼å°äºç­‰äº 0 æ—¶ï¼Œèµ‹å€¼ä¸º 1ï¼ˆç»­ä¸€ç§’ï¼Œè›¤è›¤è›¤ï¼‰ï¼ŒåŒæ—¶è®°å½• warn è­¦å‘Šæ—¥å¿— æ’æŸ¥æœª return çš„ Promiseï¼Œç»Ÿä¸€è¿”å› å°è¯•æ‰¾äº†ä¸‹ typescript é™åˆ¶ number ä¸ºæ­£æ•´æ•°çš„æ–¹å¼ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œæœ‰çš„è¯æ±‚å¤§ç¥å‘ŠçŸ¥ï¼Ÿ","link":"/2020/09/18/%E6%8E%92%E6%9F%A5%E5%AE%88%E5%80%99%E5%9C%A8%E9%9B%B6%E7%82%B9%E4%B8%A4%E5%88%86%E7%9A%84%20bug/"},{"title":"æ¶ˆå¤±çš„ 1px","text":"ä¹‹å‰æœ¬äººå†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œæ˜¯å…³äº1pxè¾¹æ¡†çš„ï¼šä»line-heightåˆ°0-5pxã€‚æ–‡ä¸­æåˆ°ç”¨ç¼©æ”¾çš„æ–¹æ³•å›ºç„¶å¯è¡Œï¼Œä½†æ˜¯åœ¨ä½¿ç”¨remæˆ–è€…ç™¾åˆ†æ¯”å•ä½æ—¶ï¼Œæ—¶å¸¸ä¼šé€ æˆ1pxè¾¹æ¡†åœ¨æŸäº›æœºå‹ä¸‹æ¶ˆå¤±ï¼›è€Œä½¿ç”¨border-imageæ–¹æ¡ˆåˆ™ä¸ä¼šå‡ºç°æ¶ˆå¤±çš„æƒ…å†µï¼›æœ¬æ–‡å°†æ¢ç´¢è¯¥1pxè¾¹æ¡†æ¶ˆå¤±çš„åŸå› ä»¥åŠåè€…ä¸ºä½•èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚ å‰å› ä¹‹å‰æœ¬äººå†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œæ˜¯å…³äº1pxè¾¹æ¡†çš„ï¼šä»line-heightåˆ°0-5pxã€‚æ–‡ä¸­æåˆ°ç”¨ç¼©æ”¾çš„æ–¹æ³•å›ºç„¶å¯è¡Œï¼Œä½†æ˜¯åœ¨ä½¿ç”¨remæˆ–è€…ç™¾åˆ†æ¯”å•ä½æ—¶ï¼Œæ—¶å¸¸ä¼šé€ æˆ1pxè¾¹æ¡†åœ¨æŸäº›æœºå‹ä¸‹æ¶ˆå¤±ï¼›è€Œä½¿ç”¨border-imageæ–¹æ¡ˆåˆ™ä¸ä¼šå‡ºç°æ¶ˆå¤±çš„æƒ…å†µï¼›æœ¬æ–‡å°†æ¢ç´¢è¯¥1pxè¾¹æ¡†æ¶ˆå¤±çš„åŸå› ä»¥åŠåè€…ä¸ºä½•èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚ LayoutUnitåœ¨LayoutUnitä¸­æåˆ°äº†ä¸¤ç§å°†äºšåƒç´ (å³å°æ•°ç‚¹åƒç´ )è½¬æ¢ä¸ºçœŸå®ç‰©ç†åƒç´ çš„ä¸¤ç§æ–¹æ³•ï¼Œç¤ºæ„å›¾å¦‚ä¸‹ï¼š enclosingIntRect x: floor(x) y: floor(y) maxX: ceil(x + width) maxY: ceil(y + height) width: ceil(x + width) - floor(x) height: ceil(y + height) - floor(y) pixelSnappedIntRect é‡‡ç”¨è¯¥æ–¹å¼ï¼Œæœ€ç»ˆå½¢æˆçš„ç‰©ç†å¤§å°å°†ä¼šè¶…è¿‡åŸæ¥çš„å°ï¼Œä½¿å¾—ç›’æ¨¡å‹å‡ºç°æº¢å‡ºçš„é£é™©ã€‚ pixelSnappedIntRect x: round(x) y: round(y) maxX: round(x + width) maxY: round(y + height) width: round(x + width) - round(x) height: round(y + height) - round(y) é‡‡ç”¨è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯èƒ½å¤Ÿä¿è¯æœ€ç»ˆæ¸²æŸ“çš„ç‰©ç†å¤§å°ä¸è¶…è¿‡åŸæ¥çš„å¤§å°ï¼Œä½¿å¾—åœ¨å±å¹•ç­‰åˆ†å‡ºç°å°æ•°çš„æƒ…å†µä¹Ÿä¸ä¼šæº¢å‡ºåˆ°ä¸‹ä¸€è¡Œã€‚æœ¬äººå°†ä¸ƒä¸ªdivç­‰åˆ†æ•´ä¸ªå±å¹•å®½åº¦ï¼Œåœ¨ä¸åŒçš„åˆ†è¾¨ç‡ä¸‹å¹¶æ²¡æœ‰å‘ç”Ÿæº¢å‡ºçš„æƒ…å†µï¼Œå› æ­¤çŒœæµ‹æµè§ˆå™¨é‡‡ç”¨äº†è¿™å¥—æ–¹æ¡ˆã€‚ è½¬æ¢æ—¶çš„ç›¸äº’å½±å“å¦‚æœæ¯ä¸ªDOMèŠ‚ç‚¹éƒ½å„è‡ªç‹¬ç«‹åœ°é‡‡ç”¨ä¸Šè¿°æ–¹æ¡ˆä¹‹ä¸€ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå‡ºç°1pxæ¶ˆå¤±çš„æƒ…å†µï¼Œç„¶è€Œäº‹å®ä¸Šåœ¨æ–‡æ¡£æµä¸­ï¼Œå‰ä¸€ä¸ªèŠ‚ç‚¹æ‰€å ç”¨çš„å¤§å°ç»è¿‡äºšåƒç´ è½¬æ¢ä¹‹åï¼Œè¿˜ä¼šå½±å“åä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°ï¼Œä»è€Œå½±å“åè€…è¿›è¡Œäºšåƒç´ è½¬æ¢ã€‚ æ­¤å¤„ä»¥iPhone4å±å¹•å¤§å°ä¸ºä¾‹ï¼Œå°†å…¶ä¸ƒç­‰åˆ†ï¼š .box { font-size: 10px; width: 14.2857%; height: 14.2857%; background: pink; float: left; } .box:nth-child(2n) { background: gray; } å¹¶æ‰“å°è®¡ç®—å®½åº¦ä¸å®é™…æ¸²æŸ“å®½åº¦ï¼š 1234$.each($(&quot;.box&quot;), function(index, val) {var computedWid = getComputedStyle(val).width;var wid = val.offsetWidth;$(val).html(computedWid + '&lt;br&gt;' + wid + 'px'); æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š å…¶è®¡ç®—è§„åˆ™å¦‚ä¸‹ï¼š ç¬¬ä¸€ä¸ªboxçš„å¤§å°ä¸º45.7031pxï¼Œè¿›ä½46pxå¤§å°ï¼Œå¯¼è‡´å…¶è¦†ç›–äº†åä¸€ä¸ªboxï¼Œè¦†ç›–å®½åº¦ä¸º1-0.7031=0.2969pxï¼› ç¬¬äºŒä¸ªboxçš„å¤§å°æ­¤æ—¶ç¼©å‡ä¸º45.7031-0.2969=45.4062pxï¼Œå› æ­¤èˆå…¥ä¸º45pxï¼Œæ­¤æ—¶èˆå¼ƒçš„0.4062pxåˆ™åˆå¹¶åˆ°ä¸‹ä¸€ä¸ªboxçš„ä¸Šï¼› ç¬¬ä¸‰ä¸ªboxçš„å¤§å°æ­¤æ—¶æ‰©å¤§ä¸º45.7031+0.4062=46.1093pxï¼Œå› æ­¤èˆå…¥ä¸º46pxï¼Œåˆå¹¶åˆ°ä¸‹ä¸€ä¸ªboxçš„å®½åº¦ä¸º0.1093pxï¼› ç¬¬å››ä¸ªboxçš„å¤§å°æ‰©å¤§ä¸º45.7031+0.1093px=45.8124pxï¼Œå› æ­¤è¿›ä½ä¸º46pxï¼Œè¦†ç›–ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å®½åº¦0.1876pxï¼› ç¬¬äº”ä¸ªboxçš„å¤§å°ç¼©å‡ä¸º45.7031-0.1876=45.5155pxï¼Œå› æ­¤è¿›ä½ä¸º46pxï¼Œè¦†ç›–åä¸€ä¸ªèŠ‚ç‚¹å®½åº¦0.4845pxï¼› ç¬¬å…­ä¸ªboxçš„å¤§å°ç¼©å‡ä¸º45.7031-0.4845=45.2186pxï¼Œå› æ­¤èˆå…¥45pxï¼Œåˆå¹¶åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å®½åº¦ä¸º0.2186pxï¼› ç¬¬ä¸ƒä¸ªboxçš„å¤§å°æ‰©å¤§ä¸º45.7031+0.2186=45.9217pxï¼Œå› æ­¤èˆå…¥ä¸º46pxï¼› å¯å‘ç°è®¡ç®—ç»“æœä¸æ˜¾ç¤ºæ•ˆæœå»åˆï¼Œè¯»è€…å¯ä»¥é€šè¿‡è°ƒæ•´ä¸åŒçš„åˆ†è¾¨ç‡æ¥æµ‹è¯•ï¼Œæ ¹æ®è¿™ä¸ªè§„åˆ™éƒ½èƒ½é¢„æµ‹æ­£ç¡®ç»“æœã€‚ ç»“è®º é‡‡ç”¨scaleã€zoomã€viewportç­‰ç¼©æ”¾æ–¹æ¡ˆå®ç°çš„1pxï¼Œç”±äºå®é™…ä¸Šä¸º0.5pxçš„CSSåƒç´ ï¼Œå¯¼è‡´å…¶æœ‰å¯èƒ½è¢«ä¸Šä¸€ä¸ªDOMèŠ‚ç‚¹æ‰€è¦†ç›–ï¼Œä»è€Œå¯¼è‡´å…¶å¤§å°å°äº0.5pxï¼Œè¿›è€Œå¯¼è‡´å…¶è¢«èˆå…¥ä¸º0pxï¼Œæ‰€ä»¥æ‰ä¼šæ¶ˆå¤±ä¸è§ã€‚ è€Œé‡‡ç”¨border-imageæ–¹å¼åˆ™ä¸ä¼šæ¶ˆå¤±ï¼Œç”±äºborder-imageæ–¹æ¡ˆçš„å¤§å°ä¸º1pxçš„CSSåƒç´ ï¼Œä¸Šä¸€ä¸ªDOMèŠ‚ç‚¹æ— è®ºå¦‚ä½•è¦†ç›–ï¼Œæœ€å¤§ä¸è¿‡0.499999pxï¼Œå³ä¸è¶…è¿‡0.5pxï¼Œå› æ­¤å³ä½¿è¢«è¦†ç›–0.499999pxï¼Œå…¶å¤§å°ä»ä¸º0.511111pxï¼Œæœ€ç»ˆæ•ˆæœä¹Ÿæ˜¯è¿›ä½åˆ°1pxï¼Œå› æ­¤è¯¥æ–¹æ¡ˆå®ç°çš„1pxè¾¹æ¡†ä¼šå§‹ç»ˆæ˜¾ç¤ºã€‚","link":"/2016/04/17/%E6%B6%88%E5%A4%B1%E7%9A%841px/"},{"title":"æ·±å…¥æµ…å‡º Node.js ã®ç¬”è®°","text":"å‰ç«¯å¼€å‘äººå‘˜ä¸Šæ‰‹ Node.js è¿˜æ˜¯éœ€è¦è¯¾è¡¥ä¸€äº›æœåŠ¡ç«¯çŸ¥è¯†çš„ã€‚ ç« ä¸€ï¼Œç« äºŒ å•çº¿ç¨‹ï¼Œä½¿å¾— Node ä¸éœ€è¦åƒå¤šçº¿ç¨‹ç¼–ç¨‹é‚£æ ·å¤„å¤„åœ¨æ„çŠ¶æ€çš„åŒæ­¥é—®é¢˜ï¼ˆæ²¡æœ‰æ­»é”ï¼Œæ²¡æœ‰çº¿ç¨‹ä¸Šä¸‹æ–‡äº¤æ¢ï¼‰ exports å¯¹è±¡ç”¨äºå¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–å˜é‡ï¼Œæ­¤å¤–ï¼Œåœ¨æ¨¡å—ä¸­è¿˜å­˜åœ¨ä¸€ä¸ª module å¯¹è±¡ï¼Œå®ƒä»£è¡¨æ¨¡å—è‡ªèº«ï¼Œè€Œ exports æ˜¯ module çš„å±æ€§ exports å’Œ module.exports çš„åŒºåˆ«: module.exports åˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ {} exports æ˜¯æŒ‡å‘çš„ module.exports çš„å¼•ç”¨ require() è¿”å›çš„æ˜¯ module.exports è€Œä¸æ˜¯ exports require æ¨¡å—æ—¶ä¼˜å…ˆä»ç¼“å­˜ä¸­åŠ è½½ï¼Œè€Œ Node ç¼“å­˜çš„æ˜¯ç¼–è¯‘å’Œæ‰§è¡Œä¹‹åçš„å¯¹è±¡ require æ¨¡å—æ—¶ï¼Œå¯çœç•¥æ‰©å±•åï¼ŒNode ä¼šä¾æ¬¡è¡¥è¶³ .js, .json, .node è¿›è¡Œå°è¯•ï¼Œå»ºè®®åç¼€ä¸º .json å’Œ .node æ—¶å¸¦ä¸Šæ‰©å±•å åœ¨æ¨¡å—ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼ŒNode å¯¹è·å–çš„ JavaScript æ–‡ä»¶è¿›è¡Œäº†å¤´å°¾åŒ…è£…ï¼Œä½¿å…¶æ‰§è¡Œåœ¨ä¸€ä¸ªåŒ…å«ç‰¹å®šå˜é‡ï¼ˆexportsï¼Œrequireï¼Œmoduleï¼Œ__filenameï¼Œ__dirnameï¼‰çš„é—­åŒ…ä¸­ï¼Œè¯¥é—­åŒ…è¿”å›æ¨¡å—çš„ exports å±æ€§ ç« ä¸‰ é˜»å¡ IO: ç­‰åˆ°ç³»ç»Ÿå†…æ ¸å±‚é¢å®Œæˆæ‰€æœ‰æ“ä½œä¹‹åï¼Œè°ƒç”¨éšä¹‹ç»“æŸ éé˜»å¡ IO: è°ƒç”¨ä¹‹åç«‹å³è¿”å›ï¼ˆä¸æºå¸¦å¤„ç†å®Œæˆçš„æ•°æ®ï¼Œå› ä¸ºå°šæœªç”Ÿæˆï¼‰ï¼Œä¹‹åè¿˜å¾—é€šè¿‡æ–‡ä»¶æè¿°ç¬¦å†æ¬¡è¯»å–æ•°æ® éé˜»å¡ IO è¿”å›ä¹‹åï¼ŒCPU æ—¶é—´ç‰‡å¯ä»¥ç”¨äºå¤„ç†å…¶å®ƒäº‹åŠ¡ï¼Œä½†ä¸ºäº†è·å–å®Œæ•´æ•°æ®éœ€è¦è½®è¯¢ï¼Œä»¥åˆ¤æ–­æ“ä½œæ˜¯å¦å®Œæˆ è½®è¯¢æ»¡è¶³äº†éé˜»å¡ IO ç¡®ä¿è·å–å®Œæ•´æ•°æ®çš„éœ€æ±‚ï¼Œä½†æ˜¯å¯¹äºåº”ç”¨ç¨‹åºè€Œè¨€ï¼Œå®ƒä»ç„¶æ˜¯ä¸€ç§åŒæ­¥ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºä»ç„¶éœ€è¦ç­‰å¾… IO å®Œå…¨è¿”å› Node çš„å•çº¿ç¨‹ä»…ä»…æ˜¯æŒ‡ JavaScript æ‰§è¡Œåœ¨å•çº¿ç¨‹ä¸­ï¼Œå†…éƒ¨å¦æœ‰çº¿ç¨‹æ± å®Œæˆ IO ä»»åŠ¡ Node ç»å…¸çš„è°ƒç”¨æ–¹å¼: ä» JavaScript è°ƒç”¨ Node çš„æ ¸å¿ƒæ¨¡å—ï¼›æ ¸å¿ƒæ¨¡å—è°ƒç”¨ C++ å†…å»ºæ¨¡å—ï¼›å†…å»ºæ¨¡å—é€šè¿‡ libuv è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼ˆå…¶ä¸­ libuv ä½œä¸ºå°è£…å±‚ï¼Œæœ‰ä¸¤ä¸ªå¹³å°çš„å®ç°ï¼‰ Node çš„å¼‚æ­¥: ç¬¬ä¸€éƒ¨åˆ†ï¼šJavaScript è°ƒç”¨ç«‹å³è¿”å›ï¼›æ¥ç€åœ¨è¿›è¡Œç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¯·æ±‚å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†ä»JavaScript å±‚ä¼ å…¥çš„å‚æ•°å’Œå½“å‰æ–¹æ³•ï¼Œä»¥åŠå›è°ƒå‡½æ•°ï¼›æ¥ç€å°†è¯¥å¯¹è±¡æ¨å…¥ç³»ç»Ÿçš„çº¿ç¨‹æ± ä¸­ç­‰å¾…æ‰§è¡Œï¼Œè€Œä¸ç”¨åœ¨ä¹è¯¥æ“ä½œæ˜¯å¦é˜»å¡ IO ç¬¬äºŒéƒ¨åˆ†ï¼šçº¿ç¨‹æ± ä¸­çš„ IO æ“ä½œè°ƒç”¨å®Œæ¯•ä¹‹åï¼Œå°† IO ç»“æœé€šçŸ¥å¹¶å½’è¿˜çº¿ç¨‹ï¼›æ­¤æ—¶åœ¨æ¯æ¬¡ Tick çš„æ‰§è¡Œä¸­ï¼Œä¼šè°ƒç”¨ç‰¹å®šæ–¹æ³•æ£€æŸ¥çº¿ç¨‹æ± ä¸­æ˜¯å¦æœ‰æ‰§è¡Œå®Œçš„è¯·æ±‚ï¼›è‹¥å­˜åœ¨åˆ™å°†è¯·æ±‚å¯¹è±¡åŠ å…¥åˆ° IO è§‚å¯Ÿè€…çš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åå°†å…¶å½“åšäº‹ä»¶å¤„ç† setTimeout ä¸ setInterval çš„å®šæ—¶å¹¶ä¸ç²¾ç¡®ï¼Œç›¸æ¯” process.nextTick æ›´ä¸ºæµªè´¹æ€§èƒ½ process.nextTick åœ¨æ¯è½®å¾ªç¯ä¸­å°†æ•°ç»„ä¸­çš„å›è°ƒå‡½æ•°å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œè€Œ setImmediate åˆ™åœ¨æ¯è½®å¾ªç¯ä¸­æ‰§è¡Œé“¾è¡¨ä¸­çš„ä¸€ä¸ªå›è°ƒå‡½æ•° ç« å›› é›ªå´©: åœ¨é«˜è®¿é—®é‡ï¼Œå¤§å¹¶å‘é‡çš„æƒ…å†µä¸‹ç¼“å­˜å¤±æ•ˆçš„æƒ…æ™¯ï¼Œæ­¤æ—¶å¤§é‡çš„è¯·æ±‚åŒæ—¶æ¶Œå…¥æ•°æ®åº“ä¸­æ•°æ®åº“æ— æ³•åŒæ—¶æ‰¿å—å¦‚æ­¤å¤§çš„æŸ¥è¯¢è¯·æ±‚ï¼Œè¿›è€Œå¾€å‰å½±å“åˆ°ç½‘ç«™æ•´ä½“çš„å“åº”é€Ÿåº¦ ä½¿ç”¨ once è§£å†³é›ªå´©é—®é¢˜: 1234567891011const proxy = new events.EventEmitter();let status = 'ready';const select = function(callback) { proxy.once('selected', callback); if(status === 'ready') { status = 'pending'; db.select('SQL', (ret) =&gt; { proxy.emit('selected', ret); status = 'ready'; }); }}; å°†æ‰€æœ‰è¯·æ±‚å›è°ƒéƒ½å‹å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œä½¿ç”¨ once ä¿è¯æ¯ä¸ªå›è°ƒåªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå¯¹äºç›¸åŒçš„ SQL è¯­å¥ï¼Œä¿è¯åªæŸ¥è¯¢ä¸€æ¬¡ï¼›SQL åœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œæ–°åˆ°æ¥çš„ç›¸åŒè°ƒç”¨åªéœ€åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…å°±ç»ªå³å¯ï¼Œä¸€æ—¦æŸ¥è¯¢ç»“æŸï¼Œå¾—åˆ°çš„ç»“æœå¯ä»¥è¢«è¿™äº›è°ƒç”¨å…±åŒä½¿ç”¨ï¼ˆå› ä¸ºéƒ½ç›‘å¬äº† â€˜selectedâ€™ äº‹ä»¶ï¼‰ å°¾è§¦å‘: next() æœºåˆ¶ ç« äº” è§£é™¤å¼•ç”¨ï¼šdelete æ“ä½œå’Œé‡æ–°èµ‹å€¼å…·æœ‰ç›¸åŒçš„æ•ˆæœï¼Œåœ¨ V8 ä¸­é€šè¿‡ delete åˆ é™¤å¯¹è±¡çš„å±æ€§æœ‰å¯èƒ½å¹²æ‰°V8çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨èµ‹å€¼æ–¹å¼ã€‚ æ— æ³•ç«‹å³å›æ”¶çš„å†…å­˜æœ‰é—­åŒ…å’Œå…¨å±€å˜é‡å¼•ç”¨è¿™ä¸¤ç§æƒ…å†µã€‚ç”±äºV8çš„å†…å­˜é™åˆ¶ï¼Œè¦ååˆ†å°å¿ƒæ­¤ç±»å˜é‡æ˜¯å¦æ— é™åˆ¶åœ°å¢åŠ ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´è€ç”Ÿä»£ä¸­çš„å¯¹è±¡å¢å¤šã€‚ å †ä¸­çš„å†…å­˜æ€»æ˜¯å°äºè¿›ç¨‹çš„å†…å­˜ï¼Œè¿™æ„å‘³ç€ Node ä¸­çš„å†…å­˜ä½¿ç”¨å¹¶ééƒ½æ˜¯é€šè¿‡ V8 è¿›è¡Œåˆ†é…çš„ã€‚é‚£äº›ä¸æ˜¯é€šè¿‡ V8 åˆ†é…çš„å†…å­˜ç§°ä¸ºå †å¤–å†…å­˜ã€‚ä¾‹å¦‚ Buffe rå¯¹è±¡ï¼Œå®ƒä¸ç»è¿‡V8çš„å†…å­˜åˆ†é…æœºåˆ¶ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæœ‰å †å†…å­˜çš„å¤§å°é™åˆ¶ã€‚ ç”±äºæ¨¡å—çš„ç¼“å­˜æœºåˆ¶ï¼Œæ¨¡å—æ˜¯å¸¸é©»è€ç”Ÿä»£çš„ã€‚åœ¨è®¾è®¡æ¨¡å—æ—¶ï¼Œè¦ååˆ†å°å¿ƒå†…å­˜æ³„æ¼çš„å‡ºç°ã€‚åœ¨ä¸‹é¢çš„ä»£ç ï¼Œæ¯æ¬¡è°ƒç”¨ leak() æ–¹æ³•æ—¶ï¼Œéƒ½å¯¼è‡´å±€éƒ¨å˜é‡ leakArray ä¸åœå¢åŠ å†…å­˜çš„å ç”¨ï¼Œä¸”ä¸è¢«é‡Šæ”¾ï¼š 1234var leakArray = [];exports.leak = function () { leakArray.push(&quot;leak&quot; + Math.random());}; å¦‚æœæ¨¡å—ä¸å¯é¿å…åœ°éœ€è¦è¿™ä¹ˆè®¾è®¡ï¼Œé‚£ä¹ˆè¯·æ·»åŠ æ¸…ç©ºé˜Ÿåˆ—çš„ç›¸åº”æ¥å£ï¼Œä»¥ä¾›è°ƒç”¨è€…é‡Šæ”¾å†…å­˜ã€‚ â€‹ æ·±åº¦çš„è§£å†³æ–¹æ¡ˆåº”è¯¥æ˜¯ç›‘æ§é˜Ÿåˆ—çš„é•¿åº¦ï¼Œä¸€æ—¦å †ç§¯ï¼Œåº”å½“é€šè¿‡ç›‘æ§ç³»ç»Ÿäº§ç”ŸæŠ¥è­¦å¹¶é€šçŸ¥ç›¸å…³äººå‘˜ã€‚ å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ä»»æ„å¼‚æ­¥è°ƒç”¨éƒ½åº”è¯¥åŒ…å«è¶…æ—¶æœºåˆ¶ï¼Œä¸€æ—¦åœ¨é™å®šçš„æ—¶é—´å†…æœªå®Œæˆå“åº”ï¼Œé€šè¿‡å›è°ƒå‡½æ•°ä¼ é€’è¶…æ—¶å¼‚å¸¸ï¼Œä½¿å¾—ä»»æ„å¼‚æ­¥è°ƒç”¨çš„å›è°ƒéƒ½å…·å¤‡å¯æ§çš„å“åº”æ—¶é—´ï¼Œç»™æ¶ˆè´¹é€Ÿåº¦ä¸€ä¸ªä¸‹é™å€¼ã€‚ ç”±äºV8çš„å†…å­˜é™åˆ¶ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡fs.readFile()å’Œfs.writeFile()ç›´æ¥è¿›è¡Œå¤§æ–‡ä»¶çš„æ“ä½œï¼Œè€Œæ”¹ç”¨fs.createReadStream()å’Œfs.createWriteStream()æ–¹æ³•é€šè¿‡æµçš„æ–¹å¼å®ç°å¯¹å¤§æ–‡ä»¶çš„æ“ä½œã€‚ ç« å…­ å¦‚æœéœ€è¦è¶…è¿‡ 8 KB çš„ Buffer å¯¹è±¡ï¼Œå°†ä¼šç›´æ¥åˆ†é…ä¸€ä¸ª SlowBuffer å¯¹è±¡ä½œä¸º slab å•å…ƒï¼Œè¿™ä¸ª slab å•å…ƒå°†ä¼šè¢«è¿™ä¸ªå¤§ Buffer å¯¹è±¡ç‹¬å ã€‚ ä¸Šé¢æåˆ°çš„ Buffer å¯¹è±¡éƒ½æ˜¯ JavaScript å±‚é¢çš„ï¼Œèƒ½å¤Ÿè¢« V8 çš„åƒåœ¾å›æ”¶æ ‡è®°å›æ”¶ã€‚ä½†æ˜¯å…¶å†…éƒ¨çš„ parent å±æ€§æŒ‡å‘çš„ SlowBuffer å¯¹è±¡å´æ¥è‡ªäº Node ä¸­ C++ å±‚é¢ä¸Šçš„ Buffe rå¯¹è±¡ï¼Œæ‰€ç”¨å†…å­˜ä¸åœ¨ V8 çš„å †ä¸­ã€‚ å½“è¿›è¡Œå°è€Œé¢‘ç¹çš„ Buffer æ“ä½œæ—¶ï¼Œé‡‡ç”¨ slab çš„æœºåˆ¶è¿›è¡Œé¢„å…ˆç”³è¯·å’Œäº‹ååˆ†é…ï¼Œä½¿å¾— JavaScript åˆ°æ“ä½œç³»ç»Ÿä¹‹é—´ä¸å¿…æœ‰è¿‡å¤šçš„å†…å­˜ç”³è¯·æ–¹é¢çš„ç³»ç»Ÿè°ƒç”¨ã€‚å¯¹äºå¤§å—çš„ Buffer è€Œè¨€ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ C++ å±‚é¢æä¾›çš„å†…å­˜ï¼Œè€Œæ— éœ€ç»†è…»çš„åˆ†é…æ“ä½œã€‚ buffer += chunk; è¿™å¥ä»£ç é‡Œéšè—äº† toString() æ“ä½œï¼Œå®ƒç­‰ä»·äºå¦‚ä¸‹çš„ä»£ç ï¼š 1buffer = buffer.toString() + chunk.toString(); é€šè¿‡é¢„å…ˆè½¬æ¢é™æ€å†…å®¹ä¸º Buffer å¯¹è±¡ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘ CPU çš„é‡å¤ä½¿ç”¨ï¼ŒèŠ‚çœæœåŠ¡å™¨èµ„æºã€‚åœ¨ Node æ„å»ºçš„ Web åº”ç”¨ä¸­ï¼Œå¯ä»¥é€‰æ‹©å°†é¡µé¢ä¸­çš„åŠ¨æ€å†…å®¹å’Œé™æ€å†…å®¹åˆ†ç¦»ï¼Œé™æ€å†…å®¹éƒ¨åˆ†å¯ä»¥é€šè¿‡é¢„å…ˆè½¬æ¢ä¸º Buffer çš„æ–¹å¼ï¼Œä½¿æ€§èƒ½å¾—åˆ°æå‡ã€‚ç”±äºæ–‡ä»¶è‡ªèº«æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œæ‰€ä»¥åœ¨ä¸éœ€è¦æ”¹å˜å†…å®¹çš„åœºæ™¯ä¸‹ï¼Œå°½é‡åªè¯»å– Bufferï¼Œç„¶åç›´æ¥ä¼ è¾“ï¼Œä¸åšé¢å¤–çš„è½¬æ¢ï¼Œé¿å…æŸè€—ã€‚ ç« ä¸ƒ TCP é’ˆå¯¹ç½‘ç»œä¸­çš„å°æ•°æ®åŒ…æœ‰ä¸€å®šçš„ä¼˜åŒ–ç­–ç•¥ï¼šNagleç®—æ³•ã€‚Nagleç®—æ³•è¦æ±‚ç¼“å†²åŒºçš„æ•°æ®è¾¾åˆ°ä¸€å®šæ•°é‡æˆ–è€…ä¸€å®šæ—¶é—´åæ‰å°†å…¶å‘å‡ºï¼Œæ‰€ä»¥å°æ•°æ®åŒ…å°†ä¼šè¢«Nagleç®—æ³•åˆå¹¶ï¼Œä»¥æ­¤æ¥ä¼˜åŒ–ç½‘ç»œã€‚è¿™ç§ä¼˜åŒ–è™½ç„¶ä½¿ç½‘ç»œå¸¦å®½è¢«æœ‰æ•ˆåœ°ä½¿ç”¨ï¼Œä½†æ˜¯æ•°æ®æœ‰å¯èƒ½è¢«å»¶è¿Ÿå‘é€ã€‚ åœ¨ Node ä¸­ï¼ŒTCP é»˜è®¤å¯ç”¨äº† Nagle ç®—æ³•ï¼Œè°ƒç”¨ socket.setNoDelay(true) å…³é—­ Nagle ç®—æ³•ï¼Œä½¿å¾—write() å¯ä»¥ç«‹å³å‘é€æ•°æ®åˆ°ç½‘ç»œä¸­ã€‚å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡åœ¨ç½‘ç»œçš„ä¸€ç«¯è°ƒç”¨ write() ä¼šè§¦å‘å¦ä¸€ç«¯çš„ data äº‹ä»¶ï¼Œä½†æ˜¯å¹¶ä¸æ„å‘³ç€æ¯æ¬¡ write() éƒ½ä¼šè§¦å‘ä¸€æ¬¡ data äº‹ä»¶ï¼Œåœ¨å…³é—­æ‰ Nagle ç®—æ³•åï¼Œå¦ä¸€ç«¯å¯èƒ½ä¼šå°†æ¥æ”¶åˆ°çš„å¤šä¸ªå°æ•°æ®åŒ…åˆå¹¶ï¼Œç„¶ååªè§¦å‘ä¸€æ¬¡ data äº‹ä»¶ã€‚ UDP ä¸ TCP åŒå±äºç½‘ç»œä¼ è¾“å±‚ã€‚TCP ä¸­è¿æ¥ä¸€æ—¦å»ºç«‹ï¼Œæ‰€æœ‰çš„ä¼šè¯éƒ½åŸºäºè¿æ¥å®Œæˆï¼Œå®¢æˆ·ç«¯å¦‚æœè¦ä¸å¦ä¸€ä¸ª TCP æœåŠ¡é€šä¿¡ï¼Œéœ€è¦å¦åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—æ¥å®Œæˆè¿æ¥ã€‚ä½†åœ¨ UDP ä¸­ï¼Œä¸€ä¸ªå¥—æ¥å­—å¯ä»¥ä¸å¤šä¸ª UDP æœåŠ¡é€šä¿¡ï¼Œå¸¸å¸¸åº”ç”¨åœ¨é‚£ç§å¶å°”ä¸¢ä¸€ä¸¤ä¸ªæ•°æ®åŒ…ä¹Ÿä¸ä¼šäº§ç”Ÿé‡å¤§å½±å“çš„åœºæ™¯ï¼Œæ¯”å¦‚éŸ³é¢‘ã€è§†é¢‘ç­‰ã€‚UDP ç›®å‰åº”ç”¨å¾ˆå¹¿æ³›ï¼ŒDNS æœåŠ¡å³æ˜¯åŸºäºå®ƒå®ç°çš„ã€‚ æŠ¥æ–‡ä½“éƒ¨åˆ†åˆ™æŠ½è±¡ä¸ºä¸€ä¸ªåªè¯»æµå¯¹è±¡ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘éœ€è¦è¯»å–æŠ¥æ–‡ä½“ä¸­çš„æ•°æ®ï¼Œåˆ™è¦åœ¨è¿™ä¸ªæ•°æ®æµç»“æŸåæ‰èƒ½è¿›è¡Œæ“ä½œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112function (req, res) { // console.log(req.headers); var buffers = []; req.on('data', function (trunk) { buffers.push(trunk); }).on('end', function () { var buffer = Buffer.concat(buffers); // TODO res.end('Hello world'); });} HTTPå“åº”å¯¹è±¡ï¼šå®ƒå°è£…äº†å¯¹åº•å±‚è¿æ¥çš„å†™æ“ä½œï¼Œå¯ä»¥å°†å…¶çœ‹æˆä¸€ä¸ªå¯å†™çš„æµå¯¹è±¡ã€‚å®ƒå½±å“å“åº”æŠ¥æ–‡å¤´éƒ¨ä¿¡æ¯çš„ API ä¸º res.setHeader() å’Œ res.writeHead()ã€‚åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼š res.writeHead(200, {â€˜Content-Typeâ€™: â€˜text/plainâ€™}); å…¶åˆ†ä¸º setHeader() å’Œ writeHead() ä¸¤ä¸ªæ­¥éª¤ã€‚å®ƒåœ¨ http æ¨¡å—çš„å°è£…ä¸‹ï¼Œå®é™…ç”Ÿæˆå¦‚ä¸‹æŠ¥æ–‡ï¼š &lt; HTTP/1.1 200 OK&lt; Content-Type: text/plain æˆ‘ä»¬å¯ä»¥è°ƒç”¨ setHeader è¿›è¡Œå¤šæ¬¡è®¾ç½®ï¼Œä½†åªæœ‰è°ƒç”¨ writeHead åï¼ŒæŠ¥å¤´æ‰ä¼šå†™å…¥åˆ°è¿æ¥ä¸­ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œhttpæ¨¡å—ä¼šè‡ªåŠ¨å¸®ä½ è®¾ç½®ä¸€äº›å¤´ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š &lt; Date: Sat, 06 Apr 2013 08:01:44 GMT&lt; Connection: keep-alive&lt; Transfer-Encoding: chunkedâ€‹ æŠ¥æ–‡ä½“éƒ¨åˆ†åˆ™æ˜¯è°ƒç”¨ res.write() å’Œ res.end() æ–¹æ³•å®ç°ï¼Œå·®åˆ«åœ¨äº res.end() ä¼šå…ˆè°ƒç”¨ write() å‘é€æ•°æ®ï¼Œç„¶åå‘é€ä¿¡å·å‘ŠçŸ¥æœåŠ¡å™¨è¿™æ¬¡å“åº”ç»“æŸã€‚ å“åº”ç»“æŸåï¼ŒHTTP æœåŠ¡å™¨å¯èƒ½ä¼šå°†å½“å‰çš„è¿æ¥ç”¨äºä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œæˆ–è€…å…³é—­è¿æ¥ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒæŠ¥å¤´æ˜¯åœ¨æŠ¥æ–‡ä½“å‘é€å‰å‘é€çš„ï¼Œä¸€æ—¦å¼€å§‹äº†æ•°æ®çš„å‘é€ï¼ŒwriteHead() å’Œ setHeader() å°†ä¸å†ç”Ÿæ•ˆã€‚å¦å¤–ï¼Œæ— è®ºæœåŠ¡å™¨ç«¯åœ¨å¤„ç†ä¸šåŠ¡é€»è¾‘æ—¶æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼ŒåŠ¡å¿…åœ¨ç»“æŸæ—¶è°ƒç”¨res.end()ç»“æŸè¯·æ±‚ï¼Œå¦åˆ™å®¢æˆ·ç«¯å°†ä¸€ç›´å¤„äºç­‰å¾…çš„çŠ¶æ€ã€‚ åŒæ—¶ http æ¨¡å—æä¾›äº†ä¸€ä¸ªåº•å±‚ APIï¼šhttp.request(options, connect)ï¼Œç”¨äºæ„é€  HTTP å®¢æˆ·ç«¯ã€‚ ä¸ºäº†é‡ç”¨ TCP è¿æ¥ï¼Œhttp æ¨¡å—åŒ…å«ä¸€ä¸ªé»˜è®¤çš„å®¢æˆ·ç«¯ä»£ç†å¯¹è±¡ http.globalAgentã€‚å®ƒå¯¹æ¯ä¸ªæœåŠ¡å™¨ç«¯ï¼ˆhost + portï¼‰åˆ›å»ºçš„è¿æ¥è¿›è¡Œäº†ç®¡ç†ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡ ClientRequest å¯¹è±¡å¯¹åŒä¸€ä¸ªæœåŠ¡å™¨ç«¯å‘èµ·çš„ HTTP è¯·æ±‚æœ€å¤šå¯ä»¥åˆ›å»º 5 ä¸ªè¿æ¥ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒWebSocket ä¸ä¼ ç»Ÿ HTTP æœ‰å¦‚ä¸‹å¥½å¤„ï¼š å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯åªå»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨æ›´å°‘çš„è¿æ¥ã€‚ WebSocketæœåŠ¡å™¨ç«¯å¯ä»¥æ¨é€æ•°æ®åˆ°å®¢æˆ·ç«¯ï¼Œè¿™è¿œæ¯”HTTPè¯·æ±‚å“åº”æ¨¡å¼æ›´çµæ´»ã€æ›´é«˜æ•ˆã€‚ æœ‰æ›´è½»é‡çº§çš„åè®®å¤´ï¼Œå‡å°‘æ•°æ®ä¼ é€é‡ã€‚ ç« å…«åŸºç¡€åŠŸèƒ½ä¸æ•°æ®ä¸Šä¼  RESTful ç±» Web æœåŠ¡ä¸­è¯·æ±‚æ–¹æ³•ï¼š PUT ä»£è¡¨æ–°å»ºä¸€ä¸ªèµ„æº POST è¡¨ç¤ºè¦æ›´æ–°ä¸€ä¸ªèµ„æº GET è¡¨ç¤ºæŸ¥çœ‹ä¸€ä¸ªèµ„æº è€Œ DELETE è¡¨ç¤ºåˆ é™¤ä¸€ä¸ªèµ„æº æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯·æ±‚æ–¹æ³•æ¥å†³å®šå“åº”è¡Œä¸ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516function (req, res) { switch (req.method) { case 'POST': update(req, res); break; case 'DELETE': remove(req, res); break; case 'PUT': create(req, res); break; case 'GET': default: get(req, res); }} â€‹ var url = require('url'); var querystring = require('querystring'); var query = querystring.parse(url.parse(req.url).query); //æ›´ç®€æ´çš„æ–¹æ³•æ˜¯ç»™url.parse()ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š var query = url.parse(req.url, true).query; // å®ƒä¼šå°†foo=bar&amp;baz=valè§£æä¸ºä¸€ä¸ªJSONå¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š { foo: 'bar', baz: 'val' } 12345678910113. è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œå¦‚æœæŸ¥è¯¢å­—ç¬¦ä¸²ä¸­çš„é”®å‡ºç°å¤šæ¬¡ï¼Œé‚£ä¹ˆå®ƒçš„å€¼ä¼šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š ```js // foo=bar&amp;foo=baz var query = url.parse(req.url, true).query; // { // foo: ['bar', 'baz'] // } ä¸šåŠ¡çš„åˆ¤æ–­ä¸€å®šè¦æ£€æŸ¥å€¼æ˜¯æ•°ç»„è¿˜æ˜¯å­—ç¬¦ä¸²ï¼Œå¦åˆ™å¯èƒ½å‡ºç°TypeErrorå¼‚å¸¸çš„æƒ…å†µã€‚ Cookie çš„å¤„ç†åˆ†ä¸ºå¦‚ä¸‹å‡ æ­¥ï¼š æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€ Cookieã€‚ æµè§ˆå™¨å°† Cookie ä¿å­˜ã€‚ ä¹‹åæ¯æ¬¡æµè§ˆå™¨éƒ½ä¼šå°† Cookie å‘å‘æœåŠ¡å™¨ç«¯ã€‚ HTTP_Parser ä¼šå°†æ‰€æœ‰çš„æŠ¥æ–‡å­—æ®µè§£æåˆ° req.headers ä¸Šï¼Œé‚£ä¹ˆ Cookie å°±æ˜¯ req.headers.cookieã€‚ å“åº”çš„ Cookie å€¼åœ¨ Set-Cookie å­—æ®µä¸­ï¼Œè§„èŒƒä¸­å¯¹å®ƒçš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼šSet-Cookie: name=value; Path=/; Expires=Sun, 23-Apr-23 09:01:35 GMT; Domain=.domain.com;å…¶ä¸­ name=value æ˜¯å¿…é¡»åŒ…å«çš„éƒ¨åˆ†ï¼Œå…¶ä½™éƒ¨åˆ†çš†æ˜¯å¯é€‰å‚æ•°ã€‚ path è¡¨ç¤ºè¿™ä¸ª Cookie å½±å“åˆ°çš„è·¯å¾„ï¼Œå½“å‰è®¿é—®çš„è·¯å¾„ä¸æ»¡è¶³è¯¥åŒ¹é…æ—¶ï¼Œæµè§ˆå™¨åˆ™ä¸å‘é€è¿™ä¸ª Cookieã€‚ HttpOnly å‘ŠçŸ¥æµè§ˆå™¨ä¸å…è®¸é€šè¿‡è„šæœ¬ document.cookie å»æ›´æ”¹è¿™ä¸ª Cookie å€¼ï¼Œäº‹å®ä¸Šï¼Œè®¾ç½®HttpOnly ä¹‹åï¼Œè¿™ä¸ªå€¼åœ¨ document.cookie ä¸­ä¸å¯è§ã€‚ä½†æ˜¯åœ¨ HTTP è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œä¾ç„¶ä¼šå‘é€è¿™ä¸ªCookieåˆ°æœåŠ¡å™¨ç«¯ã€‚ Secureï¼Œå½“Secureå€¼ä¸ºtrueæ—¶ï¼Œåœ¨HTTPä¸­æ˜¯æ— æ•ˆçš„ï¼Œåœ¨HTTPSä¸­æ‰æœ‰æ•ˆï¼Œè¡¨ç¤ºåˆ›å»ºçš„Cookieåªèƒ½åœ¨HTTPSè¿æ¥ä¸­è¢«æµè§ˆå™¨ä¼ é€’åˆ°æœåŠ¡å™¨ç«¯è¿›è¡Œä¼šè¯éªŒè¯ï¼Œå¦‚æœæ˜¯HTTPè¿æ¥åˆ™ä¸ä¼šä¼ é€’è¯¥ä¿¡æ¯ï¼Œæ‰€ä»¥å¾ˆéš¾è¢«çªƒå¬åˆ°ã€‚ å¦‚æœåœ¨åŸŸåçš„æ ¹èŠ‚ç‚¹è®¾ç½® Cookieï¼Œå°†ä½¿å¾—å‡ ä¹æ‰€æœ‰å­è·¯å¾„ä¸‹çš„è¯·æ±‚éƒ½ä¼šå¸¦ä¸Šè¿™äº›Cookieã€‚ è§£å†³æ–¹æ³•ï¼šä¸ºé™æ€ç»„ä»¶ä½¿ç”¨ä¸åŒçš„åŸŸå ä¸ºä¸éœ€è¦ Cookie çš„ç»„ä»¶æ¢ä¸ªåŸŸåå‡å°‘æ— æ•ˆ Cookie çš„ä¼ è¾“ã€‚ åŒæ—¶è¿˜å¯ä»¥çªç ´æµè§ˆå™¨ä¸‹è½½çº¿ç¨‹æ•°é‡çš„é™åˆ¶ï¼Œå› ä¸ºåŸŸåä¸åŒï¼Œå¯ä»¥å°†ä¸‹è½½çº¿ç¨‹æ•°ç¿»å€ã€‚ ç¼ºç‚¹æ˜¯åŸŸåè½¬æ¢ä¸º IP éœ€è¦è¿›è¡Œ DNS æŸ¥è¯¢ï¼Œå¤šä¸€ä¸ªåŸŸåå°±å¤šä¸€æ¬¡ DNS æŸ¥è¯¢ã€‚ ä¸ºäº†è§£å†³ Cookie æ•æ„Ÿæ•°æ®çš„é—®é¢˜ï¼ŒSession çš„æ•°æ®åªä¿ç•™åœ¨æœåŠ¡å™¨ç«¯ï¼Œä½¿æ•°æ®çš„å®‰å…¨æ€§å¾—åˆ°ä¸€å®šçš„ä¿éšœã€‚ ä¸¤ç§æ–¹å¼ï¼š ç¬¬ä¸€ç§ï¼šåŸºäºCookieæ¥å®ç°ç”¨æˆ·å’Œæ•°æ®çš„æ˜ å°„ ç¬¬äºŒç§ï¼šé€šè¿‡æŸ¥è¯¢å­—ç¬¦ä¸²æ¥å®ç°æµè§ˆå™¨ç«¯å’ŒæœåŠ¡å™¨ç«¯æ•°æ®çš„å¯¹åº” æ³¨: ç”¨æˆ·è®¿é—® http://localhost/pathname æ—¶ï¼Œå¦‚æœæœåŠ¡å™¨ç«¯å‘ç°æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ä¸å¸¦ session_id å‚æ•°ï¼Œå°±ä¼šå°†ç”¨æˆ·è·³è½¬åˆ° http://localhost/pathname?session_id=12344567 è¿™æ ·ä¸€ä¸ªç±»ä¼¼çš„åœ°å€ã€‚å¦‚æœæµè§ˆå™¨æ”¶åˆ°302çŠ¶æ€ç å’ŒLocationæŠ¥å¤´ï¼Œå°±ä¼šé‡æ–°å‘èµ·æ–°çš„è¯·æ±‚ã€‚ æœ‰çš„æœåŠ¡å™¨åœ¨å®¢æˆ·ç«¯ç¦ç”¨Cookieæ—¶ï¼Œä¼šé‡‡ç”¨è¿™ç§æ–¹æ¡ˆå®ç°é€€åŒ–ã€‚é€šè¿‡è¿™ç§æ–¹æ¡ˆï¼Œæ— é¡»åœ¨å“åº”æ—¶è®¾ç½®Cookieã€‚ä½†æ˜¯è¿™ç§æ–¹æ¡ˆå¸¦æ¥çš„é£é™©è¿œå¤§äºåŸºäºCookieå®ç°çš„é£é™©ï¼Œå› ä¸ºåªè¦å°†åœ°å€æ ä¸­çš„åœ°å€å‘ç»™å¦å¤–ä¸€ä¸ªäººï¼Œé‚£ä¹ˆä»–å°±æ‹¥æœ‰è·Ÿä½ ç›¸åŒçš„èº«ä»½ã€‚Cookieçš„æ–¹æ¡ˆåœ¨æ¢äº†æµè§ˆå™¨æˆ–è€…æ¢äº†ç”µè„‘ä¹‹åæ— æ³•ç”Ÿæ•ˆï¼Œç›¸å¯¹è¾ƒä¸ºå®‰å…¨ã€‚ ä¸ºäº†è§£å†³æ€§èƒ½é—®é¢˜å’Œ Session æ•°æ®æ— æ³•è·¨è¿›ç¨‹å…±äº«çš„é—®é¢˜ï¼Œå¸¸ç”¨çš„æ–¹æ¡ˆæ˜¯å°† Session é›†ä¸­åŒ–ï¼Œå°†åŸæœ¬å¯èƒ½åˆ†æ•£åœ¨å¤šä¸ªè¿›ç¨‹é‡Œçš„æ•°æ®ï¼Œç»Ÿä¸€è½¬ç§»åˆ°é›†ä¸­çš„æ•°æ®å­˜å‚¨ä¸­ã€‚å·¥å…·æœ‰ Redisã€Memcached ç­‰ï¼Œé€šè¿‡è¿™äº›é«˜æ•ˆçš„ç¼“å­˜ï¼ŒNode è¿›ç¨‹æ— é¡»åœ¨å†…éƒ¨ç»´æŠ¤æ•°æ®å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶é—®é¢˜å’Œå†…å­˜é™åˆ¶é—®é¢˜éƒ½å¯ä»¥è¿åˆƒè€Œè§£ï¼Œå¹¶ä¸”è¿™äº›é«˜é€Ÿç¼“å­˜è®¾è®¡çš„ç¼“å­˜è¿‡æœŸç­–ç•¥æ›´åˆç†æ›´é«˜æ•ˆï¼Œæ¯”åœ¨Nodeä¸­è‡ªè¡Œè®¾è®¡ç¼“å­˜ç­–ç•¥æ›´å¥½ã€‚ é‡‡ç”¨ç¬¬ä¸‰æ–¹ç¼“å­˜æ¥å­˜å‚¨ Session å¼•èµ·çš„ä¸€ä¸ªé—®é¢˜æ˜¯ä¼šå¼•èµ·ç½‘ç»œè®¿é—®ã€‚ç†è®ºä¸Šæ¥è¯´è®¿é—®ç½‘ç»œä¸­çš„æ•°æ®è¦æ¯”è®¿é—®æœ¬åœ°ç£ç›˜ä¸­çš„æ•°æ®é€Ÿåº¦è¦æ…¢ï¼Œå› ä¸ºæ¶‰åŠåˆ°æ¡æ‰‹ã€ä¼ è¾“ä»¥åŠç½‘ç»œç»ˆç«¯è‡ªèº«çš„ç£ç›˜I/Oç­‰ï¼Œå°½ç®¡å¦‚æ­¤ä½†ä¾ç„¶ä¼šé‡‡ç”¨è¿™äº›é«˜é€Ÿç¼“å­˜çš„ç†ç”±æœ‰ä»¥ä¸‹å‡ æ¡ï¼š Node ä¸ç¼“å­˜æœåŠ¡ä¿æŒé•¿è¿æ¥ï¼Œè€Œéé¢‘ç¹çš„çŸ­è¿æ¥ï¼Œæ¡æ‰‹å¯¼è‡´çš„å»¶è¿Ÿåªå½±å“åˆå§‹åŒ–ã€‚ é«˜é€Ÿç¼“å­˜ç›´æ¥åœ¨å†…å­˜ä¸­è¿›è¡Œæ•°æ®å­˜å‚¨å’Œè®¿é—®ã€‚ ç¼“å­˜æœåŠ¡é€šå¸¸ä¸Nodeè¿›ç¨‹è¿è¡Œåœ¨ç›¸åŒçš„æœºå™¨ä¸Šæˆ–è€…ç›¸åŒçš„æœºæˆ¿é‡Œï¼Œç½‘ç»œé€Ÿåº¦å—åˆ°çš„å½±å“è¾ƒå°ã€‚ ETag: ç”±æœåŠ¡ç«¯ç”Ÿæˆï¼ŒæœåŠ¡ç«¯è¿˜å¯ä»¥å†³å®šå®ƒçš„ç”Ÿæˆè§„åˆ™ï¼Œä¾‹å¦‚æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆ Hash å€¼ æ•°æ®ä¸Šä¼ ä¸å®‰å…¨ï¼š å†…å­˜é™åˆ¶ï¼š1. é™åˆ¶ä¸Šä¼ å†…å®¹çš„å¤§å°ï¼Œä¸€æ—¦è¶…è¿‡é™åˆ¶ï¼Œåœæ­¢å¹¶å“åº” 400 çŠ¶æ€ç ï¼›2. é€šè¿‡æµå¼è§£æï¼Œå°†æ•°æ®æµå¯¼å‘ç£ç›˜ä¸­ï¼ŒNode åªä¿ç•™æ–‡ä»¶è·¯å¾„ç­‰å°æ•°æ® CSRFï¼šè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œå¯ä¸ºæ¯ä¸ªè¯·æ±‚çš„ç”¨æˆ·åœ¨ Session ä¸­èµ‹äºˆä¸€ä¸ªéšæœºå€¼ è·¯ç”±è§£æä¸ä¸­é—´ä»¶ MVC Controllerï¼Œä¸€ç»„è¡Œä¸ºçš„é›†åˆ Modelï¼Œæ•°æ®ç›¸å…³çš„æ“ä½œå’Œå°è£… Viewï¼Œè§†å›¾çš„æ¸²æŸ“ require çš„ç¼“å­˜æœºåˆ¶ä½¿å¾—åªæœ‰åœ¨é¦–æ¬¡ require æ—¶æ˜¯é˜»å¡çš„ RESTfulï¼šå°†æœåŠ¡å™¨ç«¯æä¾›çš„å†…å®¹çœ‹åšä¸€ä¸ªèµ„æºï¼Œå¯¹è¯¥èµ„æºçš„æ“ä½œåªè¦ä½“ç°åœ¨ HTTP è¯·æ±‚æ–¹æ³•ä¸Šï¼š POST /user/tihu DELETE /user/tihu PUT /user/tihu GET /user/tihu Connect ä¸­é—´ä»¶ä½¿ç”¨ next() è¿›è¡Œå°¾è§¦å‘ ä¸­é—´ä»¶ä¸æ€§èƒ½ï¼š ç¼–å†™é«˜æ•ˆçš„ä¸­é—´ä»¶ï¼šæé«˜å•ä¸ªå¤„ç†å•å…ƒçš„å¤„ç†é€Ÿåº¦ï¼Œä»¥å°½æ—©è°ƒç”¨ next()ï¼›ç¼“å­˜éœ€è¦é‡å¤è®¡ç®—çš„ç»“æœï¼›é¿å…ä¸å¿…è¦çš„è®¡ç®— åˆç†ä½¿ç”¨è·¯ç”±ï¼šä¾‹å¦‚åªå¤„ç†é™æ€èµ„æºçš„ä¸­é—´ä»¶ï¼Œå¯é™å®šè·¯ç”±ï¼ˆapp.use(â€˜/publicâ€™, statcFile))ï¼Œä»è€Œé¿å…å¯¹æ•´ç«™éƒ½å¤„ç† ç« ä¹ åˆ›å»ºå­è¿›ç¨‹ï¼šchild_process æ¨¡å—çš„å››ç§æ–¹æ³• spawn() å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œå‘½ä»¤ exec() ä¸ spawn ä¸åŒï¼Œå®ƒå¤šäº†ä¸€ä¸ªç”¨äºè·çŸ¥å­è¿›ç¨‹çŠ¶å†µçš„å›è°ƒ execFile() å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ fork() ä¸ spawn ç±»ä¼¼ï¼Œä¸åŒç‚¹åœ¨äºåˆ›å»ºçš„å­è¿›ç¨‹åªéœ€æŒ‡å®š JavaScript æ–‡ä»¶æ¨¡å— æ³¨ï¼šå…¶ä¸­ 2ï¼Œ3 å¯è®¾ç½®è¶…æ—¶ å­è¿›ç¨‹å¯¹è±¡çš„ send() æ–¹æ³•æ”¯æŒå‘é€ä»¥ä¸‹äº”ç§ç±»å‹çš„å¥æŸ„ net.Socketï¼ŒTCP å¥—æ¥å­— net.Serverï¼Œ TCP æœåŠ¡å™¨ net.Nativeï¼Œ C++ å±‚é¢çš„ TCP å¥—æ¥å­—æˆ– IPC ç®¡é“ dgram.Socketï¼ŒUDP å¥—æ¥å­— dgram.Nativeï¼Œ C++ å±‚é¢çš„ UDP å¥—æ¥å­— å¤šä¸ªåº”ç”¨ç›‘å¬ç›¸åŒç«¯å£æ—¶ï¼Œæ–‡ä»¶æè¿°ç¬¦åŒä¸€æ—¶é—´åªèƒ½è¢«æŸä¸ªè¿›ç¨‹æ‰€ç”¨ï¼Œå³æŠ¢å å¼çš„ï¼Œå› æ­¤åªæœ‰ä¸€ä¸ªè¿›ç¨‹èƒ½å¤ŸæŠ¢åˆ°è¿æ¥ é™¤äº† send() å¤–ï¼Œè¿˜èƒ½é€šè¿‡ kill() æ–¹æ³•ç»™å­è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œkill() æ–¹æ³•åªæ˜¯ç»™å­è¿›ç¨‹å‘é€äº†ä¸€ä¸ªç³»ç»Ÿä¿¡å·ï¼Œè¿›ç¨‹åœ¨æ”¶åˆ°è¿™äº›ç³»ç»Ÿä¿¡å·æ—¶ï¼Œåšå‡ºçº¦å®šçš„è¡Œä¸º è‡ªæ€ä¿¡å·ï¼šå½“æ‰€æœ‰è¿›ç¨‹éƒ½å¤„äºç­‰å¾…é€€å‡ºçŠ¶æ€ï¼Œå¹¶åœæ­¢æ¥æ”¶æ–°è¿æ¥ï¼Œå¦‚æœç­‰åˆ°è¿›ç¨‹é€€å‡ºæ‰é‡å¯ï¼Œåˆ™æ­¤æ—¶æ–°æ¥çš„è¯·æ±‚å¯èƒ½å­˜åœ¨æ²¡æœ‰å·¥ä½œè¿›ç¨‹ä¸ºæ–°ç”¨æˆ·æœåŠ¡çš„æƒ…æ™¯ï¼Œä»è€Œä¸¢å¤±è¯·æ±‚ï¼›è§£å†³æ–¹æ³•æ˜¯åœ¨å­è¿›ç¨‹å†³å®šé€€å‡ºå‰ä¸»åŠ¨å‘çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ª â€œè‡ªæ€ä¿¡å·â€ é€šçŸ¥çˆ¶è¿›ç¨‹ï¼Œä½¿å¾—çˆ¶è¿›ç¨‹èƒ½å¤ŸåŠæ—¶åˆ›å»ºæ–°è¿›ç¨‹ã€‚ é™é‡é‡å¯ï¼šå½“é‡å¯è¿‡äºé¢‘ç¹æ—¶ï¼Œä¸»åŠ¨é€šçŸ¥è¿›ç¨‹æ”¾å¼ƒé‡å¯ çŠ¶æ€å…±äº«ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œæ¯”å¦‚æ•°æ®åº“ï¼Œç£ç›˜æ–‡ä»¶ï¼Œç¼“å­˜æœåŠ¡ï¼ˆå¦‚ Redisï¼‰ï¼Œå› æ­¤éœ€è¦ä¸€ç§æœºåˆ¶é€šçŸ¥å„ä¸ªå­è¿›ç¨‹ï¼šå„ä¸ªå­è¿›ç¨‹å‘ç¬¬ä¸‰æ–¹è¿›è¡Œå®šæ—¶è½®è¯¢ çŠ¶æ€å…±äº«ï¼Œä¸»åŠ¨é€šçŸ¥ï¼Œå¯è®¾è®¡ä¸€ä¸ªè¿›ç¨‹åªè¿›è¡Œè½®è¯¢å’Œé€šçŸ¥ï¼Œå¦‚æœæƒ³è·¨è¶Šå¤šå°æœåŠ¡å™¨ï¼Œå¯é‡‡ç”¨ UDP æˆ– TCP æ–¹æ¡ˆ ç« å å•æµ‹åŸåˆ™ å•ä¸€èŒè´£ æ¥å£æŠ½è±¡ å±‚æ¬¡åˆ†ç¦» TDDï¼šæµ‹è¯•é©±åŠ¨å¼€å‘ï¼›BDDï¼šè¡Œä¸ºé©±åŠ¨å¼€å‘ï¼›äºŒè€…å·®åˆ«ï¼š å…³æ³¨ç‚¹ä¸åŒï¼ŒTDD å…³æ³¨æ‰€æœ‰åŠŸèƒ½æ˜¯å¦è¢«æ­£ç¡®å®ç°ï¼Œæ¯ä¸ªåŠŸèƒ½å¯¹åº”ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼›BDD å…³æ³¨æ•´ä½“è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œé€‚åˆè‡ªé¡¶å‘ä¸‹çš„è®¾è®¡æ–¹å¼ è¡¨è¾¾æ–¹å¼ä¸åŒï¼ŒTDD åå‘äºåŠŸèƒ½è¯´æ˜ä¹¦é£æ ¼ï¼Œè€Œ BDD æ›´æ¥è¿‘ä¸è‡ªç„¶è¯­è¨€çš„ä¹ æƒ¯ BDDï¼šbefore ä¸ after åˆ†åˆ«åœ¨è¿›å…¥å’Œé€€å‡º describe æ—¶è§¦å‘ï¼ŒbeforeEach ä¸ afterEach åˆ†åˆ«åœ¨ describe ä¸­çš„æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰å’Œæ‰§è¡Œåè§¦å‘ æ€§èƒ½æµ‹è¯• åŸºå‡†æµ‹è¯•ï¼Œç»Ÿè®¡åœ¨å¤šå°‘æ—¶é—´å†…æ‰§è¡Œäº†å¤šå°‘æ¬¡æŸä¸ªæ–¹æ³• å‹åŠ›æµ‹è¯•ï¼Œå¯¹ç½‘ç»œæ¥å£è¿›è¡Œå‹æµ‹çš„æŒ‡æ ‡ä¸»è¦æœ‰ååç‡ï¼Œå“åº”æ—¶é—´å’Œå¹¶å‘æ•°","link":"/2016/12/25/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%20Node.js%20%E3%81%AE%E7%AC%94%E8%AE%B0/"},{"title":"ç¬¬åä¸€å±Š D2 ä¼šè®®çš„è§‚åæ„Ÿä¸æ€»ç»“","text":"ç”Ÿå¹³ç¬¬ä¸€æ¬¡å‚åŠ è¿™ç§æŠ€æœ¯ä¼šè®®ï¼Œå›´è§‚å„ç§å‰ç«¯ç•Œç½‘çº¢ï¼Œæ„Ÿè§‰çŸ¥ä¹å’Œå¾®åšé‡Œçš„ç½‘çº¢éƒ½è§¦æ‰‹å¯åŠï¼Œè®°ä¸‹è¿™ç¯‡è§‚åæ„Ÿä¸æ€»ç»“ã€‚ Weex åœ¨åŒåä¸€ä¼šåœºçš„å¤§è§„æ¨¡åº”ç”¨ é¬¼é“ æ·˜å® ç›¸æ¯”å»å¹´åŒåä¸€ï¼Œweex åœ¨ä»Šå¹´åŒåä¸€çš„ä¸»ä¼šåœºä¸­å‡ ä¹éƒ½ä½¿ç”¨äº† weex DOM åµŒå¥—ä¸è¦å¤ªæ·±ï¼Œå¦åˆ™å°†å¯¼è‡´æ€§èƒ½é—®é¢˜ é•¿åˆ—è¡¨æ»šåŠ¨-æ€§èƒ½é—®é¢˜ï¼ŒH5 lazy load ä½“éªŒä¸å¥½ï¼ŒåŸç”Ÿå¥½äº weex å¸§ç‡æ–¹é¢ï¼Œweex åœ¨ Android ä¸ iOS ä¸Šè¡¨ç°ä¸€è‡´ï¼Œè€Œ H5 åœ¨ä½ç«¯æœºä¸Šï¼ˆç‰¹åˆ«æ˜¯ Androidï¼‰è¡¨ç°è¾ƒå·® iOS ä¸­æ‰“å¼€å¤šä¸ª weex é¡µé¢ï¼Œä½¿å¾—å†…å­˜å ç”¨è¿‡å¤§è€Œå¯¼è‡´ crash è§£å†³æ–¹æ¡ˆï¼š ä¸»ä¼šåœºå•å®ä¾‹ push é¡µé¢è®¾ç½®ä¸Šé™ï¼ˆåŒåä¸€ä¸­ä¸Šé™ä¸º 5ï¼‰ H5 é™çº§æ–¹æ¡ˆï¼Œä¸è¿‡å‡ ä¹æ²¡å¼€å¯ iOS JSCore å†…å­˜ï¼Œé€šè¿‡åˆ†æ JS Heapï¼Œå‘ç°æ˜¯ JS å¼•ç”¨æŒæœ‰å¯¼è‡´çš„å†…å­˜ä¸é‡Šæ”¾ï¼ˆå¥½å¥‡ Android ä¸ºä»€ä¹ˆæ²¡æœ‰é—®é¢˜ï¼Œæ˜¯å®‰å“å†…å­˜å¤Ÿå¤§ä¸åœ¨ä¹å—ï¼Ÿï¼‰ é€šè¿‡é¢„åŠ è½½æé«˜é¡µé¢ç§’å¼€ç‡ï¼š a. App å¯åŠ¨é¢„å…ˆä¸‹è½½ JSï¼› b. é€šè¿‡é•¿è¿é€šé“ pushï¼› c. æœ¬åœ° IOï¼› d. å¹³å°è‡ªåŠ¨åŒ–å¯¹æ¥ï¼› framework &amp; bundle åˆ†ç¦»ï¼Œå…±æœ‰é€»è¾‘å‰ç½® + å¼‚æ­¥æ‰§è¡Œ Node &amp; Tree æ¸²æŸ“ç»“åˆ Node: æœ€å°é¢—ç²’åº¦æ¸²æŸ“ è§£æ DOM åç«‹å³æ˜¾ç¤º ä¸ä¼šé•¿æ—¶é—´é˜»å¡ä¸»çº¿ç¨‹ å¯èƒ½é€ æˆå¤šæ¬¡å†—ä½™çš„ Layout Tree: å—çº§æ¸²æŸ“ åªéœ€ Layout ä¸€æ¬¡ å¯èƒ½é˜»å¡ä¸»çº¿ç¨‹ weex å­˜åœ¨çš„ç¼ºç‚¹ å‘å¸ƒæ— ç°åº¦ ç¼ºå¤±å…¼å®¹æ€§ä¸æ€§èƒ½éªŒæ”¶ çº¿ä¸Šç›‘æ§æœªåˆ°äºº ç»„ä»¶ç”Ÿæ€ç›¸æ¯” RNï¼Œå·®è·å¤§ å¯Œäº¤äº’èƒ½åŠ› å¸¸ç”¨ API æœªæ¥ä¼šä¸°å¯Œç»„ä»¶å¸‚åœºï¼ŒåŒæ—¶æ·»åŠ ç ”å‘æ”¯æ’‘ï¼ˆä¸Šè¿°1-3ï¼‰ XCore â€”è˜‘è‡è¡—ç§»åŠ¨ç«¯åŠ¨æ€è·¨å¹³å°å¼€å‘æ¡†æ¶ è˜‘è‡è¡— ç‹å…´æ¥  ç§»åŠ¨ç«¯ä¸šåŠ¡åœºæ™¯å®šåˆ¶çš„ä¸€å¥—åŠ¨æ€è·¨å¹³å°å¼€å‘æ¡†æ¶ï¼Œä½†æ˜¯ç›®å‰å¹¶ä¸å¼€æº XCore å°è£…äº†åº•å±‚ï¼Œè‡ªç§°æ–°é€ äº†è½®å­ï¼Œè€Œä¸éœ€è¦æ”¹å˜ç°æœ‰æ¡†æ¶çš„ç¼–ç æ–¹å¼(Vue.jsï¼ŒReactï¼ŒDOM)ï¼Œå³è½¦ä¸éœ€è¦å˜ ä¸ weex / react-native å·®å¼‚ï¼Œä¸‰æ£µæ ‘ï¼ŒDOM treeï¼ŒShadow tree ï¼ŒNative tree ä»¥ Web çš„æ–¹å¼å¿«é€Ÿå¼€å‘ä¸éƒ¨ç½²å¯è¿è¡Œäºä¸‰ç«¯ï¼ˆH5ï¼ŒAndroidï¼ŒiOSï¼‰çš„ä»£ç  å®ç°äº†ä¸€å¥—æ ‡å‡†çš„ Web å­é›† å¯¹æ¯” RNï¼ŒWeexï¼š a. å®šä½ä¸åŒï¼Œè§£å†³ç‰¹å®šä¸šåŠ¡åœºæ™¯çš„é—®é¢˜ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªä¸šç•Œé€šç”¨çš„å¼€æºæ–¹æ¡ˆ b. ç›®æ ‡ä¸åŒï¼Œé‡‡ç”¨äº†ä¸€ä¸ªæµè§ˆå™¨çš„æ¶æ„ï¼Œä¸ç»‘å®šå›ºå®šçš„å‰ç«¯æ¡†æ¶ åªè¦ä½¿ç”¨çš„ DOM å±‚é¢æˆ–è€…æ˜¯æ¨¡æ¿çš„å±‚é¢ï¼Œåœ¨ XCore æ¨¡æ¿èŒƒå›´å†…å°±å¯ä»¥. åŸºäºäº‘ç«¯çœŸæœºçš„æ— çº¿è°ƒè¯•è§£å†³æ–¹æ¡ˆ æ·˜å® è‚–ç„‰ çœŸæœºæ”¾ç½®åœ¨æœºæˆ¿ä¸­ï¼Œè¿œç¨‹ç”³è¯·è¿›è¡Œè°ƒè¯•ï¼Œåªå¯¹é˜¿é‡Œé›†å›¢å†…éƒ¨å¼€æ”¾ï¼Œå¯¹å¤–å¼€æ”¾å·²åœ¨è®¡åˆ’ä¸­ã€‚ è¿™ç§æ ¸å¿ƒç«äº‰åŠ›å¤§æ¦‚ä¸ä¼šå¯¹å¤–å¼€æ”¾å§ã€‚ èš‚èšè´¢å¯Œçš„ BFF å®è·µ èš‚èšé‡‘æœ æ±¤ å°§ BFF: Backends for Frontendsï¼Œå¤æ‚ç¯å¢ƒçš„å¿…ç„¶äº§ç‰© æ ¸å¿ƒæ€æƒ³ åœ¨å‰ç«¯é¡µé¢ä¸åç«¯ Java é—´åŠ å…¥ä¸€å±‚ Nodeï¼Œä½¿ Node ç›´æ¥è°ƒç”¨ Java jar åŒ…(hessian)ï¼ŒNode å±‚å®Œæˆå¤šç«¯ API æ¥å…¥ã€è£å‰ªã€æ ¼å¼åŒ–ã€èšåˆç¼–æ’ï¼Œä»è€Œæ§åˆ¶æ¥å£æ•°é‡ï¼Œè§„èŒƒæ•°æ®æ ¼å¼ï¼ŒåªæŠŠç”¨æˆ·å…³å¿ƒçš„æ•°æ®è¾“å‡ºç»™ç•Œé¢ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿äº†æ•°æ®çš„ mock ä¸šåŠ¡ç°çŠ¶ æœåŠ¡å±‚ API ç›¸å¯¹ç¨³å®š ä½“éªŒè€… API ç»å¸¸å˜åŒ– åœºæ™¯ å¤šAPPé€‚é…ï¼š Error code ç»Ÿä¸€ç®¡ç† æ•°æ®ä¸€è‡´æ€§ å…ç™» ä¸šåŠ¡æ—¥å¿—â€¦ èšåˆ ç®€åŒ–å®¢æˆ·ç«¯é€»è¾‘ï¼Œå‡å°‘ç½‘ç»œå¼€é”€ï¼ˆæ¯•ç«Ÿæœ‰äº›åç«¯æ¥å£çš„æ•°æ®ï¼Œå‰ç«¯å¯èƒ½åªéœ€è¦è·å–å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼‰ æ•æ„Ÿä¿¡æ¯è¿‡æ»¤ï¼ˆæˆ‘æœä½ æ‡‚çš„ï¼‰ Node.js åœ¨ YunOS ä¸­çš„æœ€ä½³å®è·µ YunOS é€¸è‡» æŠŠ Node.js å¼•å…¥åˆ° YunOS çš„åŸºç¡€æ¶æ„ä¸­ å¯¹ IO ä¼˜å…ˆçš„ Looper æœºåˆ¶çš„æ”¹é€ å’Œä¼˜åŒ– Node.js çš„æ¶ˆæ¯å¾ªç¯æœºåˆ¶å®Œå…¨ç”± IO äº‹ä»¶æ¥é©±åŠ¨ ç»ˆç«¯è®¾å¤‡çš„åœºæ™¯åœ¨ UI æ¸²æŸ“åŠé IO ä»»åŠ¡çš„åŠæ—¶å“åº”çš„éœ€æ±‚ è§£å†³ï¼šå°†ç³»ç»Ÿä»»åŠ¡ä¸ Node.js çš„ IO ä»»åŠ¡èåˆï¼ŒäºŒè€…åœ°ä½åŸºæœ¬ç›¸å½“ï¼Œç³»ç»Ÿä»»åŠ¡ä¼˜å…ˆçº§ç•¥é«˜ï¼›ç³»ç»Ÿä»»åŠ¡é€šè¿‡å¼‚æ­¥äº‹ä»¶æ¥å…¥ Node.js çš„é˜Ÿåˆ—ä¸­ æ€§èƒ½ä¼˜åŒ– å°†ç³»ç»Ÿçº§ JS æ¨¡å—åˆå¹¶åŠ è½½ï¼Œå‡å°‘ IO æ¬¡æ•° Code cacheï¼Œé¢„å…ˆå°† JavaScript ä»£ç ç¼–è¯‘æˆ cache æ–‡ä»¶ï¼Œè¿è¡Œæ—¶ç›´æ¥åŠ è½½ cache æ–‡ä»¶ï¼Œè°ƒè¿‡ç¼–è¯‘è¿‡ç¨‹ require çš„æ‡’åŠ è½½ï¼Œrequire æ—¶ä¸çœŸæ­£åŠ è½½æ¨¡å—ï¼Œè€Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡è®¿é—®å¯¹è±¡çš„æ—¶å€™è¿›è¡ŒåŠ è½½ï¼Œä»è€Œå‡è½»å¯åŠ¨æ—¶çš„å‹åŠ›ï¼Œä¼˜åŒ–å¯åŠ¨æ—¶é—´ æå‡ºæ¨¡å—å¯å¸è½½æ¦‚å¿µï¼Œä¸è¿‡è¿™æ ·çš„è¯ï¼Œæ˜¯å¦é¡¶éƒ¨ require çš„æ¨¡å—å¹¶ä¸æ˜¯éƒ½ç”¨çš„äº†ï¼Ÿå› ä¸ºæ— æ³•è·çŸ¥è¯¥æ¨¡å—æ˜¯å¦åœ¨æŸä¸ªåœ°æ–¹è¢«å¸è½½äº† NW.js: é›†æˆDOMå’ŒNode.jsçš„ç¼–ç¨‹æ–¹å¼ Intel ç‹æ–‡ç¿ NW.js (åŸå node-webkit )é€šè¿‡é›†æˆ Chromium å’Œ Node.jsæ„Ÿè§‰æ¯ç‡¥ï¼Œè®²çš„ä¸å¥½ï¼Œå›ç­”é—®é¢˜ä¹Ÿä¸è¯šå¿ƒ åœ¨ DOM ä¸­ç›´æ¥è°ƒç”¨ Node.js ä»‹ç» NW çš„ä¸»è¦åŠŸèƒ½å’Œæœ€æ–°è¿›å±• ä¸ªäººæ¯”è¾ƒçœ‹å¥½ electronï¼Œæˆç†Ÿåº”ç”¨æ¯”è¾ƒå¤šï¼ˆAtom, VSCode)ï¼Œç¤¾åŒºæ”¯æŒæ¯”è¾ƒå¥½ ä» React åˆ° ClojureScript é¥¿äº†ä¹ˆ é¢˜å¶ ä¸»è¦ä»‹ç»äº†ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µ JavaScript æœ‰ç§é€šè¿‡è‡ªæˆ‘é˜‰å‰²æ¥å®ç°å‡½æ•°å¼ç¼–ç¨‹ ä»‹ç»æ€§è¾ƒå¤šï¼Œèµ°é©¬è§‚èŠ± å¤§æ•°æ®ä¸‹çš„å‰ç«¯ä¼˜åŒ–å®æˆ˜ UC åºé”¦è´µ å€ŸåŠ© UC æµè§ˆå™¨çš„æµ·é‡ç”¨æˆ·äº§ç”Ÿçš„å¤§æ•°æ®ï¼Œé’ˆå¯¹ç‰¹å®šåœºæ™¯çš„ä¸€äº›ä¼˜åŒ–ï¼ˆåœºæ™¯æ€§ç‰¹åˆ«å¼ºï¼Œæœ‰ç‚¹ hackï¼‰ é€šè¿‡åœ¨æµè§ˆå™¨å†…æ ¸æ‰“ç‚¹çš„æ–¹å¼è¿›è¡Œæ•°æ®åˆ†æï¼ˆå¸Œæœ›æˆ‘å¸æœªæ¥çš„å®¢æˆ·ç«¯ webview å®ç°ç±»ä¼¼çš„æ‰“ç‚¹åˆ†æï¼‰","link":"/2016/12/24/%E7%AC%AC%E5%8D%81%E4%B8%80%E5%B1%8A%20D2%20%E4%BC%9A%E8%AE%AE%E6%80%BB%E7%BB%93/"},{"title":"ç»™ä½ å¿ƒçˆ±çš„ npm åŒ…ä¸Šä¸ªã€åŒ—äº¬æˆ·å£ã€","text":"è®°å½•è§£å†³å¦‚ä½•æ‰¹é‡å°† npm åŒ…ä»ä¸€ä¸ª npm æºè¿ç§»åˆ°å¦ä¸€ä¸ªæº èƒŒæ™¯ä¸€åˆ‡ä»æˆ‘å¸æœ‰ä¸¤ä¸ª npm æºè¯´èµ·ï¼Œä¸€ä¸ªå«æ­å·æºï¼Œå¦ä¸€ä¸ªå«åŒ—äº¬æºã€‚æœ¬æ¥å„ç”¨å„çš„ç›¸å®‰æ— äº‹ï¼Œç›´åˆ°æœ‰ä¸€å¤©æˆ‘ä»¬æƒ³ä¾èµ–å¦ä¸€ä¸ªæºçš„ npm åŒ…æ—¶ï¼Œå°±ç›¸äº’æ‹‰å–ä¸åˆ°å¯¹æ–¹çš„æºäº†ã€‚æ­å·æºè¿™è¾¹ä¹Ÿæœ‰åšè¿‡å…¼å®¹ï¼Œå½“æ‹‰å–çš„æºä¸å­˜åœ¨æ—¶ï¼Œå°±å°è¯•å»åŒ—äº¬æºæ‹‰å–ï¼Œçœ‹ä¼¼è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯è¿™åªè§£å†³äº†æˆ‘ä»¬ä¾èµ–åŒ—äº¬æºçš„ npm åŒ…çš„é—®é¢˜ï¼Œè€Œæˆ‘ä»¬æœ‰å¤§é‡çš„åŒ…éœ€è¦æ¨å¹¿åˆ°å…¶å®ƒéƒ¨é—¨ï¼Œå› æ­¤æˆ‘ä»¬å†³å®šåˆ‡æ¢åˆ°ä½¿ç”¨äººæ•°æ›´å¤šçš„åŒ—äº¬æºï¼Œç›®å‰å›¢é˜Ÿæ­£å¤„äºé›†ä½“è½¬å‘ä½¿ç”¨åŒ—äº¬æºçš„é˜¶æ®µï¼Œä¸è¿‡ç»å¸¸ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š é¡¹ç›®æ‹‰å–ä¸‹æ¥ï¼Œæ‰§è¡Œ npm installï¼Œæç¤ºæŸäº›åŒ…ä¸å­˜åœ¨ï¼Œç„¶åæŸ¥çœ‹å½“å‰æºï¼Œåˆ‡æ¢åˆ°å¦ä¸€ç§æºï¼Œç»§ç»­ npm installï¼› è€é¡¹ç›®ä½¿ç”¨æ­å·æºï¼Œä½†æ˜¯ä¾èµ–äº†åŒ—äº¬æºçš„ npm åŒ…ï¼Œè™½ç„¶æ­å·æºä¼šåœ¨æ‹‰å–ä¸åˆ°åŒ…æ—¶ä¸»åŠ¨å‘åŒ—äº¬æºæ‹‰å–ï¼Œä½†æ˜¯è¿™ä¸ªæœºåˆ¶ç»å¸¸å‡ºé—®é¢˜ï¼Œæœ‰æ—¶ä¼šé˜»å¡æœåŠ¡çš„æ„å»ºï¼Œå¾—è§£å†³è¿™ä¸ªä¾èµ–é—®é¢˜æ‰èƒ½é‡æ–°æ„å»ºé¡¹ç›®ï¼› æ–°é¡¹ç›®ä½¿ç”¨åŒ—äº¬æºï¼Œä½†æ˜¯ä¾èµ–äº†æ­å·æºçš„ npm åŒ…ï¼Œè¿™ä¸ªåœºæ™¯æ¯”è¾ƒæ£˜æ‰‹ï¼ŒåŒ—äº¬æºæ²¡æœ‰å‘æ­å·æºæ‹‰å–åŒ…çš„æœºåˆ¶ï¼Œå› æ­¤éœ€è¦å°†æ­å·æºçš„åŒ…é‡æ–°åœ¨åŒ—äº¬æºä¸Šå‘å¸ƒï¼Œå¦‚æœé‡‡ç”¨æ‰‹åŠ¨å‘å¸ƒï¼Œç‰ˆæœ¬å¤šçš„åŒ…ä¼šå¾ˆç¹çè¿˜å®¹æ˜“å‡ºé”™ï¼›å¦‚æœåªå‘å¸ƒéƒ¨åˆ†åŒ…ï¼Œä¼šå¯¼è‡´ä¸¤è¾¹ä¸ä¸€è‡´ï¼Œå¯¼è‡´æ— æ³•æ‹‰å–åˆ°æœªå‘å¸ƒçš„åŒ…ï¼› å‘å¸ƒä¸€ä¸ªåŒ…ï¼Œåªå‘æ­å·æºå‘å¸ƒï¼Œé‚£ä½¿ç”¨åŒ—äº¬æºçš„é¡¹ç›®å¾ˆå¯èƒ½æ›´æ–°ä¸åˆ°ä½ çš„æ–°ç‰ˆæœ¬ï¼Œåä¹‹äº¦ç„¶ï¼› å’‹æ•´ï¼Ÿ è§£å†³æ€è·¯ä¸ºäº†åŠ å¿«ç»“æŸè¿™ä¸ªè¿‡æ¸¡æœŸï¼Œéœ€è¦æˆ‘ä»¬å…¨é¢åˆ‡æ¢åˆ°åŒ—äº¬æºï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼š å›¢é˜Ÿå†…çš„æ­å·æº npm åŒ…çš„å„ä¸ªç‰ˆæœ¬éœ€è¦åœ¨åŒ—äº¬æºé‡æ–°å‘å¸ƒä¸€æ¬¡ï¼Œé™¤äº†ç‰ˆæœ¬å¤–ï¼Œdist-tag ä¹Ÿè¦åŒæ­¥åˆ°åŒ—äº¬æºï¼› é€šçŸ¥å›¢é˜Ÿæˆå‘˜å°†é¡¹ç›®åˆ‡æ¢åˆ°åŒ—äº¬æºï¼Œå¹¶ä¸å†ä½¿ç”¨æ­å·æºï¼Œå¦‚æœ‰é—æ¼æœªåŒæ­¥åˆ°åŒ—äº¬æºçš„ npm åŒ…å‘ŠçŸ¥æˆ‘å°†å…¶åŒæ­¥ï¼› é‚£ä¹ˆï¼Œæˆ‘ä»¬å›¢é˜Ÿæœ‰å¤šå°‘ä¸ªåŒ…å‘¢ï¼Ÿå·²çŸ¥çš„ @kd scope ä¸‹çš„åŒ…æœ‰ 49 ä¸ªï¼Œè€Œæ›´å¤šçš„åŒ…éƒ½åœ¨ @dd scope ä¸‹ï¼Œç›®å‰æ”¶é›†åˆ°çš„æœ‰ 50 ä¸ªã€‚å‡è®¾å¹³å‡ä¸€ä¸ªåŒ…æœ‰ 10 ä¸ªç‰ˆæœ¬ï¼Œé‚£ä¹ˆç²—ç•¥ä¼°è®¡æœ‰ä¸Šåƒä¸ªç‰ˆæœ¬éœ€è¦é‡æ–°å‘å¸ƒï¼Œæ‰€ä»¥æ‰‹åŠ¨æ˜¯ä¸å¯èƒ½æ‰‹åŠ¨çš„ï¼Œå¾—æƒ³æ³•å­é€šè¿‡è‡ªåŠ¨åŒ–çš„æ–¹å¼æ‰¹é‡åŒæ­¥ã€‚ æ¥çœ‹çœ‹åˆ°åº•å’‹æ•´å§ï¼ å®ç°æ–¹å¼ä½œä¸ºä¸€ä¸ªå‰ç«¯å¼€å‘ï¼Œå½“ç„¶é€‰æ‹© Node.js æ¥ç¼–å†™è„šæœ¬æˆ–å‘½ä»¤è¡Œå·¥å…·è§£å†³è¿™ç§é‡å¤åŠ³åŠ¨äº†ï¼å…ˆæ¥å›é¡¾ä¸‹å¦‚ä½•å‘å¸ƒä¸€ä¸ª npm åŒ…ï¼šåªè¦è¿›å…¥ npm åŒ…çš„æ ¹ç›®å½•ï¼Œæ‰§è¡Œ npm publish å³å¯ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦æ‰¾åˆ°ä¸€ä¸ªæ–¹å¼èƒ½è·å–åˆ°æ¯ä¸ªåŒ…çš„æ¯ä¸ªç‰ˆæœ¬çš„æ‰€æœ‰ä»£ç å³å¯ï¼é‚£æœ‰è¿™ç§æ–¹å¼å—ï¼Ÿ æœ‰çš„ï¼Œæœ‰çš„ï¼å›å¿†ä¸‹ä½ ä½¿ç”¨ npm view æŸ¥è¯¢ä¸€ä¸ª npm åŒ…æ—¶çš„æƒ…å½¢ï¼š èªæ˜çš„ä½ è‚¯å®šå‘ç° .tarball: https://registry.npmjs.org/koa/-/koa-2.13.0.tgzï¼Œè¿™ä¸ªåŒ…æ­£æ˜¯å½“å‰æœ€æ–°ç‰ˆæœ¬ 2.13.0 çš„ koa åŒ…ã€‚ä¸‹è½½è§£å‹åå‘ç°è¿™æ­£æ˜¯æˆ‘ä»¬è¦çš„ï¼Œåªè¦è¿›å…¥è¯¥ç›®å½•æ‰§è¡Œ npm publish å³å¯ï¼š é‚£æˆ‘ä»¬èƒ½è·å–æŒ‡å®šç‰ˆæœ¬çš„ tgz åŒ…å—ï¼Ÿå½“ç„¶ï¼Œä½¿ç”¨ npm view koa@1.0.0 å³å¯æŸ¥çœ‹æŒ‡å®šç‰ˆæœ¬ã€‚ç­‰ç­‰ï¼Œæˆ‘æ²¡æ³•çŸ¥é“å½“å‰ koa åŒ…æœ‰å“ªäº›ç‰ˆæœ¬è¯¶ï¼Ÿåˆ«æ…Œï¼Œè¯•è¯•è¿™ä¸ªå‘½ä»¤ npm view koa --jsonï¼Œç­”æ¡ˆå°±è—åœ¨ versions å­—æ®µé‡Œï¼š æ­¤å¤– dist-tags å­—æ®µä¹Ÿéœ€è¦åŒæ­¥ï¼ˆ é»˜è®¤ä¸åŒæ­¥ tagï¼Œè¿™æœ‰å¯èƒ½å¯¼è‡´æ­å·æºçš„ tag è¦†ç›–äº†åŒ—äº¬æºçš„ tagï¼Œè€Œæ­å·æºçš„ tag å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼‰ã€‚ ç›®å‰ä¸‡äº‹ä¿±å¤‡ï¼Œç¦»æå®šåªå·®ä¸€ä¸ªç¨‹åºçŒ¿äº†ï¼æ ¸å¿ƒé€»è¾‘å³æ˜¯æ ¹æ®åŒ…åæ‹‰å–æ‰€æœ‰ç‰ˆæœ¬çš„ tgz å‹ç¼©åŒ…ï¼ŒåŒæ—¶è§£å‹æ‰€æœ‰ tgz å‹ç¼©åŒ…ï¼Œè¿›å…¥å¯¹åº”ç›®å½•æ‰§è¡Œ npm publishï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192// è·å–è¯¥åŒ…çš„æ‰€æœ‰ç‰ˆæœ¬let resulttry { result = await execa.command(`npm view ${npmPacakgeName} --json --registry=${from}`)} catch (error) { // æŸ¥è¯¢å¤±è´¥çš„æ—¥å¿—å†™å…¥æ–‡ä»¶ï¼Œæ–¹ä¾¿è¿½è¸ª console.log(chalk.red(`è·å–åˆ—è¡¨å¤±è´¥ï¼š${npmPacakgeName}`)) const content = await fs.readFile(errorLogFile) await fs.writeFile(errorLogFile, `${content}\\nè·å–åˆ—è¡¨å¤±è´¥ï¼š${npmPacakgeName}: ${error.stack}`) return}const json = result.stdout ? eval(`temp = ${result.stdout}`) : {}const tagTaskList = Object.keys(json['dist-tags']).map(npmPackageTag =&gt; { return async () =&gt; { try { await execa.command(`npm dist-tag add ${npmPacakgeName}@${json['dist-tags'][npmPackageTag]} ${npmPackageTag} --registry=${to}`) console.log(chalk.green(`æˆåŠŸåŒæ­¥ tagï¼š${npmPacakgeName}@${npmPackageTag}`)) } catch (error) { // å‘å¸ƒå¤±è´¥çš„æ—¥å¿—å†™å…¥æ–‡ä»¶ï¼Œæ–¹ä¾¿è¿½è¸ª console.log(chalk.red(`tag æ·»åŠ å¤±è´¥ï¼š${npmPacakgeName}@${json['dist-tags']}`)) const content = await fs.readFile(errorLogFile) await fs.writeFile(errorLogFile, `${content}\\ntag æ·»åŠ å¤±è´¥ï¼š${npmPacakgeName}@${json['dist-tags']}: ${error.stack}`) } }})const publishTaskList = json.versions &amp;&amp; json.versions.map(npmPacakgeVersion =&gt; { // è¯¥åŒ…æ¯ä¸ªç‰ˆæœ¬çš„å¤„ç†é€»è¾‘ return async () =&gt; { try { // å¦‚æœ ${to}å·²ç»å­˜åœ¨è¯¥ç‰ˆæœ¬ï¼Œåˆ™ä¸å¤„ç† // FIXME: å¤„ç† ${to}ä¸å­˜åœ¨è¯¥åŒ…çš„æƒ…å†µ let result try { result = await execa.command(`npm view ${npmPacakgeName}@${npmPacakgeVersion} --registry=${to}`) if (result.stdout) { console.log(chalk.green(`å·²å­˜åœ¨äº ${to}ï¼Œæ— éœ€åŒæ­¥ï¼š${npmPacakgeName}@${npmPacakgeVersion}`)) return } } catch (error) { if (!error.message.includes('npm ERR! code E404')) { throw error } } // å»é™¤å½¢å¦‚ @scope çš„å­—ç¬¦ä¸² const packagePath = path.join(__dirname, npmPacakgeName, `${npmPacakgeName.replace(/@.*\\//, '')}-${npmPacakgeVersion}`) const tgzPath = `${packagePath}.tgz` // ä¸‹è½½åŒ… await download( `${from}/${npmPacakgeName}/download/${npmPacakgeName}-${npmPacakgeVersion}.tgz`, npmPacakgeName ) // è§£å‹åŒ… await compressing.tgz.uncompress( tgzPath, packagePath ) // åˆ é™¤å‹ç¼©åŒ… await execa.command(`rm ${tgzPath}`) // å‘å¸ƒ await execa.command(`npm publish --tag=sync --registry=${to}`, { cwd: path.join(packagePath, 'package') }) console.log(chalk.green(`${npmPacakgeName}@${npmPacakgeVersion} æˆåŠŸåŒæ­¥ ${to}ï¼`)) } catch (error) { // å‘å¸ƒå¤±è´¥çš„æ—¥å¿—å†™å…¥æ–‡ä»¶ï¼Œæ–¹ä¾¿è¿½è¸ª console.log(chalk.red(`version å‘å¸ƒå¤±è´¥ï¼š${npmPacakgeName}@${npmPacakgeVersion}`)) const content = await fs.readFile(errorLogFile) await fs.writeFile(errorLogFile, `${content}\\nversion å‘å¸ƒå¤±è´¥ï¼š${npmPacakgeName}@${npmPacakgeVersion}: ${error.stack}`) } }})// é™åˆ¶å¹¶è¡Œæ•°ä¸º 5ï¼Œé˜²æ­¢ npm ç½‘ç«™æŠ¥é”™await Promise.all(publishTaskList.map(pLimit(5)))// ä¿®å¤æ‰€æœ‰ tagï¼Œå¹¶è¡Œä¼šå¯¼è‡´ä¸æˆåŠŸï¼Œæ­¤å¤„æ”¹ä¸ºä¸²è¡Œ// é»˜è®¤ä¸åŒæ­¥ tagï¼Œæœ‰å¯èƒ½å¯¼è‡´${from}çš„ tag è¦†ç›–äº† ${to}çš„ tagï¼Œè€Œ${from}çš„ tag å¯èƒ½ä¸æ˜¯æœ€æ–°çš„if (options.syncTag) { await Promise.all(tagTaskList.map(pLimit(1)))} è¯·ç•™æ„å¹¶è¡Œé—®é¢˜ï¼Œå¹¶å‘é‡å¤ªå¤§ npm ç½‘ç«™ä¼šæŠ¥é”™ï¼ˆä¼°è®¡è¢«æ‹¦æˆªäº†ï¼‰ã€‚ å¦‚ä½•ä½¿ç”¨æœ¬æ¥ä»…æä¾›è„šæœ¬æ‰§è¡Œæ–¹å¼ï¼Œä¸ºäº†è®©å¤§å®¶ä¹Ÿèƒ½æ–¹ä¾¿ä½¿ç”¨ï¼ˆä¸è¦å†å«æˆ‘åŒæ­¥äº†ï¼‰ã€‚è´´å¿ƒçš„æˆ‘å·²æŠŠè¿™ä¸ªè„šæœ¬å®ç°ä¸ºä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š å†…éƒ¨å·¥å…·ï¼Œæ­¤å¤„ä¸æä¾›ï¼Œå¤§ä¼™å¯è‡ªè¡Œå®ç° å®‰è£…å‘½ä»¤è¡Œnpm i @dd/npm-sync -g æ‰§è¡Œç‰ˆæœ¬åŒæ­¥npm-sync packageName æ‰§è¡Œç‰ˆæœ¬å’ŒtagåŒæ­¥npm-sync packageName --syncTag=true æ›´å¤šä½¿ç”¨æ–¹å¼npm-sync --help TODOS æ¬¢è¿æäº¤ä»£ç  æ”¯æŒã€å‘å¸ƒå‰æœ‰ç¼–è¯‘é’©å­ã€çš„åŒ… ç™»å½•å‰ç½®æ ¡éªŒ","link":"/2020/09/27/%E7%BB%99%E4%BD%A0%E5%BF%83%E7%88%B1%E7%9A%84%20npm%20%E5%8C%85%E4%B8%8A%E4%B8%AA%E5%8C%97%E4%BA%AC%E6%88%B7%E5%8F%A3/"},{"title":"redux ä¸­é—´ä»¶å…¥é—¨åˆ°ç¼–å†™ï¼Œåˆ°æ”¹è¿›ï¼Œåˆ°å‡ºé—¨","text":"æ˜¥æ±ŸèŠ±æœˆå¤œè°ƒ bugï¼Œå­¤ç‹¬å¯‚å¯æ—¥è‘— blogã€‚å¾æ¯æ˜¨å¤œæ‰˜æ¢¦ï¼Œå¾å„¿åªèº«åœ¨å¤–ï¼Œè¯»ä¹¦æ’©å¦¹ä¸¤æ‰‹è¦æŠ“ï¼Œå‰ç«¯çŸ¥è¯†åˆ‡è«è’åºŸã€‚å¦‚æ— å¯¹è±¡å¯é¢å‘ï¼Œå¯ä»¥å­¦å­¦å‡½æ•°å¼ã€‚å¤šå†™ä»£ç å°‘ç¡è§‰ï¼Œè¿˜æœ‰å‘¨äº”çš„å‘¨æŠ¥ã€‚redux è¦ä¼šï¼Œmiddleware èƒ½å†™ï¼Œæœ‰ç©ºè®°å¾—å†™åšå®¢ï¼Œå†™å¥½å‘ç»™æˆ‘çœ‹çœ‹ã€‚ æƒŠé†’ä¹‹ä½™ï¼Œå…¶æ•¦æ•¦æ•™è¯²ä¸æ•¢å¿˜ï¼Œä¹ƒæ­£è¥Ÿå±åï¼ŒæŒ‘ç¯å†™ä¸‹è¿™ç¯‡åšå®¢ï¼Œæ„ŸåŠ¨~ redux ä¸­é—´ä»¶redux æä¾›äº†ç±»ä¼¼ Web å¼€å‘çš„ä¸­é—´ä»¶æœºåˆ¶ï¼ŒWeb ä¸­ç»è¿‡ä¸­é—´ä»¶çš„æ˜¯ä¸€ä¸ªä¸ªè¯·æ±‚ï¼Œè€Œ redux ä¸­ç»è¿‡ä¸­é—´ä»¶çš„æ˜¯ä¸€ä¸ªä¸ª actionï¼Œä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨ä¸­é—´ä»¶ä¸­é’ˆå¯¹ç‰¹å®š action è¿›è¡Œå„ç§ç»Ÿä¸€çš„å¤„ç†ï¼Œæ¯”å¦‚æ—¥å¿—æ‰“å°ï¼Œæ•°æ®è¯·æ±‚ï¼Œé”™è¯¯å¤„ç†ç­‰ã€‚ å¦‚ä½•ä½¿ç”¨redux æä¾› applyMiddleware æ–¹æ³•ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹å¼å³å¯åº”ç”¨ä¸­é—´ä»¶ï¼š 1234567891011121314151617import { createStore, applyMiddleware, compose,} from 'redux'import nextAndRequest from './middleware/redux-next-and-request'import errorCatcher from './middleware/redux-error-catcher'import reducer from '../reducer'const createStoreWithMiddleware = compose( applyMiddleware( nextAndRequest, errorCatcher, ), DevTools.instrument(), window.devToolsExtension(),)(createStore) å®ç°åŸç†compose å‡½æ•°æ­¤å¤„æœ‰ä¸ªç¥å¥‡çš„å‡½æ•°ï¼Œå³ composeï¼Œè¯¥å‡½æ•°åœ¨ applyMiddleware ä¸­ä¹Ÿæ˜¯æ ¸å¿ƒä»£ç ï¼Œæ­£æ˜¯å®ƒå®ç°äº† redux ä¸­é—´ä»¶çš„æœºåˆ¶ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ compose çš„æºç ï¼š 12345678910111213141516171819202122/** * Composes single-argument functions from right to left. The rightmost * function can take multiple arguments as it provides the signature for * the resulting composite function. * * @param {...Function} funcs The functions to compose. * @returns {Function} A function obtained by composing the argument functions * from right to left. For example, compose(f, g, h) is identical to doing * (...args) =&gt; f(g(h(...args))). */export default function compose(...funcs) { if (funcs.length === 0) { return arg =&gt; arg } if (funcs.length === 1) { return funcs[0] } return funcs.reduce((a, b) =&gt; (...args) =&gt; a(b(...args)))} ä»æ³¨é‡Šä¸­å¯çŸ¥ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»å³åˆ°å·¦å°†å¤šä¸ªå‡½æ•°ç»„åˆæˆä¸€ä¸ªæ–°å‡½æ•°ï¼Œå…¶ä¸­æœ€å³è¾¹çš„å‡½æ•°æ¶ˆè€—äº†è¯¥æ–°å‡½æ•°çš„å‚æ•°ï¼Œå¹¶é€çº§å‘å·¦ä½œä¸ºå‚æ•°ä¾æ¬¡æ‰§è¡Œï¼› æ‰§è¡Œ compose(f1, f2, f3) å¯å¾— (â€¦args) =&gt; f1(f2(f3(â€¦args)))ï¼›æ ¸å¿ƒæ“ä½œä¸º reduceï¼Œè¯¦ç»†ä½¿ç”¨æ–¹å¼å¯å‚çœ‹æ–‡æ¡£ 12345678910111213141516ç¬¬ä¸€æ¬¡ reduce previousValue: f1; currentValue: f2; returnValue: (...args1) =&gt; f1(f2(...args1)) // è®°ä¸º R1ç¬¬äºŒæ¬¡ reduce previousValue: R1 currentValue: f3; returnValue: (...args2) =&gt; R1(f3(...args2)) // è®°ä¸º R2å…¶ä¸­ R2:(...args2) =&gt; ((...args1) =&gt; f1(f2(...args1)))(f3(...args2))æ­¤æ—¶ä¼ å…¥ args æ‰§è¡Œ R2ï¼šç¬¬ä¸€æ­¥ï¼š å¾—åˆ° ((...args1) =&gt; f1(f2(...args1)))(f3(args)) // è®°ä¸º R3ç¬¬äºŒæ­¥ï¼šf3(args) å³æ˜¯ R3 çš„å‚æ•° (...args1)ï¼Œç»§ç»­æ‰§è¡Œå¯å¾— f1(f2(f3(args))) å…¶å®ä¹‹å‰è¿™ä¸ª compose æ–¹æ³•ä¸æ˜¯ä½¿ç”¨ reduce å®ç°çš„ï¼Œè€Œæ˜¯ä½¿ç”¨ reduceRight å®ç° composeRightï¼Œå› æ­¤å¯¹æ¯”æ–°ç‰ˆå®ç°ï¼Œæ¯”è¾ƒå¥½ç†è§£ï¼ŒåŸæ¥çš„ç‰ˆæœ¬ä¸ºï¼š æ–°ç‰ˆ Merge Requestæ–°ç‰ˆçš„æ–¹å¼ä½¿ç”¨æƒ°æ€§æ±‚å€¼ï¼Œæ€§èƒ½æœ‰æå‡ 1234567891011121314151617181920212223242526/** * Composes single-argument functions from right to left. The rightmost * function can take multiple arguments as it provides the signature for * the resulting composite function. * * @param {...Function} funcs The functions to compose. * @returns {Function} A function obtained by composing the argument functions * from right to left. For example, compose(f, g, h) is identical to doing * (...args) =&gt; f(g(h(...args))). */export default function compose(...funcs) { if (funcs.length === 0) { return arg =&gt; arg } funcs = funcs.filter(func =&gt; typeof func === 'function') if (funcs.length === 1) { return funcs[0] } const last = funcs[funcs.length - 1] const rest = funcs.slice(0, -1) return (...args) =&gt; rest.reduceRight((composed, f) =&gt; f(composed), last(...args))} è®©æˆ‘ä»¬å›åˆ°ï¼š 12345678const createStoreWithMiddleware = compose( applyMiddleware( nextAndRequest, errorCatcher, ), DevTools.instrument(), window.devToolsExtension(),)(createStore) createStoreWithMiddleware çš„æœ€ç»ˆå€¼ä¸ºï¼š 1applyMiddleware(nextAndRequest,errorCatcher)(DevTools.instrument()(window.devToolsExtension()(createStore))) applyMiddleware å‡½æ•°å…¶æºç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637import compose from './compose'/** * Creates a store enhancer that applies middleware to the dispatch method * of the Redux store. This is handy for a variety of tasks, such as expressing * asynchronous actions in a concise manner, or logging every action payload. * * See `redux-thunk` package as an example of the Redux middleware. * * Because middleware is potentially asynchronous, this should be the first * store enhancer in the composition chain. * * Note that each middleware will be given the `dispatch` and `getState` functions * as named arguments. * * @param {...Function} middlewares The middleware chain to be applied. * @returns {Function} A store enhancer applying the middleware. */export default function applyMiddleware(...middlewares) { return (createStore) =&gt; (reducer, preloadedState, enhancer) =&gt; { const store = createStore(reducer, preloadedState, enhancer) let dispatch = store.dispatch let chain = [] const middlewareAPI = { getState: store.getState, dispatch: (action) =&gt; dispatch(action) } chain = middlewares.map(middleware =&gt; middleware(middlewareAPI)) dispatch = compose(...chain)(store.dispatch) return { ...store, dispatch } }} ä¸€ä¸ª redux ä¸­é—´ä»¶çš„ç»“æ„ï¼š 123store =&gt; next =&gt; action =&gt; { // ä¸­é—´ä»¶é€»è¾‘ä»£ç } å‡è®¾æœ‰ä¸‰ä¸ªä¸­é—´ä»¶ M1, M2, M3ï¼Œåº”ç”¨ applyMiddleware(M1, M2, M3) å°†è¿”å›ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å— createStore å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä½¿å¾—åˆ›å»ºçŠ¶æ€æ ‘ store çš„æ­¥éª¤åœ¨è¿™ä¸ªé—­åŒ…å‡½æ•°å†…æ‰§è¡Œ;æ¥ç€å°† store é‡æ–°ç»„è£…æˆ middlewareAPI ä½œä¸ºæ–°çš„ storeï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„ä¸­é—´ä»¶æœ€å¤–å±‚å‡½æ•°çš„å‚æ•° storeï¼Œè¿™æ ·ä¸­é—´ä»¶å°±å¯ä»¥æ ¹æ®çŠ¶æ€æ ‘è¿›è¡Œå„ç§æ“ä½œäº†ã€‚ å¯ä»¥å‘ç°é‡æ–°ç»„è£…ä¹‹åçš„ store åªæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ç”¨æˆ·è·å– state çš„ getState æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨äºåˆ†å‘ action çš„ dispatchï¼Œè€Œ setStateã€subscribeã€replaceReducer ç­‰æ–¹æ³•åˆ™ä¸æä¾›ï¼ŒsetState åœ¨è®¾ç½®çŠ¶æ€æ—¶é‡æ–° render å¯èƒ½ä¼šè§¦å‘æ–°çš„ action è€Œå¯¼è‡´æ­»å¾ªç¯ï¼›setState æœ¬èº«å°±æ˜¯ç”¨äºè®¢é˜…æ¯ä¸ª dispatch æ“ä½œï¼Œæ­¤æ—¶ dispatch å°±åœ¨ä½ æ‰‹ä¸Šï¼ˆnext)ï¼Œæ ¹æœ¬ä¸éœ€è¦è®¢é˜…ï¼›replaceReducer ç”¨äºåŠ¨æ€åŠ è½½æ–°çš„ reducerï¼Œæˆ‘çŒœä½ ç”¨ä¸åˆ°ã€‚ å°†ä¸­é—´ä»¶æ•°ç»„ä¸­çš„å‡½æ•°é€ä¸€ä¼ å…¥å‚æ•° middlewareAPI å¹¶æ‰§è¡Œï¼Œä»è€Œå¾—åˆ° chain æ•°ç»„ï¼Œæ­¤æ—¶ chain æ•°ç»„ä¸­çš„æ¯ä¸ªå‡½æ•°é•¿è¿™æ ·ï¼š 123next =&gt; action =&gt; { // ä¸­é—´ä»¶é€»è¾‘ä»£ç } æ ¸å¿ƒä»£ç è§£è¯» dispatch = compose(â€¦chain)(store.dispatch) å‡è®¾ chain æ˜¯åŒ…å« C1, C2, C3 ä¸‰ä¸ªå‡½æ•°çš„æ•°ç»„ï¼Œé‚£ä¹ˆ compose(â€¦chain)(store.dispatch) å³æ˜¯ C1(C2(C3(store.dispatch))), å› æ­¤æ˜“çŸ¥ï¼š applyMiddleware çš„æœ€åä¸€ä¸ªä¸­é—´ä»¶ M3 ä¸­çš„ next å°±æ˜¯åŸå§‹çš„ store.dispatch; M2 ä¸­çš„ next ä¸º C3(store.dispatch); M1 ä¸­çš„ next ä¸º C2(C3(store.dispatch)); æœ€ç»ˆå°† C1(C2(C3(store.dispatch))) ä½œä¸ºæ–°çš„ dispatch æŒ‚åœ¨ store ä¸Šè¿”å›ç»™ç”¨æˆ·ï¼Œå› æ­¤è¿™å°±æ˜¯ç”¨æˆ·åˆ‡å®è°ƒåˆ°çš„ dispatch æ–¹æ³•ï¼Œæ—¢ç„¶å±‚å±‚æ‰§è¡Œäº† C3ï¼ŒC2, C1ï¼Œé‚£ä¹ˆä¸€ä¸ªä¸­é—´ä»¶å·²ç»è¢«æ‹†è§£ä¸ºï¼š 123action =&gt; {} è§¦å‘ action çš„å®Œæ•´æµç¨‹æœ‰äº†è¿™ä¸ª dispatch æ–¹æ³•å’Œè¢«æ‰’å…‰çš„ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬æ¥æ¢³ç†ä¸€éå½“ç”¨æˆ·è§¦å‘ä¸€ä¸ª action çš„å®Œæ•´æµç¨‹ï¼š æ‰‹åŠ¨è§¦å‘ä¸€ä¸ª actionï¼šstore.dispatch(action)ï¼› å³è°ƒç”¨ C1(C2(C3(store.dispatch)))(action)ï¼› æ‰§è¡Œ C1 ä¸­çš„ä»£ç ï¼Œç›´åˆ°é‡åˆ° next(action)ï¼Œæ­¤æ—¶ next ä¸º M1 ä¸­çš„ nextï¼Œå³ï¼šC2(c3(store.dispatch))ï¼› æ‰§è¡Œ C2(c3(store.dispatch))(action)ï¼Œç›´åˆ°é‡åˆ° next(action)ï¼Œæ­¤æ—¶ next ä¸º M2 ä¸­çš„ nextï¼Œå³ï¼šC3(store.dispatch)ï¼› æ‰§è¡Œ C3(store.dispatch)(action)ï¼Œç›´åˆ°é‡åˆ° next(action)ï¼Œæ­¤æ—¶ next ä¸º M3 ä¸­çš„ nextï¼Œå³ï¼šstore.dispatchï¼› æ‰§è¡Œ store.dispatch(action)ï¼Œstore.dispatch å†…éƒ¨è°ƒç”¨ root reducer æ›´æ–°å½“å‰ stateï¼› æ‰§è¡Œ C3 ä¸­ next(action) ä¹‹åçš„ä»£ç  æ‰§è¡Œ C2 ä¸­ next(action) ä¹‹åçš„ä»£ç  æ‰§è¡Œ C1 ä¸­ next(action) ä¹‹åçš„ä»£ç  å³ï¼šC1 -&gt; C2 -&gt; C3 -&gt; store.dispatch -&gt; C3 -&gt; C2 -&gt; C1 æ´‹è‘±æ¨¡å‹æœ‰æ²¡æœ‰!!! å¦‚ä½•ç¼–å†™è®²äº†è¿™ä¹ˆå¤šï¼Œç»ˆäºåˆ‡å…¥æ­£é¢˜ï¼Œå¼€å§‹å†™ä¸­é—´ä»¶äº†ï¼Œç›®æ ‡æ˜¯å®ç°ä¸­é—´ä»¶ï¼Œä½¿å¾—å¼‚æ­¥è¯·æ±‚ï¼Œé”™è¯¯å¤„ç†éƒ½èƒ½ç»ç”±ä¸­é—´ä»¶å¤„ç†ï¼›è€Œä¸éœ€è¦æ¯æ¬¡æ‰‹åŠ¨ç¹ççš„å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼ŒåŒæ—¶æ¯ä¸ªå¼‚æ­¥è¯·æ±‚è¯­å¥ä¹‹åéƒ½æ‰‹åŠ¨å¤„ç†é”™è¯¯ä»£ç ã€‚ å…ˆä»ç®€å•çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶å¼€å§‹~ é”™è¯¯å¤„ç†ä¸­é—´ä»¶é€šè¿‡æ£€æµ‹ action ä¸Šæ˜¯å¦å­˜åœ¨ error å­—æ®µï¼Œæ¥å†³å®šæ˜¯å¦æŠ›å‡ºé”™è¯¯ 1234567891011121314151617import { notification } from 'antd'export default store =&gt; next =&gt; async action =&gt; { try { if(action.error) { throw new Error(action.error) } else { next(action) } } catch (err) { notification.error({ message: 'é”™è¯¯ä¿¡æ¯', description: err.message }); throw err }} å½“å‘ç° action ä¸­æœ‰ error å­—æ®µï¼Œåˆ™æŠ›å‡ºé”™è¯¯ï¼Œè¿™ä¸ªå­—æ®µå¯ç”±ä¸Šæ¸¸ä¸­é—´ä»¶å‡ºé”™åï¼Œå°†å¯¹åº”çš„é”™è¯¯ä¿¡æ¯æŒ‚åœ¨ action.error ä¸Šï¼Œä½¿å¾—æœ¬ä¸­é—´ä»¶èƒ½å¤Ÿå¤„ç†è¿™ä¸ªé”™è¯¯ï¼Œç”±äºé¡¹ç›®åŸºäº antdï¼Œæ­¤å¤„å°†æ‰€æœ‰é”™è¯¯éƒ½é€šè¿‡ notification ç»„ä»¶åœ¨å³ä¸Šè§’å¼¹çª—æ˜¾ç¤ºï¼› å¦‚æœåšæˆé€šç”¨çš„é”™è¯¯å¤„ç†çš„è¯ï¼Œå¯ä»¥å†åŒ…ä¸€å±‚å‡½æ•°ï¼Œä¼ å…¥é”™è¯¯å¤„ç†å‡½æ•°ï¼Œä¾¿èƒ½å¤Ÿè‡ªå®šä¹‰é”™è¯¯å¤„ç†å‡½æ•°äº†ï¼š 123456789101112export default handler =&gt; store =&gt; next =&gt; action =&gt; { try { if(action.error) { throw new Error(action.error) } else { next(action) } } catch (err) { handler &amp;&amp; handler(err) throw err }} åˆ™ä½¿ç”¨æ–¹å¼å˜ä¸ºï¼š 123456789101112const createStoreWithMiddleware = compose( applyMiddleware( nextAndRequest, errorHandler(err =&gt; { notification.error({ message: 'é”™è¯¯ä¿¡æ¯', description: err.message }) }), ), window.devToolsExtension)(createStore) å¼‚æ­¥è¯·æ±‚å¤„ç†ä¸­é—´ä»¶ç‰ˆæœ¬ä¸€é€šè¿‡åˆ¤æ–­ action å­—æ®µä¸Šæ˜¯å¦ç”¨ url å­—æ®µæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼ŒåŒæ—¶å°†è¯·æ±‚ç»“æœæŒ‚åœ¨ action çš„ result å­—æ®µä¸Šï¼Œä¾›ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ– reducer ä½¿ç”¨ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142import request from './request'export default store =&gt; next =&gt; async action =&gt; { if (action.url) { try { const execAction = async act =&gt; { if(act.url) { const { code, data, error, } = await request({ url: act.url, method: act.method || 'get', data: act.data || {}, }) if (code !== 0) { throw new Error(error || 'æœªçŸ¥é”™è¯¯ï¼') } else { return data } } } const result = await execAction(action) next({ result, ...action }) } catch (error) { next({ error: error.message, }) } } else { next(action) }} ç‰ˆæœ¬äºŒç”±äºæœ¬é¡¹ç›®å¤§éƒ¨åˆ†æƒ…å†µéœ€è¦åœ¨æ‰§è¡Œä¸€ä¸ªå¼‚æ­¥ action ä¹‹åï¼Œå†é‡æ–°æ‰§è¡Œä¸€ä¸ªå¼‚æ­¥ actionï¼Œè¾¾åˆ°æ›´æ–°å½“å‰åˆ—è¡¨çš„ç›®çš„ã€‚ ä¾‹å¦‚åˆ é™¤æˆ–æ·»åŠ ä¸€æ¡è®°å½•åï¼Œå¸Œæœ›æ›´æ–°å½“å‰åˆ—è¡¨ä¿¡æ¯ å› æ­¤åšå¦‚ä¸‹æ›´æ”¹ï¼Œåœ¨ action ä¸Šå¢åŠ ä¸€ä¸ª nextAction å­—æ®µï¼Œä½¿å¾—èƒ½å¤Ÿåœ¨æ‰§è¡Œå½“å‰ action ä¹‹åï¼Œæ¥ç€æ‰§è¡Œä¸€ä¸ª actionï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354import request from './request'export default store =&gt; next =&gt; async action =&gt; { if (action.url || action.nextAction) { try { const execAction = async act =&gt; { if(act.url) { const { code, data, error, } = await request({ url: act.url, method: act.method || 'get', data: act.data || {}, }) if (code !== 0) { throw new Error(error || 'æœªçŸ¥é”™è¯¯ï¼') } else { return data } } } const result = await execAction(action) next({ result, ...action }) if (action.nextAction) { const act = action.nextAction const nextAction = typeof act === 'function' ? await act(result, action) : act const nextResult = await execAction(nextAction) next({ result: nextResult, lastResult: result, ...nextAction }) } } catch (error) { next({ error: error.message, }) } } else { next(action) }} ä¸ºäº†æ–¹ä¾¿æ‰§è¡Œä¸€äº›é¢å¤–çš„æ“ä½œï¼Œæ­¤å¤„ nextAction ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ª actionï¼ŒåŒæ—¶å°†å½“å‰ action çš„è¿”å›å€¼ä½œä¸ºå›è°ƒä¼ å…¥è¿™ä¸ªå‡½æ•°ï¼ŒnextAction æ‰§è¡Œä¹‹åï¼Œé™¤äº†å°†è¯·æ±‚ç»“æœä½œä¸º result å­—æ®µæŒ‚åœ¨ action ä¹‹å¤–ï¼Œè¿˜åŠ å…¥äº†ä¸€ä¸ª lastResult å­—æ®µä¿å­˜é¦–æ¬¡ action çš„å€¼ã€‚ ç‰ˆæœ¬ä¸‰ç›®å‰åªèƒ½æ”¯æŒä¸€çº§ nextActionï¼Œå¦‚æœè¦æ”¯æŒå¤šçº§çš„è¯ï¼Œå¯ä»¥ä¼ å…¥æ•°ç»„ï¼Œæ•°ç»„ä¸­å¯ä»¥æ˜¯ä¸€ä¸ªæ™®é€šçš„ actionï¼Œä¹Ÿå¯ä»¥æ˜¯è¿”å›ä¸€ä¸ª action çš„å‡½æ•°ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// index.jsimport execAction from './exec-action'import execNextAction from './exec-next-action'import isFunction from './is-function'import isArray from './is-array'export default () =&gt; next =&gt; async action =&gt; { if (action.url || action.nextAction) { try { const result = await execAction(action) next({ result, ...action }) if (action.nextAction) { let nextAction = action.nextAction let lastResult = result let lastAction = action if(isFunction(nextAction)) { nextAction = await nextAction(lastResult, lastAction) await execNextAction(nextAction, lastResult, next) } else if(isArray(nextAction)) { let currentAction for( let i = 0; i &lt; nextAction.length; i++ ) { lastAction = nextAction[i - 1] ? nextAction[i - 1] : lastAction currentAction = isFunction(nextAction[i]) ? await nextAction[i](lastResult, lastAction) : nextAction[i] await execNextAction(currentAction, lastResult, next) } } else { await execNextAction(nextAction, lastResult, next) } } } catch (error) { next({ error: error.message, }) } } else { next(action) }} 123// is-array.jsexport default param =&gt; Array.isArray(param) 123// is-function.jsexport default param =&gt; typeof param === 'function' 1234567891011121314151617181920212223242526272829// request.jsimport reqwest from 'reqwest'export default async opts =&gt; { const defaultOpts = { type: 'json', url: `/routers${opts.url}`, } const finalOpts = { ...opts, ...defaultOpts, } let ret try { ret = await reqwest(finalOpts) return ret } catch (e) { try { ret = JSON.parse(e.response) } catch (e) { ret = e.message } return ret }} 123456789101112131415161718192021222324// exec-action.jsimport request from './request'export default async act =&gt; { if(act.url) { const { code, data, error, } = await request({ url: act.url, method: act.method || 'get', data: act.data || {}, }) if (code !== 0) { throw new Error(error || 'æœªçŸ¥é”™è¯¯ï¼') } else { return data } }} 12345678910111213// exec-next-action.jsimport execAction from './exec-action'export default async (nextAct, lastResult, next) =&gt; { const result = await execAction(nextAct) next({ result, lastResult, ...nextAct })} å¦‚æ­¤è¿™èˆ¬ï¼Œä¾¿èƒ½å¼€å¿ƒçš„å†™é¡µé¢äº†~å¥½äº†ï¼Œæˆ‘è¦å‘ç»™æˆ‘å¦ˆçœ‹çœ‹ã€‚","link":"/2017/03/18/%E7%BC%96%E5%86%99%20redux%20%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"title":"ç¼–å†™å¯ç»´æŠ¤çš„ JavaScriptã®ç¬”è®°","text":"ç¬¬ä¸€éƒ¨åˆ†ä¸»è¦æ¶‰åŠç¼–ç¨‹é£æ ¼ï¼Œä¸ºäº†è®©å›¢é˜Ÿçš„ä»£ç çœ‹èµ·æ¥å¦‚å‡ºä¸€äººä¹‹æ‰‹ï¼›ç¬¬äºŒéƒ¨åˆ†ä¸ºç¼–ç¨‹å®è·µï¼Œå­¦åˆ°äº†å¾ˆå¤šå…³äº JavaScript çš„ç¼–ç¨‹ç»éªŒï¼›ç¬¬ä¸‰éƒ¨åˆ†æ˜¯å…³äºè‡ªåŠ¨åŒ–çš„ï¼Œä»‹ç»çš„å·¥å…·é“¾ï¼Œåœ¨ 2016 å¹´åº•çœ‹æ¥å·²ç»ç›¸å½“è¿‡æ—¶ã€‚ ç¼–å†™å¯ç»´æŠ¤çš„ JavaScriptã®ç¬”è®°ç¬¬ä¸€éƒ¨åˆ† åŸºæœ¬æ ¼å¼åŒ– å»ºè®®åœ¨æ¯ä¸ªæµç¨‹æ§åˆ¶è¯­å¥ï¼ˆæ¯”å¦‚ if å’Œ for è¯­å¥ï¼‰ä¹‹å‰æ·»åŠ ç©ºè¡Œ å˜é‡å‘½ååº”å½“ä»¥åè¯ä¸ºå‰ç¼€ï¼Œè€Œå‡½æ•°å‘½ååˆ™ä»¥åŠ¨è¯ä¸ºå‰ç¼€ï¼Œå¸¸ç”¨åŠ¨è¯çº¦å®šï¼š åŠ¨è¯ å«ä¹‰ can è¿”å›å¸ƒå°”å€¼ has è¿”å›å¸ƒå°”å€¼ is è¿”å›å¸ƒå°”å€¼ get è¿”å›éå¸ƒå°”å€¼ set ç”¨äºä¿å­˜ä¸€ä¸ªå€¼ å¸¸é‡çº¦å®šä½¿ç”¨å¤§å†™å­—æ¯ä¹¦å†™ï¼Œå•è¯ä¹‹é—´ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš” ä½¿ç”¨ null çš„åœºæ™¯ï¼ˆç†è§£ä¸ºå¯¹è±¡çš„å ä½ç¬¦ï¼‰ a. åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡å¯èƒ½èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ b. ç”¨æ¥å’Œä¸€ä¸ªå·²ç»åˆå§‹åŒ–çš„å˜é‡ï¼ˆå¯ä»¥æ˜¯ä¹Ÿå¯ä»¥ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰æ¯”è¾ƒ c. å½“å‡½æ•°çš„æœŸæœ›æ˜¯å¯¹è±¡æ—¶ï¼Œç”¨ä½œå‚æ•°ä¼ å…¥ d. å½“å‡½æ•°çš„è¿”å›å€¼æœŸæœ›æ˜¯å¯¹è±¡æ—¶ï¼Œç”¨ä½œè¿”å›å€¼ä¼ å‡º null == undefined // true typeof null === object // true æ³¨é‡Šå‰ç•™å‡ºç©ºè¡Œï¼Œæ–‡ä»¶å¤´éƒ¨é™¤å¤– ä¸ç¬¦å¸¸ç†ï¼Œæœ‰æ„ä¸ºä¹‹çš„ä»£ç æœ€å¥½æ³¨é‡Š å£°æ˜è¯­å¥ä¹‹åç•™å‡ºç©ºè¡Œ åŸå§‹åŒ…è£…ç±»å‹ï¼šStringã€Booleanã€Numberï¼ŒåŸå§‹å€¼æœ¬èº«å¹¶ä¸å…·æœ‰å¯¹è±¡ç‰¹æ€§ ç¬¬äºŒéƒ¨åˆ† ä½¿ç”¨å•å…¨å±€å˜é‡ï¼Œå°†å˜é‡ç»Ÿä¸€æŒ‚è½½åˆ°ä¸€ä¸ªå…·ä½“çš„å…¨å±€å˜é‡ä¸Š å¯åœ¨å…¨å±€å¯¹è±¡çš„ç¬¬ä¸€å±‚çº§åˆ›å»ºå¯¹è±¡ä»¥ä½œä¸ºå‘½åç©ºé—´ ä½¿ç”¨å‡½æ•°åŒ…è£…å™¨åˆ›å»ºé›¶å…¨å±€å˜é‡åœºæ™¯ï¼š 1234(function(win) { let doc = window.document; // your code}(window)); éš”ç¦»åº”ç”¨é€»è¾‘ï¼Œä¾‹å¦‚å°†äº‹ä»¶å¤„ç†ç¨‹åºå°è£…åˆ°ä¸€ä¸ªå…¨å±€å¯¹è±¡ä¸­ 123456789const MyApp = { handleClick: e =&gt; { this.showPopup(e); }, showPopup: e =&gt; { // äº‹ä»¶é€»è¾‘ä»£ç  }ï¼Œ}ï¼› ä¸è¦åˆ†å‘äº‹ä»¶å¯¹è±¡ï¼Œä»…åˆ†å‘éœ€è¦çš„å‚æ•° 123456789const MyApp = { handleClick: e =&gt; { this.showPopup(e.clientX, e.clientY); }, showPopup: (x, y) =&gt; { // äº‹ä»¶é€»è¾‘ä»£ç  }ï¼Œ}ï¼› å°½é‡è®©äº‹ä»¶å¤„ç†ç¨‹åºæˆä¸ºæ¥è§¦åˆ° event å¯¹è±¡çš„å”¯ä¸€å‡½æ•°ï¼Œç»è¿‡4ã€5ã€6ï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºæµ‹è¯• 123456789101112const MyApp = { handleClick: e =&gt; { e.preventDefault(); e.stopPropagation(); this.showPopup(e.clientX, e.clientY); }, showPopup: (x, y) =&gt; { // äº‹ä»¶é€»è¾‘ä»£ç  }ï¼Œ}ï¼› frame A ä¸­çš„å¯¹è±¡ä¼ å…¥ frame Bï¼Œåˆ™ç›¸å½“äºæ¯ä¸ª frame éƒ½æœ‰ä¸€ä»½æ‹·è´ï¼Œä½¿å¾—ï¼š 123456// trueframeAObjInstance instanceof frameAObj//falseframeAObjInstance instanceof frameBObj// åŒæ ·é€‚ç”¨äº Function ä¸ Arrayï¼Œå› ä¸ºæ¯ä¸ª frame ä¸­éƒ½ä¸ªå„è‡ªçš„æ„é€ å‡½æ•° Array.isArray åˆ¤æ–­æ•°ç»„ åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§å€¼ï¼ˆé¿å…å±æ€§å‡å€¼ï¼Œä¸å»ºè®® if(obj[â€˜countâ€™])ï¼Œä½¿ç”¨ in æ“ä½œç¬¦ï¼Œæˆ–è€… hasOwnProperty() æ–¹æ³• æŠ½ç¦»é…ç½®æ•°æ®ï¼ˆç¡¬ç¼–ç å€¼ï¼‰ æŠ›å‡ºé”™è¯¯å°±åƒç»™è‡ªå·±ç•™ä¸‹ä¸ºä»€ä¹ˆå‡ºé”™çš„ä¾¿ç­¾ åŒ…è£…å™¨æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼å”¯ä¸€çš„ä¸åŒæ˜¯å‰è€…åˆ›å»ºæ–°æ¥å£ï¼Œåè€…å®ç°å·²å­˜åœ¨çš„æ¥å£ é¿å…ä½¿ç”¨ç‰¹æ€§æ¨æ–­å’Œæµè§ˆå™¨æ¨æ–­ï¼Œé…Œæƒ…ä½¿ç”¨ç‰¹æ€§æ£€æµ‹å’Œç”¨æˆ·ä»£ç†æ£€æµ‹","link":"/2016/11/27/%E7%BC%96%E5%86%99%E5%8F%AF%E7%BB%B4%E6%8A%A4%E7%9A%84%20JavaScript%20%E3%81%AE%E7%AC%94%E8%AE%B0/"},{"title":"ç¼–è¯‘&amp;æ„å»ºç°ä»£JSåº”ç”¨","text":"ç»™åˆä½œéƒ¨é—¨çš„å®¢æˆ·ç«¯åŒå­¦ç§‘æ™®å¦‚ä½•ã€Šç¼–è¯‘&amp;æ„å»ºç°ä»£JSåº”ç”¨ã€‹ï¼","link":"/2020/05/30/%E7%BC%96%E8%AF%91&%E6%9E%84%E5%BB%BA%E7%8E%B0%E4%BB%A3JS%E5%BA%94%E7%94%A8/"},{"title":"è®°ä¸€æ¬¡ Webview Jsbridge æ¥å£å°è£…","text":"ç”±äºæˆ‘å¸åŸæœ‰çš„ Jsbridge æ–¹æ¡ˆè°ƒç”¨ç¹ç, å‚æ•°å¤šå±‚åµŒå¥—, å¹¶åœ¨å¤šä¸ª APP ä¸Šå­˜åœ¨å…¼å®¹æ€§é—®é¢˜, å¼•æ¥æˆ‘å¸å‰ç«¯å¼€å‘äººå‘˜çš„ä¸€è‡´åæ§½â€¦ å‰å› å®¢æˆ·ç«¯å¼€å‘äººå‘˜ç«™åœ¨è‡ªå·±çš„è§’åº¦ä¸Š, æ ¹æ®å‰ç«¯éœ€è¦ä½¿ç”¨çš„åŠŸèƒ½è®¾è®¡å‡ºäº†ä¸€å¥— Jsbridge äº¤äº’æ–¹æ¡ˆ, è¯¥æ–¹æ¡ˆè™½ç„¶èƒ½å¾ˆå¥½åœ°å®Œæˆ native ä¸ h5 é¡µé¢çš„ç›¸äº’è°ƒç”¨å¯¹æ–¹çš„å‡½æ•°(æ–¹æ³•), ä½†æ˜¯ç”±äºæ²¡æœ‰å……åˆ†è€ƒè™‘åˆ°å‰ç«¯å¼€å‘çš„ä½¿ç”¨ä¹ æƒ¯, å¯¼è‡´è¯¥æ–¹æ¡ˆéš¾ä»¥æ¨å¹¿, ä½œä¸ºæˆ‘å¸å‰ç«¯çš„ä¸€å‘˜, æ°å¥½åˆè¢«åˆ†åœ¨äº†å…¬å…±ç»„, è§‰å¾—ååˆ†æœ‰å¿…è¦å°è£…ä¸€å±‚å¯¹å‰ç«¯å¼€å‘äººå‘˜å‹å¥½çš„ API. æ–°æ—§å¯¹æ¯”æ—§çš„æ–¹å¼ åŒæ­¥æ¥å£ 1234const data = { &quot;action&quot;: &quot;doLogin&quot;}bridge.send(JSON.stringify(data)); å¼‚æ­¥æ¥å£ 123456const data = { &quot;action&quot;: &quot;isLogin&quot;}bridge.send(JSON.stringify(data), (response) =&gt; { alert(response === 'true');}); ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹: 1.æ¥å£ç»Ÿä¸€ä½¿ç”¨bridge.sendæ–¹å¼æ‰§è¡Œ ç¼ºç‚¹: 1.å‚æ•°ä¸ºå¤šå±‚JSONæ ¼å¼, æ¯”è¾ƒç¹ç, 2.å‚æ•°ä¼—å¤š, å®¹æ˜“å†™é”™, 3.è¯­ä¹‰åŒ–ä¸è¶³, è°ƒç”¨èµ·æ¥ä¸ç›´è§‚ ä¾‹å¦‚:closeWebView å…³é—­å½“å‰ webview ï¼Œå¹¶å‘ä¸‹ä¸€ä¸ªæ‰“å¼€çš„ webview ä¼ é€’ message ä¿¡æ¯ 123456789101112131415161718192021222324//å‘é€å‚æ•°const data = { &quot;action&quot;: &quot;closeWebView&quot;, &quot;params&quot;: { &quot;message&quot;: { &quot;action&quot;: &quot;prePageClose&quot;, &quot;params&quot;: { &quot;message&quot;: &quot;data form previous page&quot; } } }}bridge.send(JSON.stringify(data));//åœ¨ä¸Šä¸€ä¸ª webview ä¸­éœ€è¦åˆå§‹åŒ– bridge.init æ¥ç›‘å¬æ¶ˆæ¯bridge.init((data) =&gt; { data === JSON.stringify({ &quot;action&quot;: &quot;prePageClose&quot;, &quot;params&quot;: { &quot;message&quot;: &quot;data form previous page&quot; } });}); æ–°çš„æ–¹å¼ åŒæ­¥ 123bridge.doLogin(); å¼‚æ­¥ 1234567891011jsbridge.isLogin().then((res) =&gt; { if(res) { alert(&quot;å·²ç™»å½•!&quot;); } else { alert(&quot;æœªç™»å½•!&quot;); }}).catch((err) =&gt; { alert(err);}); ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹: 1. ä½¿ç”¨ Promise å®ç°, ç¬¦åˆå‰ç«¯ä¹ æƒ¯; 2. åŒæ­¥çš„æ¥å£ä¹Ÿè¿”å› Promise, æ–¹ä¾¿åç»­å¼‚æ­¥åŒ–; 3. API æ–¹æ³•åç›´æ¥ä½“ç°action, æ¯”è¾ƒç›´è§‚; 3. catchå‡½æ•°èƒ½å¤„ç†å¼‚å¸¸ æ–°çš„å®ç°æ–¹å¼ native ä¸ h5äº¤äº’h5é€šè¿‡å¦‚ä¸‹å‡½æ•°å‘nativeå‘é€æ¶ˆæ¯ 123web.handleMessageFromJs æ— å›è°ƒapi: ç›´æ¥ä½¿ç”¨ä¸Šè¿°å‡½æ•°å‘nativeå‘é€æ¶ˆæ¯ æœ‰å›è°ƒapi: é™¤äº†å‘é€æ¶ˆæ¯å¤–, è¿˜éœ€å‘é€ä¸€ä¸ª unique id æ ‡è®°å›è°ƒå‡½æ•°, å½“å®¢æˆ·ç«¯æ‰§è¡Œå®Œæ¯•, ä¾¿å¯æ ¹æ® unique id æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°, å¹¶æä¾›è¶…æ—¶é”€æ¯æœºåˆ¶ åŠ¨æ€ç”Ÿæˆ API é€šè¿‡ä¸€ä¸ª action åˆ—è¡¨, ç”Ÿæˆå¯¹åº”çš„ API å‡½æ•°, æ–¹ä¾¿åŠ¨æ€åœ°æ‰«ææ–°å¢çš„ API, å¹¶æ·»åŠ åˆ° Jsbridge åº“ä¸­ 1234567891011121314151617181920212223242526272829303132333435363738394041424344 // action åˆ—è¡¨ const actionList = [ {&quot;action&quot;: &quot;isLogin&quot;, &quot;hasCallback&quot;: true}, {&quot;action&quot;: &quot;doLogin&quot;, &quot;hasCallback&quot;: false}, {&quot;action&quot;: &quot;test&quot;, &quot;hasCallback&quot;: true} ]; // æ ¹æ®åˆ—è¡¨ç”Ÿæˆ API å‡½æ•° factory(actionList) { for (let value of actionList) { this[`${value.action}`] = this.generator(value); }} // API ç”Ÿæˆå™¨, æ ¹æ®æ˜¯å¦æœ‰å›è°ƒå‡½æ•°, åˆ†åˆ«ç”ŸæˆåŒæ­¥ API å’Œ å¼‚æ­¥ API generator(action) { return function(params) { action['params'] = params; if (!action.hasCallback) { return new Promise((resolve, reject) =&gt; { this.sendAction(action); resolve(); }); } else { return new Promise((resolve, reject) =&gt; { let callbackId = this.generateId(); this.responseCallbackList[callbackId] = (data) =&gt; { clearTimeout(destoryCallback); resolve(data); } this.sendAction(action, callbackId); // è¶…æ—¶é”€æ¯å›è°ƒ let destoryCallback = setTimeout(() =&gt; { delete this.responseCallbackList[callbackId]; reject(new Error('TIME EXCEED')); }, 5000); }); } }} å…³äº generator å‡½æ•°æœ€è¿‘å‡½æ•°å¼ç¼–ç¨‹è¶Šæ¥è¶Šç«, ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´è¯¥å‡½æ•°å°±æ˜¯ä¼ è¯´ä¸­çš„ curry å‡½æ•°: å®ƒæ¥å—ä¸€ä¸ªå‡½æ•° è¿”å›ä¸€ä¸ªåªæ¥æ”¶ä¸€ä¸ªå‚æ•°çš„å‡½æ•° å¥½å±Œ, é«˜é˜¶å‡½æ•°æœ‰æœ¨æœ‰!","link":"/2016/10/02/%E8%AE%B0%E4%B8%80%E6%AC%A1%20Webview%20Jsbridge%20%E6%8E%A5%E5%8F%A3%E5%B0%81%E8%A3%85/"},{"title":"è®°ä¸€æ¬¡éš¾å¿˜çš„å‰åç«¯åˆ†ç¦»","text":"é‡æ„å…¬å¸å¤šå¹´çš„ JSP é¡¹ç›®ï¼ŒåŠ å…¥ Node.js å±‚ å¯ç»´æŠ¤ä»£ç è§„èŒƒæ¥å…¥å¹¶ä½¿ç”¨ eslint ä¹‹å‰æ”¹è¿‡ä¸€ä¸ªé¡¹ç›®ï¼Œæ»¡å±æŠ¥é”™å•Š å±äºæ¥äº† eslintï¼Œä½†æ˜¯æ²¡æŒ‰é…ç½®æ–‡ä»¶è¿›è¡Œå¼€å‘ï¼Œå¦‚æœè¿™æ ·ä¸æ¥ä¼šæ›´å¥½ç‚¹ es6 module é…åˆ webpack2 å¯æ”¯æŒ tree shake æ³¨é‡Šä¸å˜é‡å‘½å ä»…æ³¨é‡Šå¿…è¦çš„åœºæ™¯ï¼šæ¯”å¦‚ä¸åˆå¸¸ç†çš„å†™æ³•ã€æœ‰å¾ˆå¼º background ä¿¡æ¯çš„ã€æ­¥éª¤æ€§çš„ 1234567// 1const getNextPageUrlAfterCheckPhone = () =&gt; ()const nextPageUrl = getNextPageUrlAfterCheckPhone()// 2const getUrl = () =&gt; () // éªŒè¯æ‰‹æœºåï¼Œè¿”å›ä¸‹ä¸€æ­¥çš„é¡µé¢åœ°å€const url = getUrl() // è·å–æ¥ä¸‹æ¥éœ€è¦è·³è½¬çš„é¡µé¢åœ°å€ ä»£ç å¯èƒ½å‡ ç»äººæ‰‹ï¼Œå¤§å®¶éƒ½æ”¹è¿‡ï¼Œé€»è¾‘å˜äº†ï¼Œå¾ˆå¯èƒ½æ³¨é‡Šå´ä¿æŒä¸åŠ¨ï¼Œæœ€ç»ˆæ³¨é‡Šåè€Œå½±å“äº†é˜…è¯»ä»£ç çš„äºº å…³äºç¼ºæ†¾æ–‡æ¡£1. é¡¹ç›®å¯¹å¤–æ–‡æ¡£ ä½¿ç”¨åœ¨çº¿çš„ API æ–‡æ¡£ä¸­å¿ƒç»´æŠ¤ï¼Œä¾¿äºæŸ¥çœ‹ æ¯•ç«Ÿæ–‡æ¡£æ˜¯ç»™åˆ«äººçœ‹çš„ 2. ä¸åç«¯å¯¹æ¥çš„æ–‡æ¡£ åŒæ ·ä½¿ç”¨åœ¨çº¿çš„ API æ–‡æ¡£ä¸­å¿ƒç»´æŠ¤ï¼Œä¾¿äºæŸ¥çœ‹ æ¥å£æ–‡æ¡£ä¿®æ”¹ä¼šæœ‰é€šçŸ¥ï¼Œä¾¿äºåŒæ­¥ mock æ•°æ®å¯åŒæ­¥åˆ°æœ¬åœ° utils è¾¹ç•Œ ä¸€æ—¦ä½¿ç”¨äº†åä¸º utils çš„ componetsï¼Œä¸ç®¡å‰æœŸå¦‚ä½•æ˜äº†ï¼Œåˆ°åæ¥éƒ½ä¸å¯é¿å…çš„è¶Šå†™è¶Šè‡ƒè‚¿ ä½¿ç”¨æ›´å…·ä½“çš„å‘½åï¼Œæ¯”å¦‚ç”¨äºè¡¨å•éªŒè¯çš„å·¥å…·ï¼šformValidationUtilsï¼Œç”¨äº url æ“ä½œçš„å·¥å…·ï¼šURLUtils æ ·å¼æ”¹åŠ¨ å·²å°†æ ·å¼çš„å‘½åç»Ÿä¸€ä¸ºå°å†™ï¼Œè¿æ¥ç¬¦ä¸º - è€Œä¸æ˜¯é©¼å³° åŸé¡¹ç›®çš„ç§»åŠ¨ç«¯æ ·å¼å¯ç»´æŠ¤æ€§æ¯”è¾ƒé«˜ï¼Œå¤§éƒ¨åˆ†éƒ½æŒ‰é¡µé¢çº§åˆ«æ‹†åˆ†äº† PC ç«¯è™½ç„¶é‡æ„åæŠŠç‹¬ç«‹çš„æ ·å¼æŠ½ç¦»ï¼Œä¸è¿‡å…¬å…±éƒ¨åˆ†çš„æ ·å¼å®åœ¨å¤ªå¤§äº†ï¼Œä¸”ç±»åçŸ­ï¼Œå¾ˆéš¾è¿ç”¨æ‰¹é‡æ›¿æ¢çš„æ–¹å¼é‡æ„ è¿‡æ—¶çš„ jQuery å¼€äº†å†å²çš„å€’è½¦ï¼Œå°†ä¸€äº›ä½¿ç”¨ vue çš„é¡µé¢æ”¹å› jQuery äº† å¤§é‡ç»„ä»¶éƒ½ç›´æ¥ä¾èµ–äº† jQueryï¼Œæ”¹å†™å›°éš¾é‡é‡ æ¯”å¦‚é¡¹ç›®ä¸­çš„ vue ç‰ˆæœ¬æ”¯æŒæ··ç”¨ jQueryï¼Œè€Œæœ€æ–°ç‰ˆçš„ vue ç›´æ¥ç¯¡æ”¹äº† dom èŠ‚ç‚¹ï¼Œå¯¼è‡´ jQuery çš„ä¸€äº› DOM æ“ä½œæ–¹æ³•å¤±æ•ˆ","link":"/2017/12/15/%E8%AE%B0%E4%B8%80%E6%AC%A1%E9%9A%BE%E5%BF%98%E7%9A%84%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/"},{"title":"è®ºå¦‚ä½•ç§‘å­¦åœ°æ²»ç†è€é¡¹ç›®çš„ eslint","text":"è¡Œä¹‹æœ‰æ•ˆï¼Œå¯è¡Œæ€§é«˜çš„æ²»ç†æ–¹å¼ èƒŒæ™¯æ€»æœ‰é‚£ä¹ˆäº›è€é¡¹ç›®ï¼Œå½“è€æ¿å«ä½ ä¸Šå»å¼€å‘éœ€æ±‚æ—¶ï¼Œä½ ä¼šæœ‰ä¸€ç§ä¸ç¥¥çš„é¢„æ„Ÿï¼Œç”Ÿæ€•æ”¹å®Œä¸€å‘å¸ƒï¼Œçº¿ä¸Šå°±å´©äº†ã€‚ä½†æ˜¯ä½ è¿˜æ˜¯æ…Œå…®å…®çš„ä»‹å…¥å¼€å‘ï¼Œæƒ³ç€å¼€å‘å®Œé©¬ä¸ŠæŠ½èº«ã€‚è¿™äº›é™¤äº†ä¸€äº›è´´è¯è†å¼çš„ä¸šåŠ¡é€»è¾‘å¤–ï¼Œè®©ä½ ååˆ†ç¼ºä¹å®‰å…¨æ„Ÿçš„å°±æ˜¯é¡¹ç›®æ²¡æœ‰æ¥å…¥ eslintï¼Œä¸€ä¸å°å¿ƒå°±æ˜¯ä¸€ä¸ªä½çº§è¯­æ³•é€ æˆ crashï¼›æ›´å¯æ€•çš„æ˜¯æ¥å…¥äº†å¤§å®¶éƒ½ä¸éµå®ˆï¼Œæƒ³è±¡ä¸‹ç¼–è¾‘å™¨æ»¡å±çº¢è‰²é”™è¯¯ï¼Œé»„è‰²è­¦å‘Šçš„ç”»é¢ï¼Œæ­¤æ—¶çš„ä½ ï¼Œå·²ç»å¯¹æŠ¥é”™ä¸æ•æ„Ÿï¼Œä»¥è‡´åŒæµåˆæ±¡ã€‚æœ‰ä¸€ä¸ªçŠ¯ç½ªå¿ƒç†å­¦ä¸Šçš„ç†è®ºå¯ä»¥å¥—ç”¨åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå³ã€ç ´çª—æ•ˆåº”ã€ï¼š æ­¤ç†è®ºè®¤ä¸ºç¯å¢ƒä¸­çš„ä¸è‰¯ç°è±¡å¦‚æœè¢«æ”¾ä»»å­˜åœ¨ï¼Œä¼šè¯±ä½¿äººä»¬ä»¿æ•ˆï¼Œç”šè‡³å˜æœ¬åŠ å‰ã€‚ä»¥ä¸€å¹¢æœ‰å°‘è®¸ç ´çª—çš„å»ºç­‘ä¸ºä¾‹ï¼Œå¦‚æœé‚£äº›çª—ä¸è¢«ä¿®ç†å¥½ï¼Œå¯èƒ½å°†ä¼šæœ‰ç ´åè€…ç ´åæ›´å¤šçš„çª—æˆ·ã€‚æœ€ç»ˆä»–ä»¬ç”šè‡³ä¼šé—¯å…¥å»ºç­‘å†…ï¼Œå¦‚æœå‘ç°æ— äººå±…ä½ï¼Œä¹Ÿè®¸å°±åœ¨é‚£é‡Œå®šå±…æˆ–è€…çºµç«ã€‚ä¸€é¢å¢™ï¼Œå¦‚æœå‡ºç°ä¸€äº›æ¶‚é¸¦æ²¡æœ‰è¢«æ¸…æ´—æ‰ï¼Œå¾ˆå¿«çš„ï¼Œå¢™ä¸Šå°±å¸ƒæ»¡äº†ä¹±ä¸ƒå…«ç³Ÿã€ä¸å ªå…¥ç›®çš„ä¸œè¥¿ï¼›ä¸€æ¡äººè¡Œé“æœ‰äº›è®¸çº¸å±‘ï¼Œä¸ä¹…åå°±ä¼šæœ‰æ›´å¤šåƒåœ¾ï¼Œæœ€ç»ˆäººä»¬ä¼šè§†è‹¥ç†æ‰€å½“ç„¶åœ°å°†åƒåœ¾é¡ºæ‰‹ä¸¢å¼ƒåœ¨åœ°ä¸Šã€‚ å› æ­¤ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ­¤ç±»é¡¹ç›®ä¼šå˜å¾—æ„ˆå‘éš¾ä»¥ç»´æŠ¤ã€‚å½“ç„¶ï¼Œè¿™ç§éš¾ä»¥ç»´æŠ¤ä¸ä»…ä»…æ˜¯ eslint çš„é—®é¢˜ï¼Œä¼šæœ‰ä¸€ç³»åˆ—çº¦å®šå’Œè§„èŒƒçš„é—®é¢˜ï¼Œçº¦å®šå’Œè§„èŒƒåˆ¶å®šå¾ˆç®€å•ï¼Œä½†æ˜¯å¦‚ä½•ä¿è¯è¿™äº›çº¦å®šå’Œè§„èŒƒæ‰§è¡Œæ‰æ˜¯å…³é”®ã€‚æœ¬æ–‡èšç„¦ eslint æ²»ç†ï¼Œå°†ä»¥ä¸€ä¸ªä»ç„¶åœ¨æŒç»­ç»´æŠ¤çš„é¡¹ç›®ä¸ºä¾‹ï¼Œé˜è¿°å¦‚ä½•æ²»ç†è¿™ç§è€é¡¹ç›®ã€‚ ç°çŠ¶æè¿°å½“å‰å­˜åœ¨çš„ eslint é”™è¯¯æ•°å’Œå‘Šè­¦æ•°ï¼š å…¶ä¸­ 5697 ä¸ªé”™è¯¯å’Œ 65 ä¸ªè­¦å‘Šå¯è¢«è‡ªåŠ¨ä¿®å¤ï¼Œä¿®å¤åä»å‰©ä½™ 6468 ä¸ªã€‚ç»å‘ç°ï¼ŒåŸæœ‰é¡¹ç›®ä½¿ç”¨ Airbnb ç­‰è§„åˆ™é›†ï¼Œç”±äºè¯¥è§„åˆ™ååˆ†ä¸¥æ ¼ï¼Œä¸”æœ¬èº«æ²¡æœ‰å¯é æ‰‹æ®µé˜»æ­¢ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç å…¥åº“ï¼Œä½¿å¾—å¼€å‘æ›´ä¸æ„¿æ„éµå®ˆï¼Œé”™è¯¯æ•°æœ‰è¶Šæ¥è¶Šå¤šçš„è¶‹åŠ¿ï¼Œå³ä½¿è‡ªåŠ¨ä¿®å¤ï¼Œä¹Ÿä»æœ‰ 6000+ çš„é”™è¯¯ã€‚å› æ­¤é€‰æ‹©å’Œåˆ¶å®šä¸€ä¸ªå¤§å®¶éƒ½èƒ½è‰¯å¥½éµå®ˆçš„è§„åˆ™é›†å°±å¾ˆé‡è¦ï¼Œåˆ‡å¿Œè¿›å…¥ã€è¶Šä¸¥æ ¼è¶Šç‰›é€¼ã€çš„è¯¯åŒºï¼Œæ—¶åˆ»è®°ä½æˆ‘ä»¬çš„ç›®çš„æ˜¯ä¿è¯ä»£ç ç¬¦åˆä¸€å®šçš„è§„èŒƒï¼Œä»è€Œé¿å…ä½çº§é”™è¯¯ã€‚ è§£å†³æ–¹å¼æœ€åç»è¿‡è°ƒç ”å’Œè®¨è®ºï¼Œæˆ‘ä»¬é‡‡ç”¨å¦‚ä¸‹çš„è§„åˆ™é›†ï¼š 12345678extends: [ 'standard', 'plugin:@typescript-eslint/recommended', 'plugin:react/recommended', 'plugin:react-native/all', 'prettier', 'prettier/@typescript-eslint', ] æ­¤å¤„æˆ‘ä»¬æ¥å…¥äº† prettier å’Œ lint-stagedï¼Œå‰è€…ç”¨äºä¿è¯åŒä¸€ä»½ä»£ç ä»…è¾“å‡ºä¸€ä¸ªç¡®å®šçš„æ ¼å¼ï¼›åè€…ç”¨äºä¿è¯ä¸ä¼šæœ‰æ–°çš„ eslint é”™è¯¯å¼•å…¥ï¼Œå¹¶å¯¹ä¿®æ”¹è¿‡çš„æ–‡ä»¶å¼ºåˆ¶æ ¡éªŒï¼Œä»è€Œé€æ­¥å‡å°‘é”™è¯¯æ•°ã€‚ ç»“æœeslint é»˜è®¤çš„ç»“æœä»…æ”¯æŒæ–‡ä»¶ç»´åº¦çš„ç»Ÿè®¡ï¼Œè¿™åœ¨é”™è¯¯æ•°éå¸¸å¤šçš„é¡¹ç›®æ˜¯ä¸é€‚åˆçš„ï¼Œå‡ ä¹æ‰€æœ‰æ–‡ä»¶éƒ½æœ‰ç›¸å½“æ•°é‡çš„é”™è¯¯ã€‚æ­¤å¤„ä½¿ç”¨å·¥å…· eslint-formatter-statsï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ä»é”™è¯¯ç±»å‹çš„ç»´åº¦è¿›è¡Œåˆ†æã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š æ¥å…¥åæœªä¿®å¤çš„ eslint ç»“æœ 10959 ä¸ªé”™è¯¯å’Œè­¦å‘Š æ¥å…¥å¹¶ä¿®å¤çš„ eslint ç»“æœ 837 ä¸ªé”™è¯¯å’Œè­¦å‘Š åˆ†æé”™è¯¯æ•°æ¥å…¥å¹¶ä¿®å¤ä¹‹åï¼Œé”™è¯¯æ•°ä»…æœ‰ 800+ï¼Œè€æ¿è¯´å¯¹ï¼Œæ”¾ä½ç‚¹è¦æ±‚ï¼Œæˆ‘ä»¬ eslint åšå¾—è¿˜æŒºå¥½ã€‚ æ’æŸ¥é”™è¯¯æ•°é‡æ’åé å‰çš„å¤§éƒ¨åˆ†æ˜¯ä¸€äº›ä¸å½±å“ç¨‹åºåŠŸèƒ½çš„ï¼Œè€Œä¸”ä¸ºäº†ä¿è¯çº¿ä¸Šä»£ç çš„ç¨³å®šæ€§ï¼Œé™¤äº†è‡ªåŠ¨ä¿®å¤ä»¥å¤–ï¼Œæœ¬æ¬¡æ²»ç†å°½é‡ä¸å»æ›´æ”¹å…¶å®ƒé”™è¯¯ã€‚å› æ­¤å†³å®šé‡ç‚¹çœ‹çœ‹å‡ ä¸ªé€ æˆå½±å“æˆ–å¯èƒ½é€ æˆå½±å“çš„é«˜å±é”™è¯¯ï¼š no-undefï¼Œå³ä½¿ç”¨äº†æœªå®šä¹‰çš„å˜é‡ï¼Œè¿™ç§é”™è¯¯ææœ‰å¯èƒ½é€ æˆ crashï¼Œç›®å‰æœ‰ 13 å¤„ import-no-unresolvedï¼Œå³å¯¼å…¥äº†ä¸å­˜åœ¨çš„æ¨¡å—ï¼Œç›®å‰æœ‰ 6 å¤„ react-no-keyï¼Œå³æ•°ç»„å…ƒç´ æœªä½¿ç”¨ keyï¼Œå¯èƒ½é€ æˆå¡é¡¿ï¼Œç›®å‰æœ‰ 4 å¤„ react-native-no-unused-stylesï¼Œå³å­˜åœ¨æœªä½¿ç”¨çš„æ ·å¼ï¼Œé€ æˆåº”ç”¨ä½“ç§¯å˜å¤§ï¼Œç›®å‰æœ‰ 45 å¤„ no-dupe-keys å’Œ no-duplicate-caseï¼Œå³é‡å¤å®šä¹‰çš„å¯¹è±¡ key æˆ–è€… switch caseï¼Œå¢åŠ äº†ä¸ç¡®å®šæ€§ï¼Œç›®å‰æœ‰ 7 å¤„ react/no-direct-muttion-stateï¼Œå³ç›´æ¥ä¿®æ”¹ this.stateï¼Œæœ‰å¯èƒ½å¯¼è‡´çŠ¶æ€æ›´æ–°ä¸ç”Ÿæ•ˆï¼Œç›®å‰æœ‰ 21 å¤„ æ­¤å¤–ï¼Œè¯¸å¦‚å˜é‡é©¼å³°ï¼ŒåŒç­‰å·è¿™ç§é”™è¯¯å¦‚æœæ•°é‡å·¨å¤§ï¼Œå»ºè®®æ”¹æˆ warn çº§åˆ«æˆ–è€…ç›´æ¥å…³é—­ï¼Œæ¯•ç«Ÿæ— å…³ç—›ç—’ã€‚ç»è¿‡ä¸Šè¿°ä¿®å¤ä¹‹åï¼Œå‰©ä½™çš„å°±äº¤ç»™ lint-staged å³å¯ã€‚","link":"/2020/09/28/%E8%AE%BA%E5%A6%82%E4%BD%95%E7%A7%91%E5%AD%A6%E5%9C%B0%E6%B2%BB%E7%90%86%E8%80%81%E9%A1%B9%E7%9B%AE%E7%9A%84%20eslint/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","link":"/tags/JavaScript/"},{"name":"LifeOS","slug":"LifeOS","link":"/tags/LifeOS/"},{"name":"PKM","slug":"PKM","link":"/tags/PKM/"},{"name":"Periodic-Note","slug":"Periodic-Note","link":"/tags/Periodic-Note/"},{"name":"Task-Management","slug":"Task-Management","link":"/tags/Task-Management/"},{"name":"Goal-Management","slug":"Goal-Management","link":"/tags/Goal-Management/"},{"name":"Time-Management","slug":"Time-Management","link":"/tags/Time-Management/"},{"name":"Javascript","slug":"Javascript","link":"/tags/Javascript/"},{"name":"Canvas","slug":"Canvas","link":"/tags/Canvas/"},{"name":"CSS","slug":"CSS","link":"/tags/CSS/"},{"name":"å‡½æ•°å¼ç¼–ç¨‹","slug":"å‡½æ•°å¼ç¼–ç¨‹","link":"/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/"},{"name":"Monorepo","slug":"Monorepo","link":"/tags/Monorepo/"},{"name":"å·¥ç¨‹æ²»ç†","slug":"å·¥ç¨‹æ²»ç†","link":"/tags/%E5%B7%A5%E7%A8%8B%E6%B2%BB%E7%90%86/"},{"name":"Node.js","slug":"Node-js","link":"/tags/Node-js/"},{"name":"React","slug":"React","link":"/tags/React/"},{"name":"Git","slug":"Git","link":"/tags/Git/"},{"name":"çŸ¥è¯†ç®¡ç†","slug":"çŸ¥è¯†ç®¡ç†","link":"/tags/%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/"},{"name":"å‘¨æœŸç¬”è®°","slug":"å‘¨æœŸç¬”è®°","link":"/tags/%E5%91%A8%E6%9C%9F%E7%AC%94%E8%AE%B0/"},{"name":"ä»»åŠ¡ç®¡ç†","slug":"ä»»åŠ¡ç®¡ç†","link":"/tags/%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86/"},{"name":"ç›®æ ‡ç®¡ç†","slug":"ç›®æ ‡ç®¡ç†","link":"/tags/%E7%9B%AE%E6%A0%87%E7%AE%A1%E7%90%86/"},{"name":"æ—¶é—´ç®¡ç†","slug":"æ—¶é—´ç®¡ç†","link":"/tags/%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/"},{"name":"è‡ªå­¦å†ç¨‹","slug":"è‡ªå­¦å†ç¨‹","link":"/tags/%E8%87%AA%E5%AD%A6%E5%8E%86%E7%A8%8B/"},{"name":"å‘½ä»¤è¡Œå·¥å…·","slug":"å‘½ä»¤è¡Œå·¥å…·","link":"/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/"},{"name":"å•å…ƒæµ‹è¯•","slug":"å•å…ƒæµ‹è¯•","link":"/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"å‰ç«¯å…«è‚¡","slug":"å‰ç«¯å…«è‚¡","link":"/tags/%E5%89%8D%E7%AB%AF%E5%85%AB%E8%82%A1/"},{"name":"ç›‘æ§å‘Šè­¦","slug":"ç›‘æ§å‘Šè­¦","link":"/tags/%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/"},{"name":"ç§æœ‰åŒ–éƒ¨ç½²","slug":"ç§æœ‰åŒ–éƒ¨ç½²","link":"/tags/%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/"},{"name":"Micro Frontend","slug":"Micro-Frontend","link":"/tags/Micro-Frontend/"},{"name":"Bundler","slug":"Bundler","link":"/tags/Bundler/"},{"name":"Diagnostics Tool","slug":"Diagnostics-Tool","link":"/tags/Diagnostics-Tool/"},{"name":"å®ä¹ å†ç¨‹","slug":"å®ä¹ å†ç¨‹","link":"/tags/%E5%AE%9E%E4%B9%A0%E5%8E%86%E7%A8%8B/"},{"name":"å†…å­˜æ³„æ¼","slug":"å†…å­˜æ³„æ¼","link":"/tags/%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/"},{"name":"åˆ†äº«ä¼š","slug":"åˆ†äº«ä¼š","link":"/tags/%E5%88%86%E4%BA%AB%E4%BC%9A/"},{"name":"Redux","slug":"Redux","link":"/tags/Redux/"},{"name":"æºç è§£æ","slug":"æºç è§£æ","link":"/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"},{"name":"å¯ç»´æŠ¤æ€§","slug":"å¯ç»´æŠ¤æ€§","link":"/tags/%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7/"},{"name":"Compiler","slug":"Compiler","link":"/tags/Compiler/"},{"name":"Webview","slug":"Webview","link":"/tags/Webview/"},{"name":"JsBridge","slug":"JsBridge","link":"/tags/JsBridge/"},{"name":"é‡æ„","slug":"é‡æ„","link":"/tags/%E9%87%8D%E6%9E%84/"},{"name":"å‰åç«¯åˆ†ç¦»","slug":"å‰åç«¯åˆ†ç¦»","link":"/tags/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/"}],"categories":[{"name":"é¢è¯•","slug":"é¢è¯•","link":"/categories/%E9%9D%A2%E8%AF%95/"},{"name":"ç¬¬äºŒå¤§è„‘","slug":"ç¬¬äºŒå¤§è„‘","link":"/categories/%E7%AC%AC%E4%BA%8C%E5%A4%A7%E8%84%91/"},{"name":"å·¥ä½œè®°å½•","slug":"å·¥ä½œè®°å½•","link":"/categories/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","link":"/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","link":"/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"Node.js æœåŠ¡ç«¯","slug":"Node-js-æœåŠ¡ç«¯","link":"/categories/Node-js-%E6%9C%8D%E5%8A%A1%E7%AB%AF/"},{"name":"å‰ç«¯å­¦ä¹ ","slug":"å‰ç«¯å­¦ä¹ ","link":"/categories/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/"},{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","link":"/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"æ€»ç»“","slug":"æ€»ç»“","link":"/categories/%E6%80%BB%E7%BB%93/"}],"pages":[{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","text":"","link":"/404.html"},{"title":"","text":"article.article .article-meta { overflow-x: hidden; }","link":"/css/index.css"},{"title":"About","text":"ä¸€ä¸ªçƒ­çˆ±å·¥å…·å’Œè§„åˆ™çš„ JavaScript æ”»åŸç‹®ï¼","link":"/about/index.html"}]}